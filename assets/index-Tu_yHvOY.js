(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Sy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tm={exports:{}},Pl={};var pS;function yO(){if(pS)return Pl;pS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:o}}return Pl.Fragment=e,Pl.jsx=n,Pl.jsxs=n,Pl}var mS;function bO(){return mS||(mS=1,Tm.exports=yO()),Tm.exports}var k=bO(),_m={exports:{}},Ee={};var gS;function vO(){if(gS)return Ee;gS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function v(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function T(N,K,Z){this.props=N,this.context=K,this.refs=E,this.updater=Z||w}T.prototype.isReactComponent={},T.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},T.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function A(){}A.prototype=T.prototype;function C(N,K,Z){this.props=N,this.context=K,this.refs=E,this.updater=Z||w}var L=C.prototype=new A;L.constructor=C,S(L,T.prototype),L.isPureReactComponent=!0;var I=Array.isArray;function H(){}var z={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function ee(N,K,Z){var se=Z.ref;return{$$typeof:t,type:N,key:K,ref:se!==void 0?se:null,props:Z}}function ne(N,K){return ee(N.type,K,N.props)}function fe(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function ge(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Z){return K[Z]})}var Me=/\/+/g;function Se(N,K){return typeof N=="object"&&N!==null&&N.key!=null?ge(""+N.key):K.toString(36)}function xe(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(H,H):(N.status="pending",N.then(function(K){N.status==="pending"&&(N.status="fulfilled",N.value=K)},function(K){N.status==="pending"&&(N.status="rejected",N.reason=K)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function $(N,K,Z,se,ae){var _e=typeof N;(_e==="undefined"||_e==="boolean")&&(N=null);var Ue=!1;if(N===null)Ue=!0;else switch(_e){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(N.$$typeof){case t:case e:Ue=!0;break;case p:return Ue=N._init,$(Ue(N._payload),K,Z,se,ae)}}if(Ue)return ae=ae(N),Ue=se===""?"."+Se(N,0):se,I(ae)?(Z="",Ue!=null&&(Z=Ue.replace(Me,"$&/")+"/"),$(ae,K,Z,"",function(Hr){return Hr})):ae!=null&&(fe(ae)&&(ae=ne(ae,Z+(ae.key==null||N&&N.key===ae.key?"":(""+ae.key).replace(Me,"$&/")+"/")+Ue)),K.push(ae)),1;Ue=0;var ft=se===""?".":se+":";if(I(N))for(var rt=0;rt<N.length;rt++)se=N[rt],_e=ft+Se(se,rt),Ue+=$(se,K,Z,_e,ae);else if(rt=v(N),typeof rt=="function")for(N=rt.call(N),rt=0;!(se=N.next()).done;)se=se.value,_e=ft+Se(se,rt++),Ue+=$(se,K,Z,_e,ae);else if(_e==="object"){if(typeof N.then=="function")return $(xe(N),K,Z,se,ae);throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function X(N,K,Z){if(N==null)return N;var se=[],ae=0;return $(N,se,"","",function(_e){return K.call(Z,_e,ae++)}),se}function ie(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(Z){(N._status===0||N._status===-1)&&(N._status=1,N._result=Z)},function(Z){(N._status===0||N._status===-1)&&(N._status=2,N._result=Z)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var Oe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Be={map:X,forEach:function(N,K,Z){X(N,function(){K.apply(this,arguments)},Z)},count:function(N){var K=0;return X(N,function(){K++}),K},toArray:function(N){return X(N,function(K){return K})||[]},only:function(N){if(!fe(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ee.Activity=m,Ee.Children=Be,Ee.Component=T,Ee.Fragment=n,Ee.Profiler=i,Ee.PureComponent=C,Ee.StrictMode=r,Ee.Suspense=f,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(N){return z.H.useMemoCache(N)}},Ee.cache=function(N){return function(){return N.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(N,K,Z){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=S({},N.props),ae=N.key;if(K!=null)for(_e in K.key!==void 0&&(ae=""+K.key),K)!W.call(K,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&K.ref===void 0||(se[_e]=K[_e]);var _e=arguments.length-2;if(_e===1)se.children=Z;else if(1<_e){for(var Ue=Array(_e),ft=0;ft<_e;ft++)Ue[ft]=arguments[ft+2];se.children=Ue}return ee(N.type,ae,se)},Ee.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},Ee.createElement=function(N,K,Z){var se,ae={},_e=null;if(K!=null)for(se in K.key!==void 0&&(_e=""+K.key),K)W.call(K,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ae[se]=K[se]);var Ue=arguments.length-2;if(Ue===1)ae.children=Z;else if(1<Ue){for(var ft=Array(Ue),rt=0;rt<Ue;rt++)ft[rt]=arguments[rt+2];ae.children=ft}if(N&&N.defaultProps)for(se in Ue=N.defaultProps,Ue)ae[se]===void 0&&(ae[se]=Ue[se]);return ee(N,_e,ae)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(N){return{$$typeof:u,render:N}},Ee.isValidElement=fe,Ee.lazy=function(N){return{$$typeof:p,_payload:{_status:-1,_result:N},_init:ie}},Ee.memo=function(N,K){return{$$typeof:h,type:N,compare:K===void 0?null:K}},Ee.startTransition=function(N){var K=z.T,Z={};z.T=Z;try{var se=N(),ae=z.S;ae!==null&&ae(Z,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(H,Oe)}catch(_e){Oe(_e)}finally{K!==null&&Z.types!==null&&(K.types=Z.types),z.T=K}},Ee.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Ee.use=function(N){return z.H.use(N)},Ee.useActionState=function(N,K,Z){return z.H.useActionState(N,K,Z)},Ee.useCallback=function(N,K){return z.H.useCallback(N,K)},Ee.useContext=function(N){return z.H.useContext(N)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(N,K){return z.H.useDeferredValue(N,K)},Ee.useEffect=function(N,K){return z.H.useEffect(N,K)},Ee.useEffectEvent=function(N){return z.H.useEffectEvent(N)},Ee.useId=function(){return z.H.useId()},Ee.useImperativeHandle=function(N,K,Z){return z.H.useImperativeHandle(N,K,Z)},Ee.useInsertionEffect=function(N,K){return z.H.useInsertionEffect(N,K)},Ee.useLayoutEffect=function(N,K){return z.H.useLayoutEffect(N,K)},Ee.useMemo=function(N,K){return z.H.useMemo(N,K)},Ee.useOptimistic=function(N,K){return z.H.useOptimistic(N,K)},Ee.useReducer=function(N,K,Z){return z.H.useReducer(N,K,Z)},Ee.useRef=function(N){return z.H.useRef(N)},Ee.useState=function(N){return z.H.useState(N)},Ee.useSyncExternalStore=function(N,K,Z){return z.H.useSyncExternalStore(N,K,Z)},Ee.useTransition=function(){return z.H.useTransition()},Ee.version="19.2.4",Ee}var yS;function zc(){return yS||(yS=1,_m.exports=vO()),_m.exports}var R=zc();const jr=Sy(R);var km={exports:{}},Hl={},Am={exports:{}},Cm={};var bS;function wO(){return bS||(bS=1,(function(t){function e($,X){var ie=$.length;$.push(X);e:for(;0<ie;){var Oe=ie-1>>>1,Be=$[Oe];if(0<i(Be,X))$[Oe]=X,$[ie]=Be,ie=Oe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],ie=$.pop();if(ie!==X){$[0]=ie;e:for(var Oe=0,Be=$.length,N=Be>>>1;Oe<N;){var K=2*(Oe+1)-1,Z=$[K],se=K+1,ae=$[se];if(0>i(Z,ie))se<Be&&0>i(ae,Z)?($[Oe]=ae,$[se]=ie,Oe=se):($[Oe]=Z,$[K]=ie,Oe=K);else if(se<Be&&0>i(ae,ie))$[Oe]=ae,$[se]=ie,Oe=se;else break e}}return X}function i($,X){var ie=$.sortIndex-X.sortIndex;return ie!==0?ie:$.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],h=[],p=1,m=null,y=3,v=!1,w=!1,S=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function L($){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=$)r(h),X.sortIndex=X.expirationTime,e(f,X);else break;X=n(h)}}function I($){if(S=!1,L($),!w)if(n(f)!==null)w=!0,H||(H=!0,ge());else{var X=n(h);X!==null&&xe(I,X.startTime-$)}}var H=!1,z=-1,W=5,ee=-1;function ne(){return E?!0:!(t.unstable_now()-ee<W)}function fe(){if(E=!1,H){var $=t.unstable_now();ee=$;var X=!0;try{e:{w=!1,S&&(S=!1,A(z),z=-1),v=!0;var ie=y;try{t:{for(L($),m=n(f);m!==null&&!(m.expirationTime>$&&ne());){var Oe=m.callback;if(typeof Oe=="function"){m.callback=null,y=m.priorityLevel;var Be=Oe(m.expirationTime<=$);if($=t.unstable_now(),typeof Be=="function"){m.callback=Be,L($),X=!0;break t}m===n(f)&&r(f),L($)}else r(f);m=n(f)}if(m!==null)X=!0;else{var N=n(h);N!==null&&xe(I,N.startTime-$),X=!1}}break e}finally{m=null,y=ie,v=!1}X=void 0}}finally{X?ge():H=!1}}}var ge;if(typeof C=="function")ge=function(){C(fe)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Se=Me.port2;Me.port1.onmessage=fe,ge=function(){Se.postMessage(null)}}else ge=function(){T(fe,0)};function xe($,X){z=T(function(){$(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function($){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var ie=y;y=X;try{return $()}finally{y=ie}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ie=y;y=$;try{return X()}finally{y=ie}},t.unstable_scheduleCallback=function($,X,ie){var Oe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Oe+ie:Oe):ie=Oe,$){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=ie+Be,$={id:p++,callback:X,priorityLevel:$,startTime:ie,expirationTime:Be,sortIndex:-1},ie>Oe?($.sortIndex=ie,e(h,$),n(f)===null&&$===n(h)&&(S?(A(z),z=-1):S=!0,xe(I,ie-Oe))):($.sortIndex=Be,e(f,$),w||v||(w=!0,H||(H=!0,ge()))),$},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function($){var X=y;return function(){var ie=y;y=X;try{return $.apply(this,arguments)}finally{y=ie}}}})(Cm)),Cm}var vS;function SO(){return vS||(vS=1,Am.exports=wO()),Am.exports}var Om={exports:{}},Zt={};var wS;function xO(){if(wS)return Zt;wS=1;var t=zc();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:f,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Zt.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,p)},Zt.flushSync=function(f){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=p,r.d.f()}},Zt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},Zt.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Zt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):p==="script"&&r.d.X(f,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Zt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},Zt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Zt.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},Zt.requestFormReset=function(f){r.d.r(f)},Zt.unstable_batchedUpdates=function(f,h){return f(h)},Zt.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},Zt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Zt.version="19.2.4",Zt}var SS;function r1(){if(SS)return Om.exports;SS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Om.exports=xO(),Om.exports}var xS;function EO(){if(xS)return Hl;xS=1;var t=SO(),e=zc(),n=r1();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(r(188))}function h(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var c=s,d=a;;){var g=c.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===c)return f(g),s;if(b===d)return f(g),a;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=g,d=b;else{for(var x=!1,_=g.child;_;){if(_===c){x=!0,c=g,d=b;break}if(_===d){x=!0,d=g,c=b;break}_=_.sibling}if(!x){for(_=b.child;_;){if(_===c){x=!0,c=b,d=g;break}if(_===d){x=!0,d=b,c=g;break}_=_.sibling}if(!x)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function ge(s){return s===null||typeof s!="object"?null:(s=fe&&s[fe]||s["@@iterator"],typeof s=="function"?s:null)}var Me=Symbol.for("react.client.reference");function Se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Me?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case H:return"SuspenseList";case ee:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case C:return s.displayName||"Context";case A:return(s._context.displayName||"Context")+".Consumer";case L:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return a=s.displayName||null,a!==null?a:Se(s.type)||"Memo";case W:a=s._payload,s=s._init;try{return Se(s(a))}catch{}}return null}var xe=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Oe=[],Be=-1;function N(s){return{current:s}}function K(s){0>Be||(s.current=Oe[Be],Oe[Be]=null,Be--)}function Z(s,a){Be++,Oe[Be]=s.current,s.current=a}var se=N(null),ae=N(null),_e=N(null),Ue=N(null);function ft(s,a){switch(Z(_e,a),Z(ae,s),Z(se,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Iw(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Iw(a),s=Uw(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}K(se),Z(se,s)}function rt(){K(se),K(ae),K(_e)}function Hr(s){s.memoizedState!==null&&Z(Ue,s);var a=se.current,c=Uw(a,s.type);a!==c&&(Z(ae,s),Z(se,c))}function Rs(s){ae.current===s&&(K(se),K(ae)),Ue.current===s&&(K(Ue),zl._currentValue=ie)}var xo,$r;function In(s){if(xo===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);xo=a&&a[1]||"",$r=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xo+s+$r}var sr=!1;function Ns(s,a){if(!s||sr)return"";sr=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(q){var P=q}Reflect.construct(s,[],G)}else{try{G.call()}catch(q){P=q}s.call(G.prototype)}}else{try{throw Error()}catch(q){P=q}(G=s())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(q){if(q&&P&&typeof q.stack=="string")return[q.stack,P.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),x=b[0],_=b[1];if(x&&_){var O=x.split(`
`),B=_.split(`
`);for(g=d=0;d<O.length&&!O[d].includes("DetermineComponentFrameRoot");)d++;for(;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;if(d===O.length||g===B.length)for(d=O.length-1,g=B.length-1;1<=d&&0<=g&&O[d]!==B[g];)g--;for(;1<=d&&0<=g;d--,g--)if(O[d]!==B[g]){if(d!==1||g!==1)do if(d--,g--,0>g||O[d]!==B[g]){var V=`
`+O[d].replace(" at new "," at ");return s.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",s.displayName)),V}while(1<=d&&0<=g);break}}}finally{sr=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?In(c):""}function Pa(s,a){switch(s.tag){case 26:case 27:case 5:return In(s.type);case 16:return In("Lazy");case 13:return s.child!==a&&a!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return Ns(s.type,!1);case 11:return Ns(s.type.render,!1);case 1:return Ns(s.type,!0);case 31:return In("Activity");default:return""}}function qr(s){try{var a="",c=null;do a+=Pa(s,c),c=s,s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Mi=Object.prototype.hasOwnProperty,Di=t.unstable_scheduleCallback,Eo=t.unstable_cancelCallback,Gc=t.unstable_shouldYield,mh=t.unstable_requestPaint,Ht=t.unstable_now,Ms=t.unstable_getCurrentPriorityLevel,Vr=t.unstable_ImmediatePriority,Sn=t.unstable_UserBlockingPriority,Li=t.unstable_NormalPriority,Kc=t.unstable_LowPriority,Ha=t.unstable_IdlePriority,$a=t.log,Wc=t.unstable_setDisableYieldValue,xr=null,Lt=null;function jt(s){if(typeof $a=="function"&&Wc(s),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(xr,s)}catch{}}var wt=Math.clz32?Math.clz32:gh,qa=Math.log,Va=Math.LN2;function gh(s){return s>>>=0,s===0?32:31-(qa(s)/Va|0)|0}var Fr=256,Gr=262144,To=4194304;function xn(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function _o(s,a,c){var d=s.pendingLanes;if(d===0)return 0;var g=0,b=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var _=d&134217727;return _!==0?(d=_&~b,d!==0?g=xn(d):(x&=_,x!==0?g=xn(x):c||(c=_&~s,c!==0&&(g=xn(c))))):(_=d&~b,_!==0?g=xn(_):x!==0?g=xn(x):c||(c=d&~s,c!==0&&(g=xn(c)))),g===0?0:a!==0&&a!==g&&(a&b)===0&&(b=g&-g,c=a&-a,b>=c||b===32&&(c&4194048)!==0)?a:g}function Ds(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function yt(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kr(){var s=To;return To<<=1,(To&62914560)===0&&(To=4194304),s}function Fa(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function ji(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ga(s,a,c,d,g,b){var x=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var _=s.entanglements,O=s.expirationTimes,B=s.hiddenUpdates;for(c=x&~c;0<c;){var V=31-wt(c),G=1<<V;_[V]=0,O[V]=-1;var P=B[V];if(P!==null)for(B[V]=null,V=0;V<P.length;V++){var q=P[V];q!==null&&(q.lane&=-536870913)}c&=~G}d!==0&&Ka(s,d,0),b!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=b&~(x&~a))}function Ka(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-wt(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|c&261930}function Wa(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var d=31-wt(c),g=1<<d;g&a|s[d]&a&&(s[d]|=a),c&=~g}}function Jc(s,a){var c=a&-a;return c=(c&42)!==0?1:fn(c),(c&(s.suspendedLanes|a))!==0?0:c}function fn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function or(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ja(){var s=X.p;return s!==0?s:(s=window.event,s===void 0?32:aS(s.type))}function Ya(s,a){var c=X.p;try{return X.p=s,a()}finally{X.p=c}}var Un=Math.random().toString(36).slice(2),St="__reactFiber$"+Un,it="__reactProps$"+Un,Wr="__reactContainer$"+Un,ko="__reactEvents$"+Un,Yc="__reactListeners$"+Un,Xc="__reactHandles$"+Un,Qc="__reactResources$"+Un,le="__reactMarker$"+Un;function M(s){delete s[St],delete s[it],delete s[ko],delete s[Yc],delete s[Xc]}function Y(s){var a=s[St];if(a)return a;for(var c=s.parentNode;c;){if(a=c[Wr]||c[St]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=Fw(s);s!==null;){if(c=s[St])return c;s=Fw(s)}return a}s=c,c=s.parentNode}return null}function re(s){if(s=s[St]||s[Wr]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function qe(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function lt(s){var a=s[Qc];return a||(a=s[Qc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Re(s){s[le]=!0}var $t=new Set,Bn={};function dn(s,a){Er(s,a),Er(s+"Capture",a)}function Er(s,a){for(Bn[s]=a,s=0;s<a.length;s++)$t.add(a[s])}var Rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xa={},Qa={};function cA(s){return Mi.call(Qa,s)?!0:Mi.call(Xa,s)?!1:Rt.test(s)?Qa[s]=!0:(Xa[s]=!0,!1)}function Zc(s,a,c){if(cA(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function eu(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function Jr(s,a,c,d){if(d===null)s.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+d)}}function Pn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function O0(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function uA(s,a,c){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,b=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(x){c=""+x,b.call(this,x)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function yh(s){if(!s._valueTracker){var a=O0(s)?"checked":"value";s._valueTracker=uA(s,a,""+s[a])}}function R0(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return s&&(d=O0(s)?s.checked?"true":"false":s.value),s=d,s!==c?(a.setValue(s),!0):!1}function tu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var fA=/[\n"\\]/g;function Hn(s){return s.replace(fA,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function bh(s,a,c,d,g,b,x,_){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),a!=null?x==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Pn(a)):s.value!==""+Pn(a)&&(s.value=""+Pn(a)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),a!=null?vh(s,x,Pn(a)):c!=null?vh(s,x,Pn(c)):d!=null&&s.removeAttribute("value"),g==null&&b!=null&&(s.defaultChecked=!!b),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.name=""+Pn(_):s.removeAttribute("name")}function N0(s,a,c,d,g,b,x,_){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),a!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){yh(s);return}c=c!=null?""+Pn(c):"",a=a!=null?""+Pn(a):c,_||a===s.value||(s.value=a),s.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=_?s.checked:!!d,s.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),yh(s)}function vh(s,a,c){a==="number"&&tu(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ao(s,a,c,d){if(s=s.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=a.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&d&&(s[c].defaultSelected=!0)}else{for(c=""+Pn(c),a=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function M0(s,a,c){if(a!=null&&(a=""+Pn(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+Pn(c):""}function D0(s,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(r(92));if(xe(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=Pn(a),s.defaultValue=c,d=s.textContent,d===c&&d!==""&&d!==null&&(s.value=d),yh(s)}function Co(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var dA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function L0(s,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,c):typeof c!="number"||c===0||dA.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function j0(s,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&c[g]!==d&&L0(s,g,d)}else for(var b in a)a.hasOwnProperty(b)&&L0(s,b,a[b])}function wh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nu(s){return pA.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Yr(){}var Sh=null;function xh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Oo=null,Ro=null;function z0(s){var a=re(s);if(a&&(s=a.stateNode)){var c=s[it]||null;e:switch(s=a.stateNode,a.type){case"input":if(bh(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Hn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==s&&d.form===s.form){var g=d[it]||null;if(!g)throw Error(r(90));bh(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===s.form&&R0(d)}break e;case"textarea":M0(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Ao(s,!!c.multiple,a,!1)}}}var Eh=!1;function I0(s,a,c){if(Eh)return s(a,c);Eh=!0;try{var d=s(a);return d}finally{if(Eh=!1,(Oo!==null||Ro!==null)&&(qu(),Oo&&(a=Oo,s=Ro,Ro=Oo=null,z0(a),s)))for(a=0;a<s.length;a++)z0(s[a])}}function Za(s,a){var c=s.stateNode;if(c===null)return null;var d=c[it]||null;if(d===null)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Th=!1;if(Xr)try{var el={};Object.defineProperty(el,"passive",{get:function(){Th=!0}}),window.addEventListener("test",el,el),window.removeEventListener("test",el,el)}catch{Th=!1}var zi=null,_h=null,ru=null;function U0(){if(ru)return ru;var s,a=_h,c=a.length,d,g="value"in zi?zi.value:zi.textContent,b=g.length;for(s=0;s<c&&a[s]===g[s];s++);var x=c-s;for(d=1;d<=x&&a[c-d]===g[b-d];d++);return ru=g.slice(s,1<d?1-d:void 0)}function iu(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function su(){return!0}function B0(){return!1}function hn(s){function a(c,d,g,b,x){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=b,this.target=x,this.currentTarget=null;for(var _ in s)s.hasOwnProperty(_)&&(c=s[_],this[_]=c?c(b):b[_]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?su:B0,this.isPropagationStopped=B0,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),a}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ou=hn(Ls),tl=m({},Ls,{view:0,detail:0}),mA=hn(tl),kh,Ah,nl,au=m({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==nl&&(nl&&s.type==="mousemove"?(kh=s.screenX-nl.screenX,Ah=s.screenY-nl.screenY):Ah=kh=0,nl=s),kh)},movementY:function(s){return"movementY"in s?s.movementY:Ah}}),P0=hn(au),gA=m({},au,{dataTransfer:0}),yA=hn(gA),bA=m({},tl,{relatedTarget:0}),Ch=hn(bA),vA=m({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),wA=hn(vA),SA=m({},Ls,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),xA=hn(SA),EA=m({},Ls,{data:0}),H0=hn(EA),TA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_A={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AA(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=kA[s])?!!a[s]:!1}function Oh(){return AA}var CA=m({},tl,{key:function(s){if(s.key){var a=TA[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=iu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?_A[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oh,charCode:function(s){return s.type==="keypress"?iu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?iu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),OA=hn(CA),RA=m({},au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$0=hn(RA),NA=m({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oh}),MA=hn(NA),DA=m({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),LA=hn(DA),jA=m({},au,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),zA=hn(jA),IA=m({},Ls,{newState:0,oldState:0}),UA=hn(IA),BA=[9,13,27,32],Rh=Xr&&"CompositionEvent"in window,rl=null;Xr&&"documentMode"in document&&(rl=document.documentMode);var PA=Xr&&"TextEvent"in window&&!rl,q0=Xr&&(!Rh||rl&&8<rl&&11>=rl),V0=" ",F0=!1;function G0(s,a){switch(s){case"keyup":return BA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var No=!1;function HA(s,a){switch(s){case"compositionend":return K0(a);case"keypress":return a.which!==32?null:(F0=!0,V0);case"textInput":return s=a.data,s===V0&&F0?null:s;default:return null}}function $A(s,a){if(No)return s==="compositionend"||!Rh&&G0(s,a)?(s=U0(),ru=_h=zi=null,No=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return q0&&a.locale!=="ko"?null:a.data;default:return null}}var qA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!qA[s.type]:a==="textarea"}function J0(s,a,c,d){Oo?Ro?Ro.push(d):Ro=[d]:Oo=d,a=Yu(a,"onChange"),0<a.length&&(c=new ou("onChange","change",null,c,d),s.push({event:c,listeners:a}))}var il=null,sl=null;function VA(s){Nw(s,0)}function lu(s){var a=qe(s);if(R0(a))return s}function Y0(s,a){if(s==="change")return a}var X0=!1;if(Xr){var Nh;if(Xr){var Mh="oninput"in document;if(!Mh){var Q0=document.createElement("div");Q0.setAttribute("oninput","return;"),Mh=typeof Q0.oninput=="function"}Nh=Mh}else Nh=!1;X0=Nh&&(!document.documentMode||9<document.documentMode)}function Z0(){il&&(il.detachEvent("onpropertychange",eb),sl=il=null)}function eb(s){if(s.propertyName==="value"&&lu(sl)){var a=[];J0(a,sl,s,xh(s)),I0(VA,a)}}function FA(s,a,c){s==="focusin"?(Z0(),il=a,sl=c,il.attachEvent("onpropertychange",eb)):s==="focusout"&&Z0()}function GA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return lu(sl)}function KA(s,a){if(s==="click")return lu(a)}function WA(s,a){if(s==="input"||s==="change")return lu(a)}function JA(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var En=typeof Object.is=="function"?Object.is:JA;function ol(s,a){if(En(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!Mi.call(a,g)||!En(s[g],a[g]))return!1}return!0}function tb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function nb(s,a){var c=tb(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=a&&d>=a)return{node:c,offset:a-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=tb(c)}}function rb(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?rb(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function ib(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=tu(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=tu(s.document)}return a}function Dh(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var YA=Xr&&"documentMode"in document&&11>=document.documentMode,Mo=null,Lh=null,al=null,jh=!1;function sb(s,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;jh||Mo==null||Mo!==tu(d)||(d=Mo,"selectionStart"in d&&Dh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),al&&ol(al,d)||(al=d,d=Yu(Lh,"onSelect"),0<d.length&&(a=new ou("onSelect","select",null,a,c),s.push({event:a,listeners:d}),a.target=Mo)))}function js(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var Do={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionrun:js("Transition","TransitionRun"),transitionstart:js("Transition","TransitionStart"),transitioncancel:js("Transition","TransitionCancel"),transitionend:js("Transition","TransitionEnd")},zh={},ob={};Xr&&(ob=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function zs(s){if(zh[s])return zh[s];if(!Do[s])return s;var a=Do[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in ob)return zh[s]=a[c];return s}var ab=zs("animationend"),lb=zs("animationiteration"),cb=zs("animationstart"),XA=zs("transitionrun"),QA=zs("transitionstart"),ZA=zs("transitioncancel"),ub=zs("transitionend"),fb=new Map,Ih="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ih.push("scrollEnd");function ar(s,a){fb.set(s,a),dn(a,[s])}var cu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},$n=[],Lo=0,Uh=0;function uu(){for(var s=Lo,a=Uh=Lo=0;a<s;){var c=$n[a];$n[a++]=null;var d=$n[a];$n[a++]=null;var g=$n[a];$n[a++]=null;var b=$n[a];if($n[a++]=null,d!==null&&g!==null){var x=d.pending;x===null?g.next=g:(g.next=x.next,x.next=g),d.pending=g}b!==0&&db(c,g,b)}}function fu(s,a,c,d){$n[Lo++]=s,$n[Lo++]=a,$n[Lo++]=c,$n[Lo++]=d,Uh|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Bh(s,a,c,d){return fu(s,a,c,d),du(s)}function Is(s,a){return fu(s,null,null,a),du(s)}function db(s,a,c){s.lanes|=c;var d=s.alternate;d!==null&&(d.lanes|=c);for(var g=!1,b=s.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(g=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,g&&a!==null&&(g=31-wt(c),s=b.hiddenUpdates,d=s[g],d===null?s[g]=[a]:d.push(a),a.lane=c|536870912),b):null}function du(s){if(50<Ol)throw Ol=0,Wp=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var jo={};function eC(s,a,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(s,a,c,d){return new eC(s,a,c,d)}function Ph(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qr(s,a){var c=s.alternate;return c===null?(c=Tn(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function hb(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function hu(s,a,c,d,g,b){var x=0;if(d=s,typeof s=="function")Ph(s)&&(x=1);else if(typeof s=="string")x=sO(s,c,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ee:return s=Tn(31,c,a,g),s.elementType=ee,s.lanes=b,s;case S:return Us(c.children,g,b,a);case E:x=8,g|=24;break;case T:return s=Tn(12,c,a,g|2),s.elementType=T,s.lanes=b,s;case I:return s=Tn(13,c,a,g),s.elementType=I,s.lanes=b,s;case H:return s=Tn(19,c,a,g),s.elementType=H,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:x=10;break e;case A:x=9;break e;case L:x=11;break e;case z:x=14;break e;case W:x=16,d=null;break e}x=29,c=Error(r(130,s===null?"null":typeof s,"")),d=null}return a=Tn(x,c,a,g),a.elementType=s,a.type=d,a.lanes=b,a}function Us(s,a,c,d){return s=Tn(7,s,d,a),s.lanes=c,s}function Hh(s,a,c){return s=Tn(6,s,null,a),s.lanes=c,s}function pb(s){var a=Tn(18,null,null,0);return a.stateNode=s,a}function $h(s,a,c){return a=Tn(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var mb=new WeakMap;function qn(s,a){if(typeof s=="object"&&s!==null){var c=mb.get(s);return c!==void 0?c:(a={value:s,source:a,stack:qr(a)},mb.set(s,a),a)}return{value:s,source:a,stack:qr(a)}}var zo=[],Io=0,pu=null,ll=0,Vn=[],Fn=0,Ii=null,Tr=1,_r="";function Zr(s,a){zo[Io++]=ll,zo[Io++]=pu,pu=s,ll=a}function gb(s,a,c){Vn[Fn++]=Tr,Vn[Fn++]=_r,Vn[Fn++]=Ii,Ii=s;var d=Tr;s=_r;var g=32-wt(d)-1;d&=~(1<<g),c+=1;var b=32-wt(a)+g;if(30<b){var x=g-g%5;b=(d&(1<<x)-1).toString(32),d>>=x,g-=x,Tr=1<<32-wt(a)+g|c<<g|d,_r=b+s}else Tr=1<<b|c<<g|d,_r=s}function qh(s){s.return!==null&&(Zr(s,1),gb(s,1,0))}function Vh(s){for(;s===pu;)pu=zo[--Io],zo[Io]=null,ll=zo[--Io],zo[Io]=null;for(;s===Ii;)Ii=Vn[--Fn],Vn[Fn]=null,_r=Vn[--Fn],Vn[Fn]=null,Tr=Vn[--Fn],Vn[Fn]=null}function yb(s,a){Vn[Fn++]=Tr,Vn[Fn++]=_r,Vn[Fn++]=Ii,Tr=a.id,_r=a.overflow,Ii=s}var qt=null,Ze=null,Ie=!1,Ui=null,Gn=!1,Fh=Error(r(519));function Bi(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cl(qn(a,s)),Fh}function bb(s){var a=s.stateNode,c=s.type,d=s.memoizedProps;switch(a[St]=s,a[it]=d,c){case"dialog":Le("cancel",a),Le("close",a);break;case"iframe":case"object":case"embed":Le("load",a);break;case"video":case"audio":for(c=0;c<Nl.length;c++)Le(Nl[c],a);break;case"source":Le("error",a);break;case"img":case"image":case"link":Le("error",a),Le("load",a);break;case"details":Le("toggle",a);break;case"input":Le("invalid",a),N0(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Le("invalid",a);break;case"textarea":Le("invalid",a),D0(a,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||jw(a.textContent,c)?(d.popover!=null&&(Le("beforetoggle",a),Le("toggle",a)),d.onScroll!=null&&Le("scroll",a),d.onScrollEnd!=null&&Le("scrollend",a),d.onClick!=null&&(a.onclick=Yr),a=!0):a=!1,a||Bi(s,!0)}function vb(s){for(qt=s.return;qt;)switch(qt.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:qt=qt.return}}function Uo(s){if(s!==qt)return!1;if(!Ie)return vb(s),Ie=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||cm(s.type,s.memoizedProps)),c=!c),c&&Ze&&Bi(s),vb(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ze=Vw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Ze=Vw(s)}else a===27?(a=Ze,Zi(s.type)?(s=pm,pm=null,Ze=s):Ze=a):Ze=qt?Wn(s.stateNode.nextSibling):null;return!0}function Bs(){Ze=qt=null,Ie=!1}function Gh(){var s=Ui;return s!==null&&(yn===null?yn=s:yn.push.apply(yn,s),Ui=null),s}function cl(s){Ui===null?Ui=[s]:Ui.push(s)}var Kh=N(null),Ps=null,ei=null;function Pi(s,a,c){Z(Kh,a._currentValue),a._currentValue=c}function ti(s){s._currentValue=Kh.current,K(Kh)}function Wh(s,a,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===c)break;s=s.return}}function Jh(s,a,c,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var b=g.dependencies;if(b!==null){var x=g.child;b=b.firstContext;e:for(;b!==null;){var _=b;b=g;for(var O=0;O<a.length;O++)if(_.context===a[O]){b.lanes|=c,_=b.alternate,_!==null&&(_.lanes|=c),Wh(b.return,c,s),d||(x=null);break e}b=_.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=c,b=x.alternate,b!==null&&(b.lanes|=c),Wh(x,c,s),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===s){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function Bo(s,a,c,d){s=null;for(var g=a,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var _=g.type;En(g.pendingProps.value,x.value)||(s!==null?s.push(_):s=[_])}}else if(g===Ue.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(zl):s=[zl])}g=g.return}s!==null&&Jh(a,s,c,d),a.flags|=262144}function mu(s){for(s=s.firstContext;s!==null;){if(!En(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Hs(s){Ps=s,ei=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Vt(s){return wb(Ps,s)}function gu(s,a){return Ps===null&&Hs(s),wb(s,a)}function wb(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},ei===null){if(s===null)throw Error(r(308));ei=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else ei=ei.next=a;return c}var tC=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},nC=t.unstable_scheduleCallback,rC=t.unstable_NormalPriority,xt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new tC,data:new Map,refCount:0}}function ul(s){s.refCount--,s.refCount===0&&nC(rC,function(){s.controller.abort()})}var fl=null,Xh=0,Po=0,Ho=null;function iC(s,a){if(fl===null){var c=fl=[];Xh=0,Po=em(),Ho={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Xh++,a.then(Sb,Sb),a}function Sb(){if(--Xh===0&&fl!==null){Ho!==null&&(Ho.status="fulfilled");var s=fl;fl=null,Po=0,Ho=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function sC(s,a){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var xb=$.S;$.S=function(s,a){sw=Ht(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&iC(s,a),xb!==null&&xb(s,a)};var $s=N(null);function Qh(){var s=$s.current;return s!==null?s:Ye.pooledCache}function yu(s,a){a===null?Z($s,$s.current):Z($s,a.pool)}function Eb(){var s=Qh();return s===null?null:{parent:xt._currentValue,pool:s}}var $o=Error(r(460)),Zh=Error(r(474)),bu=Error(r(542)),vu={then:function(){}};function Tb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function _b(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(Yr,Yr),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Ab(s),s;default:if(typeof a.status=="string")a.then(Yr,Yr);else{if(s=Ye,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,Ab(s),s}throw Vs=a,$o}}function qs(s){try{var a=s._init;return a(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Vs=c,$o):c}}var Vs=null;function kb(){if(Vs===null)throw Error(r(459));var s=Vs;return Vs=null,s}function Ab(s){if(s===$o||s===bu)throw Error(r(483))}var qo=null,dl=0;function wu(s){var a=dl;return dl+=1,qo===null&&(qo=[]),_b(qo,s,a)}function hl(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Su(s,a){throw a.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function Cb(s){function a(j,D){if(s){var U=j.deletions;U===null?(j.deletions=[D],j.flags|=16):U.push(D)}}function c(j,D){if(!s)return null;for(;D!==null;)a(j,D),D=D.sibling;return null}function d(j){for(var D=new Map;j!==null;)j.key!==null?D.set(j.key,j):D.set(j.index,j),j=j.sibling;return D}function g(j,D){return j=Qr(j,D),j.index=0,j.sibling=null,j}function b(j,D,U){return j.index=U,s?(U=j.alternate,U!==null?(U=U.index,U<D?(j.flags|=67108866,D):U):(j.flags|=67108866,D)):(j.flags|=1048576,D)}function x(j){return s&&j.alternate===null&&(j.flags|=67108866),j}function _(j,D,U,F){return D===null||D.tag!==6?(D=Hh(U,j.mode,F),D.return=j,D):(D=g(D,U),D.return=j,D)}function O(j,D,U,F){var he=U.type;return he===S?V(j,D,U.props.children,F,U.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===W&&qs(he)===D.type)?(D=g(D,U.props),hl(D,U),D.return=j,D):(D=hu(U.type,U.key,U.props,null,j.mode,F),hl(D,U),D.return=j,D)}function B(j,D,U,F){return D===null||D.tag!==4||D.stateNode.containerInfo!==U.containerInfo||D.stateNode.implementation!==U.implementation?(D=$h(U,j.mode,F),D.return=j,D):(D=g(D,U.children||[]),D.return=j,D)}function V(j,D,U,F,he){return D===null||D.tag!==7?(D=Us(U,j.mode,F,he),D.return=j,D):(D=g(D,U),D.return=j,D)}function G(j,D,U){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Hh(""+D,j.mode,U),D.return=j,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case v:return U=hu(D.type,D.key,D.props,null,j.mode,U),hl(U,D),U.return=j,U;case w:return D=$h(D,j.mode,U),D.return=j,D;case W:return D=qs(D),G(j,D,U)}if(xe(D)||ge(D))return D=Us(D,j.mode,U,null),D.return=j,D;if(typeof D.then=="function")return G(j,wu(D),U);if(D.$$typeof===C)return G(j,gu(j,D),U);Su(j,D)}return null}function P(j,D,U,F){var he=D!==null?D.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return he!==null?null:_(j,D,""+U,F);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case v:return U.key===he?O(j,D,U,F):null;case w:return U.key===he?B(j,D,U,F):null;case W:return U=qs(U),P(j,D,U,F)}if(xe(U)||ge(U))return he!==null?null:V(j,D,U,F,null);if(typeof U.then=="function")return P(j,D,wu(U),F);if(U.$$typeof===C)return P(j,D,gu(j,U),F);Su(j,U)}return null}function q(j,D,U,F,he){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return j=j.get(U)||null,_(D,j,""+F,he);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case v:return j=j.get(F.key===null?U:F.key)||null,O(D,j,F,he);case w:return j=j.get(F.key===null?U:F.key)||null,B(D,j,F,he);case W:return F=qs(F),q(j,D,U,F,he)}if(xe(F)||ge(F))return j=j.get(U)||null,V(D,j,F,he,null);if(typeof F.then=="function")return q(j,D,U,wu(F),he);if(F.$$typeof===C)return q(j,D,U,gu(D,F),he);Su(D,F)}return null}function oe(j,D,U,F){for(var he=null,Pe=null,ce=D,Ae=D=0,ze=null;ce!==null&&Ae<U.length;Ae++){ce.index>Ae?(ze=ce,ce=null):ze=ce.sibling;var He=P(j,ce,U[Ae],F);if(He===null){ce===null&&(ce=ze);break}s&&ce&&He.alternate===null&&a(j,ce),D=b(He,D,Ae),Pe===null?he=He:Pe.sibling=He,Pe=He,ce=ze}if(Ae===U.length)return c(j,ce),Ie&&Zr(j,Ae),he;if(ce===null){for(;Ae<U.length;Ae++)ce=G(j,U[Ae],F),ce!==null&&(D=b(ce,D,Ae),Pe===null?he=ce:Pe.sibling=ce,Pe=ce);return Ie&&Zr(j,Ae),he}for(ce=d(ce);Ae<U.length;Ae++)ze=q(ce,j,Ae,U[Ae],F),ze!==null&&(s&&ze.alternate!==null&&ce.delete(ze.key===null?Ae:ze.key),D=b(ze,D,Ae),Pe===null?he=ze:Pe.sibling=ze,Pe=ze);return s&&ce.forEach(function(is){return a(j,is)}),Ie&&Zr(j,Ae),he}function me(j,D,U,F){if(U==null)throw Error(r(151));for(var he=null,Pe=null,ce=D,Ae=D=0,ze=null,He=U.next();ce!==null&&!He.done;Ae++,He=U.next()){ce.index>Ae?(ze=ce,ce=null):ze=ce.sibling;var is=P(j,ce,He.value,F);if(is===null){ce===null&&(ce=ze);break}s&&ce&&is.alternate===null&&a(j,ce),D=b(is,D,Ae),Pe===null?he=is:Pe.sibling=is,Pe=is,ce=ze}if(He.done)return c(j,ce),Ie&&Zr(j,Ae),he;if(ce===null){for(;!He.done;Ae++,He=U.next())He=G(j,He.value,F),He!==null&&(D=b(He,D,Ae),Pe===null?he=He:Pe.sibling=He,Pe=He);return Ie&&Zr(j,Ae),he}for(ce=d(ce);!He.done;Ae++,He=U.next())He=q(ce,j,Ae,He.value,F),He!==null&&(s&&He.alternate!==null&&ce.delete(He.key===null?Ae:He.key),D=b(He,D,Ae),Pe===null?he=He:Pe.sibling=He,Pe=He);return s&&ce.forEach(function(gO){return a(j,gO)}),Ie&&Zr(j,Ae),he}function Je(j,D,U,F){if(typeof U=="object"&&U!==null&&U.type===S&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case v:e:{for(var he=U.key;D!==null;){if(D.key===he){if(he=U.type,he===S){if(D.tag===7){c(j,D.sibling),F=g(D,U.props.children),F.return=j,j=F;break e}}else if(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===W&&qs(he)===D.type){c(j,D.sibling),F=g(D,U.props),hl(F,U),F.return=j,j=F;break e}c(j,D);break}else a(j,D);D=D.sibling}U.type===S?(F=Us(U.props.children,j.mode,F,U.key),F.return=j,j=F):(F=hu(U.type,U.key,U.props,null,j.mode,F),hl(F,U),F.return=j,j=F)}return x(j);case w:e:{for(he=U.key;D!==null;){if(D.key===he)if(D.tag===4&&D.stateNode.containerInfo===U.containerInfo&&D.stateNode.implementation===U.implementation){c(j,D.sibling),F=g(D,U.children||[]),F.return=j,j=F;break e}else{c(j,D);break}else a(j,D);D=D.sibling}F=$h(U,j.mode,F),F.return=j,j=F}return x(j);case W:return U=qs(U),Je(j,D,U,F)}if(xe(U))return oe(j,D,U,F);if(ge(U)){if(he=ge(U),typeof he!="function")throw Error(r(150));return U=he.call(U),me(j,D,U,F)}if(typeof U.then=="function")return Je(j,D,wu(U),F);if(U.$$typeof===C)return Je(j,D,gu(j,U),F);Su(j,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,D!==null&&D.tag===6?(c(j,D.sibling),F=g(D,U),F.return=j,j=F):(c(j,D),F=Hh(U,j.mode,F),F.return=j,j=F),x(j)):c(j,D)}return function(j,D,U,F){try{dl=0;var he=Je(j,D,U,F);return qo=null,he}catch(ce){if(ce===$o||ce===bu)throw ce;var Pe=Tn(29,ce,null,j.mode);return Pe.lanes=F,Pe.return=j,Pe}}}var Fs=Cb(!0),Ob=Cb(!1),Hi=!1;function ep(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tp(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function $i(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function qi(s,a,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,($e&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=du(s),db(s,null,c),a}return fu(s,d,a,c),du(s)}function pl(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,Wa(s,c)}}function np(s,a){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var x={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?g=b=x:b=b.next=x,c=c.next}while(c!==null);b===null?g=b=a:b=b.next=a}else g=b=a;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var rp=!1;function ml(){if(rp){var s=Ho;if(s!==null)throw s}}function gl(s,a,c,d){rp=!1;var g=s.updateQueue;Hi=!1;var b=g.firstBaseUpdate,x=g.lastBaseUpdate,_=g.shared.pending;if(_!==null){g.shared.pending=null;var O=_,B=O.next;O.next=null,x===null?b=B:x.next=B,x=O;var V=s.alternate;V!==null&&(V=V.updateQueue,_=V.lastBaseUpdate,_!==x&&(_===null?V.firstBaseUpdate=B:_.next=B,V.lastBaseUpdate=O))}if(b!==null){var G=g.baseState;x=0,V=B=O=null,_=b;do{var P=_.lane&-536870913,q=P!==_.lane;if(q?(je&P)===P:(d&P)===P){P!==0&&P===Po&&(rp=!0),V!==null&&(V=V.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var oe=s,me=_;P=a;var Je=c;switch(me.tag){case 1:if(oe=me.payload,typeof oe=="function"){G=oe.call(Je,G,P);break e}G=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=me.payload,P=typeof oe=="function"?oe.call(Je,G,P):oe,P==null)break e;G=m({},G,P);break e;case 2:Hi=!0}}P=_.callback,P!==null&&(s.flags|=64,q&&(s.flags|=8192),q=g.callbacks,q===null?g.callbacks=[P]:q.push(P))}else q={lane:P,tag:_.tag,payload:_.payload,callback:_.callback,next:null},V===null?(B=V=q,O=G):V=V.next=q,x|=P;if(_=_.next,_===null){if(_=g.shared.pending,_===null)break;q=_,_=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);V===null&&(O=G),g.baseState=O,g.firstBaseUpdate=B,g.lastBaseUpdate=V,b===null&&(g.shared.lanes=0),Wi|=x,s.lanes=x,s.memoizedState=G}}function Rb(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function Nb(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Rb(c[s],a)}var Vo=N(null),xu=N(0);function Mb(s,a){s=ui,Z(xu,s),Z(Vo,a),ui=s|a.baseLanes}function ip(){Z(xu,ui),Z(Vo,Vo.current)}function sp(){ui=xu.current,K(Vo),K(xu)}var _n=N(null),Kn=null;function Vi(s){var a=s.alternate;Z(bt,bt.current&1),Z(_n,s),Kn===null&&(a===null||Vo.current!==null||a.memoizedState!==null)&&(Kn=s)}function op(s){Z(bt,bt.current),Z(_n,s),Kn===null&&(Kn=s)}function Db(s){s.tag===22?(Z(bt,bt.current),Z(_n,s),Kn===null&&(Kn=s)):Fi()}function Fi(){Z(bt,bt.current),Z(_n,_n.current)}function kn(s){K(_n),Kn===s&&(Kn=null),K(bt)}var bt=N(0);function Eu(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||dm(c)||hm(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ni=0,ke=null,Ke=null,Et=null,Tu=!1,Fo=!1,Gs=!1,_u=0,yl=0,Go=null,oC=0;function dt(){throw Error(r(321))}function ap(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!En(s[c],a[c]))return!1;return!0}function lp(s,a,c,d,g,b){return ni=b,ke=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,$.H=s===null||s.memoizedState===null?gv:Ep,Gs=!1,b=c(d,g),Gs=!1,Fo&&(b=jb(a,c,d,g)),Lb(s),b}function Lb(s){$.H=wl;var a=Ke!==null&&Ke.next!==null;if(ni=0,Et=Ke=ke=null,Tu=!1,yl=0,Go=null,a)throw Error(r(300));s===null||Tt||(s=s.dependencies,s!==null&&mu(s)&&(Tt=!0))}function jb(s,a,c,d){ke=s;var g=0;do{if(Fo&&(Go=null),yl=0,Fo=!1,25<=g)throw Error(r(301));if(g+=1,Et=Ke=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=yv,b=a(c,d)}while(Fo);return b}function aC(){var s=$.H,a=s.useState()[0];return a=typeof a.then=="function"?bl(a):a,s=s.useState()[0],(Ke!==null?Ke.memoizedState:null)!==s&&(ke.flags|=1024),a}function cp(){var s=_u!==0;return _u=0,s}function up(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function fp(s){if(Tu){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Tu=!1}ni=0,Et=Ke=ke=null,Fo=!1,yl=_u=0,Go=null}function nn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?ke.memoizedState=Et=s:Et=Et.next=s,Et}function vt(){if(Ke===null){var s=ke.alternate;s=s!==null?s.memoizedState:null}else s=Ke.next;var a=Et===null?ke.memoizedState:Et.next;if(a!==null)Et=a,Ke=s;else{if(s===null)throw ke.alternate===null?Error(r(467)):Error(r(310));Ke=s,s={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Et===null?ke.memoizedState=Et=s:Et=Et.next=s}return Et}function ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(s){var a=yl;return yl+=1,Go===null&&(Go=[]),s=_b(Go,s,a),a=ke,(Et===null?a.memoizedState:Et.next)===null&&(a=a.alternate,$.H=a===null||a.memoizedState===null?gv:Ep),s}function Au(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return bl(s);if(s.$$typeof===C)return Vt(s)}throw Error(r(438,String(s)))}function dp(s){var a=null,c=ke.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=ke.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=ku(),ke.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),d=0;d<s;d++)c[d]=ne;return a.index++,c}function ri(s,a){return typeof a=="function"?a(s):a}function Cu(s){var a=vt();return hp(a,Ke,s)}function hp(s,a,c){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var g=s.baseQueue,b=d.pending;if(b!==null){if(g!==null){var x=g.next;g.next=b.next,b.next=x}a.baseQueue=g=b,d.pending=null}if(b=s.baseState,g===null)s.memoizedState=b;else{a=g.next;var _=x=null,O=null,B=a,V=!1;do{var G=B.lane&-536870913;if(G!==B.lane?(je&G)===G:(ni&G)===G){var P=B.revertLane;if(P===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),G===Po&&(V=!0);else if((ni&P)===P){B=B.next,P===Po&&(V=!0);continue}else G={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},O===null?(_=O=G,x=b):O=O.next=G,ke.lanes|=P,Wi|=P;G=B.action,Gs&&c(b,G),b=B.hasEagerState?B.eagerState:c(b,G)}else P={lane:G,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},O===null?(_=O=P,x=b):O=O.next=P,ke.lanes|=G,Wi|=G;B=B.next}while(B!==null&&B!==a);if(O===null?x=b:O.next=_,!En(b,s.memoizedState)&&(Tt=!0,V&&(c=Ho,c!==null)))throw c;s.memoizedState=b,s.baseState=x,s.baseQueue=O,d.lastRenderedState=b}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function pp(s){var a=vt(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var d=c.dispatch,g=c.pending,b=a.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do b=s(b,x.action),x=x.next;while(x!==g);En(b,a.memoizedState)||(Tt=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,d]}function zb(s,a,c){var d=ke,g=vt(),b=Ie;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=a();var x=!En((Ke||g).memoizedState,c);if(x&&(g.memoizedState=c,Tt=!0),g=g.queue,yp(Bb.bind(null,d,g,s),[s]),g.getSnapshot!==a||x||Et!==null&&Et.memoizedState.tag&1){if(d.flags|=2048,Ko(9,{destroy:void 0},Ub.bind(null,d,g,c,a),null),Ye===null)throw Error(r(349));b||(ni&127)!==0||Ib(d,a,c)}return c}function Ib(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=ke.updateQueue,a===null?(a=ku(),ke.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function Ub(s,a,c,d){a.value=c,a.getSnapshot=d,Pb(a)&&Hb(s)}function Bb(s,a,c){return c(function(){Pb(a)&&Hb(s)})}function Pb(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!En(s,c)}catch{return!0}}function Hb(s){var a=Is(s,2);a!==null&&bn(a,s,2)}function mp(s){var a=nn();if(typeof s=="function"){var c=s;if(s=c(),Gs){jt(!0);try{c()}finally{jt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:s},a}function $b(s,a,c,d){return s.baseState=c,hp(s,Ke,typeof d=="function"?d:ri)}function lC(s,a,c,d,g){if(Nu(s))throw Error(r(485));if(s=a.action,s!==null){var b={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){b.listeners.push(x)}};$.T!==null?c(!0):b.isTransition=!1,d(b),c=a.pending,c===null?(b.next=a.pending=b,qb(a,b)):(b.next=c.next,a.pending=c.next=b)}}function qb(s,a){var c=a.action,d=a.payload,g=s.state;if(a.isTransition){var b=$.T,x={};$.T=x;try{var _=c(g,d),O=$.S;O!==null&&O(x,_),Vb(s,a,_)}catch(B){gp(s,a,B)}finally{b!==null&&x.types!==null&&(b.types=x.types),$.T=b}}else try{b=c(g,d),Vb(s,a,b)}catch(B){gp(s,a,B)}}function Vb(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Fb(s,a,d)},function(d){return gp(s,a,d)}):Fb(s,a,c)}function Fb(s,a,c){a.status="fulfilled",a.value=c,Gb(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,qb(s,c)))}function gp(s,a,c){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,Gb(a),a=a.next;while(a!==d)}s.action=null}function Gb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Kb(s,a){return a}function Wb(s,a){if(Ie){var c=Ye.formState;if(c!==null){e:{var d=ke;if(Ie){if(Ze){t:{for(var g=Ze,b=Gn;g.nodeType!==8;){if(!b){g=null;break t}if(g=Wn(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Ze=Wn(g.nextSibling),d=g.data==="F!";break e}}Bi(d)}d=!1}d&&(a=c[0])}}return c=nn(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kb,lastRenderedState:a},c.queue=d,c=hv.bind(null,ke,d),d.dispatch=c,d=mp(!1),b=xp.bind(null,ke,!1,d.queue),d=nn(),g={state:a,dispatch:null,action:s,pending:null},d.queue=g,c=lC.bind(null,ke,g,b,c),g.dispatch=c,d.memoizedState=s,[a,c,!1]}function Jb(s){var a=vt();return Yb(a,Ke,s)}function Yb(s,a,c){if(a=hp(s,a,Kb)[0],s=Cu(ri)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=bl(a)}catch(x){throw x===$o?bu:x}else d=a;a=vt();var g=a.queue,b=g.dispatch;return c!==a.memoizedState&&(ke.flags|=2048,Ko(9,{destroy:void 0},cC.bind(null,g,c),null)),[d,b,s]}function cC(s,a){s.action=a}function Xb(s){var a=vt(),c=Ke;if(c!==null)return Yb(a,c,s);vt(),a=a.memoizedState,c=vt();var d=c.queue.dispatch;return c.memoizedState=s,[a,d,!1]}function Ko(s,a,c,d){return s={tag:s,create:c,deps:d,inst:a,next:null},a=ke.updateQueue,a===null&&(a=ku(),ke.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,a.lastEffect=s),s}function Qb(){return vt().memoizedState}function Ou(s,a,c,d){var g=nn();ke.flags|=s,g.memoizedState=Ko(1|a,{destroy:void 0},c,d===void 0?null:d)}function Ru(s,a,c,d){var g=vt();d=d===void 0?null:d;var b=g.memoizedState.inst;Ke!==null&&d!==null&&ap(d,Ke.memoizedState.deps)?g.memoizedState=Ko(a,b,c,d):(ke.flags|=s,g.memoizedState=Ko(1|a,b,c,d))}function Zb(s,a){Ou(8390656,8,s,a)}function yp(s,a){Ru(2048,8,s,a)}function uC(s){ke.flags|=4;var a=ke.updateQueue;if(a===null)a=ku(),ke.updateQueue=a,a.events=[s];else{var c=a.events;c===null?a.events=[s]:c.push(s)}}function ev(s){var a=vt().memoizedState;return uC({ref:a,nextImpl:s}),function(){if(($e&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function tv(s,a){return Ru(4,2,s,a)}function nv(s,a){return Ru(4,4,s,a)}function rv(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function iv(s,a,c){c=c!=null?c.concat([s]):null,Ru(4,4,rv.bind(null,a,s),c)}function bp(){}function sv(s,a){var c=vt();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&ap(a,d[1])?d[0]:(c.memoizedState=[s,a],s)}function ov(s,a){var c=vt();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&ap(a,d[1]))return d[0];if(d=s(),Gs){jt(!0);try{s()}finally{jt(!1)}}return c.memoizedState=[d,a],d}function vp(s,a,c){return c===void 0||(ni&1073741824)!==0&&(je&261930)===0?s.memoizedState=a:(s.memoizedState=c,s=aw(),ke.lanes|=s,Wi|=s,c)}function av(s,a,c,d){return En(c,a)?c:Vo.current!==null?(s=vp(s,c,d),En(s,a)||(Tt=!0),s):(ni&42)===0||(ni&1073741824)!==0&&(je&261930)===0?(Tt=!0,s.memoizedState=c):(s=aw(),ke.lanes|=s,Wi|=s,a)}function lv(s,a,c,d,g){var b=X.p;X.p=b!==0&&8>b?b:8;var x=$.T,_={};$.T=_,xp(s,!1,a,c);try{var O=g(),B=$.S;if(B!==null&&B(_,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var V=sC(O,d);vl(s,a,V,On(s))}else vl(s,a,d,On(s))}catch(G){vl(s,a,{then:function(){},status:"rejected",reason:G},On())}finally{X.p=b,x!==null&&_.types!==null&&(x.types=_.types),$.T=x}}function fC(){}function wp(s,a,c,d){if(s.tag!==5)throw Error(r(476));var g=cv(s).queue;lv(s,g,a,ie,c===null?fC:function(){return uv(s),c(d)})}function cv(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:ie},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function uv(s){var a=cv(s);a.next===null&&(a=s.alternate.memoizedState),vl(s,a.next.queue,{},On())}function Sp(){return Vt(zl)}function fv(){return vt().memoizedState}function dv(){return vt().memoizedState}function dC(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=On();s=$i(c);var d=qi(a,s,c);d!==null&&(bn(d,a,c),pl(d,a,c)),a={cache:Yh()},s.payload=a;return}a=a.return}}function hC(s,a,c){var d=On();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Nu(s)?pv(a,c):(c=Bh(s,a,c,d),c!==null&&(bn(c,s,d),mv(c,a,d)))}function hv(s,a,c){var d=On();vl(s,a,c,d)}function vl(s,a,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Nu(s))pv(a,g);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var x=a.lastRenderedState,_=b(x,c);if(g.hasEagerState=!0,g.eagerState=_,En(_,x))return fu(s,a,g,0),Ye===null&&uu(),!1}catch{}if(c=Bh(s,a,g,d),c!==null)return bn(c,s,d),mv(c,a,d),!0}return!1}function xp(s,a,c,d){if(d={lane:2,revertLane:em(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Nu(s)){if(a)throw Error(r(479))}else a=Bh(s,c,d,2),a!==null&&bn(a,s,2)}function Nu(s){var a=s.alternate;return s===ke||a!==null&&a===ke}function pv(s,a){Fo=Tu=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function mv(s,a,c){if((c&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,Wa(s,c)}}var wl={readContext:Vt,use:Au,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};wl.useEffectEvent=dt;var gv={readContext:Vt,use:Au,useCallback:function(s,a){return nn().memoizedState=[s,a===void 0?null:a],s},useContext:Vt,useEffect:Zb,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Ou(4194308,4,rv.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Ou(4194308,4,s,a)},useInsertionEffect:function(s,a){Ou(4,2,s,a)},useMemo:function(s,a){var c=nn();a=a===void 0?null:a;var d=s();if(Gs){jt(!0);try{s()}finally{jt(!1)}}return c.memoizedState=[d,a],d},useReducer:function(s,a,c){var d=nn();if(c!==void 0){var g=c(a);if(Gs){jt(!0);try{c(a)}finally{jt(!1)}}}else g=a;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=hC.bind(null,ke,s),[d.memoizedState,s]},useRef:function(s){var a=nn();return s={current:s},a.memoizedState=s},useState:function(s){s=mp(s);var a=s.queue,c=hv.bind(null,ke,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:bp,useDeferredValue:function(s,a){var c=nn();return vp(c,s,a)},useTransition:function(){var s=mp(!1);return s=lv.bind(null,ke,s.queue,!0,!1),nn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var d=ke,g=nn();if(Ie){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),Ye===null)throw Error(r(349));(je&127)!==0||Ib(d,a,c)}g.memoizedState=c;var b={value:c,getSnapshot:a};return g.queue=b,Zb(Bb.bind(null,d,b,s),[s]),d.flags|=2048,Ko(9,{destroy:void 0},Ub.bind(null,d,b,c,a),null),c},useId:function(){var s=nn(),a=Ye.identifierPrefix;if(Ie){var c=_r,d=Tr;c=(d&~(1<<32-wt(d)-1)).toString(32)+c,a="_"+a+"R_"+c,c=_u++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=oC++,a="_"+a+"r_"+c.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Sp,useFormState:Wb,useActionState:Wb,useOptimistic:function(s){var a=nn();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=xp.bind(null,ke,!0,c),c.dispatch=a,[s,a]},useMemoCache:dp,useCacheRefresh:function(){return nn().memoizedState=dC.bind(null,ke)},useEffectEvent:function(s){var a=nn(),c={impl:s};return a.memoizedState=c,function(){if(($e&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Ep={readContext:Vt,use:Au,useCallback:sv,useContext:Vt,useEffect:yp,useImperativeHandle:iv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:ov,useReducer:Cu,useRef:Qb,useState:function(){return Cu(ri)},useDebugValue:bp,useDeferredValue:function(s,a){var c=vt();return av(c,Ke.memoizedState,s,a)},useTransition:function(){var s=Cu(ri)[0],a=vt().memoizedState;return[typeof s=="boolean"?s:bl(s),a]},useSyncExternalStore:zb,useId:fv,useHostTransitionStatus:Sp,useFormState:Jb,useActionState:Jb,useOptimistic:function(s,a){var c=vt();return $b(c,Ke,s,a)},useMemoCache:dp,useCacheRefresh:dv};Ep.useEffectEvent=ev;var yv={readContext:Vt,use:Au,useCallback:sv,useContext:Vt,useEffect:yp,useImperativeHandle:iv,useInsertionEffect:tv,useLayoutEffect:nv,useMemo:ov,useReducer:pp,useRef:Qb,useState:function(){return pp(ri)},useDebugValue:bp,useDeferredValue:function(s,a){var c=vt();return Ke===null?vp(c,s,a):av(c,Ke.memoizedState,s,a)},useTransition:function(){var s=pp(ri)[0],a=vt().memoizedState;return[typeof s=="boolean"?s:bl(s),a]},useSyncExternalStore:zb,useId:fv,useHostTransitionStatus:Sp,useFormState:Xb,useActionState:Xb,useOptimistic:function(s,a){var c=vt();return Ke!==null?$b(c,Ke,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:dp,useCacheRefresh:dv};yv.useEffectEvent=ev;function Tp(s,a,c,d){a=s.memoizedState,c=c(d,a),c=c==null?a:m({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var _p={enqueueSetState:function(s,a,c){s=s._reactInternals;var d=On(),g=$i(d);g.payload=a,c!=null&&(g.callback=c),a=qi(s,g,d),a!==null&&(bn(a,s,d),pl(a,s,d))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var d=On(),g=$i(d);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=qi(s,g,d),a!==null&&(bn(a,s,d),pl(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=On(),d=$i(c);d.tag=2,a!=null&&(d.callback=a),a=qi(s,d,c),a!==null&&(bn(a,s,c),pl(a,s,c))}};function bv(s,a,c,d,g,b,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,b,x):a.prototype&&a.prototype.isPureReactComponent?!ol(c,d)||!ol(g,b):!0}function vv(s,a,c,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==s&&_p.enqueueReplaceState(a,a.state,null)}function Ks(s,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(s=s.defaultProps){c===a&&(c=m({},c));for(var g in s)c[g]===void 0&&(c[g]=s[g])}return c}function wv(s){cu(s)}function Sv(s){console.error(s)}function xv(s){cu(s)}function Mu(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function Ev(s,a,c){try{var d=s.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function kp(s,a,c){return c=$i(c),c.tag=3,c.payload={element:null},c.callback=function(){Mu(s,a)},c}function Tv(s){return s=$i(s),s.tag=3,s}function _v(s,a,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;s.payload=function(){return g(b)},s.callback=function(){Ev(a,c,d)}}var x=c.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){Ev(a,c,d),typeof g!="function"&&(Ji===null?Ji=new Set([this]):Ji.add(this));var _=d.stack;this.componentDidCatch(d.value,{componentStack:_!==null?_:""})})}function pC(s,a,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&Bo(a,c,g,!0),c=_n.current,c!==null){switch(c.tag){case 31:case 13:return Kn===null?Vu():c.alternate===null&&ht===0&&(ht=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===vu?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),Xp(s,d,g)),!1;case 22:return c.flags|=65536,d===vu?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),Xp(s,d,g)),!1}throw Error(r(435,c.tag))}return Xp(s,d,g),Vu(),!1}if(Ie)return a=_n.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Fh&&(s=Error(r(422),{cause:d}),cl(qn(s,c)))):(d!==Fh&&(a=Error(r(423),{cause:d}),cl(qn(a,c))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=qn(d,c),g=kp(s.stateNode,d,g),np(s,g),ht!==4&&(ht=2)),!1;var b=Error(r(520),{cause:d});if(b=qn(b,c),Cl===null?Cl=[b]:Cl.push(b),ht!==4&&(ht=2),a===null)return!0;d=qn(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=g&-g,c.lanes|=s,s=kp(c.stateNode,d,s),np(c,s),!1;case 1:if(a=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ji===null||!Ji.has(b))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Tv(g),_v(g,s,c,d),np(c,g),!1}c=c.return}while(c!==null);return!1}var Ap=Error(r(461)),Tt=!1;function Ft(s,a,c,d){a.child=s===null?Ob(a,null,c,d):Fs(a,s.child,c,d)}function kv(s,a,c,d,g){c=c.render;var b=a.ref;if("ref"in d){var x={};for(var _ in d)_!=="ref"&&(x[_]=d[_])}else x=d;return Hs(a),d=lp(s,a,c,x,b,g),_=cp(),s!==null&&!Tt?(up(s,a,g),ii(s,a,g)):(Ie&&_&&qh(a),a.flags|=1,Ft(s,a,d,g),a.child)}function Av(s,a,c,d,g){if(s===null){var b=c.type;return typeof b=="function"&&!Ph(b)&&b.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=b,Cv(s,a,b,d,g)):(s=hu(c.type,null,d,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(b=s.child,!jp(s,g)){var x=b.memoizedProps;if(c=c.compare,c=c!==null?c:ol,c(x,d)&&s.ref===a.ref)return ii(s,a,g)}return a.flags|=1,s=Qr(b,d),s.ref=a.ref,s.return=a,a.child=s}function Cv(s,a,c,d,g){if(s!==null){var b=s.memoizedProps;if(ol(b,d)&&s.ref===a.ref)if(Tt=!1,a.pendingProps=d=b,jp(s,g))(s.flags&131072)!==0&&(Tt=!0);else return a.lanes=s.lanes,ii(s,a,g)}return Cp(s,a,c,d,g)}function Ov(s,a,c,d){var g=d.children,b=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,s!==null){for(d=a.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~b}else d=0,a.child=null;return Rv(s,a,b,c,d)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&yu(a,b!==null?b.cachePool:null),b!==null?Mb(a,b):ip(),Db(a);else return d=a.lanes=536870912,Rv(s,a,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(yu(a,b.cachePool),Mb(a,b),Fi(),a.memoizedState=null):(s!==null&&yu(a,null),ip(),Fi());return Ft(s,a,g,c),a.child}function Sl(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Rv(s,a,c,d,g){var b=Qh();return b=b===null?null:{parent:xt._currentValue,pool:b},a.memoizedState={baseLanes:c,cachePool:b},s!==null&&yu(a,null),ip(),Db(a),s!==null&&Bo(s,a,d,!0),a.childLanes=g,null}function Du(s,a){return a=ju({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Nv(s,a,c){return Fs(a,s.child,null,c),s=Du(a,a.pendingProps),s.flags|=2,kn(a),a.memoizedState=null,s}function mC(s,a,c){var d=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Ie){if(d.mode==="hidden")return s=Du(a,d),a.lanes=536870912,Sl(null,s);if(op(a),(s=Ze)?(s=qw(s,Gn),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Ii!==null?{id:Tr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},c=pb(s),c.return=a,a.child=c,qt=a,Ze=null)):s=null,s===null)throw Bi(a);return a.lanes=536870912,null}return Du(a,d)}var b=s.memoizedState;if(b!==null){var x=b.dehydrated;if(op(a),g)if(a.flags&256)a.flags&=-257,a=Nv(s,a,c);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(Tt||Bo(s,a,c,!1),g=(c&s.childLanes)!==0,Tt||g){if(d=Ye,d!==null&&(x=Jc(d,c),x!==0&&x!==b.retryLane))throw b.retryLane=x,Is(s,x),bn(d,s,x),Ap;Vu(),a=Nv(s,a,c)}else s=b.treeContext,Ze=Wn(x.nextSibling),qt=a,Ie=!0,Ui=null,Gn=!1,s!==null&&yb(a,s),a=Du(a,d),a.flags|=4096;return a}return s=Qr(s.child,{mode:d.mode,children:d.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Lu(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function Cp(s,a,c,d,g){return Hs(a),c=lp(s,a,c,d,void 0,g),d=cp(),s!==null&&!Tt?(up(s,a,g),ii(s,a,g)):(Ie&&d&&qh(a),a.flags|=1,Ft(s,a,c,g),a.child)}function Mv(s,a,c,d,g,b){return Hs(a),a.updateQueue=null,c=jb(a,d,c,g),Lb(s),d=cp(),s!==null&&!Tt?(up(s,a,b),ii(s,a,b)):(Ie&&d&&qh(a),a.flags|=1,Ft(s,a,c,b),a.child)}function Dv(s,a,c,d,g){if(Hs(a),a.stateNode===null){var b=jo,x=c.contextType;typeof x=="object"&&x!==null&&(b=Vt(x)),b=new c(d,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=_p,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=d,b.state=a.memoizedState,b.refs={},ep(a),x=c.contextType,b.context=typeof x=="object"&&x!==null?Vt(x):jo,b.state=a.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(Tp(a,c,x,d),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(x=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),x!==b.state&&_p.enqueueReplaceState(b,b.state,null),gl(a,d,b,g),ml(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){b=a.stateNode;var _=a.memoizedProps,O=Ks(c,_);b.props=O;var B=b.context,V=c.contextType;x=jo,typeof V=="object"&&V!==null&&(x=Vt(V));var G=c.getDerivedStateFromProps;V=typeof G=="function"||typeof b.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,V||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_||B!==x)&&vv(a,b,d,x),Hi=!1;var P=a.memoizedState;b.state=P,gl(a,d,b,g),ml(),B=a.memoizedState,_||P!==B||Hi?(typeof G=="function"&&(Tp(a,c,G,d),B=a.memoizedState),(O=Hi||bv(a,c,O,d,P,B,x))?(V||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=B),b.props=d,b.state=B,b.context=x,d=O):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{b=a.stateNode,tp(s,a),x=a.memoizedProps,V=Ks(c,x),b.props=V,G=a.pendingProps,P=b.context,B=c.contextType,O=jo,typeof B=="object"&&B!==null&&(O=Vt(B)),_=c.getDerivedStateFromProps,(B=typeof _=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(x!==G||P!==O)&&vv(a,b,d,O),Hi=!1,P=a.memoizedState,b.state=P,gl(a,d,b,g),ml();var q=a.memoizedState;x!==G||P!==q||Hi||s!==null&&s.dependencies!==null&&mu(s.dependencies)?(typeof _=="function"&&(Tp(a,c,_,d),q=a.memoizedState),(V=Hi||bv(a,c,V,d,P,q,O)||s!==null&&s.dependencies!==null&&mu(s.dependencies))?(B||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,q,O),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,q,O)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||x===s.memoizedProps&&P===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&P===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=q),b.props=d,b.state=q,b.context=O,d=V):(typeof b.componentDidUpdate!="function"||x===s.memoizedProps&&P===s.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&P===s.memoizedState||(a.flags|=1024),d=!1)}return b=d,Lu(s,a),d=(a.flags&128)!==0,b||d?(b=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,s!==null&&d?(a.child=Fs(a,s.child,null,g),a.child=Fs(a,null,c,g)):Ft(s,a,c,g),a.memoizedState=b.state,s=a.child):s=ii(s,a,g),s}function Lv(s,a,c,d){return Bs(),a.flags|=256,Ft(s,a,c,d),a.child}var Op={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rp(s){return{baseLanes:s,cachePool:Eb()}}function Np(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=Cn),s}function jv(s,a,c){var d=a.pendingProps,g=!1,b=(a.flags&128)!==0,x;if((x=b)||(x=s!==null&&s.memoizedState===null?!1:(bt.current&2)!==0),x&&(g=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,s===null){if(Ie){if(g?Vi(a):Fi(),(s=Ze)?(s=qw(s,Gn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Ii!==null?{id:Tr,overflow:_r}:null,retryLane:536870912,hydrationErrors:null},c=pb(s),c.return=a,a.child=c,qt=a,Ze=null)):s=null,s===null)throw Bi(a);return hm(s)?a.lanes=32:a.lanes=536870912,null}var _=d.children;return d=d.fallback,g?(Fi(),g=a.mode,_=ju({mode:"hidden",children:_},g),d=Us(d,g,c,null),_.return=a,d.return=a,_.sibling=d,a.child=_,d=a.child,d.memoizedState=Rp(c),d.childLanes=Np(s,x,c),a.memoizedState=Op,Sl(null,d)):(Vi(a),Mp(a,_))}var O=s.memoizedState;if(O!==null&&(_=O.dehydrated,_!==null)){if(b)a.flags&256?(Vi(a),a.flags&=-257,a=Dp(s,a,c)):a.memoizedState!==null?(Fi(),a.child=s.child,a.flags|=128,a=null):(Fi(),_=d.fallback,g=a.mode,d=ju({mode:"visible",children:d.children},g),_=Us(_,g,c,null),_.flags|=2,d.return=a,_.return=a,d.sibling=_,a.child=d,Fs(a,s.child,null,c),d=a.child,d.memoizedState=Rp(c),d.childLanes=Np(s,x,c),a.memoizedState=Op,a=Sl(null,d));else if(Vi(a),hm(_)){if(x=_.nextSibling&&_.nextSibling.dataset,x)var B=x.dgst;x=B,d=Error(r(419)),d.stack="",d.digest=x,cl({value:d,source:null,stack:null}),a=Dp(s,a,c)}else if(Tt||Bo(s,a,c,!1),x=(c&s.childLanes)!==0,Tt||x){if(x=Ye,x!==null&&(d=Jc(x,c),d!==0&&d!==O.retryLane))throw O.retryLane=d,Is(s,d),bn(x,s,d),Ap;dm(_)||Vu(),a=Dp(s,a,c)}else dm(_)?(a.flags|=192,a.child=s.child,a=null):(s=O.treeContext,Ze=Wn(_.nextSibling),qt=a,Ie=!0,Ui=null,Gn=!1,s!==null&&yb(a,s),a=Mp(a,d.children),a.flags|=4096);return a}return g?(Fi(),_=d.fallback,g=a.mode,O=s.child,B=O.sibling,d=Qr(O,{mode:"hidden",children:d.children}),d.subtreeFlags=O.subtreeFlags&65011712,B!==null?_=Qr(B,_):(_=Us(_,g,c,null),_.flags|=2),_.return=a,d.return=a,d.sibling=_,a.child=d,Sl(null,d),d=a.child,_=s.child.memoizedState,_===null?_=Rp(c):(g=_.cachePool,g!==null?(O=xt._currentValue,g=g.parent!==O?{parent:O,pool:O}:g):g=Eb(),_={baseLanes:_.baseLanes|c,cachePool:g}),d.memoizedState=_,d.childLanes=Np(s,x,c),a.memoizedState=Op,Sl(s.child,d)):(Vi(a),c=s.child,s=c.sibling,c=Qr(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,s!==null&&(x=a.deletions,x===null?(a.deletions=[s],a.flags|=16):x.push(s)),a.child=c,a.memoizedState=null,c)}function Mp(s,a){return a=ju({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function ju(s,a){return s=Tn(22,s,null,a),s.lanes=0,s}function Dp(s,a,c){return Fs(a,s.child,null,c),s=Mp(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function zv(s,a,c){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Wh(s.return,a,c)}function Lp(s,a,c,d,g,b){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:b}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=c,x.tailMode=g,x.treeForkCount=b)}function Iv(s,a,c){var d=a.pendingProps,g=d.revealOrder,b=d.tail;d=d.children;var x=bt.current,_=(x&2)!==0;if(_?(x=x&1|2,a.flags|=128):x&=1,Z(bt,x),Ft(s,a,d,c),d=Ie?ll:0,!_&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&zv(s,c,a);else if(s.tag===19)zv(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)s=c.alternate,s!==null&&Eu(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Lp(a,!1,g,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&Eu(s)===null){a.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}Lp(a,!0,c,null,b,d);break;case"together":Lp(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function ii(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Wi|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(Bo(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,c=Qr(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=Qr(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function jp(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&mu(s)))}function gC(s,a,c){switch(a.tag){case 3:ft(a,a.stateNode.containerInfo),Pi(a,xt,s.memoizedState.cache),Bs();break;case 27:case 5:Hr(a);break;case 4:ft(a,a.stateNode.containerInfo);break;case 10:Pi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,op(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Vi(a),a.flags|=128,null):(c&a.child.childLanes)!==0?jv(s,a,c):(Vi(a),s=ii(s,a,c),s!==null?s.sibling:null);Vi(a);break;case 19:var g=(s.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(Bo(s,a,c,!1),d=(c&a.childLanes)!==0),g){if(d)return Iv(s,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Z(bt,bt.current),d)break;return null;case 22:return a.lanes=0,Ov(s,a,c,a.pendingProps);case 24:Pi(a,xt,s.memoizedState.cache)}return ii(s,a,c)}function Uv(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)Tt=!0;else{if(!jp(s,c)&&(a.flags&128)===0)return Tt=!1,gC(s,a,c);Tt=(s.flags&131072)!==0}else Tt=!1,Ie&&(a.flags&1048576)!==0&&gb(a,ll,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(s=qs(a.elementType),a.type=s,typeof s=="function")Ph(s)?(d=Ks(s,d),a.tag=1,a=Dv(null,a,s,d,c)):(a.tag=0,a=Cp(null,a,s,d,c));else{if(s!=null){var g=s.$$typeof;if(g===L){a.tag=11,a=kv(null,a,s,d,c);break e}else if(g===z){a.tag=14,a=Av(null,a,s,d,c);break e}}throw a=Se(s)||s,Error(r(306,a,""))}}return a;case 0:return Cp(s,a,a.type,a.pendingProps,c);case 1:return d=a.type,g=Ks(d,a.pendingProps),Dv(s,a,d,g,c);case 3:e:{if(ft(a,a.stateNode.containerInfo),s===null)throw Error(r(387));d=a.pendingProps;var b=a.memoizedState;g=b.element,tp(s,a),gl(a,d,null,c);var x=a.memoizedState;if(d=x.cache,Pi(a,xt,d),d!==b.cache&&Jh(a,[xt],c,!0),ml(),d=x.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Lv(s,a,d,c);break e}else if(d!==g){g=qn(Error(r(424)),a),cl(g),a=Lv(s,a,d,c);break e}else for(s=a.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Ze=Wn(s.firstChild),qt=a,Ie=!0,Ui=null,Gn=!0,c=Ob(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Bs(),d===g){a=ii(s,a,c);break e}Ft(s,a,d,c)}a=a.child}return a;case 26:return Lu(s,a),s===null?(c=Jw(a.type,null,a.pendingProps,null))?a.memoizedState=c:Ie||(c=a.type,s=a.pendingProps,d=Xu(_e.current).createElement(c),d[St]=a,d[it]=s,Gt(d,c,s),Re(d),a.stateNode=d):a.memoizedState=Jw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Hr(a),s===null&&Ie&&(d=a.stateNode=Gw(a.type,a.pendingProps,_e.current),qt=a,Gn=!0,g=Ze,Zi(a.type)?(pm=g,Ze=Wn(d.firstChild)):Ze=g),Ft(s,a,a.pendingProps.children,c),Lu(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Ie&&((g=d=Ze)&&(d=GC(d,a.type,a.pendingProps,Gn),d!==null?(a.stateNode=d,qt=a,Ze=Wn(d.firstChild),Gn=!1,g=!0):g=!1),g||Bi(a)),Hr(a),g=a.type,b=a.pendingProps,x=s!==null?s.memoizedProps:null,d=b.children,cm(g,b)?d=null:x!==null&&cm(g,x)&&(a.flags|=32),a.memoizedState!==null&&(g=lp(s,a,aC,null,null,c),zl._currentValue=g),Lu(s,a),Ft(s,a,d,c),a.child;case 6:return s===null&&Ie&&((s=c=Ze)&&(c=KC(c,a.pendingProps,Gn),c!==null?(a.stateNode=c,qt=a,Ze=null,s=!0):s=!1),s||Bi(a)),null;case 13:return jv(s,a,c);case 4:return ft(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=Fs(a,null,d,c):Ft(s,a,d,c),a.child;case 11:return kv(s,a,a.type,a.pendingProps,c);case 7:return Ft(s,a,a.pendingProps,c),a.child;case 8:return Ft(s,a,a.pendingProps.children,c),a.child;case 12:return Ft(s,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,Pi(a,a.type,d.value),Ft(s,a,d.children,c),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,Hs(a),g=Vt(g),d=d(g),a.flags|=1,Ft(s,a,d,c),a.child;case 14:return Av(s,a,a.type,a.pendingProps,c);case 15:return Cv(s,a,a.type,a.pendingProps,c);case 19:return Iv(s,a,c);case 31:return mC(s,a,c);case 22:return Ov(s,a,c,a.pendingProps);case 24:return Hs(a),d=Vt(xt),s===null?(g=Qh(),g===null&&(g=Ye,b=Yh(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=c),g=b),a.memoizedState={parent:d,cache:g},ep(a),Pi(a,xt,g)):((s.lanes&c)!==0&&(tp(s,a),gl(a,null,null,c),ml()),g=s.memoizedState,b=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Pi(a,xt,d)):(d=b.cache,Pi(a,xt,d),d!==g.cache&&Jh(a,[xt],c,!0))),Ft(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function si(s){s.flags|=4}function zp(s,a,c,d,g){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(fw())s.flags|=8192;else throw Vs=vu,Zh}else s.flags&=-16777217}function Bv(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!eS(a))if(fw())s.flags|=8192;else throw Vs=vu,Zh}function zu(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Kr():536870912,s.lanes|=a,Xo|=a)}function xl(s,a){if(!Ie)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function et(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(a)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=c,a}function yC(s,a,c){var d=a.pendingProps;switch(Vh(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(a),null;case 1:return et(a),null;case 3:return c=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),ti(xt),rt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Uo(a)?si(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Gh())),et(a),null;case 26:var g=a.type,b=a.memoizedState;return s===null?(si(a),b!==null?(et(a),Bv(a,b)):(et(a),zp(a,g,null,d,c))):b?b!==s.memoizedState?(si(a),et(a),Bv(a,b)):(et(a),a.flags&=-16777217):(s=s.memoizedProps,s!==d&&si(a),et(a),zp(a,g,s,d,c)),null;case 27:if(Rs(a),c=_e.current,g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&si(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return et(a),null}s=se.current,Uo(a)?bb(a):(s=Gw(g,d,c),a.stateNode=s,si(a))}return et(a),null;case 5:if(Rs(a),g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&si(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return et(a),null}if(b=se.current,Uo(a))bb(a);else{var x=Xu(_e.current);switch(b){case 1:b=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=x.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?x.createElement("select",{is:d.is}):x.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?x.createElement(g,{is:d.is}):x.createElement(g)}}b[St]=a,b[it]=d;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)b.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=b;e:switch(Gt(b,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&si(a)}}return et(a),zp(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,c),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&si(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(s=_e.current,Uo(a)){if(s=a.stateNode,c=a.memoizedProps,d=null,g=qt,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[St]=a,s=!!(s.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||jw(s.nodeValue,c)),s||Bi(a,!0)}else s=Xu(s).createTextNode(d),s[St]=a,a.stateNode=s}return et(a),null;case 31:if(c=a.memoizedState,s===null||s.memoizedState!==null){if(d=Uo(a),c!==null){if(s===null){if(!d)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[St]=a}else Bs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;et(a),s=!1}else c=Gh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return a.flags&256?(kn(a),a):(kn(a),null);if((a.flags&128)!==0)throw Error(r(558))}return et(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Uo(a),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[St]=a}else Bs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;et(a),g=!1}else g=Gh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(kn(a),a):(kn(a),null)}return kn(a),(a.flags&128)!==0?(a.lanes=c,a):(c=d!==null,s=s!==null&&s.memoizedState!==null,c&&(d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048)),c!==s&&c&&(a.child.flags|=8192),zu(a,a.updateQueue),et(a),null);case 4:return rt(),s===null&&im(a.stateNode.containerInfo),et(a),null;case 10:return ti(a.type),et(a),null;case 19:if(K(bt),d=a.memoizedState,d===null)return et(a),null;if(g=(a.flags&128)!==0,b=d.rendering,b===null)if(g)xl(d,!1);else{if(ht!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(b=Eu(s),b!==null){for(a.flags|=128,xl(d,!1),s=b.updateQueue,a.updateQueue=s,zu(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)hb(c,s),c=c.sibling;return Z(bt,bt.current&1|2),Ie&&Zr(a,d.treeForkCount),a.child}s=s.sibling}d.tail!==null&&Ht()>Hu&&(a.flags|=128,g=!0,xl(d,!1),a.lanes=4194304)}else{if(!g)if(s=Eu(b),s!==null){if(a.flags|=128,g=!0,s=s.updateQueue,a.updateQueue=s,zu(a,s),xl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Ie)return et(a),null}else 2*Ht()-d.renderingStartTime>Hu&&c!==536870912&&(a.flags|=128,g=!0,xl(d,!1),a.lanes=4194304);d.isBackwards?(b.sibling=a.child,a.child=b):(s=d.last,s!==null?s.sibling=b:a.child=b,d.last=b)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=Ht(),s.sibling=null,c=bt.current,Z(bt,g?c&1|2:c&1),Ie&&Zr(a,d.treeForkCount),s):(et(a),null);case 22:case 23:return kn(a),sp(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(et(a),a.subtreeFlags&6&&(a.flags|=8192)):et(a),c=a.updateQueue,c!==null&&zu(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),s!==null&&K($s),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ti(xt),et(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function bC(s,a){switch(Vh(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ti(xt),rt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Rs(a),null;case 31:if(a.memoizedState!==null){if(kn(a),a.alternate===null)throw Error(r(340));Bs()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(kn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Bs()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return K(bt),null;case 4:return rt(),null;case 10:return ti(a.type),null;case 22:case 23:return kn(a),sp(),s!==null&&K($s),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ti(xt),null;case 25:return null;default:return null}}function Pv(s,a){switch(Vh(a),a.tag){case 3:ti(xt),rt();break;case 26:case 27:case 5:Rs(a);break;case 4:rt();break;case 31:a.memoizedState!==null&&kn(a);break;case 13:kn(a);break;case 19:K(bt);break;case 10:ti(a.type);break;case 22:case 23:kn(a),sp(),s!==null&&K($s);break;case 24:ti(xt)}}function El(s,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&s)===s){d=void 0;var b=c.create,x=c.inst;d=b(),x.destroy=d}c=c.next}while(c!==g)}}catch(_){Fe(a,a.return,_)}}function Gi(s,a,c){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&s)===s){var x=d.inst,_=x.destroy;if(_!==void 0){x.destroy=void 0,g=a;var O=c,B=_;try{B()}catch(V){Fe(g,O,V)}}}d=d.next}while(d!==b)}}catch(V){Fe(a,a.return,V)}}function Hv(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{Nb(a,c)}catch(d){Fe(s,s.return,d)}}}function $v(s,a,c){c.props=Ks(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(d){Fe(s,a,d)}}function Tl(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof c=="function"?s.refCleanup=c(d):c.current=d}}catch(g){Fe(s,a,g)}}function kr(s,a){var c=s.ref,d=s.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Fe(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Fe(s,a,g)}else c.current=null}function qv(s){var a=s.type,c=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Fe(s,s.return,g)}}function Ip(s,a,c){try{var d=s.stateNode;PC(d,s.type,c,a),d[it]=a}catch(g){Fe(s,s.return,g)}}function Vv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Zi(s.type)||s.tag===4}function Up(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Vv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Zi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bp(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Yr));else if(d!==4&&(d===27&&Zi(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(Bp(s,a,c),s=s.sibling;s!==null;)Bp(s,a,c),s=s.sibling}function Iu(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(d!==4&&(d===27&&Zi(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Iu(s,a,c),s=s.sibling;s!==null;)Iu(s,a,c),s=s.sibling}function Fv(s){var a=s.stateNode,c=s.memoizedProps;try{for(var d=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Gt(a,d,c),a[St]=s,a[it]=c}catch(b){Fe(s,s.return,b)}}var oi=!1,_t=!1,Pp=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,zt=null;function vC(s,a){if(s=s.containerInfo,am=sf,s=ib(s),Dh(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var x=0,_=-1,O=-1,B=0,V=0,G=s,P=null;t:for(;;){for(var q;G!==c||g!==0&&G.nodeType!==3||(_=x+g),G!==b||d!==0&&G.nodeType!==3||(O=x+d),G.nodeType===3&&(x+=G.nodeValue.length),(q=G.firstChild)!==null;)P=G,G=q;for(;;){if(G===s)break t;if(P===c&&++B===g&&(_=x),P===b&&++V===d&&(O=x),(q=G.nextSibling)!==null)break;G=P,P=G.parentNode}G=q}c=_===-1||O===-1?null:{start:_,end:O}}else c=null}c=c||{start:0,end:0}}else c=null;for(lm={focusedElem:s,selectionRange:c},sf=!1,zt=a;zt!==null;)if(a=zt,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,zt=s;else for(;zt!==null;){switch(a=zt,b=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)g=s[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,c=a,g=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var oe=Ks(c.type,g);s=d.getSnapshotBeforeUpdate(oe,b),d.__reactInternalSnapshotBeforeUpdate=s}catch(me){Fe(c,c.return,me)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)fm(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":fm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,zt=s;break}zt=a.return}}function Kv(s,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:li(s,c),d&4&&El(5,c);break;case 1:if(li(s,c),d&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(x){Fe(c,c.return,x)}else{var g=Ks(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(x){Fe(c,c.return,x)}}d&64&&Hv(c),d&512&&Tl(c,c.return);break;case 3:if(li(s,c),d&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Nb(s,a)}catch(x){Fe(c,c.return,x)}}break;case 27:a===null&&d&4&&Fv(c);case 26:case 5:li(s,c),a===null&&d&4&&qv(c),d&512&&Tl(c,c.return);break;case 12:li(s,c);break;case 31:li(s,c),d&4&&Yv(s,c);break;case 13:li(s,c),d&4&&Xv(s,c),d&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=CC.bind(null,c),WC(s,c))));break;case 22:if(d=c.memoizedState!==null||oi,!d){a=a!==null&&a.memoizedState!==null||_t,g=oi;var b=_t;oi=d,(_t=a)&&!b?ci(s,c,(c.subtreeFlags&8772)!==0):li(s,c),oi=g,_t=b}break;case 30:break;default:li(s,c)}}function Wv(s){var a=s.alternate;a!==null&&(s.alternate=null,Wv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&M(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var st=null,pn=!1;function ai(s,a,c){for(c=c.child;c!==null;)Jv(s,a,c),c=c.sibling}function Jv(s,a,c){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(xr,c)}catch{}switch(c.tag){case 26:_t||kr(c,a),ai(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:_t||kr(c,a);var d=st,g=pn;Zi(c.type)&&(st=c.stateNode,pn=!1),ai(s,a,c),Dl(c.stateNode),st=d,pn=g;break;case 5:_t||kr(c,a);case 6:if(d=st,g=pn,st=null,ai(s,a,c),st=d,pn=g,st!==null)if(pn)try{(st.nodeType===9?st.body:st.nodeName==="HTML"?st.ownerDocument.body:st).removeChild(c.stateNode)}catch(b){Fe(c,a,b)}else try{st.removeChild(c.stateNode)}catch(b){Fe(c,a,b)}break;case 18:st!==null&&(pn?(s=st,Hw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),sa(s)):Hw(st,c.stateNode));break;case 4:d=st,g=pn,st=c.stateNode.containerInfo,pn=!0,ai(s,a,c),st=d,pn=g;break;case 0:case 11:case 14:case 15:Gi(2,c,a),_t||Gi(4,c,a),ai(s,a,c);break;case 1:_t||(kr(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&$v(c,a,d)),ai(s,a,c);break;case 21:ai(s,a,c);break;case 22:_t=(d=_t)||c.memoizedState!==null,ai(s,a,c),_t=d;break;default:ai(s,a,c)}}function Yv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{sa(s)}catch(c){Fe(a,a.return,c)}}}function Xv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{sa(s)}catch(c){Fe(a,a.return,c)}}function wC(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Gv),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Gv),a;default:throw Error(r(435,s.tag))}}function Uu(s,a){var c=wC(s);a.forEach(function(d){if(!c.has(d)){c.add(d);var g=OC.bind(null,s,d);d.then(g,g)}})}function mn(s,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],b=s,x=a,_=x;e:for(;_!==null;){switch(_.tag){case 27:if(Zi(_.type)){st=_.stateNode,pn=!1;break e}break;case 5:st=_.stateNode,pn=!1;break e;case 3:case 4:st=_.stateNode.containerInfo,pn=!0;break e}_=_.return}if(st===null)throw Error(r(160));Jv(b,x,g),st=null,pn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Qv(a,s),a=a.sibling}var lr=null;function Qv(s,a){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:mn(a,s),gn(s),d&4&&(Gi(3,s,s.return),El(3,s),Gi(5,s,s.return));break;case 1:mn(a,s),gn(s),d&512&&(_t||c===null||kr(c,c.return)),d&64&&oi&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=lr;if(mn(a,s),gn(s),d&512&&(_t||c===null||kr(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=s.memoizedState,c===null)if(d===null)if(s.stateNode===null){e:{d=s.type,c=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":b=g.getElementsByTagName("title")[0],(!b||b[le]||b[St]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(d),g.head.insertBefore(b,g.querySelector("head > title"))),Gt(b,d,c),b[St]=s,Re(b),d=b;break e;case"link":var x=Qw("link","href",g).get(d+(c.href||""));if(x){for(var _=0;_<x.length;_++)if(b=x[_],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){x.splice(_,1);break t}}b=g.createElement(d),Gt(b,d,c),g.head.appendChild(b);break;case"meta":if(x=Qw("meta","content",g).get(d+(c.content||""))){for(_=0;_<x.length;_++)if(b=x[_],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){x.splice(_,1);break t}}b=g.createElement(d),Gt(b,d,c),g.head.appendChild(b);break;default:throw Error(r(468,d))}b[St]=s,Re(b),d=b}s.stateNode=d}else Zw(g,s.type,s.stateNode);else s.stateNode=Xw(g,d,s.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?Zw(g,s.type,s.stateNode):Xw(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Ip(s,s.memoizedProps,c.memoizedProps)}break;case 27:mn(a,s),gn(s),d&512&&(_t||c===null||kr(c,c.return)),c!==null&&d&4&&Ip(s,s.memoizedProps,c.memoizedProps);break;case 5:if(mn(a,s),gn(s),d&512&&(_t||c===null||kr(c,c.return)),s.flags&32){g=s.stateNode;try{Co(g,"")}catch(oe){Fe(s,s.return,oe)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,Ip(s,g,c!==null?c.memoizedProps:g)),d&1024&&(Pp=!0);break;case 6:if(mn(a,s),gn(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,c=s.stateNode;try{c.nodeValue=d}catch(oe){Fe(s,s.return,oe)}}break;case 3:if(ef=null,g=lr,lr=Qu(a.containerInfo),mn(a,s),lr=g,gn(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{sa(a.containerInfo)}catch(oe){Fe(s,s.return,oe)}Pp&&(Pp=!1,Zv(s));break;case 4:d=lr,lr=Qu(s.stateNode.containerInfo),mn(a,s),gn(s),lr=d;break;case 12:mn(a,s),gn(s);break;case 31:mn(a,s),gn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Uu(s,d)));break;case 13:mn(a,s),gn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Pu=Ht()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Uu(s,d)));break;case 22:g=s.memoizedState!==null;var O=c!==null&&c.memoizedState!==null,B=oi,V=_t;if(oi=B||g,_t=V||O,mn(a,s),_t=V,oi=B,gn(s),d&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||O||oi||_t||Ws(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){O=c=a;try{if(b=O.stateNode,g)x=b.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{_=O.stateNode;var G=O.memoizedProps.style,P=G!=null&&G.hasOwnProperty("display")?G.display:null;_.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(oe){Fe(O,O.return,oe)}}}else if(a.tag===6){if(c===null){O=a;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch(oe){Fe(O,O.return,oe)}}}else if(a.tag===18){if(c===null){O=a;try{var q=O.stateNode;g?$w(q,!0):$w(O.stateNode,!1)}catch(oe){Fe(O,O.return,oe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Uu(s,c))));break;case 19:mn(a,s),gn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Uu(s,d)));break;case 30:break;case 21:break;default:mn(a,s),gn(s)}}function gn(s){var a=s.flags;if(a&2){try{for(var c,d=s.return;d!==null;){if(Vv(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,b=Up(s);Iu(s,b,g);break;case 5:var x=c.stateNode;c.flags&32&&(Co(x,""),c.flags&=-33);var _=Up(s);Iu(s,_,x);break;case 3:case 4:var O=c.stateNode.containerInfo,B=Up(s);Bp(s,B,O);break;default:throw Error(r(161))}}catch(V){Fe(s,s.return,V)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Zv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Zv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function li(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Kv(s,a.alternate,a),a=a.sibling}function Ws(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Gi(4,a,a.return),Ws(a);break;case 1:kr(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&$v(a,a.return,c),Ws(a);break;case 27:Dl(a.stateNode);case 26:case 5:kr(a,a.return),Ws(a);break;case 22:a.memoizedState===null&&Ws(a);break;case 30:Ws(a);break;default:Ws(a)}s=s.sibling}}function ci(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=s,b=a,x=b.flags;switch(b.tag){case 0:case 11:case 15:ci(g,b,c),El(4,b);break;case 1:if(ci(g,b,c),d=b,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(B){Fe(d,d.return,B)}if(d=b,g=d.updateQueue,g!==null){var _=d.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)Rb(O[g],_)}catch(B){Fe(d,d.return,B)}}c&&x&64&&Hv(b),Tl(b,b.return);break;case 27:Fv(b);case 26:case 5:ci(g,b,c),c&&d===null&&x&4&&qv(b),Tl(b,b.return);break;case 12:ci(g,b,c);break;case 31:ci(g,b,c),c&&x&4&&Yv(g,b);break;case 13:ci(g,b,c),c&&x&4&&Xv(g,b);break;case 22:b.memoizedState===null&&ci(g,b,c),Tl(b,b.return);break;case 30:break;default:ci(g,b,c)}a=a.sibling}}function Hp(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&ul(c))}function $p(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ul(s))}function cr(s,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ew(s,a,c,d),a=a.sibling}function ew(s,a,c,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:cr(s,a,c,d),g&2048&&El(9,a);break;case 1:cr(s,a,c,d);break;case 3:cr(s,a,c,d),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ul(s)));break;case 12:if(g&2048){cr(s,a,c,d),s=a.stateNode;try{var b=a.memoizedProps,x=b.id,_=b.onPostCommit;typeof _=="function"&&_(x,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){Fe(a,a.return,O)}}else cr(s,a,c,d);break;case 31:cr(s,a,c,d);break;case 13:cr(s,a,c,d);break;case 23:break;case 22:b=a.stateNode,x=a.alternate,a.memoizedState!==null?b._visibility&2?cr(s,a,c,d):_l(s,a):b._visibility&2?cr(s,a,c,d):(b._visibility|=2,Wo(s,a,c,d,(a.subtreeFlags&10256)!==0||!1)),g&2048&&Hp(x,a);break;case 24:cr(s,a,c,d),g&2048&&$p(a.alternate,a);break;default:cr(s,a,c,d)}}function Wo(s,a,c,d,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=s,x=a,_=c,O=d,B=x.flags;switch(x.tag){case 0:case 11:case 15:Wo(b,x,_,O,g),El(8,x);break;case 23:break;case 22:var V=x.stateNode;x.memoizedState!==null?V._visibility&2?Wo(b,x,_,O,g):_l(b,x):(V._visibility|=2,Wo(b,x,_,O,g)),g&&B&2048&&Hp(x.alternate,x);break;case 24:Wo(b,x,_,O,g),g&&B&2048&&$p(x.alternate,x);break;default:Wo(b,x,_,O,g)}a=a.sibling}}function _l(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,d=a,g=d.flags;switch(d.tag){case 22:_l(c,d),g&2048&&Hp(d.alternate,d);break;case 24:_l(c,d),g&2048&&$p(d.alternate,d);break;default:_l(c,d)}a=a.sibling}}var kl=8192;function Jo(s,a,c){if(s.subtreeFlags&kl)for(s=s.child;s!==null;)tw(s,a,c),s=s.sibling}function tw(s,a,c){switch(s.tag){case 26:Jo(s,a,c),s.flags&kl&&s.memoizedState!==null&&oO(c,lr,s.memoizedState,s.memoizedProps);break;case 5:Jo(s,a,c);break;case 3:case 4:var d=lr;lr=Qu(s.stateNode.containerInfo),Jo(s,a,c),lr=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=kl,kl=16777216,Jo(s,a,c),kl=d):Jo(s,a,c));break;default:Jo(s,a,c)}}function nw(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Al(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];zt=d,iw(d,s)}nw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rw(s),s=s.sibling}function rw(s){switch(s.tag){case 0:case 11:case 15:Al(s),s.flags&2048&&Gi(9,s,s.return);break;case 3:Al(s);break;case 12:Al(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Bu(s)):Al(s);break;default:Al(s)}}function Bu(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];zt=d,iw(d,s)}nw(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Gi(8,a,a.return),Bu(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Bu(a));break;default:Bu(a)}s=s.sibling}}function iw(s,a){for(;zt!==null;){var c=zt;switch(c.tag){case 0:case 11:case 15:Gi(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ul(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,zt=d;else e:for(c=s;zt!==null;){d=zt;var g=d.sibling,b=d.return;if(Wv(d),d===c){zt=null;break e}if(g!==null){g.return=b,zt=g;break e}zt=b}}}var SC={getCacheForType:function(s){var a=Vt(xt),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c},cacheSignal:function(){return Vt(xt).controller.signal}},xC=typeof WeakMap=="function"?WeakMap:Map,$e=0,Ye=null,De=null,je=0,Ve=0,An=null,Ki=!1,Yo=!1,qp=!1,ui=0,ht=0,Wi=0,Js=0,Vp=0,Cn=0,Xo=0,Cl=null,yn=null,Fp=!1,Pu=0,sw=0,Hu=1/0,$u=null,Ji=null,Nt=0,Yi=null,Qo=null,fi=0,Gp=0,Kp=null,ow=null,Ol=0,Wp=null;function On(){return($e&2)!==0&&je!==0?je&-je:$.T!==null?em():Ja()}function aw(){if(Cn===0)if((je&536870912)===0||Ie){var s=Gr;Gr<<=1,(Gr&3932160)===0&&(Gr=262144),Cn=s}else Cn=536870912;return s=_n.current,s!==null&&(s.flags|=32),Cn}function bn(s,a,c){(s===Ye&&(Ve===2||Ve===9)||s.cancelPendingCommit!==null)&&(Zo(s,0),Xi(s,je,Cn,!1)),ji(s,c),(($e&2)===0||s!==Ye)&&(s===Ye&&(($e&2)===0&&(Js|=c),ht===4&&Xi(s,je,Cn,!1)),Ar(s))}function lw(s,a,c){if(($e&6)!==0)throw Error(r(327));var d=!c&&(a&127)===0&&(a&s.expiredLanes)===0||Ds(s,a),g=d?_C(s,a):Yp(s,a,!0),b=d;do{if(g===0){Yo&&!d&&Xi(s,a,0,!1);break}else{if(c=s.current.alternate,b&&!EC(c)){g=Yp(s,a,!1),b=!1;continue}if(g===2){if(b=a,s.errorRecoveryDisabledLanes&b)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var _=s;g=Cl;var O=_.current.memoizedState.isDehydrated;if(O&&(Zo(_,x).flags|=256),x=Yp(_,x,!1),x!==2){if(qp&&!O){_.errorRecoveryDisabledLanes|=b,Js|=b,g=4;break e}b=yn,yn=g,b!==null&&(yn===null?yn=b:yn.push.apply(yn,b))}g=x}if(b=!1,g!==2)continue}}if(g===1){Zo(s,0),Xi(s,a,0,!0);break}e:{switch(d=s,b=g,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Xi(d,a,Cn,!Ki);break e;case 2:yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=Pu+300-Ht(),10<g)){if(Xi(d,a,Cn,!Ki),_o(d,0,!0)!==0)break e;fi=a,d.timeoutHandle=Bw(cw.bind(null,d,c,yn,$u,Fp,a,Cn,Js,Xo,Ki,b,"Throttled",-0,0),g);break e}cw(d,c,yn,$u,Fp,a,Cn,Js,Xo,Ki,b,null,-0,0)}}break}while(!0);Ar(s)}function cw(s,a,c,d,g,b,x,_,O,B,V,G,P,q){if(s.timeoutHandle=-1,G=a.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yr},tw(a,b,G);var oe=(b&62914560)===b?Pu-Ht():(b&4194048)===b?sw-Ht():0;if(oe=aO(G,oe),oe!==null){fi=b,s.cancelPendingCommit=oe(yw.bind(null,s,a,b,c,d,g,x,_,O,V,G,null,P,q)),Xi(s,b,x,!B);return}}yw(s,a,b,c,d,g,x,_,O)}function EC(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],b=g.getSnapshot;g=g.value;try{if(!En(b(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Xi(s,a,c,d){a&=~Vp,a&=~Js,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var g=a;0<g;){var b=31-wt(g),x=1<<b;d[b]=-1,g&=~x}c!==0&&Ka(s,c,a)}function qu(){return($e&6)===0?(Rl(0),!1):!0}function Jp(){if(De!==null){if(Ve===0)var s=De.return;else s=De,ei=Ps=null,fp(s),qo=null,dl=0,s=De;for(;s!==null;)Pv(s.alternate,s),s=s.return;De=null}}function Zo(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,qC(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),fi=0,Jp(),Ye=s,De=c=Qr(s.current,null),je=a,Ve=0,An=null,Ki=!1,Yo=Ds(s,a),qp=!1,Xo=Cn=Vp=Js=Wi=ht=0,yn=Cl=null,Fp=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var g=31-wt(d),b=1<<g;a|=s[g],d&=~b}return ui=a,uu(),c}function uw(s,a){ke=null,$.H=wl,a===$o||a===bu?(a=kb(),Ve=3):a===Zh?(a=kb(),Ve=4):Ve=a===Ap?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,An=a,De===null&&(ht=1,Mu(s,qn(a,s.current)))}function fw(){var s=_n.current;return s===null?!0:(je&4194048)===je?Kn===null:(je&62914560)===je||(je&536870912)!==0?s===Kn:!1}function dw(){var s=$.H;return $.H=wl,s===null?wl:s}function hw(){var s=$.A;return $.A=SC,s}function Vu(){ht=4,Ki||(je&4194048)!==je&&_n.current!==null||(Yo=!0),(Wi&134217727)===0&&(Js&134217727)===0||Ye===null||Xi(Ye,je,Cn,!1)}function Yp(s,a,c){var d=$e;$e|=2;var g=dw(),b=hw();(Ye!==s||je!==a)&&($u=null,Zo(s,a)),a=!1;var x=ht;e:do try{if(Ve!==0&&De!==null){var _=De,O=An;switch(Ve){case 8:Jp(),x=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(a=!0);var B=Ve;if(Ve=0,An=null,ea(s,_,O,B),c&&Yo){x=0;break e}break;default:B=Ve,Ve=0,An=null,ea(s,_,O,B)}}TC(),x=ht;break}catch(V){uw(s,V)}while(!0);return a&&s.shellSuspendCounter++,ei=Ps=null,$e=d,$.H=g,$.A=b,De===null&&(Ye=null,je=0,uu()),x}function TC(){for(;De!==null;)pw(De)}function _C(s,a){var c=$e;$e|=2;var d=dw(),g=hw();Ye!==s||je!==a?($u=null,Hu=Ht()+500,Zo(s,a)):Yo=Ds(s,a);e:do try{if(Ve!==0&&De!==null){a=De;var b=An;t:switch(Ve){case 1:Ve=0,An=null,ea(s,a,b,1);break;case 2:case 9:if(Tb(b)){Ve=0,An=null,mw(a);break}a=function(){Ve!==2&&Ve!==9||Ye!==s||(Ve=7),Ar(s)},b.then(a,a);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:Tb(b)?(Ve=0,An=null,mw(a)):(Ve=0,An=null,ea(s,a,b,7));break;case 5:var x=null;switch(De.tag){case 26:x=De.memoizedState;case 5:case 27:var _=De;if(x?eS(x):_.stateNode.complete){Ve=0,An=null;var O=_.sibling;if(O!==null)De=O;else{var B=_.return;B!==null?(De=B,Fu(B)):De=null}break t}}Ve=0,An=null,ea(s,a,b,5);break;case 6:Ve=0,An=null,ea(s,a,b,6);break;case 8:Jp(),ht=6;break e;default:throw Error(r(462))}}kC();break}catch(V){uw(s,V)}while(!0);return ei=Ps=null,$.H=d,$.A=g,$e=c,De!==null?0:(Ye=null,je=0,uu(),ht)}function kC(){for(;De!==null&&!Gc();)pw(De)}function pw(s){var a=Uv(s.alternate,s,ui);s.memoizedProps=s.pendingProps,a===null?Fu(s):De=a}function mw(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=Mv(c,a,a.pendingProps,a.type,void 0,je);break;case 11:a=Mv(c,a,a.pendingProps,a.type.render,a.ref,je);break;case 5:fp(a);default:Pv(c,a),a=De=hb(a,ui),a=Uv(c,a,ui)}s.memoizedProps=s.pendingProps,a===null?Fu(s):De=a}function ea(s,a,c,d){ei=Ps=null,fp(a),qo=null,dl=0;var g=a.return;try{if(pC(s,g,a,c,je)){ht=1,Mu(s,qn(c,s.current)),De=null;return}}catch(b){if(g!==null)throw De=g,b;ht=1,Mu(s,qn(c,s.current)),De=null;return}a.flags&32768?(Ie||d===1?s=!0:Yo||(je&536870912)!==0?s=!1:(Ki=s=!0,(d===2||d===9||d===3||d===6)&&(d=_n.current,d!==null&&d.tag===13&&(d.flags|=16384))),gw(a,s)):Fu(a)}function Fu(s){var a=s;do{if((a.flags&32768)!==0){gw(a,Ki);return}s=a.return;var c=yC(a.alternate,a,ui);if(c!==null){De=c;return}if(a=a.sibling,a!==null){De=a;return}De=a=s}while(a!==null);ht===0&&(ht=5)}function gw(s,a){do{var c=bC(s.alternate,s);if(c!==null){c.flags&=32767,De=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){De=s;return}De=s=c}while(s!==null);ht=6,De=null}function yw(s,a,c,d,g,b,x,_,O){s.cancelPendingCommit=null;do Gu();while(Nt!==0);if(($e&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=Uh,Ga(s,c,b,x,_,O),s===Ye&&(De=Ye=null,je=0),Qo=a,Yi=s,fi=c,Gp=b,Kp=g,ow=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,RC(Li,function(){return xw(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=$.T,$.T=null,g=X.p,X.p=2,x=$e,$e|=4;try{vC(s,a,c)}finally{$e=x,X.p=g,$.T=d}}Nt=1,bw(),vw(),ww()}}function bw(){if(Nt===1){Nt=0;var s=Yi,a=Qo,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var d=X.p;X.p=2;var g=$e;$e|=4;try{Qv(a,s);var b=lm,x=ib(s.containerInfo),_=b.focusedElem,O=b.selectionRange;if(x!==_&&_&&_.ownerDocument&&rb(_.ownerDocument.documentElement,_)){if(O!==null&&Dh(_)){var B=O.start,V=O.end;if(V===void 0&&(V=B),"selectionStart"in _)_.selectionStart=B,_.selectionEnd=Math.min(V,_.value.length);else{var G=_.ownerDocument||document,P=G&&G.defaultView||window;if(P.getSelection){var q=P.getSelection(),oe=_.textContent.length,me=Math.min(O.start,oe),Je=O.end===void 0?me:Math.min(O.end,oe);!q.extend&&me>Je&&(x=Je,Je=me,me=x);var j=nb(_,me),D=nb(_,Je);if(j&&D&&(q.rangeCount!==1||q.anchorNode!==j.node||q.anchorOffset!==j.offset||q.focusNode!==D.node||q.focusOffset!==D.offset)){var U=G.createRange();U.setStart(j.node,j.offset),q.removeAllRanges(),me>Je?(q.addRange(U),q.extend(D.node,D.offset)):(U.setEnd(D.node,D.offset),q.addRange(U))}}}}for(G=[],q=_;q=q.parentNode;)q.nodeType===1&&G.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<G.length;_++){var F=G[_];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}sf=!!am,lm=am=null}finally{$e=g,X.p=d,$.T=c}}s.current=a,Nt=2}}function vw(){if(Nt===2){Nt=0;var s=Yi,a=Qo,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var d=X.p;X.p=2;var g=$e;$e|=4;try{Kv(s,a.alternate,a)}finally{$e=g,X.p=d,$.T=c}}Nt=3}}function ww(){if(Nt===4||Nt===3){Nt=0,mh();var s=Yi,a=Qo,c=fi,d=ow;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nt=5:(Nt=0,Qo=Yi=null,Sw(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Ji=null),or(c),a=a.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(xr,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=$.T,g=X.p,X.p=2,$.T=null;try{for(var b=s.onRecoverableError,x=0;x<d.length;x++){var _=d[x];b(_.value,{componentStack:_.stack})}}finally{$.T=a,X.p=g}}(fi&3)!==0&&Gu(),Ar(s),g=s.pendingLanes,(c&261930)!==0&&(g&42)!==0?s===Wp?Ol++:(Ol=0,Wp=s):Ol=0,Rl(0)}}function Sw(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,ul(a)))}function Gu(){return bw(),vw(),ww(),xw()}function xw(){if(Nt!==5)return!1;var s=Yi,a=Gp;Gp=0;var c=or(fi),d=$.T,g=X.p;try{X.p=32>c?32:c,$.T=null,c=Kp,Kp=null;var b=Yi,x=fi;if(Nt=0,Qo=Yi=null,fi=0,($e&6)!==0)throw Error(r(331));var _=$e;if($e|=4,rw(b.current),ew(b,b.current,x,c),$e=_,Rl(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(xr,b)}catch{}return!0}finally{X.p=g,$.T=d,Sw(s,a)}}function Ew(s,a,c){a=qn(c,a),a=kp(s.stateNode,a,2),s=qi(s,a,2),s!==null&&(ji(s,2),Ar(s))}function Fe(s,a,c){if(s.tag===3)Ew(s,s,c);else for(;a!==null;){if(a.tag===3){Ew(a,s,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ji===null||!Ji.has(d))){s=qn(c,s),c=Tv(2),d=qi(a,c,2),d!==null&&(_v(c,d,a,s),ji(d,2),Ar(d));break}}a=a.return}}function Xp(s,a,c){var d=s.pingCache;if(d===null){d=s.pingCache=new xC;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(c)||(qp=!0,g.add(c),s=AC.bind(null,s,a,c),a.then(s,s))}function AC(s,a,c){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,Ye===s&&(je&c)===c&&(ht===4||ht===3&&(je&62914560)===je&&300>Ht()-Pu?($e&2)===0&&Zo(s,0):Vp|=c,Xo===je&&(Xo=0)),Ar(s)}function Tw(s,a){a===0&&(a=Kr()),s=Is(s,a),s!==null&&(ji(s,a),Ar(s))}function CC(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),Tw(s,c)}function OC(s,a){var c=0;switch(s.tag){case 31:case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),Tw(s,c)}function RC(s,a){return Di(s,a)}var Ku=null,ta=null,Qp=!1,Wu=!1,Zp=!1,Qi=0;function Ar(s){s!==ta&&s.next===null&&(ta===null?Ku=ta=s:ta=ta.next=s),Wu=!0,Qp||(Qp=!0,MC())}function Rl(s,a){if(!Zp&&Wu){Zp=!0;do for(var c=!1,d=Ku;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var b=0;else{var x=d.suspendedLanes,_=d.pingedLanes;b=(1<<31-wt(42|s)+1)-1,b&=g&~(x&~_),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Cw(d,b))}else b=je,b=_o(d,d===Ye?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Ds(d,b)||(c=!0,Cw(d,b));d=d.next}while(c);Zp=!1}}function NC(){_w()}function _w(){Wu=Qp=!1;var s=0;Qi!==0&&$C()&&(s=Qi);for(var a=Ht(),c=null,d=Ku;d!==null;){var g=d.next,b=kw(d,a);b===0?(d.next=null,c===null?Ku=g:c.next=g,g===null&&(ta=c)):(c=d,(s!==0||(b&3)!==0)&&(Wu=!0)),d=g}Nt!==0&&Nt!==5||Rl(s),Qi!==0&&(Qi=0)}function kw(s,a){for(var c=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var x=31-wt(b),_=1<<x,O=g[x];O===-1?((_&c)===0||(_&d)!==0)&&(g[x]=yt(_,a)):O<=a&&(s.expiredLanes|=_),b&=~_}if(a=Ye,c=je,c=_o(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,c===0||s===a&&(Ve===2||Ve===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Eo(d),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Ds(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(d!==null&&Eo(d),or(c)){case 2:case 8:c=Sn;break;case 32:c=Li;break;case 268435456:c=Ha;break;default:c=Li}return d=Aw.bind(null,s),c=Di(c,d),s.callbackPriority=a,s.callbackNode=c,a}return d!==null&&d!==null&&Eo(d),s.callbackPriority=2,s.callbackNode=null,2}function Aw(s,a){if(Nt!==0&&Nt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Gu()&&s.callbackNode!==c)return null;var d=je;return d=_o(s,s===Ye?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(lw(s,d,a),kw(s,Ht()),s.callbackNode!=null&&s.callbackNode===c?Aw.bind(null,s):null)}function Cw(s,a){if(Gu())return null;lw(s,a,!0)}function MC(){VC(function(){($e&6)!==0?Di(Vr,NC):_w()})}function em(){if(Qi===0){var s=Po;s===0&&(s=Fr,Fr<<=1,(Fr&261888)===0&&(Fr=256)),Qi=s}return Qi}function Ow(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:nu(""+s)}function Rw(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function DC(s,a,c,d,g){if(a==="submit"&&c&&c.stateNode===g){var b=Ow((g[it]||null).action),x=d.submitter;x&&(a=(a=x[it]||null)?Ow(a.formAction):x.getAttribute("formAction"),a!==null&&(b=a,x=null));var _=new ou("action","action",null,d,g);s.push({event:_,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Qi!==0){var O=x?Rw(g,x):new FormData(g);wp(c,{pending:!0,data:O,method:g.method,action:b},null,O)}}else typeof b=="function"&&(_.preventDefault(),O=x?Rw(g,x):new FormData(g),wp(c,{pending:!0,data:O,method:g.method,action:b},b,O))},currentTarget:g}]})}}for(var tm=0;tm<Ih.length;tm++){var nm=Ih[tm],LC=nm.toLowerCase(),jC=nm[0].toUpperCase()+nm.slice(1);ar(LC,"on"+jC)}ar(ab,"onAnimationEnd"),ar(lb,"onAnimationIteration"),ar(cb,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(XA,"onTransitionRun"),ar(QA,"onTransitionStart"),ar(ZA,"onTransitionCancel"),ar(ub,"onTransitionEnd"),Er("onMouseEnter",["mouseout","mouseover"]),Er("onMouseLeave",["mouseout","mouseover"]),Er("onPointerEnter",["pointerout","pointerover"]),Er("onPointerLeave",["pointerout","pointerover"]),dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function Nw(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],g=d.event;d=d.listeners;e:{var b=void 0;if(a)for(var x=d.length-1;0<=x;x--){var _=d[x],O=_.instance,B=_.currentTarget;if(_=_.listener,O!==b&&g.isPropagationStopped())break e;b=_,g.currentTarget=B;try{b(g)}catch(V){cu(V)}g.currentTarget=null,b=O}else for(x=0;x<d.length;x++){if(_=d[x],O=_.instance,B=_.currentTarget,_=_.listener,O!==b&&g.isPropagationStopped())break e;b=_,g.currentTarget=B;try{b(g)}catch(V){cu(V)}g.currentTarget=null,b=O}}}}function Le(s,a){var c=a[ko];c===void 0&&(c=a[ko]=new Set);var d=s+"__bubble";c.has(d)||(Mw(a,s,2,!1),c.add(d))}function rm(s,a,c){var d=0;a&&(d|=4),Mw(c,s,d,a)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function im(s){if(!s[Ju]){s[Ju]=!0,$t.forEach(function(c){c!=="selectionchange"&&(zC.has(c)||rm(c,!1,s),rm(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Ju]||(a[Ju]=!0,rm("selectionchange",!1,a))}}function Mw(s,a,c,d){switch(aS(a)){case 2:var g=uO;break;case 8:g=fO;break;default:g=vm}c=g.bind(null,a,c,s),g=void 0,!Th||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(a,c,{capture:!0,passive:g}):s.addEventListener(a,c,!0):g!==void 0?s.addEventListener(a,c,{passive:g}):s.addEventListener(a,c,!1)}function sm(s,a,c,d,g){var b=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var _=d.stateNode.containerInfo;if(_===g)break;if(x===4)for(x=d.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;_!==null;){if(x=Y(_),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){d=b=x;continue e}_=_.parentNode}}d=d.return}I0(function(){var B=b,V=xh(c),G=[];e:{var P=fb.get(s);if(P!==void 0){var q=ou,oe=s;switch(s){case"keypress":if(iu(c)===0)break e;case"keydown":case"keyup":q=OA;break;case"focusin":oe="focus",q=Ch;break;case"focusout":oe="blur",q=Ch;break;case"beforeblur":case"afterblur":q=Ch;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=P0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=yA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=MA;break;case ab:case lb:case cb:q=wA;break;case ub:q=LA;break;case"scroll":case"scrollend":q=mA;break;case"wheel":q=zA;break;case"copy":case"cut":case"paste":q=xA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=$0;break;case"toggle":case"beforetoggle":q=UA}var me=(a&4)!==0,Je=!me&&(s==="scroll"||s==="scrollend"),j=me?P!==null?P+"Capture":null:P;me=[];for(var D=B,U;D!==null;){var F=D;if(U=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||U===null||j===null||(F=Za(D,j),F!=null&&me.push(Ml(D,F,U))),Je)break;D=D.return}0<me.length&&(P=new q(P,oe,null,c,V),G.push({event:P,listeners:me}))}}if((a&7)===0){e:{if(P=s==="mouseover"||s==="pointerover",q=s==="mouseout"||s==="pointerout",P&&c!==Sh&&(oe=c.relatedTarget||c.fromElement)&&(Y(oe)||oe[Wr]))break e;if((q||P)&&(P=V.window===V?V:(P=V.ownerDocument)?P.defaultView||P.parentWindow:window,q?(oe=c.relatedTarget||c.toElement,q=B,oe=oe?Y(oe):null,oe!==null&&(Je=o(oe),me=oe.tag,oe!==Je||me!==5&&me!==27&&me!==6)&&(oe=null)):(q=null,oe=B),q!==oe)){if(me=P0,F="onMouseLeave",j="onMouseEnter",D="mouse",(s==="pointerout"||s==="pointerover")&&(me=$0,F="onPointerLeave",j="onPointerEnter",D="pointer"),Je=q==null?P:qe(q),U=oe==null?P:qe(oe),P=new me(F,D+"leave",q,c,V),P.target=Je,P.relatedTarget=U,F=null,Y(V)===B&&(me=new me(j,D+"enter",oe,c,V),me.target=U,me.relatedTarget=Je,F=me),Je=F,q&&oe)t:{for(me=IC,j=q,D=oe,U=0,F=j;F;F=me(F))U++;F=0;for(var he=D;he;he=me(he))F++;for(;0<U-F;)j=me(j),U--;for(;0<F-U;)D=me(D),F--;for(;U--;){if(j===D||D!==null&&j===D.alternate){me=j;break t}j=me(j),D=me(D)}me=null}else me=null;q!==null&&Dw(G,P,q,me,!1),oe!==null&&Je!==null&&Dw(G,Je,oe,me,!0)}}e:{if(P=B?qe(B):window,q=P.nodeName&&P.nodeName.toLowerCase(),q==="select"||q==="input"&&P.type==="file")var Pe=Y0;else if(W0(P))if(X0)Pe=WA;else{Pe=GA;var ce=FA}else q=P.nodeName,!q||q.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?B&&wh(B.elementType)&&(Pe=Y0):Pe=KA;if(Pe&&(Pe=Pe(s,B))){J0(G,Pe,c,V);break e}ce&&ce(s,P,B),s==="focusout"&&B&&P.type==="number"&&B.memoizedProps.value!=null&&vh(P,"number",P.value)}switch(ce=B?qe(B):window,s){case"focusin":(W0(ce)||ce.contentEditable==="true")&&(Mo=ce,Lh=B,al=null);break;case"focusout":al=Lh=Mo=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,sb(G,c,V);break;case"selectionchange":if(YA)break;case"keydown":case"keyup":sb(G,c,V)}var Ae;if(Rh)e:{switch(s){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else No?G0(s,c)&&(ze="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(ze="onCompositionStart");ze&&(q0&&c.locale!=="ko"&&(No||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&No&&(Ae=U0()):(zi=V,_h="value"in zi?zi.value:zi.textContent,No=!0)),ce=Yu(B,ze),0<ce.length&&(ze=new H0(ze,s,null,c,V),G.push({event:ze,listeners:ce}),Ae?ze.data=Ae:(Ae=K0(c),Ae!==null&&(ze.data=Ae)))),(Ae=PA?HA(s,c):$A(s,c))&&(ze=Yu(B,"onBeforeInput"),0<ze.length&&(ce=new H0("onBeforeInput","beforeinput",null,c,V),G.push({event:ce,listeners:ze}),ce.data=Ae)),DC(G,s,B,c,V)}Nw(G,a)})}function Ml(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Yu(s,a){for(var c=a+"Capture",d=[];s!==null;){var g=s,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=Za(s,c),g!=null&&d.unshift(Ml(s,g,b)),g=Za(s,a),g!=null&&d.push(Ml(s,g,b))),s.tag===3)return d;s=s.return}return[]}function IC(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Dw(s,a,c,d,g){for(var b=a._reactName,x=[];c!==null&&c!==d;){var _=c,O=_.alternate,B=_.stateNode;if(_=_.tag,O!==null&&O===d)break;_!==5&&_!==26&&_!==27||B===null||(O=B,g?(B=Za(c,b),B!=null&&x.unshift(Ml(c,B,O))):g||(B=Za(c,b),B!=null&&x.push(Ml(c,B,O)))),c=c.return}x.length!==0&&s.push({event:a,listeners:x})}var UC=/\r\n?/g,BC=/\u0000|\uFFFD/g;function Lw(s){return(typeof s=="string"?s:""+s).replace(UC,`
`).replace(BC,"")}function jw(s,a){return a=Lw(a),Lw(s)===a}function We(s,a,c,d,g,b){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Co(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Co(s,""+d);break;case"className":eu(s,"class",d);break;case"tabIndex":eu(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":eu(s,c,d);break;case"style":j0(s,d,b);break;case"data":if(a!=="object"){eu(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(c);break}d=nu(""+d),s.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(a!=="input"&&We(s,a,"name",g.name,g,null),We(s,a,"formEncType",g.formEncType,g,null),We(s,a,"formMethod",g.formMethod,g,null),We(s,a,"formTarget",g.formTarget,g,null)):(We(s,a,"encType",g.encType,g,null),We(s,a,"method",g.method,g,null),We(s,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(c);break}d=nu(""+d),s.setAttribute(c,d);break;case"onClick":d!=null&&(s.onclick=Yr);break;case"onScroll":d!=null&&Le("scroll",s);break;case"onScrollEnd":d!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}c=nu(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,""+d):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":d===!0?s.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,d):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(c,d):s.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(c):s.setAttribute(c,d);break;case"popover":Le("beforetoggle",s),Le("toggle",s),Zc(s,"popover",d);break;case"xlinkActuate":Jr(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Jr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Jr(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Jr(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Jr(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Jr(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Jr(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Jr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Jr(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Zc(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=hA.get(c)||c,Zc(s,c,d))}}function om(s,a,c,d,g,b){switch(c){case"style":j0(s,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof d=="string"?Co(s,d):(typeof d=="number"||typeof d=="bigint")&&Co(s,""+d);break;case"onScroll":d!=null&&Le("scroll",s);break;case"onScrollEnd":d!=null&&Le("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Yr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bn.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),b=s[it]||null,b=b!=null?b[c]:null,typeof b=="function"&&s.removeEventListener(a,b,g),typeof d=="function")){typeof b!="function"&&b!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,d,g);break e}c in s?s[c]=d:d===!0?s.setAttribute(c,""):Zc(s,c,d)}}}function Gt(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var d=!1,g=!1,b;for(b in c)if(c.hasOwnProperty(b)){var x=c[b];if(x!=null)switch(b){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:We(s,a,b,x,c,null)}}g&&We(s,a,"srcSet",c.srcSet,c,null),d&&We(s,a,"src",c.src,c,null);return;case"input":Le("invalid",s);var _=b=x=g=null,O=null,B=null;for(d in c)if(c.hasOwnProperty(d)){var V=c[d];if(V!=null)switch(d){case"name":g=V;break;case"type":x=V;break;case"checked":O=V;break;case"defaultChecked":B=V;break;case"value":b=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,a));break;default:We(s,a,d,V,c,null)}}N0(s,b,_,O,B,x,g,!1);return;case"select":Le("invalid",s),d=x=b=null;for(g in c)if(c.hasOwnProperty(g)&&(_=c[g],_!=null))switch(g){case"value":b=_;break;case"defaultValue":x=_;break;case"multiple":d=_;default:We(s,a,g,_,c,null)}a=b,c=x,s.multiple=!!d,a!=null?Ao(s,!!d,a,!1):c!=null&&Ao(s,!!d,c,!0);return;case"textarea":Le("invalid",s),b=g=d=null;for(x in c)if(c.hasOwnProperty(x)&&(_=c[x],_!=null))switch(x){case"value":d=_;break;case"defaultValue":g=_;break;case"children":b=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:We(s,a,x,_,c,null)}D0(s,d,g,b);return;case"option":for(O in c)c.hasOwnProperty(O)&&(d=c[O],d!=null)&&(O==="selected"?s.selected=d&&typeof d!="function"&&typeof d!="symbol":We(s,a,O,d,c,null));return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(d=0;d<Nl.length;d++)Le(Nl[d],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in c)if(c.hasOwnProperty(B)&&(d=c[B],d!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:We(s,a,B,d,c,null)}return;default:if(wh(a)){for(V in c)c.hasOwnProperty(V)&&(d=c[V],d!==void 0&&om(s,a,V,d,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(d=c[_],d!=null&&We(s,a,_,d,c,null))}function PC(s,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,x=null,_=null,O=null,B=null,V=null;for(q in c){var G=c[q];if(c.hasOwnProperty(q)&&G!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":O=G;default:d.hasOwnProperty(q)||We(s,a,q,null,d,G)}}for(var P in d){var q=d[P];if(G=c[P],d.hasOwnProperty(P)&&(q!=null||G!=null))switch(P){case"type":b=q;break;case"name":g=q;break;case"checked":B=q;break;case"defaultChecked":V=q;break;case"value":x=q;break;case"defaultValue":_=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,a));break;default:q!==G&&We(s,a,P,q,d,G)}}bh(s,x,_,O,B,V,b,g);return;case"select":q=x=_=P=null;for(b in c)if(O=c[b],c.hasOwnProperty(b)&&O!=null)switch(b){case"value":break;case"multiple":q=O;default:d.hasOwnProperty(b)||We(s,a,b,null,d,O)}for(g in d)if(b=d[g],O=c[g],d.hasOwnProperty(g)&&(b!=null||O!=null))switch(g){case"value":P=b;break;case"defaultValue":_=b;break;case"multiple":x=b;default:b!==O&&We(s,a,g,b,d,O)}a=_,c=x,d=q,P!=null?Ao(s,!!c,P,!1):!!d!=!!c&&(a!=null?Ao(s,!!c,a,!0):Ao(s,!!c,c?[]:"",!1));return;case"textarea":q=P=null;for(_ in c)if(g=c[_],c.hasOwnProperty(_)&&g!=null&&!d.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:We(s,a,_,null,d,g)}for(x in d)if(g=d[x],b=c[x],d.hasOwnProperty(x)&&(g!=null||b!=null))switch(x){case"value":P=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==b&&We(s,a,x,g,d,b)}M0(s,P,q);return;case"option":for(var oe in c)P=c[oe],c.hasOwnProperty(oe)&&P!=null&&!d.hasOwnProperty(oe)&&(oe==="selected"?s.selected=!1:We(s,a,oe,null,d,P));for(O in d)P=d[O],q=c[O],d.hasOwnProperty(O)&&P!==q&&(P!=null||q!=null)&&(O==="selected"?s.selected=P&&typeof P!="function"&&typeof P!="symbol":We(s,a,O,P,d,q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in c)P=c[me],c.hasOwnProperty(me)&&P!=null&&!d.hasOwnProperty(me)&&We(s,a,me,null,d,P);for(B in d)if(P=d[B],q=c[B],d.hasOwnProperty(B)&&P!==q&&(P!=null||q!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(137,a));break;default:We(s,a,B,P,d,q)}return;default:if(wh(a)){for(var Je in c)P=c[Je],c.hasOwnProperty(Je)&&P!==void 0&&!d.hasOwnProperty(Je)&&om(s,a,Je,void 0,d,P);for(V in d)P=d[V],q=c[V],!d.hasOwnProperty(V)||P===q||P===void 0&&q===void 0||om(s,a,V,P,d,q);return}}for(var j in c)P=c[j],c.hasOwnProperty(j)&&P!=null&&!d.hasOwnProperty(j)&&We(s,a,j,null,d,P);for(G in d)P=d[G],q=c[G],!d.hasOwnProperty(G)||P===q||P==null&&q==null||We(s,a,G,P,d,q)}function zw(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HC(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],b=g.transferSize,x=g.initiatorType,_=g.duration;if(b&&_&&zw(x)){for(x=0,_=g.responseEnd,d+=1;d<c.length;d++){var O=c[d],B=O.startTime;if(B>_)break;var V=O.transferSize,G=O.initiatorType;V&&zw(G)&&(O=O.responseEnd,x+=V*(O<_?1:(_-B)/(O-B)))}if(--d,a+=8*(b+x)/(g.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var am=null,lm=null;function Xu(s){return s.nodeType===9?s:s.ownerDocument}function Iw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uw(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function cm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var um=null;function $C(){var s=window.event;return s&&s.type==="popstate"?s===um?!1:(um=s,!0):(um=null,!1)}var Bw=typeof setTimeout=="function"?setTimeout:void 0,qC=typeof clearTimeout=="function"?clearTimeout:void 0,Pw=typeof Promise=="function"?Promise:void 0,VC=typeof queueMicrotask=="function"?queueMicrotask:typeof Pw<"u"?function(s){return Pw.resolve(null).then(s).catch(FC)}:Bw;function FC(s){setTimeout(function(){throw s})}function Zi(s){return s==="head"}function Hw(s,a){var c=a,d=0;do{var g=c.nextSibling;if(s.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){s.removeChild(g),sa(a);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Dl(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Dl(c);for(var b=c.firstChild;b;){var x=b.nextSibling,_=b.nodeName;b[le]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=x}}else c==="body"&&Dl(s.ownerDocument.body);c=g}while(c);sa(a)}function $w(s,a){var c=s;s=0;do{var d=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=d}while(c)}function fm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":fm(c),M(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function GC(s,a,c,d){for(;s.nodeType===1;){var g=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[le])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Wn(s.nextSibling),s===null)break}return null}function KC(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Wn(s.nextSibling),s===null))return null;return s}function qw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Wn(s.nextSibling),s===null))return null;return s}function dm(s){return s.data==="$?"||s.data==="$~"}function hm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function WC(s,a){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||c.readyState!=="loading")a();else{var d=function(){a(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Wn(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var pm=null;function Vw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(a===0)return Wn(s.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}s=s.nextSibling}return null}function Fw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return s;a--}else c!=="/$"&&c!=="/&"||a++}s=s.previousSibling}return null}function Gw(s,a,c){switch(a=Xu(c),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Dl(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);M(s)}var Jn=new Map,Kw=new Set;function Qu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var di=X.d;X.d={f:JC,r:YC,D:XC,C:QC,L:ZC,m:eO,X:nO,S:tO,M:rO};function JC(){var s=di.f(),a=qu();return s||a}function YC(s){var a=re(s);a!==null&&a.tag===5&&a.type==="form"?uv(a):di.r(s)}var na=typeof document>"u"?null:document;function Ww(s,a,c){var d=na;if(d&&typeof a=="string"&&a){var g=Hn(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Kw.has(g)||(Kw.add(g),s={rel:s,crossOrigin:c,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),Gt(a,"link",s),Re(a),d.head.appendChild(a)))}}function XC(s){di.D(s),Ww("dns-prefetch",s,null)}function QC(s,a){di.C(s,a),Ww("preconnect",s,a)}function ZC(s,a,c){di.L(s,a,c);var d=na;if(d&&s&&a){var g='link[rel="preload"][as="'+Hn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Hn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Hn(c.imageSizes)+'"]')):g+='[href="'+Hn(s)+'"]';var b=g;switch(a){case"style":b=ra(s);break;case"script":b=ia(s)}Jn.has(b)||(s=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),Jn.set(b,s),d.querySelector(g)!==null||a==="style"&&d.querySelector(Ll(b))||a==="script"&&d.querySelector(jl(b))||(a=d.createElement("link"),Gt(a,"link",s),Re(a),d.head.appendChild(a)))}}function eO(s,a){di.m(s,a);var c=na;if(c&&s){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+Hn(d)+'"][href="'+Hn(s)+'"]',b=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ia(s)}if(!Jn.has(b)&&(s=m({rel:"modulepreload",href:s},a),Jn.set(b,s),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(jl(b)))return}d=c.createElement("link"),Gt(d,"link",s),Re(d),c.head.appendChild(d)}}}function tO(s,a,c){di.S(s,a,c);var d=na;if(d&&s){var g=lt(d).hoistableStyles,b=ra(s);a=a||"default";var x=g.get(b);if(!x){var _={loading:0,preload:null};if(x=d.querySelector(Ll(b)))_.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":a},c),(c=Jn.get(b))&&mm(s,c);var O=x=d.createElement("link");Re(O),Gt(O,"link",s),O._p=new Promise(function(B,V){O.onload=B,O.onerror=V}),O.addEventListener("load",function(){_.loading|=1}),O.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Zu(x,a,d)}x={type:"stylesheet",instance:x,count:1,state:_},g.set(b,x)}}}function nO(s,a){di.X(s,a);var c=na;if(c&&s){var d=lt(c).hoistableScripts,g=ia(s),b=d.get(g);b||(b=c.querySelector(jl(g)),b||(s=m({src:s,async:!0},a),(a=Jn.get(g))&&gm(s,a),b=c.createElement("script"),Re(b),Gt(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function rO(s,a){di.M(s,a);var c=na;if(c&&s){var d=lt(c).hoistableScripts,g=ia(s),b=d.get(g);b||(b=c.querySelector(jl(g)),b||(s=m({src:s,async:!0,type:"module"},a),(a=Jn.get(g))&&gm(s,a),b=c.createElement("script"),Re(b),Gt(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function Jw(s,a,c,d){var g=(g=_e.current)?Qu(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=ra(c.href),c=lt(g).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=ra(c.href);var b=lt(g).hoistableStyles,x=b.get(s);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,x),(b=g.querySelector(Ll(s)))&&!b._p&&(x.instance=b,x.state.loading=5),Jn.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Jn.set(s,c),b||iO(g,s,c,x.state))),a&&d===null)throw Error(r(528,""));return x}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ia(c),c=lt(g).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function ra(s){return'href="'+Hn(s)+'"'}function Ll(s){return'link[rel="stylesheet"]['+s+"]"}function Yw(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function iO(s,a,c,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Gt(a,"link",c),Re(a),s.head.appendChild(a))}function ia(s){return'[src="'+Hn(s)+'"]'}function jl(s){return"script[async]"+s}function Xw(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+Hn(c.href)+'"]');if(d)return a.instance=d,Re(d),d;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Re(d),Gt(d,"style",g),Zu(d,c.precedence,s),a.instance=d;case"stylesheet":g=ra(c.href);var b=s.querySelector(Ll(g));if(b)return a.state.loading|=4,a.instance=b,Re(b),b;d=Yw(c),(g=Jn.get(g))&&mm(d,g),b=(s.ownerDocument||s).createElement("link"),Re(b);var x=b;return x._p=new Promise(function(_,O){x.onload=_,x.onerror=O}),Gt(b,"link",d),a.state.loading|=4,Zu(b,c.precedence,s),a.instance=b;case"script":return b=ia(c.src),(g=s.querySelector(jl(b)))?(a.instance=g,Re(g),g):(d=c,(g=Jn.get(b))&&(d=m({},c),gm(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),Re(g),Gt(g,"link",d),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Zu(d,c.precedence,s));return a.instance}function Zu(s,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,b=g,x=0;x<d.length;x++){var _=d[x];if(_.dataset.precedence===a)b=_;else if(b!==g)break}b?b.parentNode.insertBefore(s,b.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function mm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function gm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var ef=null;function Qw(s,a,c){if(ef===null){var d=new Map,g=ef=new Map;g.set(c,d)}else g=ef,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(s))return d;for(d.set(s,null),c=c.getElementsByTagName(s),g=0;g<c.length;g++){var b=c[g];if(!(b[le]||b[St]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var x=b.getAttribute(a)||"";x=s+x;var _=d.get(x);_?_.push(b):d.set(x,[b])}}return d}function Zw(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function sO(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(s=a.disabled,typeof a.precedence=="string"&&s==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function eS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function oO(s,a,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=ra(d.href),b=a.querySelector(Ll(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=tf.bind(s),a.then(s,s)),c.state.loading|=4,c.instance=b,Re(b);return}b=a.ownerDocument||a,d=Yw(d),(g=Jn.get(g))&&mm(d,g),b=b.createElement("link"),Re(b);var x=b;x._p=new Promise(function(_,O){x.onload=_,x.onerror=O}),Gt(b,"link",d),c.instance=b}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=tf.bind(s),a.addEventListener("load",c),a.addEventListener("error",c))}}var ym=0;function aO(s,a){return s.stylesheets&&s.count===0&&rf(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var d=setTimeout(function(){if(s.stylesheets&&rf(s,s.stylesheets),s.unsuspend){var b=s.unsuspend;s.unsuspend=null,b()}},6e4+a);0<s.imgBytes&&ym===0&&(ym=62500*HC());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&rf(s,s.stylesheets),s.unsuspend)){var b=s.unsuspend;s.unsuspend=null,b()}},(s.imgBytes>ym?50:800)+a);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var nf=null;function rf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,nf=new Map,a.forEach(lO,s),nf=null,tf.call(s))}function lO(s,a){if(!(a.state.loading&4)){var c=nf.get(s);if(c)var d=c.get(null);else{c=new Map,nf.set(s,c);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var x=g[b];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(c.set(x.dataset.precedence,x),d=x)}d&&c.set(null,d)}g=a.instance,x=g.getAttribute("data-precedence"),b=c.get(x)||d,b===d&&c.set(null,g),c.set(x,g),this.count++,d=tf.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),b?b.parentNode.insertBefore(g,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var zl={$$typeof:C,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function cO(s,a,c,d,g,b,x,_,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fa(0),this.hiddenUpdates=Fa(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function tS(s,a,c,d,g,b,x,_,O,B,V,G){return s=new cO(s,a,c,x,O,B,V,G,_),a=1,b===!0&&(a|=24),b=Tn(3,null,null,a),s.current=b,b.stateNode=s,a=Yh(),a.refCount++,s.pooledCache=a,a.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:a},ep(b),s}function nS(s){return s?(s=jo,s):jo}function rS(s,a,c,d,g,b){g=nS(g),d.context===null?d.context=g:d.pendingContext=g,d=$i(a),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=qi(s,d,a),c!==null&&(bn(c,s,a),pl(c,s,a))}function iS(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function bm(s,a){iS(s,a),(s=s.alternate)&&iS(s,a)}function sS(s){if(s.tag===13||s.tag===31){var a=Is(s,67108864);a!==null&&bn(a,s,67108864),bm(s,67108864)}}function oS(s){if(s.tag===13||s.tag===31){var a=On();a=fn(a);var c=Is(s,a);c!==null&&bn(c,s,a),bm(s,a)}}var sf=!0;function uO(s,a,c,d){var g=$.T;$.T=null;var b=X.p;try{X.p=2,vm(s,a,c,d)}finally{X.p=b,$.T=g}}function fO(s,a,c,d){var g=$.T;$.T=null;var b=X.p;try{X.p=8,vm(s,a,c,d)}finally{X.p=b,$.T=g}}function vm(s,a,c,d){if(sf){var g=wm(d);if(g===null)sm(s,a,d,of,c),lS(s,d);else if(hO(g,s,a,c,d))d.stopPropagation();else if(lS(s,d),a&4&&-1<dO.indexOf(s)){for(;g!==null;){var b=re(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var x=xn(b.pendingLanes);if(x!==0){var _=b;for(_.pendingLanes|=2,_.entangledLanes|=2;x;){var O=1<<31-wt(x);_.entanglements[1]|=O,x&=~O}Ar(b),($e&6)===0&&(Hu=Ht()+500,Rl(0))}}break;case 31:case 13:_=Is(b,2),_!==null&&bn(_,b,2),qu(),bm(b,2)}if(b=wm(d),b===null&&sm(s,a,d,of,c),b===g)break;g=b}g!==null&&d.stopPropagation()}else sm(s,a,d,null,c)}}function wm(s){return s=xh(s),Sm(s)}var of=null;function Sm(s){if(of=null,s=Y(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=l(a),s!==null)return s;s=null}else if(c===31){if(s=u(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return of=s,null}function aS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ms()){case Vr:return 2;case Sn:return 8;case Li:case Kc:return 32;case Ha:return 268435456;default:return 32}default:return 32}}var xm=!1,es=null,ts=null,ns=null,Il=new Map,Ul=new Map,rs=[],dO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lS(s,a){switch(s){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Il.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(a.pointerId)}}function Bl(s,a,c,d,g,b){return s===null||s.nativeEvent!==b?(s={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[g]},a!==null&&(a=re(a),a!==null&&sS(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function hO(s,a,c,d,g){switch(a){case"focusin":return es=Bl(es,s,a,c,d,g),!0;case"dragenter":return ts=Bl(ts,s,a,c,d,g),!0;case"mouseover":return ns=Bl(ns,s,a,c,d,g),!0;case"pointerover":var b=g.pointerId;return Il.set(b,Bl(Il.get(b)||null,s,a,c,d,g)),!0;case"gotpointercapture":return b=g.pointerId,Ul.set(b,Bl(Ul.get(b)||null,s,a,c,d,g)),!0}return!1}function cS(s){var a=Y(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){s.blockedOn=a,Ya(s.priority,function(){oS(c)});return}}else if(a===31){if(a=u(c),a!==null){s.blockedOn=a,Ya(s.priority,function(){oS(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function af(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=wm(s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);Sh=d,c.target.dispatchEvent(d),Sh=null}else return a=re(c),a!==null&&sS(a),s.blockedOn=c,!1;a.shift()}return!0}function uS(s,a,c){af(s)&&c.delete(a)}function pO(){xm=!1,es!==null&&af(es)&&(es=null),ts!==null&&af(ts)&&(ts=null),ns!==null&&af(ns)&&(ns=null),Il.forEach(uS),Ul.forEach(uS)}function lf(s,a){s.blockedOn===a&&(s.blockedOn=null,xm||(xm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pO)))}var cf=null;function fS(s){cf!==s&&(cf=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){cf===s&&(cf=null);for(var a=0;a<s.length;a+=3){var c=s[a],d=s[a+1],g=s[a+2];if(typeof d!="function"){if(Sm(d||c)===null)continue;break}var b=re(c);b!==null&&(s.splice(a,3),a-=3,wp(b,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function sa(s){function a(O){return lf(O,s)}es!==null&&lf(es,s),ts!==null&&lf(ts,s),ns!==null&&lf(ns,s),Il.forEach(a),Ul.forEach(a);for(var c=0;c<rs.length;c++){var d=rs[c];d.blockedOn===s&&(d.blockedOn=null)}for(;0<rs.length&&(c=rs[0],c.blockedOn===null);)cS(c),c.blockedOn===null&&rs.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],b=c[d+1],x=g[it]||null;if(typeof b=="function")x||fS(c);else if(x){var _=null;if(b&&b.hasAttribute("formAction")){if(g=b,x=b[it]||null)_=x.formAction;else if(Sm(g)!==null)continue}else _=x.action;typeof _=="function"?c[d+1]=_:(c.splice(d,3),d-=3),fS(c)}}}function dS(){function s(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(x){return g=x})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Em(s){this._internalRoot=s}uf.prototype.render=Em.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,d=On();rS(c,d,s,a,null,null)},uf.prototype.unmount=Em.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;rS(s.current,2,null,s,null,null),qu(),a[Wr]=null}};function uf(s){this._internalRoot=s}uf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ja();s={blockedOn:null,target:s,priority:a};for(var c=0;c<rs.length&&a!==0&&a<rs[c].priority;c++);rs.splice(c,0,s),c===0&&cS(s)}};var hS=e.version;if(hS!=="19.2.4")throw Error(r(527,hS,"19.2.4"));X.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var mO={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{xr=ff.inject(mO),Lt=ff}catch{}}return Hl.createRoot=function(s,a){if(!i(s))throw Error(r(299));var c=!1,d="",g=wv,b=Sv,x=xv;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=tS(s,1,!1,null,null,c,d,null,g,b,x,dS),s[Wr]=a.current,im(s),new Em(a)},Hl.hydrateRoot=function(s,a,c){if(!i(s))throw Error(r(299));var d=!1,g="",b=wv,x=Sv,_=xv,O=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.formState!==void 0&&(O=c.formState)),a=tS(s,1,!0,a,c??null,d,g,O,b,x,_,dS),a.context=nS(null),c=a.current,d=On(),d=fn(d),g=$i(d),g.callback=null,qi(c,g,d),c=d,a.current.lanes=c,ji(a,c),Ar(a),s[Wr]=a.current,im(s),new uf(a)},Hl.version="19.2.4",Hl}var ES;function TO(){if(ES)return km.exports;ES=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),km.exports=EO(),km.exports}var _O=TO();const kO=Sy(_O);var TS="popstate";function AO(t={}){function e(i,o){let{pathname:l="/",search:u="",hash:f=""}=bo(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),_g("",{pathname:l,search:u,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let l=i.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let f=i.location.href,h=f.indexOf("#");u=h===-1?f:f.slice(0,h)}return u+"#"+(typeof o=="string"?o:gc(o))}function r(i,o){nr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return OO(e,n,r,t)}function ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CO(){return Math.random().toString(36).substring(2,10)}function _S(t,e){return{usr:t.state,key:t.key,idx:e}}function _g(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bo(e):e,state:n,key:e&&e.key||r||CO()}}function gc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function OO(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u="POP",f=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let E=p(),T=E==null?null:E-h;h=E,f&&f({action:u,location:S.location,delta:T})}function y(E,T){u="PUSH";let A=_g(S.location,E,T);n&&n(A,E),h=p()+1;let C=_S(A,h),L=S.createHref(A);try{l.pushState(C,"",L)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(L)}o&&f&&f({action:u,location:S.location,delta:1})}function v(E,T){u="REPLACE";let A=_g(S.location,E,T);n&&n(A,E),h=p();let C=_S(A,h),L=S.createHref(A);l.replaceState(C,"",L),o&&f&&f({action:u,location:S.location,delta:0})}function w(E){return RO(E)}let S={get action(){return u},get location(){return t(i,l)},listen(E){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(TS,m),f=E,()=>{i.removeEventListener(TS,m),f=null}},createHref(E){return e(i,E)},createURL:w,encodeLocation(E){let T=w(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:y,replace:v,go(E){return l.go(E)}};return S}function RO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ot(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:gc(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function i1(t,e,n="/"){return NO(t,e,n,!1)}function NO(t,e,n,r){let i=typeof e=="string"?bo(e):e,o=ki(i.pathname||"/",n);if(o==null)return null;let l=s1(t);MO(l);let u=null;for(let f=0;u==null&&f<l.length;++f){let h=qO(o);u=HO(l[f],h,r)}return u}function s1(t,e=[],n=[],r="",i=!1){let o=(l,u,f=i,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&f)return;ot(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=Ei([r,p.relativePath]),y=n.concat(p);l.children&&l.children.length>0&&(ot(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),s1(l.children,e,y,m,f)),!(l.path==null&&!l.index)&&e.push({path:m,score:BO(m,l.index),routesMeta:y})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let f of o1(l.path))o(l,u,!0,f)}),e}function o1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=o1(r.join("/")),u=[];return u.push(...l.map(f=>f===""?o:[o,f].join("/"))),i&&u.push(...l),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function MO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var DO=/^:[\w-]+$/,LO=3,jO=2,zO=1,IO=10,UO=-2,kS=t=>t==="*";function BO(t,e){let n=t.split("/"),r=n.length;return n.some(kS)&&(r+=UO),e&&(r+=jO),n.filter(i=>!kS(i)).reduce((i,o)=>i+(DO.test(o)?LO:o===""?zO:IO),r)}function PO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function HO(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",l=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=Gf({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),y=f.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=Gf({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Ei([o,m.pathname]),pathnameBase:KO(Ei([o,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(o=Ei([o,m.pathnameBase]))}return l}function Gf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$O(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},y)=>{if(p==="*"){let w=u[y]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[y];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function $O(t,e=!1,n=!0){nr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function qO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ki(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var VO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function FO(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?bo(t):t,o;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?o=AS(n.substring(1),"/"):o=AS(n,e)):o=e,{pathname:o,search:WO(r),hash:JO(i)}}function AS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Rm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xy(t){let e=GO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Ey(t,e,n,r=!1){let i;typeof t=="string"?i=bo(t):(i={...t},ot(!i.pathname||!i.pathname.includes("?"),Rm("?","pathname","search",i)),ot(!i.pathname||!i.pathname.includes("#"),Rm("#","pathname","hash",i)),ot(!i.search||!i.search.includes("#"),Rm("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let m=e.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}u=m>=0?e[m]:"/"}let f=FO(i,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var Ei=t=>t.join("/").replace(/\/\/+/g,"/"),KO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,YO=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function XO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function QO(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var a1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function l1(t,e){let n=t;if(typeof n!="string"||!VO.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(a1)try{let o=new URL(window.location.href),l=n.startsWith("//")?new URL(o.protocol+n):new URL(n),u=ki(l.pathname,e);l.origin===o.origin&&u!=null?n=u+l.search+l.hash:i=!0}catch{nr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var c1=["POST","PUT","PATCH","DELETE"];new Set(c1);var ZO=["GET",...c1];new Set(ZO);var ja=R.createContext(null);ja.displayName="DataRouter";var qd=R.createContext(null);qd.displayName="DataRouterState";var eR=R.createContext(!1),u1=R.createContext({isTransitioning:!1});u1.displayName="ViewTransition";var tR=R.createContext(new Map);tR.displayName="Fetchers";var nR=R.createContext(null);nR.displayName="Await";var jn=R.createContext(null);jn.displayName="Navigation";var Ic=R.createContext(null);Ic.displayName="Location";var Sr=R.createContext({outlet:null,matches:[],isDataRoute:!1});Sr.displayName="Route";var Ty=R.createContext(null);Ty.displayName="RouteError";var f1="REACT_ROUTER_ERROR",rR="REDIRECT",iR="ROUTE_ERROR_RESPONSE";function sR(t){if(t.startsWith(`${f1}:${rR}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function oR(t){if(t.startsWith(`${f1}:${iR}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new YO(e.status,e.statusText,e.data)}catch{}}function aR(t,{relative:e}={}){ot(za(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(jn),{hash:i,pathname:o,search:l}=Bc(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Ei([n,o])),r.createHref({pathname:u,search:l,hash:i})}function za(){return R.useContext(Ic)!=null}function Ai(){return ot(za(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Ic).location}var d1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h1(t){R.useContext(jn).static||R.useLayoutEffect(t)}function Uc(){let{isDataRoute:t}=R.useContext(Sr);return t?xR():lR()}function lR(){ot(za(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(ja),{basename:e,navigator:n}=R.useContext(jn),{matches:r}=R.useContext(Sr),{pathname:i}=Ai(),o=JSON.stringify(xy(r)),l=R.useRef(!1);return h1(()=>{l.current=!0}),R.useCallback((f,h={})=>{if(nr(l.current,d1),!l.current)return;if(typeof f=="number"){n.go(f);return}let p=Ey(f,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ei([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,o,i,t])}var cR=R.createContext(null);function uR(t){let e=R.useContext(Sr).outlet;return R.useMemo(()=>e&&R.createElement(cR.Provider,{value:t},e),[e,t])}function Bc(t,{relative:e}={}){let{matches:n}=R.useContext(Sr),{pathname:r}=Ai(),i=JSON.stringify(xy(n));return R.useMemo(()=>Ey(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function fR(t,e){return p1(t,e)}function p1(t,e,n,r,i){ot(za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=R.useContext(jn),{matches:l}=R.useContext(Sr),u=l[l.length-1],f=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let A=m&&m.path||"";g1(h,!m||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let y=Ai(),v;if(e){let A=typeof e=="string"?bo(e):e;ot(p==="/"||A.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${A.pathname}" was given in the \`location\` prop.`),v=A}else v=y;let w=v.pathname||"/",S=w;if(p!=="/"){let A=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=i1(t,{pathname:S});nr(m||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),nr(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=gR(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},f,A.params),pathname:Ei([p,o.encodeLocation?o.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?p:Ei([p,o.encodeLocation?o.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),l,n,r,i);return e&&T?R.createElement(Ic.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function dR(){let t=SR(),e=XO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,l)}var hR=R.createElement(dR,null),m1=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=oR(t.digest);n&&(t=n)}let e=t!==void 0?R.createElement(Sr.Provider,{value:this.props.routeContext},R.createElement(Ty.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?R.createElement(pR,{error:t},e):e}};m1.contextType=eR;var Nm=new WeakMap;function pR({children:t,error:e}){let{basename:n}=R.useContext(jn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=sR(e.digest);if(r){let i=Nm.get(e);if(i)throw i;let o=l1(r.location,n);if(a1&&!Nm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Nm.set(e,l),l}return R.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function mR({routeContext:t,match:e,children:n}){let r=R.useContext(ja);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Sr.Provider,{value:t},n)}function gR(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n?.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);ot(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,f=-1;if(n)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:y,errors:v}=n,w=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let h=n&&r?(p,m)=>{r(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:QO(n.matches),errorInfo:m})}:void 0;return o.reduceRight((p,m,y)=>{let v,w=!1,S=null,E=null;n&&(v=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||hR,u&&(f<0&&y===0?(g1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,E=null):f===y&&(w=!0,E=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,y+1)),A=()=>{let C;return v?C=S:w?C=E:m.route.Component?C=R.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=p,R.createElement(mR,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?R.createElement(m1,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:A(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:h}):A()},null)}function _y(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yR(t){let e=R.useContext(ja);return ot(e,_y(t)),e}function bR(t){let e=R.useContext(qd);return ot(e,_y(t)),e}function vR(t){let e=R.useContext(Sr);return ot(e,_y(t)),e}function ky(t){let e=vR(t),n=e.matches[e.matches.length-1];return ot(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function wR(){return ky("useRouteId")}function SR(){let t=R.useContext(Ty),e=bR("useRouteError"),n=ky("useRouteError");return t!==void 0?t:e.errors?.[n]}function xR(){let{router:t}=yR("useNavigate"),e=ky("useNavigate"),n=R.useRef(!1);return h1(()=>{n.current=!0}),R.useCallback(async(i,o={})=>{nr(n.current,d1),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var CS={};function g1(t,e,n){!e&&!CS[t]&&(CS[t]=!0,nr(!1,n))}R.memo(ER);function ER({routes:t,future:e,state:n,onError:r}){return p1(t,void 0,n,r,e)}function yc({to:t,replace:e,state:n,relative:r}){ot(za(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=R.useContext(jn);nr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=R.useContext(Sr),{pathname:l}=Ai(),u=Uc(),f=Ey(t,xy(o),l,r==="path"),h=JSON.stringify(f);return R.useEffect(()=>{u(JSON.parse(h),{replace:e,state:n,relative:r})},[u,h,r,e,n]),null}function TR(t){return uR(t.context)}function ur(t){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _R({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:l}){ot(!za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),f=R.useMemo(()=>({basename:u,navigator:i,static:o,unstable_useTransitions:l,future:{}}),[u,i,o,l]);typeof n=="string"&&(n=bo(n));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:v="default"}=n,w=R.useMemo(()=>{let S=ki(h,u);return S==null?null:{location:{pathname:S,search:p,hash:m,state:y,key:v},navigationType:r}},[u,h,p,m,y,v,r]);return nr(w!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:R.createElement(jn.Provider,{value:f},R.createElement(Ic.Provider,{children:e,value:w}))}function kR({children:t,location:e}){return fR(kg(t),e)}function kg(t,e=[]){let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let o=[...e,i];if(r.type===R.Fragment){n.push.apply(n,kg(r.props.children,o));return}ot(r.type===ur,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=kg(r.props.children,o)),n.push(l)}),n}var If="get",Uf="application/x-www-form-urlencoded";function Vd(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function AR(t){return Vd(t)&&t.tagName.toLowerCase()==="button"}function CR(t){return Vd(t)&&t.tagName.toLowerCase()==="form"}function OR(t){return Vd(t)&&t.tagName.toLowerCase()==="input"}function RR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NR(t,e){return t.button===0&&(!e||e==="_self")&&!RR(t)}var df=null;function MR(){if(df===null)try{new FormData(document.createElement("form"),0),df=!1}catch{df=!0}return df}var DR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mm(t){return t!=null&&!DR.has(t)?(nr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uf}"`),null):t}function LR(t,e){let n,r,i,o,l;if(CR(t)){let u=t.getAttribute("action");r=u?ki(u,e):null,n=t.getAttribute("method")||If,i=Mm(t.getAttribute("enctype"))||Uf,o=new FormData(t)}else if(AR(t)||OR(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||u.getAttribute("action");if(r=f?ki(f,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||If,i=Mm(t.getAttribute("formenctype"))||Mm(u.getAttribute("enctype"))||Uf,o=new FormData(u,t),!MR()){let{name:h,type:p,value:m}=t;if(p==="image"){let y=h?`${h}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else h&&o.append(h,m)}}else{if(Vd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=If,r=null,i=Uf,l=t}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ay(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jR(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&ki(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function zR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function UR(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await zR(o,n);return l.links?l.links():[]}return[]}));return $R(r.flat(1).filter(IR).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function OS(t,e,n,r,i,o){let l=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,u=(f,h)=>n[h].pathname!==f.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,h)=>l(f,h)||u(f,h)):o==="data"?e.filter((f,h)=>{let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(l(f,h)||u(f,h))return!0;if(f.route.shouldRevalidate){let m=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function BR(t,e,{includeHydrateFallback:n}={}){return PR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function PR(t){return[...new Set(t)]}function HR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function $R(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(HR(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function y1(){let t=R.useContext(ja);return Ay(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function qR(){let t=R.useContext(qd);return Ay(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Cy=R.createContext(void 0);Cy.displayName="FrameworkContext";function b1(){let t=R.useContext(Cy);return Ay(t,"You must render this element inside a <HydratedRouter> element"),t}function VR(t,e){let n=R.useContext(Cy),[r,i]=R.useState(!1),[o,l]=R.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,y=R.useRef(null);R.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let S=T=>{T.forEach(A=>{l(A.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[t]),R.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let v=()=>{i(!0)},w=()=>{i(!1),l(!1)};return n?t!=="intent"?[o,y,{}]:[o,y,{onFocus:$l(u,v),onBlur:$l(f,w),onMouseEnter:$l(h,v),onMouseLeave:$l(p,w),onTouchStart:$l(m,v)}]:[!1,y,{}]}function $l(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function FR({page:t,...e}){let{router:n}=y1(),r=R.useMemo(()=>i1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(KR,{page:t,matches:r,...e}):null}function GR(t){let{manifest:e,routeModules:n}=b1(),[r,i]=R.useState([]);return R.useEffect(()=>{let o=!1;return UR(t,e,n).then(l=>{o||i(l)}),()=>{o=!0}},[t,e,n]),r}function KR({page:t,matches:e,...n}){let r=Ai(),{future:i,manifest:o,routeModules:l}=b1(),{basename:u}=y1(),{loaderData:f,matches:h}=qR(),p=R.useMemo(()=>OS(t,e,h,o,r,"data"),[t,e,h,o,r]),m=R.useMemo(()=>OS(t,e,h,o,r,"assets"),[t,e,h,o,r]),y=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,E=!1;if(e.forEach(A=>{let C=o.routes[A.route.id];!C||!C.hasLoader||(!p.some(L=>L.route.id===A.route.id)&&A.route.id in f&&l[A.route.id]?.shouldRevalidate||C.hasClientLoader?E=!0:S.add(A.route.id))}),S.size===0)return[];let T=jR(t,u,i.unstable_trailingSlashAwareDataRequests,"data");return E&&S.size>0&&T.searchParams.set("_routes",e.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[T.pathname+T.search]},[u,i.unstable_trailingSlashAwareDataRequests,f,r,o,p,e,t,l]),v=R.useMemo(()=>BR(m,o),[m,o]),w=GR(m);return R.createElement(R.Fragment,null,y.map(S=>R.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>R.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),w.map(({key:S,link:E})=>R.createElement("link",{key:S,nonce:n.nonce,...E,crossOrigin:E.crossOrigin??n.crossOrigin})))}function WR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var JR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JR&&(window.__reactRouterVersion="7.13.0")}catch{}function YR({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=R.useRef();i.current==null&&(i.current=AO({window:r,v5Compat:!0}));let o=i.current,[l,u]=R.useState({action:o.action,location:o.location}),f=R.useCallback(h=>{n===!1?u(h):R.startTransition(()=>u(h))},[n]);return R.useLayoutEffect(()=>o.listen(f),[o,f]),R.createElement(_R,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:n})}var v1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w1=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:u,target:f,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...v},w){let{basename:S,unstable_useTransitions:E}=R.useContext(jn),T=typeof h=="string"&&v1.test(h),A=l1(h,S);h=A.to;let C=aR(h,{relative:i}),[L,I,H]=VR(r,v),z=eN(h,{replace:l,state:u,target:f,preventScrollReset:p,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:E});function W(ne){e&&e(ne),ne.defaultPrevented||z(ne)}let ee=R.createElement("a",{...v,...H,href:A.absoluteURL||C,onClick:A.isExternal||o?e:W,ref:WR(w,I),target:f,"data-discover":!T&&n==="render"?"true":void 0});return L&&!T?R.createElement(R.Fragment,null,ee,R.createElement(FR,{page:C})):ee});w1.displayName="Link";var XR=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:u,children:f,...h},p){let m=Bc(l,{relative:h.relative}),y=Ai(),v=R.useContext(qd),{navigator:w,basename:S}=R.useContext(jn),E=v!=null&&sN(m)&&u===!0,T=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,A=y.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(A=A.toLowerCase(),C=C?C.toLowerCase():null,T=T.toLowerCase()),C&&S&&(C=ki(C,S)||C);const L=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let I=A===T||!i&&A.startsWith(T)&&A.charAt(L)==="/",H=C!=null&&(C===T||!i&&C.startsWith(T)&&C.charAt(T.length)==="/"),z={isActive:I,isPending:H,isTransitioning:E},W=I?e:void 0,ee;typeof r=="function"?ee=r(z):ee=[r,I?"active":null,H?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let ne=typeof o=="function"?o(z):o;return R.createElement(w1,{...h,"aria-current":W,className:ee,ref:p,style:ne,to:l,viewTransition:u},typeof f=="function"?f(z):f)});XR.displayName="NavLink";var QR=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:l=If,action:u,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...v},w)=>{let{unstable_useTransitions:S}=R.useContext(jn),E=rN(),T=iN(u,{relative:h}),A=l.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&v1.test(u),L=I=>{if(f&&f(I),I.defaultPrevented)return;I.preventDefault();let H=I.nativeEvent.submitter,z=H?.getAttribute("formmethod")||l,W=()=>E(H||I.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:i,state:o,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y});S&&n!==!1?R.startTransition(()=>W()):W()};return R.createElement("form",{ref:w,method:A,action:T,onSubmit:r?f:L,...v,"data-discover":!C&&t==="render"?"true":void 0})});QR.displayName="Form";function ZR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S1(t){let e=R.useContext(ja);return ot(e,ZR(t)),e}function eN(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:f}={}){let h=Uc(),p=Ai(),m=Bc(t,{relative:o});return R.useCallback(y=>{if(NR(y,e)){y.preventDefault();let v=n!==void 0?n:gc(p)===gc(m),w=()=>h(t,{replace:v,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});f?R.startTransition(()=>w()):w()}},[p,h,m,n,r,e,t,i,o,l,u,f])}var tN=0,nN=()=>`__${String(++tN)}__`;function rN(){let{router:t}=S1("useSubmit"),{basename:e}=R.useContext(jn),n=wR(),r=t.fetch,i=t.navigate;return R.useCallback(async(o,l={})=>{let{action:u,method:f,encType:h,formData:p,body:m}=LR(o,e);if(l.navigate===!1){let y=l.fetcherKey||nN();await r(y,n,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await i(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,n])}function iN(t,{relative:e}={}){let{basename:n}=R.useContext(jn),r=R.useContext(Sr);ot(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Bc(t||".",{relative:e})},l=Ai();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),f=u.getAll("index");if(f.some(p=>p==="")){u.delete("index"),f.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Ei([n,o.pathname])),gc(o)}function sN(t,{relative:e}={}){let n=R.useContext(u1);ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=S1("useViewTransitionState"),i=Bc(t,{relative:e});if(!n.isTransitioning)return!1;let o=ki(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=ki(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gf(i.pathname,l)!=null||Gf(i.pathname,o)!=null}var Oy=r1();const oN=Sy(Oy);function Fd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function aN(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function f(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})}const lN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Ry extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class cN extends Ry{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class RS extends Ry{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class NS extends Ry{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ag;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ag||(Ag={}));class uN{constructor(e,{headers:n={},customFetch:r,region:i=Ag.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=lN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return aN(this,arguments,void 0,function*(n,r={}){var i;let o,l;try{const{headers:u,method:f,body:h,signal:p,timeout:m}=r;let y={},{region:v}=r;v||(v=this.region);const w=new URL(`${this.url}/${n}`);v&&v!=="any"&&(y["x-region"]=v,w.searchParams.set("forceFunctionRegion",v));let S;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",S=h):typeof h=="string"?(y["Content-Type"]="text/plain",S=h):typeof FormData<"u"&&h instanceof FormData?S=h:(y["Content-Type"]="application/json",S=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?S=JSON.stringify(h):S=h;let E=p;m&&(l=new AbortController,o=setTimeout(()=>l.abort(),m),p?(E=l.signal,p.addEventListener("abort",()=>l.abort())):E=l.signal);const T=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:S,signal:E}).catch(I=>{throw new cN(I)}),A=T.headers.get("x-relay-error");if(A&&A==="true")throw new RS(T);if(!T.ok)throw new NS(T);let C=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),L;return C==="application/json"?L=yield T.json():C==="application/octet-stream"||C==="application/pdf"?L=yield T.blob():C==="text/event-stream"?L=T:C==="multipart/form-data"?L=yield T.formData():L=yield T.text(),{data:L,error:null,response:T}}catch(u){return{data:null,error:u,response:u instanceof NS||u instanceof RS?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var fN=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},dN=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,u=null,f=null,h=o.status,p=o.statusText;if(o.ok){var m,y;if(n.method!=="HEAD"){var v;const T=await o.text();T===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((v=n.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?u=T:u=JSON.parse(T))}const S=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),E=(y=o.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");S&&E&&E.length>1&&(f=parseInt(E[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var w;const S=await o.text();try{l=JSON.parse(S),Array.isArray(l)&&o.status===404&&(u=[],l=null,h=200,p="OK")}catch{o.status===404&&S===""?(h=204,p="No Content"):l={message:S}}if(l&&n.isMaybeSingle&&(!(l==null||(w=l.details)===null||w===void 0)&&w.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&n.shouldThrowOnError)throw new fN(l)}return{error:l,data:u,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var l;let u="";const f=o?.cause;if(f){var h,p,m,y;const w=(h=f?.message)!==null&&h!==void 0?h:"",S=(p=f?.code)!==null&&p!==void 0?p:"";u=`${(m=o?.name)!==null&&m!==void 0?m:"FetchError"}: ${o?.message}`,u+=`

Caused by: ${(y=f?.name)!==null&&y!==void 0?y:"Error"}: ${w}`,S&&(u+=` (${S})`),f?.stack&&(u+=`
${f.stack}`)}else{var v;u=(v=o?.stack)!==null&&v!==void 0?v:""}return{error:{message:`${(l=o?.name)!==null&&l!==void 0?l:"FetchError"}: ${o?.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},hN=class extends dN{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const u=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${f}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const MS=new RegExp("[,()]");var pa=class extends hN{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&MS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&MS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},pN=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join(""),{url:u,headers:f}=this.cloneRequestState();return u.searchParams.set("select",l),r&&f.append("Prefer",`count=${r}`),new pa({method:i,url:u,headers:f,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(u.length>0){const f=[...new Set(u)].map(h=>`"${h}"`);o.searchParams.set("columns",f.join(","))}}return new pa({method:i,url:o,headers:l,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const l="POST",{url:u,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),r&&f.append("Prefer",`count=${r}`),i||f.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);u.searchParams.set("columns",p.join(","))}}return new pa({method:l,url:u,headers:f,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new pa({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new pa({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},mN=class x1{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new pN(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new x1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var l;let u;const f=new URL(`${this.url}/rpc/${e}`);let h;const p=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(p)),m=r&&Object.values(n).some(p);m?(u="POST",h=n):r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{f.searchParams.append(v,w)})):(u="POST",h=n);const y=new Headers(this.headers);return m?y.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&y.set("Prefer",`count=${o}`),new pa({method:u,url:f,headers:y,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class gN{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const yN="2.93.3",bN=`realtime-js/${yN}`,vN="1.0.0",E1="2.0.0",DS=E1,Cg=1e4,wN=1e3,SN=100;var ls;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ls||(ls={}));var Mt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Mt||(Mt={}));var pr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(pr||(pr={}));var Og;(function(t){t.websocket="websocket"})(Og||(Og={}));var eo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(eo||(eo={}));class xN{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var i,o;const l=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",f=(o=e.join_ref)!==null&&o!==void 0?o:"",h=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+l.length+h.length+m.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let w=new DataView(v),S=0;w.setUint8(S++,this.KINDS.userBroadcastPush),w.setUint8(S++,f.length),w.setUint8(S++,u.length),w.setUint8(S++,l.length),w.setUint8(S++,h.length),w.setUint8(S++,m.length),w.setUint8(S++,n),Array.from(f,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(u,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(l,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(h,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(m,T=>w.setUint8(S++,T.charCodeAt(0)));var E=new Uint8Array(v.byteLength+r.byteLength);return E.set(new Uint8Array(v),0),E.set(new Uint8Array(r),v.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,l,u,f]=r;return n({join_ref:i,ref:o,topic:l,event:u,payload:f})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let f=this.HEADER_LENGTH+4;const h=r.decode(e.slice(f,f+i));f=f+i;const p=r.decode(e.slice(f,f+o));f=f+o;const m=r.decode(e.slice(f,f+l));f=f+l;const y=e.slice(f,e.byteLength),v=u===this.JSON_ENCODING?JSON.parse(r.decode(y)):y,w={type:this.BROADCAST_EVENT,event:p,payload:v};return l>0&&(w.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class T1{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Qe||(Qe={}));const LS=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=EN(l,t,e,i),o),{}):{}},EN=(t,e,n,r)=>{const i=e.find(u=>u.name===t),o=i?.type,l=n[t];return o&&!r.includes(o)?_1(o,l):Rg(l)},_1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return AN(e,n)}switch(t){case Qe.bool:return TN(e);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return _N(e);case Qe.json:case Qe.jsonb:return kN(e);case Qe.timestamp:return CN(e);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return Rg(e);default:return Rg(e)}},Rg=t=>t,TN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},_N=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},kN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},AN=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>_1(e,u))}return t},CN=t=>typeof t=="string"?t.replace(" ","T"):t,k1=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Dm{constructor(e,n,r={},i=Cg){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var jS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(jS||(jS={}));class ic{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ic.syncState(this.state,i,o,l),this.pendingDiffs.forEach(f=>{this.state=ic.syncDiff(this.state,f,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ic.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),l=this.transformState(n),u={},f={};return this.map(o,(h,p)=>{l[h]||(f[h]=p)}),this.map(l,(h,p)=>{const m=o[h];if(m){const y=p.map(E=>E.presence_ref),v=m.map(E=>E.presence_ref),w=p.filter(E=>v.indexOf(E.presence_ref)<0),S=m.filter(E=>y.indexOf(E.presence_ref)<0);w.length>0&&(u[h]=w),S.length>0&&(f[h]=S)}else u[h]=p}),this.syncDiff(o,{joins:u,leaves:f},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,f)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),p.length>0){const m=e[u].map(v=>v.presence_ref),y=p.filter(v=>m.indexOf(v.presence_ref)<0);e[u].unshift(...y)}r(u,p,f)}),this.map(l,(u,f)=>{let h=e[u];if(!h)return;const p=f.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),e[u]=h,i(u,h,f),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zS;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(zS||(zS={}));var sc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(sc||(sc={}));var bi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bi||(bi={}));class wa{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Dm(this,pr.join,this.params,this.timeout),this.rejoinTimer=new T1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new ic(this),this.broadcastEndpointURL=k1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Mt.closed){const{config:{broadcast:l,presence:u,private:f}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[sc.PRESENCE]&&this.bindings[sc.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e?.(bi.CHANNEL_ERROR,v)),this._onClose(()=>e?.(bi.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){e?.(bi.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,E=(w=S?.length)!==null&&w!==void 0?w:0,T=[];for(let A=0;A<E;A++){const C=S[A],{filter:{event:L,schema:I,table:H,filter:z}}=C,W=v&&v[A];if(W&&W.event===L&&wa.isFilterValueEqual(W.schema,I)&&wa.isFilterValueEqual(W.table,H)&&wa.isFilterValueEqual(W.filter,z))T.push(Object.assign(Object.assign({},C),{id:W.id}));else{this.unsubscribe(),this.state=Mt.errored,e?.(bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(bi.SUBSCRIBED);return}}).receive("error",v=>{this.state=Mt.errored,e?.(bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e?.(bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Mt.joined&&e===sc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const h=await u.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,f;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Dm(this,pr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Mt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Dm(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>SN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const l=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:p}=pr;if(r&&[u,f,h,p].indexOf(l)>=0&&r!==this._joinRef())return;let y=this._onMessage(l,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var w,S,E;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((E=(S=v.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(v=>v.callback(y,r)):(o=this.bindings[l])===null||o===void 0||o.filter(v=>{var w,S,E,T,A,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const L=v.id,I=(w=v.filter)===null||w===void 0?void 0:w.event;return L&&((S=n.ids)===null||S===void 0?void 0:S.includes(L))&&(I==="*"||I?.toLocaleLowerCase()===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const L=(A=(T=v?.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return L==="*"||L===((C=n?.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:S,table:E,commit_timestamp:T,type:A,errors:C}=w;y=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:T,eventType:A,new:{},old:{},errors:C}),this._getPayloadRecords(w))}v.callback(y,r)})}_isClosed(){return this.state===Mt.closed}_isJoined(){return this.state===Mt.joined}_isJoining(){return this.state===Mt.joining}_isLeaving(){return this.state===Mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&wa.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(pr.close,{},e)}_onError(e){this._on(pr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=LS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=LS(e.columns,e.old_record)),n}}const Lm=()=>{},hf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ON=[1e3,2e3,5e3,1e4],RN=1e4,NN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class MN{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cg,this.transport=null,this.heartbeatIntervalMs=hf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lm,this.ref=0,this.reconnectTimer=null,this.vsn=DS,this.logger=Lm,this.conn=null,this.sendBuffer=[],this.serializer=new xN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Og.websocket}`,this.httpEndpoint=k1(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ls.connecting:return eo.Connecting;case ls.open:return eo.Open;case ls.closing:return eo.Closing;default:return eo.Closed}}isConnected(){return this.connectionState()===eo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new wa(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,l=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(wN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},hf.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:l}=n,u=l?`(${l})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${u}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ls.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ls.open||this.conn.readyState===ls.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(pr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([NN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:bN};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(pr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new T1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,l,u,f,h,p,m,y,v;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Cg,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:hf.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:Lm,this.vsn=(f=e?.vsn)!==null&&f!==void 0?f:DS,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(w=>ON[w-1]||RN),this.vsn){case vN:this.encode=(p=e?.encode)!==null&&p!==void 0?p:((w,S)=>S(JSON.stringify(w))),this.decode=(m=e?.decode)!==null&&m!==void 0?m:((w,S)=>S(JSON.parse(w)));break;case E1:this.encode=(y=e?.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(v=e?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var bc=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function DN(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function LN(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function jN(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:l}){const u=DN(t.baseUrl,r,i),f=await LN(t.auth),h=await e(u,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...f,...l},body:o?JSON.stringify(o):void 0}),p=await h.text(),m=(h.headers.get("content-type")||"").includes("application/json"),y=m&&p?JSON.parse(p):p;if(!h.ok){const v=m?y:void 0,w=v?.error;throw new bc(w?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:w?.type,icebergCode:w?.code,details:v})}return{status:h.status,headers:h.headers,data:y}}}}function pf(t){return t.join("")}var zN=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:pf(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pf(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pf(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pf(t.namespace)}`}),!0}catch(e){if(e instanceof bc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof bc&&n.status===409)return;throw n}}};function oa(t){return t.join("")}var IN=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oa(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oa(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oa(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oa(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oa(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oa(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof bc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof bc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},UN=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=jN({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new zN(this.client,e),this.tableOps=new IN(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Gd=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Kd(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var mf=class extends Gd{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},A1=class extends Gd{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const BN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),PN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ng=t=>{if(Array.isArray(t))return t.map(n=>Ng(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Ng(r)}),e},HN=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function vc(t){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(t)}function $N(t,e){if(vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qN(t){var e=$N(t,"string");return vc(e)=="symbol"?e:e+""}function VN(t,e,n){return(e=qN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function be(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IS(Object(n),!0).forEach(function(r){VN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const US=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},FN=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const i=t,o=i.status||500;if(typeof i.json=="function")i.json().then(l=>{const u=l?.statusCode||l?.code||o+"";e(new mf(US(l),o,u,r))}).catch(()=>{if(r==="vectors"){const l=o+"";e(new mf(i.statusText||`HTTP ${o} error`,o,l,r))}else{const l=o+"";e(new mf(i.statusText||`HTTP ${o} error`,o,l,r))}});else{const l=o+"";e(new mf(i.statusText||`HTTP ${o} error`,o,l,r))}}else e(new A1(US(t),t,r))},GN=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!r?be(be({},i),n):(PN(r)?(i.headers=be({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),be(be({},i),n))};async function ql(t,e,n,r,i,o,l){return new Promise((u,f)=>{t(n,GN(e,r,i,o)).then(h=>{if(!h.ok)throw h;if(r?.noResolveJson)return h;if(l==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>u(h)).catch(h=>FN(h,f,r,l))})}function C1(t="storage"){return{get:async(e,n,r,i)=>ql(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,o)=>ql(e,"POST",n,i,o,r,t),put:async(e,n,r,i,o)=>ql(e,"PUT",n,i,o,r,t),head:async(e,n,r,i)=>ql(e,"HEAD",n,be(be({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,o)=>ql(e,"DELETE",n,i,o,r,t)}}const KN=C1("storage"),{get:wc,post:hr,put:Mg,head:WN,remove:Ny}=KN,Nn=C1("vectors");var Ia=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=BN(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Kd(n))return{data:null,error:n};throw n}}},JN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Kd(e))return{data:null,error:e};throw e}}};let O1;O1=Symbol.toStringTag;var YN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[O1]="BlobDownloadBuilder",this.promise=null}asStream(){return new JN(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Kd(e))return{data:null,error:e};throw e}}};const XN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},BS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var QN=class extends Ia{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let o;const l=be(be({},BS),r);let u=be(be({},i.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),f&&o.append("metadata",i.encodeMetadata(f)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),f&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(f))):(o=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,f&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r?.headers&&(u=be(be({},u),r.headers));const h=i._removeEmptyFolders(e),p=i._getFinalPath(h),m=await(t=="PUT"?Mg:hr)(i.fetch,`${i.url}/object/${p}`,o,be({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{path:h,id:m.Id,fullPath:m.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),l=i._getFinalPath(o),u=new URL(i.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",e),i.handleOperation(async()=>{let f;const h=be({upsert:BS.upsert},r),p=be(be({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",h.cacheControl)):(f=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:o,fullPath:(await Mg(i.fetch,u.toString(),f,{headers:p})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=be({},n.headers);e?.upsert&&(i["x-upsert"]="true");const o=await hr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(n.url+o.url),u=l.searchParams.get("token");if(!u)throw new Gd("No token returned by API");return{signedUrl:l.toString(),path:t,token:u}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await hr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await hr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),o=await hr(r.fetch,`${r.url}/object/sign/${i}`,be({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await hr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(l=>be(be({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null}))})}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),l=()=>wc(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new YN(l,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Ng(await wc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await WN(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Kd(r)&&r instanceof A1){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Ny(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=be(be(be({},XN),e),{},{prefix:t||""});return await hr(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=be({},t);return await hr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const ZN="2.93.3",Pc={"X-Client-Info":`storage-js/${ZN}`};var eM=class extends Ia{constructor(t,e={},n,r){const i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const o=i.href.replace(/\/$/,""),l=be(be({},Pc),e);super(o,l,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await wc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await wc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await hr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Mg(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await hr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Ny(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},tM=class extends Ia{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=be(be({},Pc),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await hr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await wc(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Ny(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!HN(t))throw new Gd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new UN({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const l=i[o];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(i,u),error:null}}catch(f){if(r)throw f;return{data:null,error:f}}}}})}},nM=class extends Ia{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=be(be({},Pc),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await Nn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await Nn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},rM=class extends Ia{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=be(be({},Pc),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},iM=class extends Ia{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=be(be({},Pc),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Nn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},sM=class extends iM{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new oM(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},oM=class extends nM{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,be(be({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,be(be({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new aM(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},aM=class extends rM{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,be(be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,be(be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,be(be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,be(be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,be(be({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},lM=class extends eM{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new QN(this.url,this.headers,t,this.fetch)}get vectors(){return new sM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tM(this.url+"/iceberg",this.headers,this.fetch)}};const R1="2.93.3",ma=30*1e3,Dg=3,jm=Dg*ma,cM="http://localhost:9999",uM="supabase.auth.token",fM={"X-Client-Info":`gotrue-js/${R1}`},Lg="X-Supabase-Api-Version",N1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hM=600*1e3;class Sc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class pM extends Sc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function mM(t){return ue(t)&&t.name==="AuthApiError"}class to extends Sc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ci extends Sc{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Rn extends Ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zm(t){return ue(t)&&t.name==="AuthSessionMissingError"}class aa extends Ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gf extends Ci{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class yf extends Ci{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gM(t){return ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class PS extends Ci{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yM extends Ci{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class jg extends Ci{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Im(t){return ue(t)&&t.name==="AuthRetryableFetchError"}class HS extends Ci{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class zg extends Ci{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$S=` 	
\r=`.split(""),bM=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<$S.length;e+=1)t[$S[e].charCodeAt(0)]=-2;for(let e=0;e<Kf.length;e+=1)t[Kf[e].charCodeAt(0)]=e;return t})();function qS(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Kf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Kf[r]),e.queuedBits-=6}}function M1(t,e,n){const r=bM[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function VS(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{SM(l,r,n)};for(let l=0;l<t.length;l+=1)M1(t.charCodeAt(l),i,o);return e.join("")}function vM(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function wM(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}vM(r,e)}}function SM(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function xa(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)M1(t.charCodeAt(i),n,r);return new Uint8Array(e)}function xM(t){const e=[];return wM(t,n=>e.push(n)),new Uint8Array(e)}function ro(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>qS(i,n,r)),qS(null,n,r),e.join("")}function EM(t){return Math.round(Date.now()/1e3)+t}function TM(){return Symbol("auth-callback")}const Wt=()=>typeof window<"u"&&typeof document<"u",Ys={tested:!1,writable:!1},D1=()=>{if(!Wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ys.tested)return Ys.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ys.tested=!0,Ys.writable=!0}catch{Ys.tested=!0,Ys.writable=!1}return Ys.writable};function _M(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const L1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),kM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ga=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Xs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Kt=async(t,e)=>{await t.removeItem(e)};class Wd{constructor(){this.promise=new Wd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Wd.promiseConstructor=Promise;function bf(t){const e=t.split(".");if(e.length!==3)throw new zg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!dM.test(e[r]))throw new zg("JWT not in base64url format");return{header:JSON.parse(VS(e[0])),payload:JSON.parse(VS(e[1])),signature:xa(e[2]),raw:{header:e[0],payload:e[1]}}}async function AM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function CM(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){i(l);return}}})()})}function OM(t){return("0"+t.toString(16)).substr(-2)}function RM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,OM).join("")}async function NM(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function MM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await NM(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function la(t,e,n=!1){const r=RM();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await ga(t,`${e}-code-verifier`,i);const o=await MM(r);return[o,r===o?"plain":"s256"]}const DM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function LM(t){const e=t.headers.get(Lg);if(!e||!e.match(DM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function jM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function zM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const IM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ca(t){if(!IM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Um(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function UM(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function FS(t){return JSON.parse(JSON.stringify(t))}const Zs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),BM=[502,503,504];async function GS(t){var e;if(!kM(t))throw new jg(Zs(t),0);if(BM.includes(t.status))throw new jg(Zs(t),t.status);let n;try{n=await t.json()}catch(o){throw new to(Zs(o),o)}let r;const i=LM(t);if(i&&i.getTime()>=N1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new HS(Zs(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Rn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new HS(Zs(n),t.status,n.weak_password.reasons);throw new pM(Zs(n),t.status||500,r)}const PM=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ye(t,e,n,r){var i;const o=Object.assign({},r?.headers);o[Lg]||(o[Lg]=N1["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await HM(t,e,n+u,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function HM(t,e,n,r,i,o){const l=PM(e,r,i,o);let u;try{u=await t(n,Object.assign({},l))}catch(f){throw console.error(f),new jg(Zs(f),0)}if(u.ok||await GS(u),r?.noResolveJson)return u;try{return await u.json()}catch(f){await GS(f)}}function fr(t){var e;let n=null;VM(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=EM(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function KS(t){const e=fr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ds(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function $M(t){return{data:t,error:null}}function qM(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,l=Fd(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},l);return{data:{properties:u,user:f},error:null}}function WS(t){return t}function VM(t){return t.access_token&&t.refresh_token&&t.expires_in}const Bm=["global","local","others"];class FM{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=L1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Bm[0]){if(Bm.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bm.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ds})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Fd(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:qM,redirectTo:n?.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ds})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:WS});if(p.error)throw p.error;const m=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);h[`${E}Page`]=S}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(ue(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){ca(e);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ds})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ca(e);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ds})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ca(e);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ds})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ca(e.userId);try{const{data:n,error:r}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ca(e.userId),ca(e.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:WS});if(p.error)throw p.error;const m=await p.json(),y=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);h[`${E}Page`]=S}),h.total=parseInt(y)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(ue(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}}function JS(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ua={debug:!!(globalThis&&D1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class j1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class GM extends j1{}async function KM(t,e,n){ua.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ua.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ua.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ua.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ua.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new GM(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ua.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function WM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function z1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function JM(t){return parseInt(t,16)}function YM(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function XM(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:f,resources:h,scheme:p,uri:m,version:y}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=z1(t.address),w=p?`${p}://${r}`:r,S=t.statement?`${t.statement}
`:"",E=`${w} wants you to sign in with your Ethereum account:
${v}

${S}`;let T=`URI: ${m}
Version: ${y}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),f&&(T+=`
Request ID: ${f}`),h){let A=`
Resources:`;for(const C of h){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);A+=`
- ${C}`}T+=A}return`${E}
${T}`}class kt extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Wf extends kt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function QM({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new kt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new kt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new kt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new kt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new kt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new kt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new kt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(I1(l)){if(o.rp.id!==l)return new kt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new kt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function ZM({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new kt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new kt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(I1(r)){if(n.rpId!==r)return new kt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new kt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new kt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new kt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class eD{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const tD=new eD;function nD(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Fd(t,["challenge","user","excludeCredentials"]),o=xa(e).buffer,l=Object.assign(Object.assign({},n),{id:xa(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const h=r[f];u.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:xa(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function rD(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Fd(t,["challenge","allowCredentials"]),i=xa(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:xa(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function iD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ro(new Uint8Array(t.response.attestationObject)),clientDataJSON:ro(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function sD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ro(new Uint8Array(i.authenticatorData)),clientDataJSON:ro(new Uint8Array(i.clientDataJSON)),signature:ro(new Uint8Array(i.signature)),userHandle:i.userHandle?ro(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function I1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function YS(){var t,e;return!!(Wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function oD(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wf("Browser returned unexpected credential type",e)}:{data:null,error:new Wf("Empty credential response",e)}}catch(e){return{data:null,error:QM({error:e,options:t})}}}async function aD(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wf("Browser returned unexpected credential type",e)}:{data:null,error:new Wf("Empty credential response",e)}}catch(e){return{data:null,error:ZM({error:e,options:t})}}}const lD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Jf(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(e(l)){const u=r[o];e(u)?r[o]=Jf(u,l):r[o]=Jf(l)}else r[o]=l}return r}function uD(t,e){return Jf(lD,t,e||{})}function fD(t,e){return Jf(cD,t,e||{})}class dD{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){var l;try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:f};const h=i??tD.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;if(!p.name){const m=r;if(m)p.name=`${p.id}:${m}`;else{const v=(await this.client.getUser()).data.user,w=((l=v?.user_metadata)===null||l===void 0?void 0:l.name)||v?.email||v?.id||"User";p.name=`${p.id}:${w}`}}p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=uD(u.webauthn.credential_options.publicKey,o?.create),{data:m,error:y}=await oD({publicKey:p,signal:h});return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}case"request":{const p=fD(u.webauthn.credential_options.publicKey,o?.request),{data:m,error:y}=await aD(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:h}));return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}}}catch(u){return ue(u)?{data:null,error:u}:{data:null,error:new to("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Sc("rpId is required for WebAuthn authentication")};try{if(!YS())return{data:null,error:new to("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:f}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:r,credential_response:f.credential_response}})}catch(l){return ue(l)?{data:null,error:l}:{data:null,error:new to("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Sc("rpId is required for WebAuthn registration")};try{if(!YS())return{data:null,error:new to("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:u};const{data:f,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(l){return ue(l)?{data:null,error:l}:{data:null,error:new to("Unexpected error in register",l)}}}}WM();const hD={url:cM,storageKey:uM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function XS(t,e,n){return await n()}const fa={};class xc{get jwks(){var e,n;return(n=(e=fa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){fa[this.storageKey]=Object.assign(Object.assign({},fa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=fa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){fa[this.storageKey]=Object.assign(Object.assign({},fa[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},hD),e);if(this.storageKey=o.storageKey,this.instanceID=(n=xc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,xc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Wt()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new FM({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=L1(o.fetch),this.lock=o.lock||XS,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Wt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=KM:this.lock=XS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:D1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=JS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=JS(this.memoryStorage)),Wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${R1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Wt()&&(n=_M(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Wt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),gM(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ue(n)?this._returnResult({error:n}):this._returnResult({error:new to("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:fr}),{data:l,error:u}=o;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(ue(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:p,password:m,options:y}=e;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await la(this.storage,this.storageKey)),o=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:p,password:m,data:(n=y?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:v,code_challenge_method:w},xform:fr})}else if("phone"in e){const{phone:p,password:m,options:y}=e;o=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=y?.data)!==null&&r!==void 0?r:{},channel:(i=y?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:fr})}else throw new gf("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return await Kt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),ue(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:KS})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:KS})}else throw new gf("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new aa;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,l,u,f,h,p,m,y;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:S,wallet:E,statement:T,options:A}=e;let C;if(Wt())if(typeof E=="object")C=E;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")C=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=E}const L=new URL((n=A?.url)!==null&&n!==void 0?n:window.location.href),I=await C.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const H=z1(I[0]);let z=(r=A?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!z){const ee=await C.request({method:"eth_chainId"});z=JM(ee)}const W={domain:L.host,address:H,statement:T,uri:L.href,version:"1",chainId:z,nonce:(i=A?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=A?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=A?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=A?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=A?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=A?.signInWithEthereum)===null||p===void 0?void 0:p.resources};v=XM(W),w=await C.request({method:"personal_sign",params:[YM(v),H]})}try{const{data:S,error:E}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:w},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:fr});if(E)throw E;if(!S||!S.session||!S.user){const T=new aa;return this._returnResult({data:{user:null,session:null},error:T})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:E})}catch(S){if(ue(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var n,r,i,o,l,u,f,h,p,m,y,v;let w,S;if("message"in e)w=e.message,S=e.signature;else{const{chain:E,wallet:T,statement:A,options:C}=e;let L;if(Wt())if(typeof T=="object")L=T;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))L=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=T}const I=new URL((n=C?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in L&&L.signIn){const H=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),A?{statement:A}:null));let z;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")z=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)z=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)w=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),S=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${I.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(i=(r=C?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=C?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((f=C?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((h=C?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((m=(p=C?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...C.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const H=await L.signMessage(new TextEncoder().encode(w),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=H}}try{const{data:E,error:T}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:ro(S)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:fr});if(T)throw T;if(!E||!E.session||!E.user){const A=new aa;return this._returnResult({data:{user:null,session:null},error:A})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:T})}catch(E){if(ue(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await Xs(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new yM;const{data:o,error:l}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:fr});if(await Kt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const u=new aa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),ue(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=e,u=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:fr}),{data:f,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const p=new aa;return this._returnResult({data:{user:null,session:null},error:p})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,l;try{if("email"in e){const{email:u,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await la(this.storage,this.storageKey));const{error:m}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:p}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=f?.data)!==null&&i!==void 0?i:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(l=f?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new gf("You must provide either an email or phone number.")}catch(u){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:fr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,l;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await la(this.storage,this.storageKey));const h=await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:$M});return!((o=h.data)===null||o===void 0)&&o.url&&Wt()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),ue(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Rn;const{error:i}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ue(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:l}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:l,error:u}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new gf("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<jm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await Xs(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=Um()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=UM(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ds}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rn}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:ds})})}catch(n){if(ue(n))return zm(n)&&(await this._removeSession(),await Kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Rn;const l=i.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await la(this.storage,this.storageKey));const{data:h,error:p}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:l.access_token,xform:ds});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),ue(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rn;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=bf(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(ue(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Rn;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ue(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Wt())throw new yf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new PS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yf("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new PS("No code detected.");const{data:A,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:f,token_type:h}=e;if(!o||!u||!l||!h)throw new yf("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let y=p+m;f&&(y=parseInt(f));const v=y-p;v*1e3<=ma&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const w=y-m;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,p);const{data:S,error:E}=await this._getUser(o);if(E)throw E;const T={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:m,expires_at:y,refresh_token:l,token_type:h,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(ue(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Xs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o&&!zm(o))return this._returnResult({error:o});const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(mM(u)&&(u.status===404||u.status===401||u.status===403)||zm(u)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Kt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=TM(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await la(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),ue(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,f,h,p;const{data:m,error:y}=o;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Wt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(ue(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:u,token:f,access_token:h,nonce:p}=e,m=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:f,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:fr}),{data:y,error:v}=m;return v?this._returnResult({data:{user:null,session:null},error:v}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new aa}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:v}))}catch(i){if(await Kt(this.storage,`${this.storageKey}-code-verifier`),ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await CM(async i=>(i>0&&await AM(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fr})),(i,o)=>{const l=200*Math.pow(2,i);return o&&Im(o)&&Date.now()+l-r<ma})}catch(r){if(this._debug(n,"error",r),ue(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Wt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Xs(this.storage,this.storageKey);if(i&&this.userStorage){let l=await Xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await ga(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:Um()}else if(i&&!i.user&&!i.user){const l=await Xs(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await Kt(this.storage,this.storageKey+"-user"),await ga(this.storage,this.storageKey,i)):i.user=Um()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<jm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${jm}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),Im(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Wd;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Rn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),ue(o)){const l={data:null,error:o};return Im(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(f){o.push(f)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Kt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ga(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=FS(i);await ga(this.storage,this.storageKey,o)}else{const i=FS(n);await ga(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Kt(this.storage,this.storageKey),await Kt(this.storage,this.storageKey+"-code-verifier"),await Kt(this.storage,this.storageKey+"-user"),this.userStorage&&await Kt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ma);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ma);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ma}ms, refresh threshold is ${Dg} ticks`),i<=Dg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof j1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await la(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((i=f?.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?iD(e.webauthn.credential_response):sD(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:nD(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:rD(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,o;if(e)try{const{payload:v}=bf(e);let w=null;v.aal&&(w=v.aal);let S=w;const{data:{user:E},error:T}=await this.getUser(e);if(T)return this._returnResult({data:null,error:T});((r=(n=E?.factors)===null||n===void 0?void 0:n.filter(L=>L.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(S="aal2");const C=v.amr||[];return{data:{currentLevel:w,nextLevel:S,currentAuthenticationMethods:C},error:null}}catch(v){if(ue(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=bf(l.access_token);let h=null;f.aal&&(h=f.aal);let p=h;((o=(i=l.user.factors)===null||i===void 0?void 0:i.filter(v=>v.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const y=f.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Rn})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Rn});const l=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Wt()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Rn});const l=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Wt()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ye(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Rn})})}catch(e){if(ue(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ye(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Rn})})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+hM>i)return r;const{data:o,error:l}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:w}=await this.getSession();if(w||!v.session)return this._returnResult({data:null,error:w});r=v.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:f}}=bf(r);n?.allowExpired||jM(o.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!h){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:o,header:i,signature:l},error:null}}const p=zM(i.alg),m=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,l,xM(`${u}.${f}`)))throw new zg("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}}xc.nextInstanceID={};const pD=xc,mD="2.93.3";let Ql="";typeof Deno<"u"?Ql="deno":typeof document<"u"?Ql="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ql="react-native":Ql="node";const gD={"X-Client-Info":`supabase-js-${Ql}/${mD}`},yD={headers:gD},bD={schema:"public"},vD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wD={};function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}function SD(t,e){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xD(t){var e=SD(t,"string");return Ec(e)=="symbol"?e:e+""}function ED(t,e,n){return(e=xD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QS(Object(n),!0).forEach(function(r){ED(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const TD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_D=()=>Headers,kD=(t,e,n)=>{const r=TD(n),i=_D();return async(o,l)=>{var u;const f=(u=await e())!==null&&u!==void 0?u:t;let h=new i(l?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(o,mt(mt({},l),{},{headers:h}))}};function AD(t){return t.endsWith("/")?t:t+"/"}function CD(t,e){var n,r;const{db:i,auth:o,realtime:l,global:u}=t,{db:f,auth:h,realtime:p,global:m}=e,y={db:mt(mt({},f),i),auth:mt(mt({},h),o),realtime:mt(mt({},p),l),storage:{},global:mt(mt(mt({},m),u),{},{headers:mt(mt({},(n=m?.headers)!==null&&n!==void 0?n:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function OD(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(AD(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var RD=class extends pD{constructor(t){super(t)}},ND=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=OD(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:bD,realtime:wD,auth:mt(mt({},vD),{},{storageKey:l}),global:yD},f=CD(n??{},u);if(this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=kD(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(mt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new mN(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new lM(this.storageUrl.href,this.headers,this.fetch,n?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new uN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:l,lock:u,debug:f,throwOnError:h},p,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RD({url:this.authUrl.href,headers:mt(mt({},y),p),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:l,lock:u,debug:f,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new MN(this.realtimeUrl.href,mt(mt({},t),{},{params:mt(mt({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const MD=(t,e,n)=>new ND(t,e,n);function DD(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}DD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const LD="https://aaiovfryjlcdijdyknik.supabase.co",jD="sb_publishable_cFHXexx3iNPEOWSFZ0IAxQ_h6MuktWT",U1="https://socratic-tech.github.io/GrowingMinds/#/auth",zD={getItem:t=>{try{const e=localStorage.getItem(t);return e&&t.includes("auth-token")&&JSON.parse(e),e}catch(e){console.error(`Storage read error for ${t}:`,e.message);try{localStorage.removeItem(t)}catch{}return null}},setItem:(t,e)=>{try{localStorage.setItem(t,e)}catch(n){if(console.error(`Storage write error for ${t}:`,n.message),n.name==="QuotaExceededError"){console.warn("Storage quota exceeded, attempting to clear old data");try{const r=localStorage.getItem("sb-aaiovfryjlcdijdyknik-auth-token"),i=localStorage.getItem("sb-aaiovfryjlcdijdyknik-auth-token-code-verifier");localStorage.clear(),r&&localStorage.setItem("sb-aaiovfryjlcdijdyknik-auth-token",r),i&&localStorage.setItem("sb-aaiovfryjlcdijdyknik-auth-token-code-verifier",i),localStorage.setItem(t,e)}catch(r){console.error("Failed to recover from quota error:",r)}}}},removeItem:t=>{try{localStorage.removeItem(t)}catch(e){console.error(`Storage remove error for ${t}:`,e.message)}}},Te=MD(LD,jD,{auth:{detectSessionInUrl:!1,persistSession:!0,autoRefreshToken:!0,redirectTo:U1,storage:zD}});function br({className:t="",children:e,...n}){return k.jsx("button",{...n,className:"px-4 py-2 lg:py-3 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-500 focus-visible:ring-offset-2 min-h-[40px] flex items-center justify-center "+t,children:e})}const B1=R.createContext();function ID({children:t}){const[e,n]=R.useState(null),r=R.useCallback(i=>{n({id:Date.now(),...i}),setTimeout(()=>n(null),3e3)},[]);return k.jsxs(B1.Provider,{value:{toast:e,showToast:r},children:[t,e&&k.jsx(UD,{toast:e})]})}function ks(){return R.useContext(B1)}function UD({toast:t}){return k.jsxs("div",{role:"status","aria-live":"polite",className:`fixed bottom-6 left-1/2 -translate-x-1/2 bg-teal-800 text-white px-6 py-3 
                 rounded-xl shadow-xl animate-fadeIn text-sm lg:text-base`,children:[k.jsx("p",{className:"font-semibold",children:t.title}),t.description&&k.jsx("p",{className:"text-xs lg:text-sm opacity-90",children:t.description})]})}function BD(){const{showToast:t}=ks(),[e,n]=R.useState("login"),[r,i]=R.useState(""),[o,l]=R.useState(""),[u,f]=R.useState(!1),[h,p]=R.useState(!1);async function m(v){v.preventDefault(),p(!0),console.log(`Attempting ${e} for:`,r);const w=e==="login"?await Te.auth.signInWithPassword({email:r,password:o}):await Te.auth.signUp({email:r,password:o});w.error?(console.error("Auth error:",w.error),t({title:"Authentication failed",description:w.error.message,type:"error"}),p(!1)):console.log("Auth success:",w.data)}async function y(){if(!r){t({title:"Enter your email address first",type:"error"});return}const{error:v}=await Te.auth.resetPasswordForEmail(r,{redirectTo:U1.replace("/auth","/reset-password")});t(v?{title:"Reset failed",description:v.message,type:"error"}:{title:"Check your email!",description:"We sent you a password reset link.",type:"success"})}return k.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center 
                    bg-gradient-to-br from-teal-800 to-teal-900 p-6`,children:k.jsxs("div",{className:`
        w-full max-w-sm bg-white rounded-3xl lg:rounded-2xl shadow-xl 
        p-8 space-y-6 animate-fadeIn
      `,children:[k.jsxs("div",{className:"text-center space-y-2",children:[k.jsx("div",{"aria-hidden":"true",className:"text-5xl",children:""}),k.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-teal-800 tracking-tight",children:"Growing Minds"}),k.jsx("p",{className:"text-xs lg:text-sm text-gray-500 uppercase font-medium",children:"Educator Portal"})]}),k.jsxs("form",{onSubmit:m,className:"space-y-4",children:[k.jsx("input",{id:"email",type:"email",autoFocus:!0,autoComplete:"email",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl
                       shadow-inner text-sm lg:text-base focus-visible:ring-2
                       focus-visible:ring-teal-700`,placeholder:"Email address",value:r,onChange:v=>i(v.target.value),required:!0}),k.jsxs("div",{className:"relative",children:[k.jsx("input",{id:"password",type:u?"text":"password",autoComplete:e==="login"?"current-password":"new-password",className:`w-full p-3 lg:p-4 pr-12 border border-gray-300 rounded-xl
                         shadow-inner text-sm lg:text-base focus-visible:ring-2
                         focus-visible:ring-teal-700`,placeholder:"Password",value:o,onChange:v=>l(v.target.value),required:!0}),k.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":u?"Hide password":"Show password",children:u?"":""})]}),k.jsx(br,{type:"submit",disabled:h,"aria-label":e==="login"?"Sign in":"Create account",className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4
                       rounded-xl shadow-lg font-semibold text-sm lg:text-base disabled:opacity-50`,children:h?" Please wait...":e==="login"?"Sign In":"Create Account"})]}),e==="login"&&k.jsx("button",{type:"button",onClick:y,className:"w-full text-teal-700 underline text-xs lg:text-sm hover:text-teal-900",children:"Forgot your password?"}),k.jsx("button",{"aria-label":"Toggle auth mode",onClick:()=>n(e==="login"?"signup":"login"),className:"block text-center text-xs lg:text-sm text-gray-500 hover:text-gray-700",children:e==="login"?"New educator? Create an account":"Already have an account? Sign in"}),k.jsxs("div",{className:"text-center text-[10px] text-gray-400 pt-4 border-t border-gray-100",children:["Last updated: ",new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})})}const P1=R.createContext();function PD({children:t}){const[e,n]=R.useState(null),[r,i]=R.useState(null),[o,l]=R.useState(!0),u=R.useRef(null),f=R.useRef(null),h=async(m,y=!1)=>{if(!y&&u.current&&f.current===m.id)return console.log(" Waiting for existing profile load to complete"),await u.current;if(!y&&f.current===m.id&&r){console.log(" Profile already loaded, skipping");return}return console.log(" Loading profile for:",m.email),f.current=m.id,u.current=(async()=>{try{const v=new Promise((A,C)=>setTimeout(()=>C(new Error("Profile fetch timeout after 10s")),1e4)),w=Te.from("profiles").select("*").eq("id",m.id).single(),{data:S,error:E}=await Promise.race([w,v]),T={id:m.id,email:m.email||m.user_metadata?.email,role:m.user_metadata?.role||"educator",is_approved:!0};E?(console.error("Profile load error:",E),n(m),i(T),console.log(" Using minimal profile (fetch failed)")):(n(m),i(S||T),console.log(" Profile loaded successfully"))}catch(v){console.error("Profile fetch exception:",v);const w={id:m.id,email:m.email||m.user_metadata?.email,role:"educator",is_approved:!0};n(m),i(w),console.log(" Using minimal profile (exception)")}finally{u.current=null,l(!1),console.log("Profile load complete")}})(),await u.current};R.useEffect(()=>{Te.auth.getSession().then(({data:{session:y},error:v})=>{if(console.log("Session check:",{hasSession:!!y,error:v}),v){if(console.error("Session restore error:",v),v.message?.includes("Invalid")||v.message?.includes("parse"))try{localStorage.removeItem("sb-aaiovfryjlcdijdyknik-auth-token"),localStorage.removeItem("sb-aaiovfryjlcdijdyknik-auth-token-code-verifier"),console.log("Cleared corrupted session")}catch(w){console.error("Failed to clear session:",w)}l(!1);return}y?.user?(console.log("Restoring session for:",y.user.email),h(y.user)):(console.log("No session found"),l(!1))}).catch(y=>{console.error("Session fetch exception:",y),l(!1)});const{data:{subscription:m}}=Te.auth.onAuthStateChange(async(y,v)=>{if(console.log("Auth state change:",y,"hasSession:",!!v,"user:",v?.user?.email),v?.user)await h(v.user);else{if(console.log("No session in auth state change"),y==="TOKEN_REFRESHED"&&!v){console.log("Token refresh returned no session, attempting recovery...");try{const{data:{session:w}}=await Te.auth.getSession();if(w?.user){console.log("Recovered session for:",w.user.email),await h(w.user);return}}catch(w){console.error("Session recovery failed:",w)}}y==="SIGNED_OUT"&&(console.log("User signed out, clearing state"),n(null),i(null)),l(!1)}});return()=>m.unsubscribe()},[]);const p=R.useMemo(()=>({user:e,profile:r,loading:o}),[e,r,o]);return k.jsx(P1.Provider,{value:p,children:t})}function Pr(){return R.useContext(P1)}function HD(){const{user:t,profile:e}=Pr(),n=t?.email||e?.email||"educator",r=n.includes("@")?n.split("@")[0]:n,i=!e;return k.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center p-8 text-center
                 bg-gradient-to-br from-teal-800 to-teal-900 text-white animate-fadeIn`,children:[k.jsx("div",{"aria-hidden":"true",className:`w-20 h-20 lg:w-24 lg:h-24 bg-white/10 text-white rounded-full
                   flex items-center justify-center text-4xl lg:text-5xl
                   mb-6 shadow-xl backdrop-blur-sm border border-white/20`,children:""}),k.jsx("h1",{className:"text-2xl lg:text-3xl font-bold tracking-tight mb-3",children:i?"Setting Up Your Account":"Awaiting Approval"}),k.jsxs("p",{className:"text-sm lg:text-base text-teal-100 leading-relaxed max-w-xs mb-8",children:["Hi ",k.jsx("span",{className:"font-semibold",children:r}),"  your account ",i?"is being created":"is awaiting educator verification",". You'll be notified as soon as an admin approves your access."]}),k.jsx("button",{"aria-label":"Sign out",onClick:()=>Te.auth.signOut(),className:`text-white/90 underline text-xs lg:text-sm tracking-wider
                   hover:text-white transition`,children:"Sign Out"})]})}function $D(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[i,o]=R.useState(!1),[l,u]=R.useState(!0),{showToast:f}=ks(),h=Uc();R.useEffect(()=>{(async()=>{const y=new URLSearchParams(window.location.hash.split("?")[1]),v=y.get("access_token");if(y.get("type")==="recovery"&&v){const{error:S}=await Te.auth.setSession({access_token:v,refresh_token:y.get("refresh_token")||""});S&&(f({title:"Invalid reset link",description:"This link may have expired. Please request a new one.",type:"error"}),setTimeout(()=>h("/auth"),2e3))}else f({title:"No reset token found",description:"Please use the link from your email.",type:"error"}),setTimeout(()=>h("/auth"),2e3);u(!1)})()},[h,f]);async function p(m){if(m.preventDefault(),t!==n){f({title:"Passwords do not match",type:"error"});return}o(!0);const{error:y}=await Te.auth.updateUser({password:t});y?f({title:"Reset failed",description:y.message,type:"error"}):(f({title:"Password Updated",description:"You may now log in with your new password.",type:"success"}),setTimeout(()=>h("/auth"),1500)),o(!1)}return l?k.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-800 to-teal-900",children:k.jsx("div",{className:"text-white text-xl font-semibold",children:"Verifying reset link..."})}):k.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center
                    bg-gradient-to-br from-teal-800 to-teal-900 p-6`,children:k.jsxs("div",{className:`w-full max-w-sm bg-white rounded-3xl lg:rounded-2xl shadow-xl
                      p-8 space-y-6 animate-fadeIn`,children:[k.jsxs("div",{className:"text-center space-y-2",children:[k.jsx("div",{"aria-hidden":"true",className:"text-5xl",children:""}),k.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-teal-800 tracking-tight",children:"Reset Password"}),k.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:"Enter your new password below"})]}),k.jsxs("form",{onSubmit:p,className:"space-y-4",children:[k.jsx("input",{type:"password",placeholder:"New password",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl
                       shadow-inner text-sm lg:text-base focus-visible:ring-2
                       focus-visible:ring-teal-700`,value:t,onChange:m=>e(m.target.value),required:!0}),k.jsx("input",{type:"password",placeholder:"Confirm password",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl
                       shadow-inner text-sm lg:text-base focus-visible:ring-2
                       focus-visible:ring-teal-700`,value:n,onChange:m=>r(m.target.value),required:!0}),k.jsx(br,{className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4
                       rounded-xl shadow-lg font-semibold text-sm lg:text-base`,disabled:i,children:i?"Updating...":"Reset Password"})]}),k.jsx("button",{onClick:()=>h("/auth"),className:"block text-center text-xs lg:text-sm text-gray-500 hover:text-gray-700",children:"Back to login"})]})})}const{entries:H1,setPrototypeOf:ZS,isFrozen:qD,getPrototypeOf:VD,getOwnPropertyDescriptor:FD}=Object;let{freeze:an,seal:rr,create:Ig}=Object,{apply:Ug,construct:Bg}=typeof Reflect<"u"&&Reflect;an||(an=function(e){return e});rr||(rr=function(e){return e});Ug||(Ug=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return e.apply(n,i)});Bg||(Bg=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const vf=ln(Array.prototype.forEach),GD=ln(Array.prototype.lastIndexOf),ex=ln(Array.prototype.pop),Vl=ln(Array.prototype.push),KD=ln(Array.prototype.splice),Bf=ln(String.prototype.toLowerCase),Pm=ln(String.prototype.toString),Hm=ln(String.prototype.match),Fl=ln(String.prototype.replace),WD=ln(String.prototype.indexOf),JD=ln(String.prototype.trim),dr=ln(Object.prototype.hasOwnProperty),rn=ln(RegExp.prototype.test),Gl=YD(TypeError);function ln(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ug(t,e,r)}}function YD(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Bg(t,n)}}function Ne(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bf;ZS&&ZS(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=n(i);o!==i&&(qD(e)||(e[r]=o),i=o)}t[i]=!0}return t}function XD(t){for(let e=0;e<t.length;e++)dr(t,e)||(t[e]=null);return t}function Cr(t){const e=Ig(null);for(const[n,r]of H1(t))dr(t,n)&&(Array.isArray(r)?e[n]=XD(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Cr(r):e[n]=r);return e}function Kl(t,e){for(;t!==null;){const r=FD(t,e);if(r){if(r.get)return ln(r.get);if(typeof r.value=="function")return ln(r.value)}t=VD(t)}function n(){return null}return n}const tx=an(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$m=an(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qm=an(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),QD=an(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vm=an(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ZD=an(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nx=an(["#text"]),rx=an(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Fm=an(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ix=an(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),wf=an(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),e2=rr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),t2=rr(/<%[\w\W]*|[\w\W]*%>/gm),n2=rr(/\$\{[\w\W]*/gm),r2=rr(/^data-[\-\w.\u00B7-\uFFFF]+$/),i2=rr(/^aria-[\-\w]+$/),$1=rr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),s2=rr(/^(?:\w+script|data):/i),o2=rr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q1=rr(/^html$/i),a2=rr(/^[a-z][.\w]*(-[.\w]+)+$/i);var sx=Object.freeze({__proto__:null,ARIA_ATTR:i2,ATTR_WHITESPACE:o2,CUSTOM_ELEMENT:a2,DATA_ATTR:r2,DOCTYPE_NAME:q1,ERB_EXPR:t2,IS_ALLOWED_URI:$1,IS_SCRIPT_OR_DATA:s2,MUSTACHE_EXPR:e2,TMPLIT_EXPR:n2});const Wl={element:1,text:3,progressingInstruction:7,comment:8,document:9},l2=function(){return typeof window>"u"?null:window},c2=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},ox=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function V1(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l2();const e=le=>V1(le);if(e.version="3.3.1",e.removed=[],!t||!t.document||t.document.nodeType!==Wl.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:l,Node:u,Element:f,NodeFilter:h,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:y,trustedTypes:v}=t,w=f.prototype,S=Kl(w,"cloneNode"),E=Kl(w,"remove"),T=Kl(w,"nextSibling"),A=Kl(w,"childNodes"),C=Kl(w,"parentNode");if(typeof l=="function"){const le=n.createElement("template");le.content&&le.content.ownerDocument&&(n=le.content.ownerDocument)}let L,I="";const{implementation:H,createNodeIterator:z,createDocumentFragment:W,getElementsByTagName:ee}=n,{importNode:ne}=r;let fe=ox();e.isSupported=typeof H1=="function"&&typeof C=="function"&&H&&H.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ge,ERB_EXPR:Me,TMPLIT_EXPR:Se,DATA_ATTR:xe,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:ie,CUSTOM_ELEMENT:Oe}=sx;let{IS_ALLOWED_URI:Be}=sx,N=null;const K=Ne({},[...tx,...$m,...qm,...Vm,...nx]);let Z=null;const se=Ne({},[...rx,...Fm,...ix,...wf]);let ae=Object.seal(Ig(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),_e=null,Ue=null;const ft=Object.seal(Ig(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let rt=!0,Hr=!0,Rs=!1,xo=!0,$r=!1,In=!0,sr=!1,Ns=!1,Pa=!1,qr=!1,Mi=!1,Di=!1,Eo=!0,Gc=!1;const mh="user-content-";let Ht=!0,Ms=!1,Vr={},Sn=null;const Li=Ne({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Kc=null;const Ha=Ne({},["audio","video","img","source","image","track"]);let $a=null;const Wc=Ne({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xr="http://www.w3.org/1998/Math/MathML",Lt="http://www.w3.org/2000/svg",jt="http://www.w3.org/1999/xhtml";let wt=jt,qa=!1,Va=null;const gh=Ne({},[xr,Lt,jt],Pm);let Fr=Ne({},["mi","mo","mn","ms","mtext"]),Gr=Ne({},["annotation-xml"]);const To=Ne({},["title","style","font","a","script"]);let xn=null;const _o=["application/xhtml+xml","text/html"],Ds="text/html";let yt=null,Kr=null;const Fa=n.createElement("form"),ji=function(M){return M instanceof RegExp||M instanceof Function},Ga=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Kr&&Kr===M)){if((!M||typeof M!="object")&&(M={}),M=Cr(M),xn=_o.indexOf(M.PARSER_MEDIA_TYPE)===-1?Ds:M.PARSER_MEDIA_TYPE,yt=xn==="application/xhtml+xml"?Pm:Bf,N=dr(M,"ALLOWED_TAGS")?Ne({},M.ALLOWED_TAGS,yt):K,Z=dr(M,"ALLOWED_ATTR")?Ne({},M.ALLOWED_ATTR,yt):se,Va=dr(M,"ALLOWED_NAMESPACES")?Ne({},M.ALLOWED_NAMESPACES,Pm):gh,$a=dr(M,"ADD_URI_SAFE_ATTR")?Ne(Cr(Wc),M.ADD_URI_SAFE_ATTR,yt):Wc,Kc=dr(M,"ADD_DATA_URI_TAGS")?Ne(Cr(Ha),M.ADD_DATA_URI_TAGS,yt):Ha,Sn=dr(M,"FORBID_CONTENTS")?Ne({},M.FORBID_CONTENTS,yt):Li,_e=dr(M,"FORBID_TAGS")?Ne({},M.FORBID_TAGS,yt):Cr({}),Ue=dr(M,"FORBID_ATTR")?Ne({},M.FORBID_ATTR,yt):Cr({}),Vr=dr(M,"USE_PROFILES")?M.USE_PROFILES:!1,rt=M.ALLOW_ARIA_ATTR!==!1,Hr=M.ALLOW_DATA_ATTR!==!1,Rs=M.ALLOW_UNKNOWN_PROTOCOLS||!1,xo=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$r=M.SAFE_FOR_TEMPLATES||!1,In=M.SAFE_FOR_XML!==!1,sr=M.WHOLE_DOCUMENT||!1,qr=M.RETURN_DOM||!1,Mi=M.RETURN_DOM_FRAGMENT||!1,Di=M.RETURN_TRUSTED_TYPE||!1,Pa=M.FORCE_BODY||!1,Eo=M.SANITIZE_DOM!==!1,Gc=M.SANITIZE_NAMED_PROPS||!1,Ht=M.KEEP_CONTENT!==!1,Ms=M.IN_PLACE||!1,Be=M.ALLOWED_URI_REGEXP||$1,wt=M.NAMESPACE||jt,Fr=M.MATHML_TEXT_INTEGRATION_POINTS||Fr,Gr=M.HTML_INTEGRATION_POINTS||Gr,ae=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&ji(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ae.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&ji(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ae.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ae.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$r&&(Hr=!1),Mi&&(qr=!0),Vr&&(N=Ne({},nx),Z=[],Vr.html===!0&&(Ne(N,tx),Ne(Z,rx)),Vr.svg===!0&&(Ne(N,$m),Ne(Z,Fm),Ne(Z,wf)),Vr.svgFilters===!0&&(Ne(N,qm),Ne(Z,Fm),Ne(Z,wf)),Vr.mathMl===!0&&(Ne(N,Vm),Ne(Z,ix),Ne(Z,wf))),M.ADD_TAGS&&(typeof M.ADD_TAGS=="function"?ft.tagCheck=M.ADD_TAGS:(N===K&&(N=Cr(N)),Ne(N,M.ADD_TAGS,yt))),M.ADD_ATTR&&(typeof M.ADD_ATTR=="function"?ft.attributeCheck=M.ADD_ATTR:(Z===se&&(Z=Cr(Z)),Ne(Z,M.ADD_ATTR,yt))),M.ADD_URI_SAFE_ATTR&&Ne($a,M.ADD_URI_SAFE_ATTR,yt),M.FORBID_CONTENTS&&(Sn===Li&&(Sn=Cr(Sn)),Ne(Sn,M.FORBID_CONTENTS,yt)),M.ADD_FORBID_CONTENTS&&(Sn===Li&&(Sn=Cr(Sn)),Ne(Sn,M.ADD_FORBID_CONTENTS,yt)),Ht&&(N["#text"]=!0),sr&&Ne(N,["html","head","body"]),N.table&&(Ne(N,["tbody"]),delete _e.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw Gl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Gl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=M.TRUSTED_TYPES_POLICY,I=L.createHTML("")}else L===void 0&&(L=c2(v,i)),L!==null&&typeof I=="string"&&(I=L.createHTML(""));an&&an(M),Kr=M}},Ka=Ne({},[...$m,...qm,...QD]),Wa=Ne({},[...Vm,...ZD]),Jc=function(M){let Y=C(M);(!Y||!Y.tagName)&&(Y={namespaceURI:wt,tagName:"template"});const re=Bf(M.tagName),qe=Bf(Y.tagName);return Va[M.namespaceURI]?M.namespaceURI===Lt?Y.namespaceURI===jt?re==="svg":Y.namespaceURI===xr?re==="svg"&&(qe==="annotation-xml"||Fr[qe]):!!Ka[re]:M.namespaceURI===xr?Y.namespaceURI===jt?re==="math":Y.namespaceURI===Lt?re==="math"&&Gr[qe]:!!Wa[re]:M.namespaceURI===jt?Y.namespaceURI===Lt&&!Gr[qe]||Y.namespaceURI===xr&&!Fr[qe]?!1:!Wa[re]&&(To[re]||!Ka[re]):!!(xn==="application/xhtml+xml"&&Va[M.namespaceURI]):!1},fn=function(M){Vl(e.removed,{element:M});try{C(M).removeChild(M)}catch{E(M)}},or=function(M,Y){try{Vl(e.removed,{attribute:Y.getAttributeNode(M),from:Y})}catch{Vl(e.removed,{attribute:null,from:Y})}if(Y.removeAttribute(M),M==="is")if(qr||Mi)try{fn(Y)}catch{}else try{Y.setAttribute(M,"")}catch{}},Ja=function(M){let Y=null,re=null;if(Pa)M="<remove></remove>"+M;else{const Re=Hm(M,/^[\r\n\t ]+/);re=Re&&Re[0]}xn==="application/xhtml+xml"&&wt===jt&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");const qe=L?L.createHTML(M):M;if(wt===jt)try{Y=new y().parseFromString(qe,xn)}catch{}if(!Y||!Y.documentElement){Y=H.createDocument(wt,"template",null);try{Y.documentElement.innerHTML=qa?I:qe}catch{}}const lt=Y.body||Y.documentElement;return M&&re&&lt.insertBefore(n.createTextNode(re),lt.childNodes[0]||null),wt===jt?ee.call(Y,sr?"html":"body")[0]:sr?Y.documentElement:lt},Ya=function(M){return z.call(M.ownerDocument||M,M,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Un=function(M){return M instanceof m&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof p)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},St=function(M){return typeof u=="function"&&M instanceof u};function it(le,M,Y){vf(le,re=>{re.call(e,M,Y,Kr)})}const Wr=function(M){let Y=null;if(it(fe.beforeSanitizeElements,M,null),Un(M))return fn(M),!0;const re=yt(M.nodeName);if(it(fe.uponSanitizeElement,M,{tagName:re,allowedTags:N}),In&&M.hasChildNodes()&&!St(M.firstElementChild)&&rn(/<[/\w!]/g,M.innerHTML)&&rn(/<[/\w!]/g,M.textContent)||M.nodeType===Wl.progressingInstruction||In&&M.nodeType===Wl.comment&&rn(/<[/\w]/g,M.data))return fn(M),!0;if(!(ft.tagCheck instanceof Function&&ft.tagCheck(re))&&(!N[re]||_e[re])){if(!_e[re]&&Yc(re)&&(ae.tagNameCheck instanceof RegExp&&rn(ae.tagNameCheck,re)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(re)))return!1;if(Ht&&!Sn[re]){const qe=C(M)||M.parentNode,lt=A(M)||M.childNodes;if(lt&&qe){const Re=lt.length;for(let $t=Re-1;$t>=0;--$t){const Bn=S(lt[$t],!0);Bn.__removalCount=(M.__removalCount||0)+1,qe.insertBefore(Bn,T(M))}}}return fn(M),!0}return M instanceof f&&!Jc(M)||(re==="noscript"||re==="noembed"||re==="noframes")&&rn(/<\/no(script|embed|frames)/i,M.innerHTML)?(fn(M),!0):($r&&M.nodeType===Wl.text&&(Y=M.textContent,vf([ge,Me,Se],qe=>{Y=Fl(Y,qe," ")}),M.textContent!==Y&&(Vl(e.removed,{element:M.cloneNode()}),M.textContent=Y)),it(fe.afterSanitizeElements,M,null),!1)},ko=function(M,Y,re){if(Eo&&(Y==="id"||Y==="name")&&(re in n||re in Fa))return!1;if(!(Hr&&!Ue[Y]&&rn(xe,Y))){if(!(rt&&rn($,Y))){if(!(ft.attributeCheck instanceof Function&&ft.attributeCheck(Y,M))){if(!Z[Y]||Ue[Y]){if(!(Yc(M)&&(ae.tagNameCheck instanceof RegExp&&rn(ae.tagNameCheck,M)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(M))&&(ae.attributeNameCheck instanceof RegExp&&rn(ae.attributeNameCheck,Y)||ae.attributeNameCheck instanceof Function&&ae.attributeNameCheck(Y,M))||Y==="is"&&ae.allowCustomizedBuiltInElements&&(ae.tagNameCheck instanceof RegExp&&rn(ae.tagNameCheck,re)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(re))))return!1}else if(!$a[Y]){if(!rn(Be,Fl(re,ie,""))){if(!((Y==="src"||Y==="xlink:href"||Y==="href")&&M!=="script"&&WD(re,"data:")===0&&Kc[M])){if(!(Rs&&!rn(X,Fl(re,ie,"")))){if(re)return!1}}}}}}}return!0},Yc=function(M){return M!=="annotation-xml"&&Hm(M,Oe)},Xc=function(M){it(fe.beforeSanitizeAttributes,M,null);const{attributes:Y}=M;if(!Y||Un(M))return;const re={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Z,forceKeepAttr:void 0};let qe=Y.length;for(;qe--;){const lt=Y[qe],{name:Re,namespaceURI:$t,value:Bn}=lt,dn=yt(Re),Er=Bn;let Rt=Re==="value"?Er:JD(Er);if(re.attrName=dn,re.attrValue=Rt,re.keepAttr=!0,re.forceKeepAttr=void 0,it(fe.uponSanitizeAttribute,M,re),Rt=re.attrValue,Gc&&(dn==="id"||dn==="name")&&(or(Re,M),Rt=mh+Rt),In&&rn(/((--!?|])>)|<\/(style|title|textarea)/i,Rt)){or(Re,M);continue}if(dn==="attributename"&&Hm(Rt,"href")){or(Re,M);continue}if(re.forceKeepAttr)continue;if(!re.keepAttr){or(Re,M);continue}if(!xo&&rn(/\/>/i,Rt)){or(Re,M);continue}$r&&vf([ge,Me,Se],Qa=>{Rt=Fl(Rt,Qa," ")});const Xa=yt(M.nodeName);if(!ko(Xa,dn,Rt)){or(Re,M);continue}if(L&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!$t)switch(v.getAttributeType(Xa,dn)){case"TrustedHTML":{Rt=L.createHTML(Rt);break}case"TrustedScriptURL":{Rt=L.createScriptURL(Rt);break}}if(Rt!==Er)try{$t?M.setAttributeNS($t,Re,Rt):M.setAttribute(Re,Rt),Un(M)?fn(M):ex(e.removed)}catch{or(Re,M)}}it(fe.afterSanitizeAttributes,M,null)},Qc=function le(M){let Y=null;const re=Ya(M);for(it(fe.beforeSanitizeShadowDOM,M,null);Y=re.nextNode();)it(fe.uponSanitizeShadowNode,Y,null),Wr(Y),Xc(Y),Y.content instanceof o&&le(Y.content);it(fe.afterSanitizeShadowDOM,M,null)};return e.sanitize=function(le){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=null,re=null,qe=null,lt=null;if(qa=!le,qa&&(le="<!-->"),typeof le!="string"&&!St(le))if(typeof le.toString=="function"){if(le=le.toString(),typeof le!="string")throw Gl("dirty is not a string, aborting")}else throw Gl("toString is not a function");if(!e.isSupported)return le;if(Ns||Ga(M),e.removed=[],typeof le=="string"&&(Ms=!1),Ms){if(le.nodeName){const Bn=yt(le.nodeName);if(!N[Bn]||_e[Bn])throw Gl("root node is forbidden and cannot be sanitized in-place")}}else if(le instanceof u)Y=Ja("<!---->"),re=Y.ownerDocument.importNode(le,!0),re.nodeType===Wl.element&&re.nodeName==="BODY"||re.nodeName==="HTML"?Y=re:Y.appendChild(re);else{if(!qr&&!$r&&!sr&&le.indexOf("<")===-1)return L&&Di?L.createHTML(le):le;if(Y=Ja(le),!Y)return qr?null:Di?I:""}Y&&Pa&&fn(Y.firstChild);const Re=Ya(Ms?le:Y);for(;qe=Re.nextNode();)Wr(qe),Xc(qe),qe.content instanceof o&&Qc(qe.content);if(Ms)return le;if(qr){if(Mi)for(lt=W.call(Y.ownerDocument);Y.firstChild;)lt.appendChild(Y.firstChild);else lt=Y;return(Z.shadowroot||Z.shadowrootmode)&&(lt=ne.call(r,lt,!0)),lt}let $t=sr?Y.outerHTML:Y.innerHTML;return sr&&N["!doctype"]&&Y.ownerDocument&&Y.ownerDocument.doctype&&Y.ownerDocument.doctype.name&&rn(q1,Y.ownerDocument.doctype.name)&&($t="<!DOCTYPE "+Y.ownerDocument.doctype.name+`>
`+$t),$r&&vf([ge,Me,Se],Bn=>{$t=Fl($t,Bn," ")}),L&&Di?L.createHTML($t):$t},e.setConfig=function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ga(le),Ns=!0},e.clearConfig=function(){Kr=null,Ns=!1},e.isValidAttribute=function(le,M,Y){Kr||Ga({});const re=yt(le),qe=yt(M);return ko(re,qe,Y)},e.addHook=function(le,M){typeof M=="function"&&Vl(fe[le],M)},e.removeHook=function(le,M){if(M!==void 0){const Y=GD(fe[le],M);return Y===-1?void 0:KD(fe[le],Y,1)[0]}return ex(fe[le])},e.removeHooks=function(le){fe[le]=[]},e.removeAllHooks=function(){fe=ox()},e}var u2=V1(),Gm={exports:{}},Km={};var ax;function f2(){if(ax)return Km;ax=1;var t=zc();function e(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function u(m,y){var v=y(),w=r({inst:{value:v,getSnapshot:y}}),S=w[0].inst,E=w[1];return o(function(){S.value=v,S.getSnapshot=y,f(S)&&E({inst:S})},[m,v,y]),i(function(){return f(S)&&E({inst:S}),m(function(){f(S)&&E({inst:S})})},[m]),l(v),v}function f(m){var y=m.getSnapshot;m=m.value;try{var v=y();return!n(m,v)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Km.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Km}var lx;function F1(){return lx||(lx=1,Gm.exports=f2()),Gm.exports}var G1=F1();function Jt(t){this.content=t}Jt.prototype={constructor:Jt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Jt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Jt(n)},addToStart:function(t,e){return new Jt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Jt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Jt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Jt.from(t),t.size?new Jt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Jt.from(t),t.size?new Jt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Jt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Jt.from=function(t){if(t instanceof Jt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Jt(e)};function K1(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)n++;return n}if(i.content.size||o.content.size){let l=K1(i.content,o.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function W1(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let l=t.child(--i),u=e.child(--o),f=l.nodeSize;if(l==u){n-=f,r-=f;continue}if(!l.sameMarkup(u))return{a:n,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,n--,r--;return{a:n,b:r}}if(l.content.size||u.content.size){let h=W1(l.content,u.content,n-1,r-1);if(h)return h}n-=f,r-=f}}class J{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let l=0,u=0;u<n;l++){let f=this.content[l],h=u+f.nodeSize;if(h>e&&r(f,i+u,o||null,l)!==!1&&f.content.size){let p=u+1;f.nodesBetween(Math.max(0,e-p),Math.min(f.content.size,n-p),r,i+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",l=!0;return this.nodesBetween(e,n,(u,f)=>{let h=u.isText?u.text.slice(Math.max(e,f)-f,n-f):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new J(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,l=0;l<n;o++){let u=this.content[o],f=l+u.nodeSize;f>e&&((l<e||f>n)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,n-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,n-l-1))),r.push(u),i+=u.nodeSize),l=f}return new J(r,i)}cutByIndex(e,n){return e==n?J.empty:e==0&&n==this.content.length?this:new J(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new J(i,o)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return K1(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return W1(this,e,n,r)}findIndex(e){if(e==0)return Sf(0,e);if(e==this.size)return Sf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?Sf(n+1,o):Sf(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return J.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new J(n||e,r)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const Wm={index:0,offset:0};function Sf(t,e){return Wm.index=t,Wm.offset=e,Wm}function Yf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Yf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Yf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Xe=class Pg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Yf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Pg.none;if(e instanceof Pg)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Xe.none=[];class Xf extends Error{}class te{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Y1(this.content,e+this.openStart,n);return r&&new te(r,this.openStart,this.openEnd)}removeBetween(e,n){return new te(J1(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return te.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new te(J.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new te(e,r,i)}}te.empty=new te(J.empty,0,0);function J1(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:l,offset:u}=t.findIndex(n);if(i==e||o.isText){if(u!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(J1(o.content,e-i-1,n-i-1)))}function Y1(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),l=t.maybeChild(i);if(o==e||l.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let u=Y1(l.content,e-o-1,n,l);return u&&t.replaceChild(i,l.copy(u))}function d2(t,e,n){if(n.openStart>t.depth)throw new Xf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Xf("Inconsistent open depths");return X1(t,e,n,0)}function X1(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let l=X1(t,e,n,r+1);return o.copy(o.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,u=l.content;return lo(l,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=h2(n,t);return lo(o,Z1(t,l,u,e,r))}else return lo(o,Qf(t,e,r))}function Q1(t,e){if(!e.type.compatibleContent(t.type))throw new Xf("Cannot join "+e.type.name+" onto "+t.type.name)}function Hg(t,e,n){let r=t.node(n);return Q1(r,e.node(n)),r}function ao(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function oc(t,e,n,r){let i=(e||t).node(n),o=0,l=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(ao(t.nodeAfter,r),o++));for(let u=o;u<l;u++)ao(i.child(u),r);e&&e.depth==n&&e.textOffset&&ao(e.nodeBefore,r)}function lo(t,e){return t.type.checkContent(e),t.copy(e)}function Z1(t,e,n,r,i){let o=t.depth>i&&Hg(t,e,i+1),l=r.depth>i&&Hg(n,r,i+1),u=[];return oc(null,t,i,u),o&&l&&e.index(i)==n.index(i)?(Q1(o,l),ao(lo(o,Z1(t,e,n,r,i+1)),u)):(o&&ao(lo(o,Qf(t,e,i+1)),u),oc(e,n,i,u),l&&ao(lo(l,Qf(n,r,i+1)),u)),oc(r,null,i,u),new J(u)}function Qf(t,e,n){let r=[];if(oc(null,t,n,r),t.depth>n){let i=Hg(t,e,n+1);ao(lo(i,Qf(t,e,n+1)),r)}return oc(e,null,n,r),new J(r)}function h2(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(J.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Tc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Xe.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let u=r;r=i,i=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Zf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let l=e;;){let{index:u,offset:f}=l.content.findIndex(o),h=o-f;if(r.push(l,u,i+f),!h||(l=l.child(u),l.isText))break;o=h-1,i+=f+1}return new Tc(n,r,o)}static resolveCached(e,n){let r=cx.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==n)return l}else cx.set(e,r=new p2);let i=r.elts[r.i]=Tc.resolve(e,n);return r.i=(r.i+1)%m2,i}}class p2{constructor(){this.elts=[],this.i=0}}const m2=12,cx=new WeakMap;class Zf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const g2=Object.create(null);let bs=class $g{constructor(e,n,r,i=Xe.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||J.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Yf(this.attrs,n||e.defaultAttrs||g2)&&Xe.sameSet(this.marks,r||Xe.none)}copy(e=null){return e==this.content?this:new $g(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new $g(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return te.empty;let i=this.resolve(e),o=this.resolve(n),l=r?0:i.sharedDepth(n),u=i.start(l),h=i.node(l).content.cut(i.pos-u,o.pos-u);return new te(h,i.depth-l,o.depth-l)}replace(e,n,r){return d2(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Tc.resolveCached(this,e)}resolveNoCache(e){return Tc.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),eT(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=J.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),u=l&&l.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let f=i;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Xe.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Xe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=J.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};bs.prototype.text=void 0;class ed extends bs{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):eT(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ed(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ed(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function eT(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ho{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new y2(e,n);if(r.next==null)return ho.empty;let i=tT(r);r.next&&r.err("Unexpected trailing text");let o=T2(E2(i));return _2(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(l,u){let f=l.matchFragment(e,r);if(f&&(!n||f.validEnd))return J.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let y=o(m,u.concat(p));if(y)return y}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let u=i;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:f}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!i.type||f.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}ho.empty=new ho(!0);class y2{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function tT(t){let e=[];do e.push(b2(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function b2(t){let e=[];do e.push(v2(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function v2(t){let e=x2(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=w2(t,e);else break;return e}function ux(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function w2(t,e){let n=ux(t),r=n;return t.eat(",")&&(t.next!="}"?r=ux(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function S2(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let l=n[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function x2(t){if(t.eat("(")){let e=tT(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=S2(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function E2(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(l,u,f){let h={term:f,to:u};return e[l].push(h),h}function i(l,u){l.forEach(f=>f.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((f,h)=>f.concat(o(h,u)),[]);if(l.type=="seq")for(let f=0;;f++){let h=o(l.exprs[f],u);if(f==l.exprs.length-1)return h;i(h,u=n())}else if(l.type=="star"){let f=n();return r(u,f),i(o(l.expr,f),f),[r(f)]}else if(l.type=="plus"){let f=n();return i(o(l.expr,u),f),i(o(l.expr,f),f),[r(f)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let f=u;for(let h=0;h<l.min;h++){let p=n();i(o(l.expr,f),p),f=p}if(l.max==-1)i(o(l.expr,f),f);else for(let h=l.min;h<l.max;h++){let p=n();r(f,p),i(o(l.expr,f),p),f=p}return[r(f)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function nT(t,e){return e-t}function fx(t,e){let n=[];return r(e),n.sort(nT);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let l=0;l<o.length;l++){let{term:u,to:f}=o[l];!u&&n.indexOf(f)==-1&&r(f)}}}function T2(t){let e=Object.create(null);return n(fx(t,0));function n(r){let i=[];r.forEach(l=>{t[l].forEach(({term:u,to:f})=>{if(!u)return;let h;for(let p=0;p<i.length;p++)i[p][0]==u&&(h=i[p][1]);fx(t,f).forEach(p=>{h||i.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new ho(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let u=i[l][1].sort(nT);o.next.push({type:i[l][0],next:e[u.join(",")]||n(u)})}return o}}function _2(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,l=[];for(let u=0;u<i.next.length;u++){let{type:f,next:h}=i.next[u];l.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function rT(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function iT(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function sT(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function oT(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new A2(t,r,e[r]);return n}let dx=class aT{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=oT(e,r.attrs),this.defaultAttrs=rT(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ho.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:iT(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new bs(this,this.computeAttrs(e),J.from(n),Xe.setFrom(r))}createChecked(e=null,n,r){return n=J.from(n),this.checkContent(n),new bs(this,this.computeAttrs(e),n,Xe.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=J.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(J.empty,!0);return o?new bs(this,e,n.append(o),Xe.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){sT(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Xe.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,l)=>r[o]=new aT(o,n,l));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function k2(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class A2{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?k2(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Jd{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=oT(e,i.attrs),this.excluded=null;let o=rT(this.attrs);this.instance=o?new Xe(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Xe(this,iT(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new Jd(o,i++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){sT(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class lT{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Jt.from(e.nodes),n.marks=Jt.from(e.marks||{}),this.nodes=dx.compile(this.spec.nodes,this),this.marks=Jd.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=ho.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?hx(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:hx(this,l.split(" "))}this.nodeFromJSON=i=>bs.fromJSON(this,i),this.markFromJSON=i=>Xe.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof dx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new ed(r,r.defaultAttrs,e,Xe.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function hx(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],l=o;if(o)n.push(o);else for(let u in t.marks){let f=t.marks[u];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=f)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function C2(t){return t.tag!=null}function O2(t){return t.style!=null}class vs{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(C2(i))this.tags.push(i);else if(O2(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new mx(this,n,!1);return r.addAll(e,Xe.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new mx(this,n,!0);return r.addAll(e,Xe.none,n.from,n.to),te.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(M2(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=n))){if(l.getAttrs){let f=l.getAttrs(n);if(f===!1)continue;l.attrs=f||void 0}return l}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let u=n[l];if((u.priority==null?50:u.priority)<o)break}n.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=gx(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=gx(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new vs(e,vs.schemaRules(e)))}}const cT={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},R2={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},uT={ol:!0,ul:!0},_c=1,qg=2,ac=4;function px(t,e,n){return e!=null?(e?_c:0)|(e==="full"?qg:0):t&&t.whitespace=="pre"?_c|qg:n&~ac}class xf{constructor(e,n,r,i,o,l){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=Xe.none,this.match=o||(l&ac?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(J.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&_c)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=J.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!cT.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class mx{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,l=px(null,n.preserveWhitespace,0)|(r?ac:0);i?o=new xf(i.type,i.attrs,Xe.none,!0,n.topMatch||i.type.contentMatch,l):r?o=new xf(null,null,Xe.none,!0,null,l):o=new xf(e.schema.topNodeType,null,Xe.none,!0,null,l),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&qg?"full":this.localPreserveWS||(i.options&_c)>0,{schema:l}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let f=0;f<u.length;f++)f&&this.insertNode(l.linebreakReplacement.create(),n,!0),u[f]&&this.insertNode(l.text(u[f]),n,!/\S/.test(u[f]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=i.content[i.content.length-1],f=e.previousSibling;(!u||f&&f.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;uT.hasOwnProperty(l)&&this.parser.normalizeLists&&N2(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(f?f.ignore:R2.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,p=this.needsBlock;if(cT.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=f&&f.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,n);h&&this.addElementByRule(e,f,h,f.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let f=this.parser.matchStyle(o,l,this,u);if(!f)break;if(f.ignore)return null;if(f.clearMark?n=n.filter(h=>!f.clearMark(h)):n=n.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)u=f;else break}}return n}addElementByRule(e,n,r,i){let o,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(l,n.attrs||null,r,n.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[n.mark];r=r.concat(f.create(n.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof n.contentElement=="string"?f=e.querySelector(n.contentElement):typeof n.contentElement=="function"?f=n.contentElement(e):n.contentElement&&(f=n.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}o&&this.sync(u)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let l=this.open,u=0;l>=0;l--){let f=this.nodes[l],h=f.findWrapping(e);if(h&&(!i||i.length>h.length+u)&&(i=h,o=f,!h.length))break;if(f.solid){if(r)break;u+=2}}if(!i)return null;this.sync(o);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=Xe.none;for(let u of i.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):yx(u.type,e.type))&&(l=u.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=px(e,o,l.options);l.options&ac&&l.content.length==0&&(u|=ac);let f=Xe.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):yx(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new xf(e,n,f,i,null,u)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=_c)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(u,f)=>{for(;u>=0;u--){let h=n[u];if(h==""){if(u==n.length-1||u==0)continue;for(;f>=o;f--)if(l(u-1,f))return!0;return!1}else{let p=f>0||f==0&&i?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;f--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function N2(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&uT.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function M2(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function gx(t){let e={};for(let n in t)e[n]=t[n];return e}function yx(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],l=u=>{o.push(u);for(let f=0;f<u.edgeCount;f++){let{type:h,next:p}=u.edge(f);if(h==e||o.indexOf(p)<0&&l(p))return!0}};if(l(i.contentMatch))return!0}}class vo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Jm(n).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,f=0;for(;u<o.length&&f<l.marks.length;){let h=l.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,f++}for(;u<o.length;)i=o.pop()[1];for(;f<l.marks.length;){let h=l.marks[f++],p=this.serializeMark(h,l.isInline,n);p&&(o.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Pf(Jm(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Pf(Jm(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Pf(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new vo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=bx(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return bx(e.marks)}}function bx(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Jm(t){return t.document||window.document}const vx=new WeakMap;function D2(t){let e=vx.get(t);return e===void 0&&vx.set(t,e=L2(t)),e}function L2(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Pf(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=D2(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let u,f=n?t.createElementNS(n,i):t.createElement(i),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let y=m.indexOf(" ");y>0?f.setAttributeNS(m.slice(0,y),m.slice(y+1),h[m]):m=="style"&&f.style?f.style.cssText=h[m]:f.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let y=e[m];if(y===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:v,contentDOM:w}=Pf(t,y,n,r);if(f.appendChild(v),w){if(u)throw new RangeError("Multiple content holes");u=w}}}return{dom:f,contentDOM:u}}const fT=65535,dT=Math.pow(2,16);function j2(t,e){return t+e*dT}function wx(t){return t&fT}function z2(t){return(t-(t&fT))/dT}const hT=1,pT=2,Hf=4,mT=8;class Vg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&mT)>0}get deletedBefore(){return(this.delInfo&(hT|Hf))>0}get deletedAfter(){return(this.delInfo&(pT|Hf))>0}get deletedAcross(){return(this.delInfo&Hf)>0}}class Mn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Mn.empty)return Mn.empty}recover(e){let n=0,r=wx(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+z2(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?i:0);if(f>e)break;let h=this.ranges[u+o],p=this.ranges[u+l],m=f+h;if(e<=m){let y=h?e==f?-1:e==m?1:n:n,v=f+i+(y<0?0:p);if(r)return v;let w=e==(n<0?f:m)?null:j2(u/3,e-f),S=e==f?pT:e==m?hT:Hf;return(n<0?e!=f:e!=m)&&(S|=mT),new Vg(v,S,w)}i+=p-h}return r?e+i:new Vg(e+i,0,null)}touches(e,n){let r=0,i=wx(n),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[u+o],p=f+h;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],u=l-(this.inverted?o:0),f=l+(this.inverted?0:o),h=this.ranges[i+n],p=this.ranges[i+r];e(u,u+h,f,f+p),o+=p-h}}invert(){return new Mn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Mn.empty:new Mn(e<0?[0,-e,0]:[0,0,e])}}Mn.empty=new Mn([]);class kc{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new kc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new kc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,n);if(u.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,e=this._maps[f].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new Vg(e,i,null)}}const Ym=Object.create(null);class tn{getMap(){return Mn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ym[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ym)throw new RangeError("Duplicate use of step JSON ID "+e);return Ym[e]=n,n.prototype.jsonID=e,n}}class At{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new At(e,null)}static fail(e){return new At(null,e)}static fromReplace(e,n,r,i){try{return At.ok(e.replace(n,r,i))}catch(o){if(o instanceof Xf)return At.fail(o.message);throw o}}}function My(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(My(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return J.fromArray(r)}class ms extends tn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new te(My(n.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return At.fromReplace(e,this.from,this.to,o)}invert(){return new gr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ms(n.pos,r.pos,this.mark)}merge(e){return e instanceof ms&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ms(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ms(n.from,n.to,e.markFromJSON(n.mark))}}tn.jsonID("addMark",ms);class gr extends tn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new te(My(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return At.fromReplace(e,this.from,this.to,r)}invert(){return new ms(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new gr(n.pos,r.pos,this.mark)}merge(e){return e instanceof gr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new gr(n.from,n.to,e.markFromJSON(n.mark))}}tn.jsonID("removeMark",gr);class gs extends tn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return At.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return At.fromReplace(e,this.pos,this.pos+1,new te(J.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new gs(this.pos,n.marks[i]);return new gs(this.pos,this.mark)}}return new po(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gs(n.pos,e.markFromJSON(n.mark))}}tn.jsonID("addNodeMark",gs);class po extends tn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return At.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return At.fromReplace(e,this.pos,this.pos+1,new te(J.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new gs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new po(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new po(n.pos,e.markFromJSON(n.mark))}}tn.jsonID("removeNodeMark",po);class It extends tn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Fg(e,this.from,this.to)?At.fail("Structure replace would overwrite content"):At.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Mn([this.from,this.to-this.from,this.slice.size])}invert(e){return new It(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new It(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof It)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?te.empty:new te(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new It(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?te.empty:new te(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new It(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new It(n.from,n.to,te.fromJSON(e,n.slice),!!n.structure)}}tn.jsonID("replace",It);class Bt extends tn{constructor(e,n,r,i,o,l,u=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(Fg(e,this.from,this.gapFrom)||Fg(e,this.gapTo,this.to)))return At.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return At.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?At.fromReplace(e,this.from,this.to,r):At.fail("Content does not fit in gap")}getMap(){return new Mn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Bt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Bt(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Bt(n.from,n.to,n.gapFrom,n.gapTo,te.fromJSON(e,n.slice),n.insert,!!n.structure)}}tn.jsonID("replaceAround",Bt);function Fg(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function I2(t,e,n,r){let i=[],o=[],l,u;t.doc.nodesBetween(e,n,(f,h,p)=>{if(!f.isInline)return;let m=f.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let y=Math.max(h,e),v=Math.min(h+f.nodeSize,n),w=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(w)||(l&&l.to==y&&l.mark.eq(m[S])?l.to=v:i.push(l=new gr(y,v,m[S])));u&&u.to==y?u.to=v:o.push(u=new ms(y,v,r))}}),i.forEach(f=>t.step(f)),o.forEach(f=>t.step(f))}function U2(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(l,u)=>{if(!l.isInline)return;o++;let f=null;if(r instanceof Jd){let h=l.marks,p;for(;p=r.isInSet(h);)(f||(f=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(f=[r]):f=l.marks;if(f&&f.length){let h=Math.min(u+l.nodeSize,n);for(let p=0;p<f.length;p++){let m=f[p],y;for(let v=0;v<i.length;v++){let w=i[v];w.step==o-1&&m.eq(i[v].style)&&(y=w)}y?(y.to=h,y.step=o):i.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),i.forEach(l=>t.step(new gr(l.from,l.to,l.style)))}function Dy(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),l=[],u=e+1;for(let f=0;f<o.childCount;f++){let h=o.child(f),p=u+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new It(u,p,te.empty));else{r=m;for(let y=0;y<h.marks.length;y++)n.allowsMarkType(h.marks[y].type)||t.step(new gr(u,p,h.marks[y]));if(i&&h.isText&&n.whitespace!="pre"){let y,v=/\r?\n|\r/g,w;for(;y=v.exec(h.text);)w||(w=new te(J.from(n.schema.text(" ",n.allowedMarks(h.marks))),0,0)),l.push(new It(u+y.index,u+y.index+y[0].length,w))}}u=p}if(!r.validEnd){let f=r.fillBefore(J.empty,!0);t.replace(u,u,new te(f,0,0))}for(let f=l.length-1;f>=0;f--)t.step(l[f])}function B2(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ua(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let l=t.$from.node(r),u=t.$from.index(r)+i,f=t.$to.indexAfter(r)-o;if(r<t.depth&&l.canReplace(u,f,n))return r;if(r==0||l.type.spec.isolating||!B2(l,u,f))break;u&&(i=1),f<l.childCount&&(o=1)}return null}function P2(t,e,n){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),u=i.after(o+1),f=l,h=u,p=J.empty,m=0;for(let w=o,S=!1;w>n;w--)S||r.index(w)>0?(S=!0,p=J.from(r.node(w).copy(p)),m++):f--;let y=J.empty,v=0;for(let w=o,S=!1;w>n;w--)S||i.after(w+1)<i.end(w)?(S=!0,y=J.from(i.node(w).copy(y)),v++):h++;t.step(new Bt(f,h,l,u,new te(p.append(y),m,v),p.size-m,!0))}function Ly(t,e,n=null,r=t){let i=H2(t,e),o=i&&$2(r,e);return o?i.map(Sx).concat({type:e,attrs:n}).concat(o.map(Sx)):null}function Sx(t){return{type:t,attrs:null}}function H2(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return n.canReplaceWith(r,i,l)?o:null}function $2(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let f=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;f&&h<i;h++)f=f.matchType(n.child(h).type);return!f||!f.validEnd?null:l}function q2(t,e,n){let r=J.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let u=n[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=J.from(n[l].type.create(n[l].attrs,r))}let i=e.start,o=e.end;t.step(new Bt(i,o,i,o,new te(r,0,0),n.length,!0))}function V2(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(l,u)=>{let f=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,f)&&F2(t.doc,t.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?h=!1:!v&&w&&(h=!0)}h===!1&&yT(t,l,u,o),Dy(t,t.mapping.slice(o).map(u,1),r,void 0,h===null);let p=t.mapping.slice(o),m=p.map(u,1),y=p.map(u+l.nodeSize,1);return t.step(new Bt(m,y,m+1,y-1,new te(J.from(r.create(f,null,l.marks)),0,0),1,!0)),h===!0&&gT(t,l,u,o),!1}})}function gT(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(i.text);){let f=t.mapping.slice(r).map(n+1+o+l.index);t.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function yT(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+o);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function F2(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function G2(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Bt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new te(J.from(l),0,0),1,!0))}function Ti(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=n-2;h>o;h--,p--){let m=i.node(h),y=i.index(h);if(m.type.spec.isolating)return!1;let v=m.content.cutByIndex(y,m.childCount),w=r&&r[p+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let S=r&&r[p]||m;if(!m.canReplace(y+1,m.childCount)||!S.type.validContent(v))return!1}let u=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(u,u,f?f.type:i.node(o+1).type)}function K2(t,e,n=1,r){let i=t.doc.resolve(e),o=J.empty,l=J.empty;for(let u=i.depth,f=i.depth-n,h=n-1;u>f;u--,h--){o=J.from(i.node(u).copy(o));let p=r&&r[h];l=J.from(p?p.type.create(p.attrs,l):i.node(u).copy(l))}t.step(new It(e,e,new te(o.append(l),n,n),!0))}function As(t,e){let n=t.resolve(e),r=n.index();return bT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function W2(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function bT(t,e){return!!(t&&e&&!t.isLeaf&&W2(t,e))}function Yd(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,l,u=r.index(i);if(i==r.depth?(o=r.nodeBefore,l=r.nodeAfter):n>0?(o=r.node(i+1),u++,l=r.node(i).maybeChild(u)):(o=r.node(i).maybeChild(u-1),l=r.node(i+1)),o&&!o.isTextblock&&bT(o,l)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function J2(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),l=o.node().type;if(i&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(i);p&&!m?r=!1:!p&&m&&(r=!0)}let u=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);yT(t,p.node(),p.before(),u)}l.inlineContent&&Dy(t,e+n-1,l,o.node().contentMatchAt(o.index()),r==null);let f=t.mapping.slice(u),h=f.map(e-n);if(t.step(new It(h,f.map(e+n,-1),te.empty,!0)),r===!0){let p=t.doc.resolve(h);gT(t,p.node(),p.before(),t.steps.length)}return t}function Y2(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function vT(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,f=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(o==1)p=h.canReplace(f,f,i);else{let m=h.contentMatchAt(f).findWrapping(i.firstChild.type);p=m&&h.canReplaceWith(f,f,m[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function Xd(t,e,n=e,r=te.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return wT(i,o,r)?new It(e,n,r):new X2(i,o,r).fit()}function wT(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class X2{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=J.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=J.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,u=i.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let f=new te(o,l,u);return e>-1?new Bt(r.pos,e,this.$to.pos,this.$to.end(),f,n):f.size||r.pos!=this.$to.pos?new It(r.pos,i.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Xm(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:f,match:h}=this.frontier[u],p,m=null;if(n==1&&(l?h.matchType(l.type)||(m=h.fillBefore(J.from(l),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:m};if(n==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Xm(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new te(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Xm(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new te(Zl(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new te(Zl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let S=0;S<o.length;S++)this.openFrontierNode(o[S]);let l=this.unplaced,u=r?r.content:l.content,f=l.openStart-e,h=0,p=[],{match:m,type:y}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)p.push(i.child(S));m=m.matchFragment(i)}let v=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let S=u.child(h),E=m.matchType(S.type);if(!E)break;h++,(h>1||f==0||S.content.size)&&(m=E,p.push(ST(S.mark(y.allowedMarks(S.marks)),h==1?f:0,h==u.childCount?v:-1)))}let w=h==u.childCount;w||(v=-1),this.placed=ec(this.placed,n,J.from(p)),this.frontier[n].match=m,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,E=u;S<v;S++){let T=E.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),E=T.content}this.unplaced=w?e==0?te.empty:new te(Zl(l.content,e-1,1),e-1,v<0?l.openEnd:e-1):new te(Zl(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Qm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=Qm(e,n,i,r,o);if(l){for(let u=n-1;u>=0;u--){let{match:f,type:h}=this.frontier[u],p=Qm(e,u,h,f,!0);if(!p||p.childCount)continue e}return{depth:n,fit:l,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ec(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ec(this.placed,this.depth,J.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(J.empty,!0);n.childCount&&(this.placed=ec(this.placed,this.frontier.length,n))}}function Zl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Zl(t.firstChild.content,e-1,n)))}function ec(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ec(t.lastChild.content,e-1,n)))}function Xm(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function ST(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,ST(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(J.empty,!0)))),t.copy(r)}function Qm(t,e,n,r,i){let o=t.node(e),l=i?t.indexAfter(e):t.index(e);if(l==o.childCount&&!n.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!Q2(n,o.content,l)?u:null}function Q2(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Z2(t){return t.spec.defining||t.spec.definingForContent}function eL(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(wT(i,o,r))return t.step(new It(e,n,r));let l=ET(i,o);l[l.length-1]==0&&l.pop();let u=-(i.depth+1);l.unshift(u);for(let y=i.depth,v=i.pos-1;y>0;y--,v--){let w=i.node(y).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(y)>-1?u=y:i.before(y)==v&&l.splice(1,0,-y)}let f=l.indexOf(u),h=[],p=r.openStart;for(let y=r.content,v=0;;v++){let w=y.firstChild;if(h.push(w),v==r.openStart)break;y=w.content}for(let y=p-1;y>=0;y--){let v=h[y],w=Z2(v.type);if(w&&!v.sameMarkup(i.node(Math.abs(u)-1)))p=y;else if(w||!v.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let v=(y+p+1)%(r.openStart+1),w=h[v];if(w)for(let S=0;S<l.length;S++){let E=l[(S+f)%l.length],T=!0;E<0&&(T=!1,E=-E);let A=i.node(E-1),C=i.index(E-1);if(A.canReplaceWith(C,C,w.type,w.marks))return t.replace(i.before(E),T?o.after(E):n,new te(xT(r.content,0,r.openStart,v),v,r.openEnd))}}let m=t.steps.length;for(let y=l.length-1;y>=0&&(t.replace(e,n,r),!(t.steps.length>m));y--){let v=l[y];v<0||(e=i.before(v),n=o.after(v))}}function xT(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(xT(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(t).append(t);t=l.append(o.matchFragment(l).fillBefore(J.empty,!0))}return t}function tL(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Y2(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new te(J.from(r),0,0))}function nL(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=ET(r,i);for(let l=0;l<o.length;l++){let u=o[l],f=l==o.length-1;if(f&&u==0||r.node(u).type.contentMatch.validEnd)return t.delete(r.start(u),i.end(u));if(u>0&&(f||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return t.delete(r.before(u),i.after(u))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&i.end(l)-n!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function ET(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class Ea extends tn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return At.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return At.fromReplace(e,this.pos,this.pos+1,new te(J.from(i),0,n.isLeaf?0:1))}getMap(){return Mn.empty}invert(e){return new Ea(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ea(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ea(n.pos,n.attr,n.value)}}tn.jsonID("attr",Ea);class Ac extends tn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return At.ok(r)}getMap(){return Mn.empty}invert(e){return new Ac(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ac(n.attr,n.value)}}tn.jsonID("docAttr",Ac);let ka=class extends Error{};ka=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ka.prototype=Object.create(Error.prototype);ka.prototype.constructor=ka;ka.prototype.name="TransformError";class TT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new kc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ka(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((o,l,u,f)=>{e=Math.min(e,u),n=Math.max(n,f)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=te.empty){let i=Xd(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new te(J.from(r),0,0))}delete(e,n){return this.replace(e,n,te.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return eL(this,e,n,r),this}replaceRangeWith(e,n,r){return tL(this,e,n,r),this}deleteRange(e,n){return nL(this,e,n),this}lift(e,n){return P2(this,e,n),this}join(e,n=1){return J2(this,e,n),this}wrap(e,n){return q2(this,e,n),this}setBlockType(e,n=e,r,i=null){return V2(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return G2(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Ea(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ac(e,n)),this}addNodeMark(e,n){return this.step(new gs(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Xe)n.isInSet(r.marks)&&this.step(new po(e,n));else{let i=r.marks,o,l=[];for(;o=n.isInSet(i);)l.push(new po(e,o)),i=o.removeFromSet(i);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,n=1,r){return K2(this,e,n,r),this}addMark(e,n,r){return I2(this,e,n,r),this}removeMark(e,n,r){return U2(this,e,n,r),this}clearIncompatible(e,n,r){return Dy(this,e,n,r),this}}const Zm=Object.create(null);class ve{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new _T(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=te.empty){let r=n.content.lastChild,i=null;for(let u=0;u<n.openEnd;u++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:f,$to:h}=l[u],p=e.mapping.slice(o);e.replaceRange(p.map(f.pos),p.map(h.pos),u?te.empty:n),u==0&&Tx(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:u}=i[o],f=e.mapping.slice(r),h=f.map(l.pos),p=f.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,n),Tx(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new we(e):ya(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=n<0?ya(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):ya(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Dn(e.node(0))}static atStart(e){return ya(e,e,0,0,1)||new Dn(e)}static atEnd(e){return ya(e,e,e.content.size,e.childCount,-1)||new Dn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Zm[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Zm)throw new RangeError("Duplicate use of selection JSON ID "+e);return Zm[e]=n,n.prototype.jsonID=e,n}getBookmark(){return we.between(this.$anchor,this.$head).getBookmark()}}ve.prototype.visible=!0;class _T{constructor(e,n){this.$from=e,this.$to=n}}let xx=!1;function Ex(t){!xx&&!t.parent.inlineContent&&(xx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class we extends ve{constructor(e,n=e){Ex(e),Ex(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ve.near(r);let i=e.resolve(n.map(this.anchor));return new we(i.parent.inlineContent?i:r,r)}replace(e,n=te.empty){if(super.replace(e,n),n==te.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof we&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Qd(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new we(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=ve.findFrom(n,r,!0)||ve.findFrom(n,-r,!0);if(o)n=o.$head;else return ve.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(ve.findFrom(e,-r,!0)||ve.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new we(e,n)}}ve.jsonID("text",we);class Qd{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Qd(e.map(this.anchor),e.map(this.head))}resolve(e){return we.between(e.resolve(this.anchor),e.resolve(this.head))}}class pe extends ve{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?ve.near(o):new pe(o)}content(){return new te(J.from(this.node),0,0)}eq(e){return e instanceof pe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new jy(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new pe(e.resolve(n.anchor))}static create(e,n){return new pe(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}pe.prototype.visible=!1;ve.jsonID("node",pe);class jy{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Qd(r,r):new jy(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&pe.isSelectable(r)?new pe(n):ve.near(n)}}class Dn extends ve{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=te.empty){if(n==te.empty){e.delete(0,e.doc.content.size);let r=ve.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Dn(e)}map(e){return new Dn(e)}eq(e){return e instanceof Dn}getBookmark(){return rL}}ve.jsonID("all",Dn);const rL={map(){return this},resolve(t){return new Dn(t)}};function ya(t,e,n,r,i,o=!1){if(e.inlineContent)return we.create(t,n);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let u=e.child(l);if(u.isAtom){if(!o&&pe.isSelectable(u))return pe.create(t,n-(i<0?u.nodeSize:0))}else{let f=ya(t,u,n+i,i<0?u.childCount:0,i,o);if(f)return f}n+=u.nodeSize*i}return null}function Tx(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof It||i instanceof Bt))return;let o=t.mapping.maps[r],l;o.forEach((u,f,h,p)=>{l==null&&(l=p)}),t.setSelection(ve.near(t.doc.resolve(l),n))}const _x=1,Ef=2,kx=4;class iL extends TT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|_x)&~Ef,this.storedMarks=null,this}get selectionSet(){return(this.updated&_x)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ef,this}ensureMarks(e){return Xe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ef)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Ef,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Xe.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(n);o=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ve.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=kx,this}get scrolledIntoView(){return(this.updated&kx)>0}}function Ax(t,e){return!e||!t?t:t.bind(e)}class tc{constructor(e,n,r){this.name=e,this.init=Ax(n.init,r),this.apply=Ax(n.apply,r)}}const sL=[new tc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new tc("selection",{init(t,e){return t.selection||ve.atStart(e.doc)},apply(t){return t.selection}}),new tc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new tc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class eg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=sL.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new tc(r.key,r.spec.state,r))})}}class Sa{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let f=i?i[l].n:0,h=i?i[l].state:this,p=f<n.length&&u.spec.appendTransaction.call(u,f?n.slice(f):n,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<l?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),o=!0}i&&(i[l]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Sa(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new iL(this)}static create(e){let n=new eg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Sa(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new eg(this.schema,e.plugins),r=n.fields,i=new Sa(n);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new eg(e.schema,e.plugins),o=new Sa(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=bs.fromJSON(e.schema,n.doc);else if(l.name=="selection")o.selection=ve.fromJSON(o.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let f=r[u],h=f.spec.state;if(f.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){o[l.name]=h.fromJSON.call(f,e,n[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function kT(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=kT(i,e,{})),n[r]=i}return n}class nt{constructor(e){this.spec=e,this.props={},e.props&&kT(e.props,this,this.props),this.key=e.key?e.key.key:AT("plugin")}getState(e){return e[this.key]}}const tg=Object.create(null);function AT(t){return t in tg?t+"$"+ ++tg[t]:(tg[t]=0,t+"$")}class at{constructor(e="key"){this.key=AT(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const zy=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const OT=(t,e,n)=>{let r=CT(t,n);if(!r)return!1;let i=Iy(r);if(!i){let l=r.blockRange(),u=l&&Ua(l);return u==null?!1:(e&&e(t.tr.lift(l,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(UT(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Aa(o,"end")||pe.isSelectable(o)))for(let l=r.depth;;l--){let u=Xd(t.doc,r.before(l),r.after(l),te.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=t.tr.step(u);f.setSelection(Aa(o,"end")?ve.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):pe.create(f.doc,i.pos-o.nodeSize)),e(f.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},oL=(t,e,n)=>{let r=CT(t,n);if(!r)return!1;let i=Iy(r);return i?RT(t,i,e):!1},aL=(t,e,n)=>{let r=MT(t,n);if(!r)return!1;let i=Uy(r);return i?RT(t,i,e):!1};function RT(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let l=e.nodeAfter,u=l,f=e.pos+1;for(;!u.isTextblock;f++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=Xd(t.doc,o,f,te.empty);if(!h||h.from!=o||h instanceof It&&h.slice.size>=f-o)return!1;if(n){let p=t.tr.step(h);p.setSelection(we.create(p.doc,o)),n(p.scrollIntoView())}return!0}function Aa(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const NT=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Iy(r)}let l=o&&o.nodeBefore;return!l||!pe.isSelectable(l)?!1:(e&&e(t.tr.setSelection(pe.create(t.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function Iy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function MT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const DT=(t,e,n)=>{let r=MT(t,n);if(!r)return!1;let i=Uy(r);if(!i)return!1;let o=i.nodeAfter;if(UT(t,i,e,1))return!0;if(r.parent.content.size==0&&(Aa(o,"start")||pe.isSelectable(o))){let l=Xd(t.doc,r.before(),r.after(),te.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=t.tr.step(l);u.setSelection(Aa(o,"start")?ve.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):pe.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},LT=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Uy(r)}let l=o&&o.nodeAfter;return!l||!pe.isSelectable(l)?!1:(e&&e(t.tr.setSelection(pe.create(t.doc,o.pos)).scrollIntoView()),!0)};function Uy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const lL=(t,e)=>{let n=t.selection,r=n instanceof pe,i;if(r){if(n.node.isTextblock||!As(t.doc,n.from))return!1;i=n.from}else if(i=Yd(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(pe.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},cL=(t,e)=>{let n=t.selection,r;if(n instanceof pe){if(n.node.isTextblock||!As(t.doc,n.to))return!1;r=n.to}else if(r=Yd(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},uL=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Ua(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},jT=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function By(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const fL=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),l=By(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let u=n.after(),f=t.tr.replaceWith(u,u,l.createAndFill());f.setSelection(ve.near(f.doc.resolve(u),1)),e(f.scrollIntoView())}return!0},zT=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Dn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=By(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=t.tr.insert(l,o.createAndFill());u.setSelection(we.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},IT=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ti(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ua(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function dL(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof pe&&e.selection.node.isBlock)return!r.parentOffset||!Ti(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,f=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){f=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),u=By(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),o.unshift(f&&u?{type:u}:null),l=v;break}else{if(v==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof we||e.selection instanceof Dn)&&p.deleteSelection();let m=p.mapping.map(r.pos),y=Ti(p.doc,m,o.length,o);if(y||(o[0]=u?{type:u}:null,y=Ti(p.doc,m,o.length,o)),!y)return!1;if(p.split(m,o.length,o),!f&&h&&r.node(l).type!=u){let v=p.mapping.map(r.before(l)),w=p.doc.resolve(v);u&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return n&&n(p.scrollIntoView()),!0}}const hL=dL(),pL=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(pe.create(t.doc,i))),!0)};function mL(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||As(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function UT(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,l,u,f=i.type.spec.isolating||o.type.spec.isolating;if(!f&&mL(t,e,n))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(n){let v=e.pos+o.nodeSize,w=J.empty;for(let T=l.length-1;T>=0;T--)w=J.from(l[T].create(null,w));w=J.from(i.copy(w));let S=t.tr.step(new Bt(e.pos-1,v,e.pos,v,new te(w,1,0),l.length,!0)),E=S.doc.resolve(v+2*l.length);E.nodeAfter&&E.nodeAfter.type==i.type&&As(S.doc,E.pos)&&S.join(E.pos),n(S.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&f?null:ve.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),y=m&&Ua(m);if(y!=null&&y>=e.depth)return n&&n(t.tr.lift(m,y).scrollIntoView()),!0;if(h&&Aa(o,"start",!0)&&Aa(i,"end")){let v=i,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let S=o,E=1;for(;!S.isTextblock;S=S.firstChild)E++;if(v.canReplace(v.childCount,v.childCount,S.content)){if(n){let T=J.empty;for(let C=w.length-1;C>=0;C--)T=J.from(w[C].copy(T));let A=t.tr.step(new Bt(e.pos-w.length,e.pos+o.nodeSize,e.pos+E,e.pos+o.nodeSize-E,new te(T,w.length,0),0,!0));n(A.scrollIntoView())}return!0}}return!1}function BT(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(we.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const gL=BT(-1),yL=BT(1);function bL(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),u=l&&Ly(l,t,e);return u?(r&&r(n.tr.wrap(l,u).scrollIntoView()),!0):!1}}function Cx(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];n.doc.nodesBetween(l,u,(f,h)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(t,e)))if(f.type==t)i=!0;else{let p=n.doc.resolve(h),m=p.index();i=p.parent.canReplaceWith(m,m+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:f}}=n.selection.ranges[l];o.setBlockType(u,f,t,e)}r(o.scrollIntoView())}return!0}}function Py(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Py(zy,OT,NT);Py(zy,DT,LT);Py(jT,zT,IT,hL);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function vL(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o);if(!l)return!1;let u=r?n.tr:null;return wL(u,l,t,e)?(r&&r(u.scrollIntoView()),!0):!1}}function wL(t,e,n,r=null){let i=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=l.resolve(e.start-2);o=new Zf(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new Zf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=Ly(o,n,r,e);return u?(t&&SL(t,e,u,i,n),!0):!1}function SL(t,e,n,r,i){let o=J.empty;for(let p=n.length-1;p>=0;p--)o=J.from(n[p].type.create(n[p].attrs,o));t.step(new Bt(e.start-(r?2:0),e.end,e.start,e.end,new te(o,0,0),n.length,!0));let l=0;for(let p=0;p<n.length;p++)n[p].type==i&&(l=p+1);let u=n.length-l,f=e.start+n.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,y=!0;p<m;p++,y=!1)!y&&Ti(t.doc,f,u)&&(t.split(f,u),f+=2*u),f+=h.child(p).nodeSize;return t}function xL(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?EL(e,n,t,o):TL(e,n,o):!0:!1}}function EL(t,e,n,r){let i=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new Bt(o-1,l,o,l,new te(J.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Zf(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const u=Ua(r);if(u==null)return!1;i.lift(r,u);let f=i.doc.resolve(i.mapping.map(o,-1)-1);return As(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),e(i.scrollIntoView()),!0}function TL(t,e,n){let r=t.tr,i=n.parent;for(let v=n.end,w=n.endIndex-1,S=n.startIndex;w>S;w--)v-=i.child(w).nodeSize,r.delete(v-1,v+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,f=n.endIndex==i.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(f?J.empty:J.from(i))))return!1;let m=o.pos,y=m+l.nodeSize;return r.step(new Bt(m-(u?1:0),y+(f?1:0),m+1,y-1,new te((u?J.empty:J.from(i.copy(J.empty))).append(f?J.empty:J.from(i.copy(J.empty))),u?0:1,f?0:1),u?0:1)),e(r.scrollIntoView()),!0}function _L(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==t);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,f=u.child(l-1);if(f.type!=t)return!1;if(n){let h=f.lastChild&&f.lastChild.type==u.type,p=J.from(h?t.create():null),m=new te(J.from(t.create(null,J.from(u.type.create(null,p)))),h?3:1,0),y=o.start,v=o.end;n(e.tr.step(new Bt(y-(h?3:1),v,y,v,m,1,!0)).scrollIntoView())}return!0}}const Yt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ca=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Gg=null;const vi=function(t,e,n){let r=Gg||(Gg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},kL=function(){Gg=null},mo=function(t,e,n,r){return n&&(Ox(t,e,n,r,-1)||Ox(t,e,n,r,1))},AL=/^(img|br|input|textarea|hr)$/i;function Ox(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Zn(t))){let l=t.parentNode;if(!l||l.nodeType!=1||Hc(t)||AL.test(t.nodeName)||t.contentEditable=="false")return!1;e=Yt(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=l,e=i<0?Zn(t):0}else return!1}}function Zn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function CL(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Zn(t)}else if(t.parentNode&&!Hc(t))e=Yt(t),t=t.parentNode;else return null}}function OL(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Hc(t))e=Yt(t)+1,t=t.parentNode;else return null}}function RL(t,e,n){for(let r=e==0,i=e==Zn(t);r||i;){if(t==n)return!0;let o=Yt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Zn(t)}}function Hc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Zd=function(t){return t.focusNode&&mo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function no(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function NL(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function ML(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Zn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Zn(r.startContainer),r.startOffset)}}}const zr=typeof navigator<"u"?navigator:null,Rx=typeof document<"u"?document:null,Cs=zr&&zr.userAgent||"",Kg=/Edge\/(\d+)/.exec(Cs),PT=/MSIE \d/.exec(Cs),Wg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Cs),wn=!!(PT||Wg||Kg),ws=PT?document.documentMode:Wg?+Wg[1]:Kg?+Kg[1]:0,er=!wn&&/gecko\/(\d+)/i.test(Cs);er&&+(/Firefox\/(\d+)/.exec(Cs)||[0,0])[1];const Jg=!wn&&/Chrome\/(\d+)/.exec(Cs),Ut=!!Jg,HT=Jg?+Jg[1]:0,Qt=!wn&&!!zr&&/Apple Computer/.test(zr.vendor),Oa=Qt&&(/Mobile\/\w+/.test(Cs)||!!zr&&zr.maxTouchPoints>2),Qn=Oa||(zr?/Mac/.test(zr.platform):!1),$T=zr?/Win/.test(zr.platform):!1,Si=/Android \d/.test(Cs),$c=!!Rx&&"webkitFontSmoothing"in Rx.documentElement.style,DL=$c?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function LL(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function hi(t,e){return typeof t=="number"?t:t[e]}function jL(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Nx(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=Ca(l);continue}let u=l,f=u==o.body,h=f?LL(o):jL(u),p=0,m=0;if(e.top<h.top+hi(r,"top")?m=-(h.top-e.top+hi(i,"top")):e.bottom>h.bottom-hi(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+hi(i,"top")-h.top:e.bottom-h.bottom+hi(i,"bottom")),e.left<h.left+hi(r,"left")?p=-(h.left-e.left+hi(i,"left")):e.right>h.right-hi(r,"right")&&(p=e.right-h.right+hi(i,"right")),p||m)if(f)o.defaultView.scrollBy(p,m);else{let v=u.scrollLeft,w=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let S=u.scrollLeft-v,E=u.scrollTop-w;e={left:e.left-S,top:e.top-E,right:e.right-S,bottom:e.bottom-E}}let y=f?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(y))break;l=y=="absolute"?l.offsetParent:Ca(l)}}function zL(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=t.root.elementFromPoint(o,l);if(!u||u==t.dom||!t.dom.contains(u))continue;let f=u.getBoundingClientRect();if(f.top>=n-20){r=u,i=f.top;break}}return{refDOM:r,refTop:i,stack:qT(t.dom)}}function qT(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ca(r));return e}function IL({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;VT(n,r==0?0:r-e)}function VT(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let da=null;function UL(t){if(t.setActive)return t.setActive();if(da)return t.focus(da);let e=qT(t);t.focus(da==null?{get preventScroll(){return da={preventScroll:!0},!0}}:void 0),da||(da=!1,VT(e,0))}function FT(t,e){let n,r=2e8,i,o=0,l=e.top,u=e.top,f,h;for(let p=t.firstChild,m=0;p;p=p.nextSibling,m++){let y;if(p.nodeType==1)y=p.getClientRects();else if(p.nodeType==3)y=vi(p).getClientRects();else continue;for(let v=0;v<y.length;v++){let w=y[v];if(w.top<=l&&w.bottom>=u){l=Math.max(w.bottom,l),u=Math.min(w.top,u);let S=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(S<r){n=p,r=S,i=S&&n.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&S&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!f&&w.left<=e.left&&w.right>=e.left&&(f=p,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!n&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!n&&f&&(n=f,i=h,r=0),n&&n.nodeType==3?BL(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:FT(n,i)}function BL(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let l=as(r,1);if(l.top!=l.bottom&&Hy(e,l)){i={node:t,offset:o+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Hy(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function PL(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function HL(t,e,n){let{node:r,offset:i}=FT(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function $L(t,e,n,r){let i=-1;for(let o=e,l=!1;o!=t.dom;){let u=t.docView.nearestDesc(o,!0),f;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((f=u.dom.getBoundingClientRect()).width||f.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&f.left>r.left||f.top>r.top?i=u.posBefore:(!l&&f.right<r.left||f.bottom<r.top)&&(i=u.posAfter),l=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function GT(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let l=t.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(Hy(e,h))return GT(l,e,h)}}if((o=(o+1)%r)==i)break}return t}function qL(t,e){let n=t.dom.ownerDocument,r,i=0,o=ML(n,e.left,e.top);o&&({node:r,offset:i}=o);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),u;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=t.dom.getBoundingClientRect();if(!Hy(e,h)||(l=GT(t.dom,e,h),!l))return null}if(Qt)for(let h=l;r&&h;h=Ca(h))h.draggable&&(r=void 0);if(l=PL(l,e),r){if(er&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let h;$c&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=$L(t,r,i,e))}u==null&&(u=HL(t,l,e));let f=t.docView.nearestDesc(l,!0);return{pos:u,inside:f?f.posAtStart-f.border:-1}}function Mx(t){return t.top<t.bottom||t.left<t.right}function as(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Mx(r))return r}return Array.prototype.find.call(n,Mx)||t.getBoundingClientRect()}const VL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function KT(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),l=$c||er;if(r.nodeType==3)if(l&&(VL.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let f=as(vi(r,i,i),n);if(er&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=as(vi(r,i-1,i-1),-1);if(h.top==f.top){let p=as(vi(r,i,i+1),-1);if(p.top!=f.top)return Jl(p,p.left<h.left)}}return f}else{let f=i,h=i,p=n<0?1:-1;return n<0&&!i?(h++,p=-1):n>=0&&i==r.nodeValue.length?(f--,p=1):n<0?f--:h++,Jl(as(vi(r,f,h),p),p<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Zn(r))){let f=r.childNodes[i-1];if(f.nodeType==1)return ng(f.getBoundingClientRect(),!1)}if(o==null&&i<Zn(r)){let f=r.childNodes[i];if(f.nodeType==1)return ng(f.getBoundingClientRect(),!0)}return ng(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Zn(r))){let f=r.childNodes[i-1],h=f.nodeType==3?vi(f,Zn(f)-(l?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(h)return Jl(as(h,1),!1)}if(o==null&&i<Zn(r)){let f=r.childNodes[i];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let h=f?f.nodeType==3?vi(f,0,l?0:1):f.nodeType==1?f:null:null;if(h)return Jl(as(h,-1),!0)}return Jl(as(r.nodeType==3?vi(r):r,-n),n>=0)}function Jl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ng(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function WT(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function FL(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return WT(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let u=t.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=KT(t,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=vi(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const GL=/[\u0590-\u08ac]/;function KL(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,u=t.domSelection();return u?!GL.test(r.parent.textContent)||!u.modify?n=="left"||n=="backward"?o:l:WT(t,e,()=>{let{focusNode:f,focusOffset:h,anchorNode:p,anchorOffset:m}=t.domSelectionRange(),y=u.caretBidiLevel;u.modify("move",n,"character");let v=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:w,focusOffset:S}=t.domSelectionRange(),E=w&&!v.contains(w.nodeType==1?w:w.parentNode)||f==w&&h==S;try{u.collapse(p,m),f&&(f!=p||h!=m)&&u.extend&&u.extend(f,h)}catch{}return y!=null&&(u.caretBidiLevel=y),E}):r.pos==r.start()||r.pos==r.end()}let Dx=null,Lx=null,jx=!1;function WL(t,e,n){return Dx==e&&Lx==n?jx:(Dx=e,Lx=n,jx=n=="up"||n=="down"?FL(t,e,n):KL(t,e,n))}const tr=0,zx=1,io=2,Ir=3;class qc{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=tr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Yt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!n||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let u=i.children[l];if(u.size){i=u;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof YT){i=e-o;break}o=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof JT&&o.side>=0;r--);if(n<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&n&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Yt(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Yt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,u=0;;u++){let f=this.children[u],h=l+f.size;if(i==-1&&e<=h){let p=l+f.border;if(e>=p&&n<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,n,p);e=l;for(let m=u;m>0;m--){let y=this.children[m-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){i=Yt(y.dom)+1;break}e-=y.size}i==-1&&(i=0)}if(i>-1&&(h>n||u==this.children.length-1)){n=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Yt(m.dom);break}n+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),l=Math.max(e,n);for(let v=0,w=0;v<this.children.length;v++){let S=this.children[v],E=w+S.size;if(o>w&&l<E)return S.setSelection(e-w-S.border,n-w-S.border,r,i);w=E}let u=this.domFromPos(e,e?-1:1),f=n==e?u:this.domFromPos(n,n?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((er||Qt)&&e==n){let{node:v,offset:w}=u;if(v.nodeType==3){if(m=!!(w&&v.nodeValue[w-1]==`
`),m&&w==v.nodeValue.length)for(let S=v,E;S;S=S.parentNode){if(E=S.nextSibling){E.nodeName=="BR"&&(u=f={node:E.parentNode,offset:Yt(E)+1});break}let T=S.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let S=v.childNodes[w-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(er&&p.focusNode&&p.focusNode!=f.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(i=!0)}if(!(i||m&&Qt)&&mo(u.node,u.offset,p.anchorNode,p.anchorOffset)&&mo(f.node,f.offset,p.focusNode,p.focusOffset))return;let y=!1;if((h.extend||e==n)&&!(m&&er)){h.collapse(u.node,u.offset);try{e!=n&&h.extend(f.node,f.offset),y=!0}catch{}}if(!y){if(e>n){let w=u;u=f,f=w}let v=document.createRange();v.setEnd(f.node,f.offset),v.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let u=r+o.border,f=l-o.border;if(e>=u&&n<=f){this.dirty=e==r||n==l?io:zx,e==u&&n==f&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ir:o.markDirty(e-u,n-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?io:Ir}r=l}this.dirty=io}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?io:zx;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class JT extends qc{constructor(e,n,r,i){let o,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==tr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class JL extends qc{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class go extends qc{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],l=o&&o(n,i,r);return(!l||!l.dom)&&(l=vo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new go(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Ir||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ir&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=tr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=tr}}slice(e,n,r){let i=go.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;n<l&&(o=Xg(o,n,l,r)),e>0&&(o=Xg(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ss extends qc{constructor(e,n,r,i,o,l,u,f,h){super(e,[],o,l),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,n,r,i,o,l){let u=o.nodeViews[n.type.name],f,h=u&&u(n,o,()=>{if(!f)return l;if(f.parent)return f.parent.posBeforeChild(f)},r,i),p=h&&h.dom,m=h&&h.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=vo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let y=p;return p=ZT(p,r,n),h?f=new YL(e,n,r,i,p,m||null,y,h,o,l+1):n.isText?new eh(e,n,r,i,p,y,o):new Ss(e,n,r,i,p,m||null,y,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,n,r){return this.dirty==tr&&e.eq(this.node)&&td(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,f=new QL(this,l&&l.node,e);tj(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,e,p):h.type.side>=0&&!m&&f.syncToMarks(p==this.node.childCount?Xe.none:this.node.child(p).marks,r,e,p),f.placeWidget(h,e,i)},(h,p,m,y)=>{f.syncToMarks(h.marks,r,e,y);let v;f.findNodeMatch(h,p,m,y)||u&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(v=f.findIndexWithChild(o.node))>-1&&f.updateNodeAt(h,p,m,v,e)||f.updateNextNode(h,p,m,e,y,i)||f.addNode(h,p,m,e,i),i+=h.nodeSize}),f.syncToMarks([],r,e,0),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==io)&&(l&&this.protectLocalComposition(e,l),XT(this.contentDOM,this.children,e),Oa&&nj(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof we)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=rj(this.node.content,l,r-n,i-n);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new JL(this,o,n,i);e.input.compositionNodes.push(l),this.children=Xg(this.children,r,r+i.length,e,l)}update(e,n,r,i){return this.dirty==Ir||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=tr}updateOuterDeco(e){if(td(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=QT(this.dom,this.nodeDOM,Yg(this.outerDeco,this.node,n),Yg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ix(t,e,n,r,i){ZT(r,e,t);let o=new Ss(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class eh extends Ss{constructor(e,n,r,i,o,l,u){super(e,n,r,i,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ir||this.dirty!=tr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=tr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=tr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new eh(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ir)}get domAtom(){return!1}isText(e){return this.node.text==e}}class YT extends qc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==tr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class YL extends Ss{constructor(e,n,r,i,o,l,u,f,h,p){super(e,n,r,i,o,l,u,h,p),this.spec=f}update(e,n,r,i){if(this.dirty==Ir)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function XT(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==t){for(;u!=r;)r=Ux(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(u,r);if(l instanceof go){let f=r?r.previousSibling:t.lastChild;XT(l.contentDOM,l.children,n),r=f?f.nextSibling:t.firstChild}}for(;r;)r=Ux(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const lc=function(t){t&&(this.nodeName=t)};lc.prototype=Object.create(null);const so=[new lc];function Yg(t,e,n){if(t.length==0)return so;let r=n?so[0]:new lc,i=[r];for(let o=0;o<t.length;o++){let l=t[o].type.attrs;if(l){l.nodeName&&i.push(r=new lc(l.nodeName));for(let u in l){let f=l[u];f!=null&&(n&&i.length==1&&i.push(r=new lc(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+f:u=="style"?r.style=(r.style?r.style+";":"")+f:u!="nodeName"&&(r[u]=f))}}}return i}function QT(t,e,n,r){if(n==so&&r==so)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],u=n[o];if(o){let f;u&&u.nodeName==l.nodeName&&i!=t&&(f=i.parentNode)&&f.nodeName.toLowerCase()==l.nodeName||(f=document.createElement(l.nodeName),f.pmIsDeco=!0,f.appendChild(i),u=so[0]),i=f}XL(i,u||so[0],l)}return i}function XL(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function ZT(t,e,n){return QT(t,t,so,Yg(e,n,t.nodeType!=1))}function td(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ux(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class QL{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=ZL(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let o=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;o<u&&(o==l-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<l;)this.destroyRest(),this.top.dirty=tr,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let f=-1,h=this.top.children.length;i<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let p=this.index;p<h;p++){let m=this.top.children[p];if(m.matchesMark(e[l])&&!this.isLocked(m.dom)){f=p;break}}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let p=go.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,f=Math.min(this.top.children.length,u+5);u<f;u++){let h=this.top.children[u];if(h.matchesNode(e,n,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let l=this.top.children[i];return l.dirty==Ir&&l.dom==l.contentDOM&&(l.dirty=io),l.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,l){for(let u=this.index;u<this.top.children.length;u++){let f=this.top.children[u];if(f instanceof Ss){let h=this.preMatch.matched.get(f);if(h!=null&&h!=o)return!1;let p=f.dom,m,y=this.isLocked(p)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=Ir&&td(n,f.outerDeco));if(!y&&f.update(e,n,r,i))return this.destroyBetween(this.index,u),f.dom!=p&&(this.changed=!0),this.index++,!0;if(!y&&(m=this.recreateWrapper(f,e,n,r,i,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=io,m.updateChildren(i,l+1),m.dirty=tr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!td(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=Ss.create(this.top,n,r,i,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let f of u.children)f.parent=u}return e.destroy(),u}addNode(e,n,r,i,o){let l=Ss.create(this.top,e,n,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new JT(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof go;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof eh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Qt||Ut)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new YT(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function ZL(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,l=[];e:for(;i>0;){let u;for(;;)if(r){let h=n.children[r-1];if(h instanceof go)n=h,r=h.children.length;else{u=h,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let f=u.node;if(f){if(f!=t.child(i-1))break;--i,o.set(u,i),l.push(u)}}return{index:i,matched:o,matches:l.reverse()}}function ej(t,e){return t.type.side-e.type.side}function tj(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let h=0;h<t.childCount;h++){let p=t.child(h);r(p,i,e.forChild(o,p),h),o+=p.nodeSize}return}let l=0,u=[],f=null;for(let h=0;;){let p,m;for(;l<i.length&&i[l].to==o;){let E=i[l++];E.widget&&(p?(m||(m=[p])).push(E):p=E)}if(p)if(m){m.sort(ej);for(let E=0;E<m.length;E++)n(m[E],h,!!f)}else n(p,h,!!f);let y,v;if(f)v=-1,y=f,f=null;else if(h<t.childCount)v=h,y=t.child(h++);else break;for(let E=0;E<u.length;E++)u[E].to<=o&&u.splice(E--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);let w=o+y.nodeSize;if(y.isText){let E=w;l<i.length&&i[l].from<E&&(E=i[l].from);for(let T=0;T<u.length;T++)u[T].to<E&&(E=u[T].to);E<w&&(f=y.cut(E-o),y=y.cut(0,E-o),w=E,v=-1)}else for(;l<i.length&&i[l].to<w;)l++;let S=y.isInline&&!y.isLeaf?u.filter(E=>!E.inline):u.slice();r(y,S,e.forChild(o,y),v),o=w}}function nj(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function rj(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let l=t.child(i++),u=o;if(o+=l.nodeSize,!l.isText)continue;let f=l.text;for(;i<t.childCount;){let h=t.child(i++);if(o+=h.nodeSize,!h.isText)break;f+=h.text}if(o>=n){if(o>=r&&f.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?f.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=n)return u+h;if(n==r&&f.length>=r+e.length-u&&f.slice(r-u,r-u+e.length)==e)return r}}return-1}function Xg(t,e,n,r,i){let o=[];for(let l=0,u=0;l<t.length;l++){let f=t[l],h=u,p=u+=f.size;h>=n||p<=e?o.push(f):(h<e&&o.push(f.slice(0,e-h,r)),i&&(o.push(i),i=void 0),p>n&&o.push(f.slice(n-h,f.size,r)))}return o}function $y(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let u=r.resolve(l),f,h;if(Zd(n)){for(f=l;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&pe.isSelectable(m)&&i.parent&&!(m.isInline&&RL(n.focusNode,n.focusOffset,i.dom))){let y=i.posBefore;h=new pe(l==y?u:r.resolve(y))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,y=l;for(let v=0;v<n.rangeCount;v++){let w=n.getRangeAt(v);m=Math.min(m,t.docView.posFromDOM(w.startContainer,w.startOffset,1)),y=Math.max(y,t.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[f,l]=y==t.state.selection.anchor?[y,m]:[m,y],u=r.resolve(l)}else f=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(f<0)return null}let p=r.resolve(f);if(!h){let m=e=="pointer"||t.state.selection.head<u.pos&&!o?1:-1;h=qy(t,p,u,m)}return h}function e_(t){return t.editable?t.hasFocus():n_(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function _i(t,e=!1){let n=t.state.selection;if(t_(t,n),!!e_(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ut){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&mo(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)sj(t);else{let{anchor:r,head:i}=n,o,l;Bx&&!(n instanceof we)&&(n.$from.parent.inlineContent||(o=Px(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=Px(t,n.to))),t.docView.setSelection(r,i,t,e),Bx&&(o&&Hx(o),l&&Hx(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ij(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Bx=Qt||Ut&&HT<63;function Px(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Qt&&i&&i.contentEditable=="false")return rg(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return rg(i);if(o)return rg(o)}}function rg(t){return t.contentEditable="true",Qt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Hx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ij(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!e_(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function sj(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Yt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&wn&&ws<=11&&(n.disabled=!0,n.disabled=!1)}function t_(t,e){if(e instanceof pe){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&($x(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else $x(t)}function $x(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function qy(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||we.between(e,n,r)}function qx(t){return t.editable&&!t.hasFocus()?!1:n_(t)}function n_(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function oj(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return mo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Qg(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&ve.findFrom(o,e)}function cs(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Vx(t,e,n){let r=t.state.selection;if(r instanceof we)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return cs(t,new we(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Qg(t.state,e);return i&&i instanceof pe?cs(t,i):!1}else if(!(Qn&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=t.docView.descAt(u))&&!l.contentDOM?pe.isSelectable(o)?cs(t,new pe(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):$c?cs(t,new we(t.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof pe&&r.node.isInline)return cs(t,new we(e>0?r.$to:r.$from));{let i=Qg(t.state,e);return i?cs(t,i):!1}}}function nd(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function cc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ha(t,e){return e<0?aj(t):lj(t)}function aj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,l=!1;for(er&&n.nodeType==1&&r<nd(n)&&cc(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let u=n.childNodes[r-1];if(cc(u,-1))i=n,o=--r;else if(u.nodeType==3)n=u,r=n.nodeValue.length;else break}}else{if(r_(n))break;{let u=n.previousSibling;for(;u&&cc(u,-1);)i=n.parentNode,o=Yt(u),u=u.previousSibling;if(u)n=u,r=nd(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?Zg(t,n,r):i&&Zg(t,i,o)}function lj(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=nd(n),o,l;for(;;)if(r<i){if(n.nodeType!=1)break;let u=n.childNodes[r];if(cc(u,1))o=n,l=++r;else break}else{if(r_(n))break;{let u=n.nextSibling;for(;u&&cc(u,1);)o=u.parentNode,l=Yt(u)+1,u=u.nextSibling;if(u)n=u,r=0,i=nd(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Zg(t,o,l)}function r_(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function cj(t,e){for(;t&&e==t.childNodes.length&&!Hc(t);)e=Yt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function uj(t,e){for(;t&&!e&&!Hc(t);)e=Yt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Zg(t,e,n){if(e.nodeType!=3){let o,l;(l=cj(e,n))?(e=l,n=0):(o=uj(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Zd(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&_i(t)},50)}function Fx(t,e){let n=t.state.doc.resolve(e);if(!(Ut||$T)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Gx(t,e,n){let r=t.state.selection;if(r instanceof we&&!r.empty||n.indexOf("s")>-1||Qn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=Qg(t.state,e);if(l&&l instanceof pe)return cs(t,l)}if(!i.parent.inlineContent){let l=e<0?i:o,u=r instanceof Dn?ve.near(l,e):ve.findFrom(l,e);return u?cs(t,u):!1}return!1}function Kx(t,e){if(!(t.state.selection instanceof we))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let l=t.state.tr;return e<0?l.delete(n.pos-o.nodeSize,n.pos):l.delete(n.pos,n.pos+o.nodeSize),t.dispatch(l),!0}return!1}function Wx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function fj(t){if(!Qt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Wx(t,r,"true"),setTimeout(()=>Wx(t,r,"false"),20)}return!1}function dj(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function hj(t,e){let n=e.keyCode,r=dj(e);if(n==8||Qn&&n==72&&r=="c")return Kx(t,-1)||ha(t,-1);if(n==46&&!e.shiftKey||Qn&&n==68&&r=="c")return Kx(t,1)||ha(t,1);if(n==13||n==27)return!0;if(n==37||Qn&&n==66&&r=="c"){let i=n==37?Fx(t,t.state.selection.from)=="ltr"?-1:1:-1;return Vx(t,i,r)||ha(t,i)}else if(n==39||Qn&&n==70&&r=="c"){let i=n==39?Fx(t,t.state.selection.from)=="ltr"?1:-1:1;return Vx(t,i,r)||ha(t,i)}else{if(n==38||Qn&&n==80&&r=="c")return Gx(t,-1,r)||ha(t,-1);if(n==40||Qn&&n==78&&r=="c")return fj(t)||Gx(t,1,r)||ha(t,1);if(r==(Qn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Vy(t,e){t.someProp("transformCopied",v=>{e=v(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let v=r.firstChild;n.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let l=t.someProp("clipboardSerializer")||vo.fromSchema(t.state.schema),u=c_(),f=u.createElement("div");f.appendChild(l.serializeFragment(r,{document:u}));let h=f.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=l_[h.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let w=u.createElement(p[v]);for(;f.firstChild;)w.appendChild(f.firstChild);f.appendChild(w),m++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(n)}`);let y=t.someProp("clipboardTextSerializer",v=>v(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:y,slice:e}}function i_(t,e,n,r,i){let o=i.parent.type.spec.code,l,u;if(!n&&!e)return null;let f=!!e&&(r||o||!n);if(f){if(t.someProp("transformPastedText",y=>{e=y(e,o||r,t)}),o)return u=new te(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",y=>{u=y(u,t,!0)}),u;let m=t.someProp("clipboardTextParser",y=>y(e,i,r,t));if(m)u=m;else{let y=i.marks(),{schema:v}=t.state,w=vo.fromSchema(v);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let E=l.appendChild(document.createElement("p"));S&&E.appendChild(w.serializeNode(v.text(S,y)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),l=yj(n),$c&&bj(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let y=l.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;l=y}if(u||(u=(t.someProp("clipboardParser")||t.someProp("domParser")||vs.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(f||p),context:i,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!pj.test(y.parentNode.nodeName)?{ignore:!0}:null}})),p)u=vj(Jx(u,+p[1],+p[2]),p[4]);else if(u=te.maxOpen(mj(u.content,i),!0),u.openStart||u.openEnd){let m=0,y=0;for(let v=u.content.firstChild;m<u.openStart&&!v.type.spec.isolating;m++,v=v.firstChild);for(let v=u.content.lastChild;y<u.openEnd&&!v.type.spec.isolating;y++,v=v.lastChild);u=Jx(u,m,y)}return t.someProp("transformPasted",m=>{u=m(u,t,f)}),u}const pj=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function mj(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,l=[];if(t.forEach(u=>{if(!l)return;let f=i.findWrapping(u.type),h;if(!f)return l=null;if(h=l.length&&o.length&&o_(f,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=a_(l[l.length-1],o.length));let p=s_(u,f);l.push(p),i=i.matchType(p.type),o=f}}),l)return J.from(l)}return t}function s_(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,J.from(t));return t}function o_(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=o_(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(J.from(s_(n,t,i+1))))}}function a_(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,a_(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(n.append(r))}function ey(t,e,n,r,i,o){let l=e<0?t.firstChild:t.lastChild,u=l.content;return t.childCount>1&&(o=0),i<r-1&&(u=ey(u,e,n,r,i+1,o)),i>=n&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=i).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(u))}function Jx(t,e,n){return e<t.openStart&&(t=new te(ey(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new te(ey(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const l_={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Yx=null;function c_(){return Yx||(Yx=document.implementation.createHTMLDocument("title"))}let ig=null;function gj(t){let e=window.trustedTypes;return e?(ig||(ig=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),ig.createHTML(t)):t}function yj(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=c_().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&l_[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=gj(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function bj(t){let e=t.querySelectorAll(Ut?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function vj(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:l}=t;for(let u=r.length-2;u>=0;u-=2){let f=n.nodes[r[u]];if(!f||f.hasRequiredAttrs())break;i=J.from(f.create(r[u+1],i)),o++,l++}return new te(i,o,l)}const cn={},un={},wj={touchstart:!0,touchmove:!0};class Sj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function xj(t){for(let e in cn){let n=cn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Tj(t,r)&&!Fy(t,r)&&(t.editable||!(r.type in un))&&n(t,r)},wj[e]?{passive:!0}:void 0)}Qt&&t.dom.addEventListener("input",()=>null),ty(t)}function ys(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Ej(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ty(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Fy(t,r))})}function Fy(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Tj(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function _j(t,e){!Fy(t,e)&&cn[e.type]&&(t.editable||!(e.type in un))&&cn[e.type](t,e)}un.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!f_(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Si&&Ut&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Oa&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,no(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||hj(t,n)?n.preventDefault():ys(t,"key")};un.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};un.keypress=(t,e)=>{let n=e;if(f_(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Qn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof we)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function th(t){return{left:t.clientX,top:t.clientY}}function kj(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Gy(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(t.someProp(e,u=>l>o.depth?u(t,n,o.nodeAfter,o.before(l),i,!0):u(t,n,o.node(l),o.before(l),i,!1)))return!0;return!1}function Ta(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Aj(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&pe.isSelectable(r)?(Ta(t,new pe(n)),!0):!1}function Cj(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof pe&&(r=n.node);let o=t.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(pe.isSelectable(u)){r&&n.$from.depth>0&&l>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(l);break}}return i!=null?(Ta(t,pe.create(t.state.doc,i)),!0):!1}function Oj(t,e,n,r,i){return Gy(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?Cj(t,n):Aj(t,n))}function Rj(t,e,n,r){return Gy(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Nj(t,e,n,r){return Gy(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Mj(t,n,r)}function Mj(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Ta(t,we.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(l.inlineContent)Ta(t,we.create(r,u+1,u+1+l.content.size));else if(pe.isSelectable(l))Ta(t,pe.create(r,u));else continue;return!0}}function Ky(t){return rd(t)}const u_=Qn?"metaKey":"ctrlKey";cn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Ky(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&kj(n,t.input.lastClick)&&!n[u_]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let l=t.posAtCoords(th(n));l&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Dj(t,l,n,!!r)):(o=="doubleClick"?Rj:Nj)(t,l.pos,l.inside,n)?n.preventDefault():ys(t,"pointer"))};class Dj{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[u_],this.allowDefault=r.shiftKey;let o,l;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),l=n.inside;else{let p=e.state.doc.resolve(n.pos);o=p.parent,l=p.depth?p.before():0}const u=i?null:r.target,f=u?e.docView.nearestDesc(u,!0):null;this.target=f&&f.nodeDOM.nodeType==1?f.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof pe&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&er&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ys(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>_i(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(th(e))),this.updateAllowDefault(e),this.allowDefault||!n?ys(this.view,"pointer"):Oj(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Qt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ut&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ta(this.view,ve.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ys(this.view,"pointer")}move(e){this.updateAllowDefault(e),ys(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}cn.touchstart=t=>{t.input.lastTouch=Date.now(),Ky(t),ys(t,"pointer")};cn.touchmove=t=>{t.input.lastTouch=Date.now(),ys(t,"pointer")};cn.contextmenu=t=>Ky(t);function f_(t,e){return t.composing?!0:Qt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Lj=Si?5e3:-1;un.compositionstart=un.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof we&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Ut&&$T&&jj(t)))t.markCursor=t.state.storedMarks||n.marks(),rd(t,!0),t.markCursor=null;else if(rd(t,!e.selection.empty),er&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=t.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}t.input.composing=!0}d_(t,Lj)};function jj(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}un.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,d_(t,20))};function d_(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>rd(t),e))}function h_(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Ij());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function zj(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=CL(e.focusNode,e.focusOffset),r=OL(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function Ij(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function rd(t,e=!1){if(!(Si&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),h_(t),e||t.docView&&t.docView.dirty){let n=$y(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Uj(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Cc=wn&&ws<15||Oa&&DL<604;cn.copy=un.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Cc?null:n.clipboardData,l=r.content(),{dom:u,text:f}=Vy(t,l);o?(n.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",f)):Uj(t,u),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Bj(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Pj(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Oc(t,r.value,null,i,e):Oc(t,r.textContent,r.innerHTML,i,e)},50)}function Oc(t,e,n,r,i){let o=i_(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",f=>f(t,i,o||te.empty)))return!0;if(!o)return!1;let l=Bj(o),u=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(o);return t.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function p_(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}un.paste=(t,e)=>{let n=e;if(t.composing&&!Si)return;let r=Cc?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Oc(t,p_(r),r.getData("text/html"),i,n)?n.preventDefault():Pj(t,n)};class m_{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Hj=Qn?"altKey":"ctrlKey";function g_(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Hj]}cn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(th(n)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof pe?i.to-1:i.to))){if(r&&r.mightDrag)l=pe.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(l=pe.create(t.state.doc,m.posBefore))}}let u=(l||t.state.selection).content(),{dom:f,text:h,slice:p}=Vy(t,u);(!n.dataTransfer.files.length||!Ut||HT>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Cc?"Text":"text/html",f.innerHTML),n.dataTransfer.effectAllowed="copyMove",Cc||n.dataTransfer.setData("text/plain",h),t.dragging=new m_(p,g_(t,n),l)};cn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};un.dragover=un.dragenter=(t,e)=>e.preventDefault();un.drop=(t,e)=>{try{$j(t,e,t.dragging)}finally{t.dragging=null}};function $j(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(th(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",v=>{o=v(o,t,!1)}):o=i_(t,p_(e.dataTransfer),Cc?null:e.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&g_(t,e));if(t.someProp("handleDrop",v=>v(t,e,o||te.empty,l))){e.preventDefault();return}if(!o)return;e.preventDefault();let u=o?vT(t.state.doc,i.pos,o):i.pos;u==null&&(u=i.pos);let f=t.state.tr;if(l){let{node:v}=n;v?v.replace(f):f.deleteSelection()}let h=f.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=f.doc;if(p?f.replaceRangeWith(h,h,o.content.firstChild):f.replaceRange(h,h,o),f.doc.eq(m))return;let y=f.doc.resolve(h);if(p&&pe.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))f.setSelection(new pe(y));else{let v=f.mapping.map(u);f.mapping.maps[f.mapping.maps.length-1].forEach((w,S,E,T)=>v=T),f.setSelection(qy(t,y,f.doc.resolve(v)))}t.focus(),t.dispatch(f.setMeta("uiEvent","drop"))}cn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&_i(t)},20))};cn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};cn.beforeinput=(t,e)=>{if(Ut&&Si&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,no(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in un)cn[t]=un[t];function Rc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class id{constructor(e,n){this.toDOM=e,this.spec=n||co,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:l}=e.mapResult(n.from+i,this.side<0?-1:1);return l?null:new on(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof id&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Rc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class xs{constructor(e,n){this.attrs=e,this.spec=n||co}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new on(o,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof xs&&Rc(this.attrs,e.attrs)&&Rc(this.spec,e.spec)}static is(e){return e.type instanceof xs}destroy(){}}class Wy{constructor(e,n){this.attrs=e,this.spec=n||co}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let l=e.mapResult(n.to+i,-1);return l.deleted||l.pos<=o.pos?null:new on(o.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Wy&&Rc(this.attrs,e.attrs)&&Rc(this.spec,e.spec)}destroy(){}}class on{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new on(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new on(e,e,new id(n,r))}static inline(e,n,r,i){return new on(e,n,new xs(r,i))}static node(e,n,r,i){return new on(e,n,new Wy(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof xs}get widget(){return this.type instanceof id}}const ba=[],co={};class ct{constructor(e,n){this.local=e.length?e:ba,this.children=n.length?n:ba}static create(e,n){return n.length?sd(n,e,0,co):en}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=n&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,n-u,r,i+u,o)}}map(e,n,r){return this==en||e.maps.length==0?this:this.mapInner(e,n,0,0,r||co)}mapInner(e,n,r,i,o){let l;for(let u=0;u<this.local.length;u++){let f=this.local[u].map(e,r,i);f&&f.type.valid(n,f)?(l||(l=[])).push(f):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?qj(this.children,l||[],e,n,r,i,o):l?new ct(l.sort(uo),ba):en}add(e,n){return n.length?this==en?ct.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((u,f)=>{let h=f+r,p;if(p=b_(n,u,h)){for(i||(i=this.children.slice());o<i.length&&i[o]<f;)o+=3;i[o]==f?i[o+2]=i[o+2].addInner(u,p,h+1):i.splice(o,0,f,f+u.nodeSize,sd(p,u,h+1,co)),o+=3}});let l=y_(o?v_(n):n,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new ct(l.length?this.local.concat(l).sort(uo):this.local,i||this.children)}remove(e){return e.length==0||this==en?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+n,f=r[o+1]+n;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<f&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=en?r[o+2]=h:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<i.length;u++)i[u].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new ct(i,r):en}forChild(e,n){if(this==en)return this;if(n.isLeaf)return ct.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+n.content.size;for(let u=0;u<this.local.length;u++){let f=this.local[u];if(f.from<l&&f.to>o&&f.type instanceof xs){let h=Math.max(o,f.from)-o,p=Math.min(l,f.to)-o;h<p&&(i||(i=[])).push(f.copy(h,p))}}if(i){let u=new ct(i.sort(uo),ba);return r?new hs([u,r]):u}return r||en}eq(e){if(this==e)return!0;if(!(e instanceof ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Jy(this.localsInner(e))}localsInner(e){if(this==en)return ba;if(e.inlineContent||!this.local.some(xs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof xs||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ct.empty=new ct([],[]);ct.removeOverlap=Jy;const en=ct.empty;class hs{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,co));return hs.from(r)}forChild(e,n){if(n.isLeaf)return ct.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=en&&(o instanceof hs?r=r.concat(o.members):r.push(o))}return hs.from(r)}eq(e){if(!(e instanceof hs)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let l=0;l<o.length;l++)n.push(o[l])}}return n?Jy(r?n:n.sort(uo)):ba}static from(e){switch(e.length){case 0:return en;case 1:return e[0];default:return new hs(e.every(n=>n instanceof ct)?e:e.reduce((n,r)=>n.concat(r instanceof ct?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function qj(t,e,n,r,i,o,l){let u=t.slice();for(let h=0,p=o;h<n.maps.length;h++){let m=0;n.maps[h].forEach((y,v,w,S)=>{let E=S-w-(v-y);for(let T=0;T<u.length;T+=3){let A=u[T+1];if(A<0||y>A+p-m)continue;let C=u[T]+p-m;v>=C?u[T+1]=y<=C?-2:-1:y>=p&&E&&(u[T]+=E,u[T+1]+=E)}m+=E}),p=n.maps[h].map(p,-1)}let f=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){f=!0,u[h+1]=-1;continue}let p=n.map(t[h]+o),m=p-i;if(m<0||m>=r.content.size){f=!0;continue}let y=n.map(t[h+1]+o,-1),v=y-i,{index:w,offset:S}=r.content.findIndex(m),E=r.maybeChild(w);if(E&&S==m&&S+E.nodeSize==v){let T=u[h+2].mapInner(n,E,p+1,t[h]+o+1,l);T!=en?(u[h]=m,u[h+1]=v,u[h+2]=T):(u[h+1]=-2,f=!0)}else f=!0}if(f){let h=Vj(u,t,e,n,i,o,l),p=sd(h,r,0,l);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,y=0;m<p.children.length;m+=3){let v=p.children[m];for(;y<u.length&&u[y]<v;)y+=3;u.splice(y,0,p.children[m],p.children[m+1],p.children[m+2])}}return new ct(e.sort(uo),u)}function y_(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new on(i.from+e,i.to+e,i.type))}return n}function Vj(t,e,n,r,i,o,l){function u(f,h){for(let p=0;p<f.local.length;p++){let m=f.local[p].map(r,i,h);m?n.push(m):l.onRemove&&l.onRemove(f.local[p].spec)}for(let p=0;p<f.children.length;p+=3)u(f.children[p+2],f.children[p]+h+1)}for(let f=0;f<t.length;f+=3)t[f+1]==-1&&u(t[f+2],e[f]+o+1);return n}function b_(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,l;o<t.length;o++)(l=t[o])&&l.from>n&&l.to<r&&((i||(i=[])).push(l),t[o]=null);return i}function v_(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function sd(t,e,n,r){let i=[],o=!1;e.forEach((u,f)=>{let h=b_(t,u,f+n);if(h){o=!0;let p=sd(h,u,n+f+1,r);p!=en&&i.push(f,f+u.nodeSize,p)}});let l=y_(o?v_(t):t,-n).sort(uo);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||i.length?new ct(l,i):en}function uo(t,e){return t.from-e.from||t.to-e.to}function Jy(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Xx(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Xx(e,i,r.copy(o.from,r.to)));break}}}return e}function Xx(t,e,n){for(;e<t.length&&uo(n,t[e])>0;)e++;t.splice(e,0,n)}function sg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=en&&e.push(r)}),t.cursorWrapper&&e.push(ct.create(t.state.doc,[t.cursorWrapper.deco])),hs.from(e)}const Fj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Gj=wn&&ws<=11;class Kj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Wj{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Kj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);wn&&ws<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Qt&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),Gj&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Fj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(qx(this.view)){if(this.suppressingSelectionUpdates)return _i(this.view);if(wn&&ws<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&mo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Ca(o))n.add(o);for(let o=e.anchorNode;o;o=Ca(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&qx(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,f=[];if(e.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],f);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(er&&f.length){let p=f.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,y]=p;m.parentNode&&m.parentNode.parentNode==y.parentNode?y.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let y of p){let v=y.parentNode;v&&v.nodeName=="LI"&&(!m||Xj(e,m)!=v)&&y.remove()}}}else if((Ut||Qt)&&f.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of f)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}let h=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Zd(r)&&(h=$y(e))&&h.eq(ve.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,_i(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),Jj(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,Qj(e,f)),this.handleDOMChange(o,l,u,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||_i(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(wn&&ws<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:y}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(o=y)}let l=i&&i.parentNode==e.target?Yt(i)+1:0,u=r.localPosFromDOM(e.target,l,-1),f=o&&o.parentNode==e.target?Yt(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,f,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Qx=new WeakMap,Zx=!1;function Jj(t){if(!Qx.has(t)&&(Qx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=er,Zx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Zx=!0}}function eE(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return mo(l.node,l.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function Yj(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return eE(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?eE(t,n):null}function Xj(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Qj(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let o of e)if(((n=o.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=o.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let u=l;for(;;){let f=u.firstChild;if(!f||f.nodeType!=1||f.contentEditable=="false"||/^(BR|IMG)$/.test(f.nodeName))break;u=f}u.insertBefore(o,u.firstChild),r==o&&t.domSelection().collapse(o,i)}else o.parentNode.removeChild(o)}}function Zj(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:l,to:u}=t.docView.parseRange(e,n),f=t.domSelectionRange(),h,p=f.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],Zd(f)||h.push({node:f.focusNode,offset:f.focusOffset})),Ut&&t.input.lastKeyCode===8)for(let E=o;E>i;E--){let T=r.childNodes[E-1],A=T.pmViewDesc;if(T.nodeName=="BR"&&!A){o=E;break}if(!A||A.size)break}let m=t.state.doc,y=t.someProp("domParser")||vs.fromSchema(t.state.schema),v=m.resolve(l),w=null,S=y.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:ez,context:v});if(h&&h[0].pos!=null){let E=h[0].pos,T=h[1]&&h[1].pos;T==null&&(T=E),w={anchor:E+l,head:T+l}}return{doc:S,sel:w,from:l,to:u}}function ez(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Qt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Qt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const tz=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function nz(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let z=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,W=$y(t,z);if(W&&!t.state.selection.eq(W)){if(Ut&&Si&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ne=>ne(t,no(13,"Enter"))))return;let ee=t.state.tr.setSelection(W);z=="pointer"?ee.setMeta("pointer",!0):z=="key"&&ee.scrollIntoView(),o&&ee.setMeta("composition",o),t.dispatch(ee)}return}let l=t.state.doc.resolve(e),u=l.sharedDepth(n);e=l.before(u+1),n=t.state.doc.resolve(n).after(u+1);let f=t.state.selection,h=Zj(t,e,n),p=t.state.doc,m=p.slice(h.from,h.to),y,v;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(y=t.state.selection.to,v="end"):(y=t.state.selection.from,v="start"),t.input.lastKeyCode=null;let w=sz(m.content,h.doc.content,h.from,y,v);if(w&&t.input.domChangeCount++,(Oa&&t.input.lastIOSEnter>Date.now()-225||Si)&&i.some(z=>z.nodeType==1&&!tz.test(z.nodeName))&&(!w||w.endA>=w.endB)&&t.someProp("handleKeyDown",z=>z(t,no(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!w)if(r&&f instanceof we&&!f.empty&&f.$head.sameParent(f.$anchor)&&!t.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let z=tE(t,t.state.doc,h.sel);if(z&&!z.eq(t.state.selection)){let W=t.state.tr.setSelection(z);o&&W.setMeta("composition",o),t.dispatch(W)}}return}t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof we&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),wn&&ws<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)==" "&&(w.start--,w.endA--,w.endB--);let S=h.doc.resolveNoCache(w.start-h.from),E=h.doc.resolveNoCache(w.endB-h.from),T=p.resolve(w.start),A=S.sameParent(E)&&S.parent.inlineContent&&T.end()>=w.endA;if((Oa&&t.input.lastIOSEnter>Date.now()-225&&(!A||i.some(z=>z.nodeName=="DIV"||z.nodeName=="P"))||!A&&S.pos<h.doc.content.size&&(!S.sameParent(E)||!S.parent.inlineContent)&&S.pos<E.pos&&!/\S/.test(h.doc.textBetween(S.pos,E.pos,"","")))&&t.someProp("handleKeyDown",z=>z(t,no(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>w.start&&iz(p,w.start,w.endA,S,E)&&t.someProp("handleKeyDown",z=>z(t,no(8,"Backspace")))){Si&&Ut&&t.domObserver.suppressSelectionUpdates();return}Ut&&w.endB==w.start&&(t.input.lastChromeDelete=Date.now()),Si&&!A&&S.start()!=E.start()&&E.parentOffset==0&&S.depth==E.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,E=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{t.someProp("handleKeyDown",function(z){return z(t,no(13,"Enter"))})},20));let C=w.start,L=w.endA,I=z=>{let W=z||t.state.tr.replace(C,L,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let ee=tE(t,W.doc,h.sel);ee&&!(Ut&&t.composing&&ee.empty&&(w.start!=w.endB||t.input.lastChromeDelete<Date.now()-100)&&(ee.head==C||ee.head==W.mapping.map(L)-1)||wn&&ee.empty&&ee.head==C)&&W.setSelection(ee)}return o&&W.setMeta("composition",o),W.scrollIntoView()},H;if(A)if(S.pos==E.pos){wn&&ws<=11&&S.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>_i(t),20));let z=I(t.state.tr.delete(C,L)),W=p.resolve(w.start).marksAcross(p.resolve(w.endA));W&&z.ensureMarks(W),t.dispatch(z)}else if(w.endA==w.endB&&(H=rz(S.parent.content.cut(S.parentOffset,E.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start())))){let z=I(t.state.tr);H.type=="add"?z.addMark(C,L,H.mark):z.removeMark(C,L,H.mark),t.dispatch(z)}else if(S.parent.child(S.index()).isText&&S.index()==E.index()-(E.textOffset?0:1)){let z=S.parent.textBetween(S.parentOffset,E.parentOffset),W=()=>I(t.state.tr.insertText(z,C,L));t.someProp("handleTextInput",ee=>ee(t,C,L,z,W))||t.dispatch(W())}else t.dispatch(I());else t.dispatch(I())}function tE(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:qy(t,e.resolve(n.anchor),e.resolve(n.head))}function rz(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,l,u,f;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],l="add",f=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&o.length==1)u=o[0],l="remove",f=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(f(e.child(p)));if(J.from(h).eq(t))return{mark:u,type:l}}function iz(t,e,n,r,i){if(n-e<=i.pos-r.pos||og(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&n==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=t.resolve(og(o,!0,!0));return!l.parent.isTextblock||l.pos>n||og(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function og(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function sz(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:l,b:u}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let f=Math.max(0,o-Math.min(l,u));r-=l+f-o}if(l<o&&t.size<e.size){let f=r<=o&&r>=l?o-r:0;o-=f,o&&o<e.size&&nE(e.textBetween(o-1,o+1))&&(o+=f?1:-1),u=o+(u-l),l=o}else if(u<o){let f=r<=o&&r>=u?o-r:0;o-=f,o&&o<t.size&&nE(t.textBetween(o-1,o+1))&&(o+=f?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function nE(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class w_{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Sj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(aE),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=sE(this),iE(this),this.nodeViews=oE(this),this.docView=Ix(this.state.doc,rE(this),sg(this),this.dom,this),this.domObserver=new Wj(this,(r,i,o,l)=>nz(this,r,i,o,l)),this.domObserver.start(),xj(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ty(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(aE),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(h_(this),l=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let v=oE(this);az(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&ty(this),this.editable=sE(this),iE(this);let f=sg(this),h=rE(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,f);(m||!e.selection.eq(i.selection))&&(l=!0);let y=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&zL(this);if(l){this.domObserver.stop();let v=m&&(wn||Ut)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&oz(i.selection,e.selection);if(m){let w=Ut?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=zj(this)),(o||!this.docView.update(e.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Ix(e.doc,h,f,this.dom,this)),w&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&oj(this))?_i(this,v):(t_(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():y&&IL(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof pe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Nx(this,n.getBoundingClientRect(),e)}else Nx(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new m_(e.slice,e.move,i<0?void 0:pe.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(i=n?n(u):u))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(i=n?n(u):u))return i}}hasFocus(){if(wn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&UL(this.dom),_i(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return qL(this,e)}coordsAtPos(e,n=1){return KT(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return WL(this,n||this.state,e)}pasteHTML(e,n){return Oc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Oc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Vy(this,e)}destroy(){this.docView&&(Ej(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],sg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,kL())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return _j(this,e)}domSelectionRange(){let e=this.domSelection();return e?Qt&&this.root.nodeType===11&&NL(this.dom.ownerDocument)==this.dom&&Yj(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}w_.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function rE(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[on.node(0,t.state.doc.content.size,e)]}function iE(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:on.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function sE(t){return!t.someProp("editable",e=>e(t.state)===!1)}function oz(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function oE(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function az(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function aE(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Es={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},od={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},lz=typeof navigator<"u"&&/Mac/.test(navigator.platform),cz=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Xt=0;Xt<10;Xt++)Es[48+Xt]=Es[96+Xt]=String(Xt);for(var Xt=1;Xt<=24;Xt++)Es[Xt+111]="F"+Xt;for(var Xt=65;Xt<=90;Xt++)Es[Xt]=String.fromCharCode(Xt+32),od[Xt]=String.fromCharCode(Xt);for(var ag in Es)od.hasOwnProperty(ag)||(od[ag]=Es[ag]);function uz(t){var e=lz&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||cz&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?od:Es)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const fz=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),dz=typeof navigator<"u"&&/Win/.test(navigator.platform);function hz(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,l;for(let u=0;u<e.length-1;u++){let f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))fz?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function pz(t){let e=Object.create(null);for(let n in t)e[hz(n)]=t[n];return e}function lg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function mz(t){return new nt({props:{handleKeyDown:Yy(t)}})}function Yy(t){let e=pz(t);return function(n,r){let i=uz(r),o,l=e[lg(i,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[lg(i,r,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(dz&&r.ctrlKey&&r.altKey)&&(o=Es[r.keyCode])&&o!=i){let u=e[lg(o,r)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var gz=Object.defineProperty,Xy=(t,e)=>{for(var n in e)gz(t,n,{get:e[n],enumerable:!0})};function nh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var rh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...h)=>{const p=u(...h)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l=[],u=!!t,f=t||i.tr,h=()=>(!u&&e&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(f),l.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,y])=>[m,(...w)=>{const S=this.buildProps(f,e),E=y(...w)(S);return l.push(E),p}])),run:h};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([u,f])=>[u,(...h)=>f(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l={tr:t,editor:r,view:o,state:nh({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([u,f])=>[u,(...h)=>f(...h)(l)]))}};return l}},S_={};Xy(S_,{blur:()=>yz,clearContent:()=>bz,clearNodes:()=>vz,command:()=>wz,createParagraphNear:()=>Sz,cut:()=>xz,deleteCurrentNode:()=>Ez,deleteNode:()=>Tz,deleteRange:()=>_z,deleteSelection:()=>kz,enter:()=>Az,exitCode:()=>Cz,extendMarkRange:()=>Oz,first:()=>Rz,focus:()=>Mz,forEach:()=>Dz,insertContent:()=>Lz,insertContentAt:()=>Iz,joinBackward:()=>Pz,joinDown:()=>Bz,joinForward:()=>Hz,joinItemBackward:()=>$z,joinItemForward:()=>qz,joinTextblockBackward:()=>Vz,joinTextblockForward:()=>Fz,joinUp:()=>Uz,keyboardShortcut:()=>Kz,lift:()=>Wz,liftEmptyBlock:()=>Jz,liftListItem:()=>Yz,newlineInCode:()=>Xz,resetAttributes:()=>Qz,scrollIntoView:()=>Zz,selectAll:()=>eI,selectNodeBackward:()=>tI,selectNodeForward:()=>nI,selectParentNode:()=>rI,selectTextblockEnd:()=>iI,selectTextblockStart:()=>sI,setContent:()=>oI,setMark:()=>_I,setMeta:()=>kI,setNode:()=>AI,setNodeSelection:()=>CI,setTextDirection:()=>OI,setTextSelection:()=>RI,sinkListItem:()=>NI,splitBlock:()=>MI,splitListItem:()=>DI,toggleList:()=>LI,toggleMark:()=>jI,toggleNode:()=>zI,toggleWrap:()=>II,undoInputRule:()=>UI,unsetAllMarks:()=>BI,unsetMark:()=>PI,unsetTextDirection:()=>HI,updateAttributes:()=>$I,wrapIn:()=>qI,wrapInList:()=>VI});var yz=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),bz=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),vz=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:l})=>{t.doc.nodesBetween(o.pos,l.pos,(u,f)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(f)),y=h.resolve(p.map(f+u.nodeSize)),v=m.blockRange(y);if(!v)return;const w=Ua(v);if(u.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(v.start,S)}(w||w===0)&&e.lift(v,w)})}),!0},wz=t=>e=>t(e),Sz=()=>({state:t,dispatch:e})=>zT(t,e),xz=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new we(r.doc.resolve(Math.max(l-1,0)))),!0},Ez=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const u=i.before(o),f=i.after(o);t.delete(u,f).scrollIntoView()}return!0}return!1};function Ct(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Tz=t=>({tr:e,state:n,dispatch:r})=>{const i=Ct(t,n.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const f=o.before(l),h=o.after(l);e.delete(f,h).scrollIntoView()}return!0}return!1},_z=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},kz=()=>({state:t,dispatch:e})=>zy(t,e),Az=()=>({commands:t})=>t.keyboardShortcut("Enter"),Cz=()=>({state:t,dispatch:e})=>fL(t,e);function Qy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ad(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Qy(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function x_(t,e,n={}){return t.find(r=>r.type===e&&ad(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function lE(t,e,n={}){return!!x_(t,e,n)}function Zy(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!x_([...i.node.marks],e,n)))return;let l=i.index,u=t.start()+i.offset,f=l+1,h=u+i.node.nodeSize;for(;l>0&&lE([...t.parent.child(l-1).marks],e,n);)l-=1,u-=t.parent.child(l).nodeSize;for(;f<t.parent.childCount&&lE([...t.parent.child(f).marks],e,n);)h+=t.parent.child(f).nodeSize,f+=1;return{from:u,to:h}}function Oi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Oz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Oi(t,r.schema),{doc:l,selection:u}=n,{$from:f,from:h,to:p}=u;if(i){const m=Zy(f,o,e);if(m&&m.from<=h&&m.to>=p){const y=we.create(l,m.from,m.to);n.setSelection(y)}}return!0},Rz=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function e0(t){return t instanceof we}function xi(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function E_(t,e=null){if(!e)return null;const n=ve.atStart(t),r=ve.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?we.create(t,xi(0,i,o),xi(t.content.size,i,o)):we.create(t,xi(e,i,o),xi(e,i,o))}function cE(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ld(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Nz(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Mz=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(ld()||cE())&&r.dom.focus(),Nz()&&!ld()&&!cE()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(o&&t===null&&!e0(n.state.selection))return l(),!0;const u=E_(i.doc,t)||n.state.selection,f=n.state.selection.eq(u);return o&&(f||i.setSelection(u),f&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},Dz=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Lz=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),T_=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&T_(r)}return t};function Tf(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return T_(n)}function Nc(t,e,n){if(t instanceof bs||t instanceof J)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return J.fromArray(t.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Nc("",e,n)}if(i){if(n.errorOnInvalidContent){let l=!1,u="";const f=new lT({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(n.slice?vs.fromSchema(f).parseSlice(Tf(t),n.parseOptions):vs.fromSchema(f).parse(Tf(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=vs.fromSchema(e);return n.slice?o.parseSlice(Tf(t),n.parseOptions).content:o.parse(Tf(t),n.parseOptions)}return Nc("",e,n)}function jz(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof It||i instanceof Bt))return;const o=t.mapping.maps[r];let l=0;o.forEach((u,f,h,p)=>{l===0&&(l=p)}),t.setSelection(ve.near(t.doc.resolve(l),n))}var zz=t=>!("type"in t),Iz=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const f=E=>{o.emit("contentError",{editor:o,error:E,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Nc(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(E){f(E)}try{u=Nc(e,o.schema,{parseOptions:h,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(E){return f(E),!1}let{from:p,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},y=!0,v=!0;if((zz(u)?u:[u]).forEach(E=>{E.check(),y=y?E.isText&&E.marks.length===0:!1,v=v?E.isBlock:!1}),p===m&&v){const{parent:E}=r.doc.resolve(p);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(p-=1,m+=1)}let S;if(y){if(Array.isArray(e))S=e.map(E=>E.text||"").join("");else if(e instanceof J){let E="";e.forEach(T=>{T.text&&(E+=T.text)}),S=E}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else{S=u;const E=r.doc.resolve(p),T=E.node(),A=E.parentOffset===0,C=T.isText||T.isTextblock,L=T.content.size>0;A&&C&&L&&(p=Math.max(0,p-1)),r.replaceWith(p,m,S)}n.updateSelection&&jz(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},Uz=()=>({state:t,dispatch:e})=>lL(t,e),Bz=()=>({state:t,dispatch:e})=>cL(t,e),Pz=()=>({state:t,dispatch:e})=>OT(t,e),Hz=()=>({state:t,dispatch:e})=>DT(t,e),$z=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Yd(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},qz=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Yd(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Vz=()=>({state:t,dispatch:e})=>oL(t,e),Fz=()=>({state:t,dispatch:e})=>aL(t,e);function __(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Gz(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,l;for(let u=0;u<e.length-1;u+=1){const f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))ld()||__()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var Kz=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=Gz(t).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{n.someProp("handleKeyDown",h=>h(n,u))});return f?.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function Ts(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,l=e?Ct(e,t.schema):null,u=[];t.doc.nodesBetween(r,i,(m,y)=>{if(m.isText)return;const v=Math.max(r,y),w=Math.min(i,y+m.nodeSize);u.push({node:m,from:v,to:w})});const f=i-r,h=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>ad(m.node.attrs,n,{strict:!1}));return o?!!h.length:h.reduce((m,y)=>m+y.to-y.from,0)>=f}var Wz=(t,e={})=>({state:n,dispatch:r})=>{const i=Ct(t,n.schema);return Ts(n,i,e)?uL(n,r):!1},Jz=()=>({state:t,dispatch:e})=>IT(t,e),Yz=t=>({state:e,dispatch:n})=>{const r=Ct(t,e.schema);return xL(r)(e,n)},Xz=()=>({state:t,dispatch:e})=>jT(t,e);function ih(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function uE(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var Qz=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const u=ih(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(o=Ct(t,r.schema)),u==="mark"&&(l=Oi(t,r.schema));let f=!1;return n.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,m)=>{o&&o===p.type&&(f=!0,i&&n.setNodeMarkup(m,void 0,uE(p.attrs,e))),l&&p.marks.length&&p.marks.forEach(y=>{l===y.type&&(f=!0,i&&n.addMark(m,m+p.nodeSize,l.create(uE(y.attrs,e))))})})}),f},Zz=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),eI=()=>({tr:t,dispatch:e})=>{if(e){const n=new Dn(t.doc);t.setSelection(n)}return!0},tI=()=>({state:t,dispatch:e})=>NT(t,e),nI=()=>({state:t,dispatch:e})=>LT(t,e),rI=()=>({state:t,dispatch:e})=>pL(t,e),iI=()=>({state:t,dispatch:e})=>yL(t,e),sI=()=>({state:t,dispatch:e})=>gL(t,e);function ny(t,e,n={},r={}){return Nc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var oI=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:l,commands:u})=>{const{doc:f}=o;if(r.preserveWhitespace!=="full"){const h=ny(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return l&&o.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!n),!0}return l&&o.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:f.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function k_(t,e){const n=Oi(e,t.schema),{from:r,to:i,empty:o}=t.selection,l=[];o?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,f=>{l.push(...f.marks)});const u=l.find(f=>f.type.name===n.name);return u?{...u.attrs}:{}}function A_(t,e){const n=new TT(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function aI(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function lI(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function cI(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function sh(t){return e=>cI(e.$from,t)}function de(t,e,n){return t.config[e]===void 0&&t.parent?de(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?de(t.parent,e,n):null}):t.config[e]}function t0(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=de(e,"addExtensions",n);return r?[e,...t0(r())]:e}).flat(10)}function n0(t,e){const n=vo.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function C_(t){return typeof t=="function"}function Ge(t,e=void 0,...n){return C_(t)?e?t.bind(e)(...n):t(...n):t}function uI(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ra(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function O_(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ra(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:i},f=de(l,"addGlobalAttributes",u);if(!f)return;f().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([y,v])=>{e.push({type:m,name:y,attribute:{...o,...v}})})})})}),i.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},f=de(l,"addAttributes",u);if(!f)return;const h=f();Object.entries(h).forEach(([p,m])=>{const y={...o,...m};typeof y?.default=="function"&&(y.default=y.default()),y?.isRequired&&y?.default===void 0&&delete y.default,e.push({type:l.name,name:p,attribute:y})})}),e}function Ot(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const u=o?String(o).split(" "):[],f=r[i]?r[i].split(" "):[],h=u.filter(p=>!f.includes(p));r[i]=[...f,...h].join(" ")}else if(i==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],f=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;f.forEach(p=>{const[m,y]=p.split(":").map(v=>v.trim());h.set(m,y)}),u.forEach(p=>{const[m,y]=p.split(":").map(v=>v.trim());h.set(m,y)}),r[i]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[i]=o}),r},{})}function Mc(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ot(n,r),{})}function fI(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function fE(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(n):fI(n.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...i}}}}function dE(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&uI(n)?!1:n!=null))}function hE(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function dI(t,e){var n;const r=O_(t),{nodeExtensions:i,markExtensions:o}=Ra(t),l=(n=i.find(h=>de(h,"topNode")))==null?void 0:n.name,u=Object.fromEntries(i.map(h=>{const p=r.filter(T=>T.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},y=t.reduce((T,A)=>{const C=de(A,"extendNodeSchema",m);return{...T,...C?C(h):{}}},{}),v=dE({...y,content:Ge(de(h,"content",m)),marks:Ge(de(h,"marks",m)),group:Ge(de(h,"group",m)),inline:Ge(de(h,"inline",m)),atom:Ge(de(h,"atom",m)),selectable:Ge(de(h,"selectable",m)),draggable:Ge(de(h,"draggable",m)),code:Ge(de(h,"code",m)),whitespace:Ge(de(h,"whitespace",m)),linebreakReplacement:Ge(de(h,"linebreakReplacement",m)),defining:Ge(de(h,"defining",m)),isolating:Ge(de(h,"isolating",m)),attrs:Object.fromEntries(p.map(hE))}),w=Ge(de(h,"parseHTML",m));w&&(v.parseDOM=w.map(T=>fE(T,p)));const S=de(h,"renderHTML",m);S&&(v.toDOM=T=>S({node:T,HTMLAttributes:Mc(T,p)}));const E=de(h,"renderText",m);return E&&(v.toText=E),[h.name,v]})),f=Object.fromEntries(o.map(h=>{const p=r.filter(E=>E.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},y=t.reduce((E,T)=>{const A=de(T,"extendMarkSchema",m);return{...E,...A?A(h):{}}},{}),v=dE({...y,inclusive:Ge(de(h,"inclusive",m)),excludes:Ge(de(h,"excludes",m)),group:Ge(de(h,"group",m)),spanning:Ge(de(h,"spanning",m)),code:Ge(de(h,"code",m)),attrs:Object.fromEntries(p.map(hE))}),w=Ge(de(h,"parseHTML",m));w&&(v.parseDOM=w.map(E=>fE(E,p)));const S=de(h,"renderHTML",m);return S&&(v.toDOM=E=>S({mark:E,HTMLAttributes:Mc(E,p)})),[h.name,v]}));return new lT({topNode:l,nodes:u,marks:f})}function hI(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function cd(t){return t.sort((n,r)=>{const i=de(n,"priority")||100,o=de(r,"priority")||100;return i>o?-1:i<o?1:0})}function R_(t){const e=cd(t0(t)),n=hI(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function N_(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:l={}}=n||{};let u="";return t.nodesBetween(r,i,(f,h,p,m)=>{var y;f.isBlock&&h>r&&(u+=o);const v=l?.[f.type.name];if(v)return p&&(u+=v({node:f,pos:h,parent:p,index:m,range:e})),!1;f.isText&&(u+=(y=f?.text)==null?void 0:y.slice(Math.max(r,h)-h,i-h))}),u}function M_(t,e){const n={from:0,to:t.content.size};return N_(t,n,e)}function r0(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function pI(t,e){const n=Ct(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function D_(t,e){const n=ih(typeof e=="string"?e:e.name,t.schema);return n==="node"?pI(t,e):n==="mark"?k_(t,e):{}}function mI(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function gI(t){const e=mI(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,l)=>l!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function L_(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const l=[];if(i.ranges.length)i.forEach((u,f)=>{l.push({from:u,to:f})});else{const{from:u,to:f}=n[o];if(u===void 0||f===void 0)return;l.push({from:u,to:f})}l.forEach(({from:u,to:f})=>{const h=e.slice(o).map(u,-1),p=e.slice(o).map(f),m=e.invert().map(h,-1),y=e.invert().map(p);r.push({oldRange:{from:m,to:y},newRange:{from:h,to:p}})})}),gI(r)}function i0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),l=Zy(o,i.type);l&&r.push({mark:i,...l})}):n.nodesBetween(t,e,(i,o)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}var yI=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let o=r,l=null;for(;o>0&&l===null;){const u=i.node(o);u?.type.name===e?l=u:o-=1}return[l,o]};function _f(t,e){return e.nodes[t]||e.marks[t]||null}function $f(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var bI=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,l,u)=>{var f,h;const p=((h=(f=i.type.spec).toText)==null?void 0:h.call(f,{node:i,pos:o,parent:l,index:u}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-o))}),n};function ry(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Oi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>ad(m.attrs,n,{strict:!1}));let l=0;const u=[];if(i.forEach(({$from:m,$to:y})=>{const v=m.pos,w=y.pos;t.doc.nodesBetween(v,w,(S,E)=>{if(!S.isText&&!S.marks.length)return;const T=Math.max(v,E),A=Math.min(w,E+S.nodeSize),C=A-T;l+=C,u.push(...S.marks.map(L=>({mark:L,from:T,to:A})))})}),l===0)return!1;const f=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>ad(m.mark.attrs,n,{strict:!1})).reduce((m,y)=>m+y.to-y.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,y)=>m+y.to-y.from,0);return(f>0?f+h:f)>=l}function vI(t,e,n={}){if(!e)return Ts(t,null,n)||ry(t,null,n);const r=ih(e,t.schema);return r==="node"?Ts(t,e,n):r==="mark"?ry(t,e,n):!1}var wI=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const o=sh(u=>u.type.name===e)(t.selection);if(!o)return!1;const l=t.doc.resolve(o.pos+1);return i.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},SI=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function pE(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function mE(t,e){const{nodeExtensions:n}=Ra(e),r=n.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ge(de(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function oh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(oh(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function j_(t){return t instanceof pe}var z_=class I_{constructor(e){this.position=e}static fromJSON(e){return new I_(e.position)}toJSON(){return{position:this.position}}};function xI(t,e){const n=e.mapping.mapResult(t.position);return{position:new z_(n.pos),mapResult:n}}function EI(t){return new z_(t)}function U_(t,e,n){const i=t.state.doc.content.size,o=xi(e,0,i),l=xi(n,0,i),u=t.coordsAtPos(o),f=t.coordsAtPos(l,-1),h=Math.min(u.top,f.top),p=Math.max(u.bottom,f.bottom),m=Math.min(u.left,f.left),y=Math.max(u.right,f.right),v=y-m,w=p-h,T={top:h,bottom:p,left:m,right:y,width:v,height:w,x:m,y:h};return{...T,toJSON:()=>T}}function TI(t,e,n){var r;const{selection:i}=e;let o=null;if(e0(i)&&(o=i.$cursor),o){const u=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(h=>h.type.excludes(n)))}const{ranges:l}=i;return l.some(({$from:u,$to:f})=>{let h=u.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(u.pos,f.pos,(p,m,y)=>{if(h)return!1;if(p.isInline){const v=!y||y.type.allowsMarkType(n),w=!!n.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(n));h=v&&w}return!h}),h})}var _I=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:l,ranges:u}=o,f=Oi(t,r.schema);if(i)if(l){const h=k_(r,f);n.addStoredMark(f.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(y,v)=>{const w=Math.max(v,p),S=Math.min(v+y.nodeSize,m);y.marks.find(T=>T.type===f)?y.marks.forEach(T=>{f===T.type&&n.addMark(w,S,f.create({...T.attrs,...e}))}):n.addMark(w,S,f.create(e))})});return TI(r,n,f)},kI=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),AI=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=Ct(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:u})=>Cx(o,{...l,...e})(n)?!0:u.clearNodes()).command(({state:u})=>Cx(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},CI=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=xi(t,0,r.content.size),o=pe.create(r,i);e.setSelection(o)}return!0},OI=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=r;let l,u;return typeof e=="number"?(l=e,u=e):e&&"from"in e&&"to"in e?(l=e.from,u=e.to):(l=o.from,u=o.to),i&&n.doc.nodesBetween(l,u,(f,h)=>{f.isText||n.setNodeMarkup(h,void 0,{...f.attrs,dir:t})}),!0},RI=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,l=we.atStart(r).from,u=we.atEnd(r).to,f=xi(i,l,u),h=xi(o,l,u),p=we.create(r,f,h);e.setSelection(p)}return!0},NI=t=>({state:e,dispatch:n})=>{const r=Ct(t,e.schema);return _L(r)(e,n)};function gE(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var MI=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:l}=e,{$from:u,$to:f}=o,h=i.extensionManager.attributes,p=$f(h,u.node().type.name,u.node().attrs);if(o instanceof pe&&o.node.isBlock)return!u.parentOffset||!Ti(l,u.pos)?!1:(r&&(t&&gE(n,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=f.parentOffset===f.parent.content.size,y=u.depth===0?void 0:aI(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=m&&y?[{type:y,attrs:p}]:void 0,w=Ti(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!w&&Ti(e.doc,e.mapping.map(u.pos),1,y?[{type:y}]:void 0)&&(w=!0,v=y?[{type:y,attrs:p}]:void 0),r){if(w&&(o instanceof we&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),y&&!m&&!u.parentOffset&&u.parent.type!==y)){const S=e.mapping.map(u.before()),E=e.doc.resolve(S);u.node(-1).canReplaceWith(E.index(),E.index()+1,y)&&e.setNodeMarkup(e.mapping.map(u.before()),y)}t&&gE(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return w},DI=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var l;const u=Ct(t,r.schema),{$from:f,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||f.depth<2||!f.sameParent(h))return!1;const m=f.node(-1);if(m.type!==u)return!1;const y=o.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==u||f.index(-2)!==f.node(-2).childCount-1)return!1;if(i){let T=J.empty;const A=f.index(-1)?1:f.index(-2)?2:3;for(let W=f.depth-A;W>=f.depth-3;W-=1)T=J.from(f.node(W).copy(T));const C=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,L={...$f(y,f.node().type.name,f.node().attrs),...e},I=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(L))||void 0;T=T.append(J.from(u.createAndFill(null,I)||void 0));const H=f.before(f.depth-(A-1));n.replace(H,f.after(-C),new te(T,4-A,0));let z=-1;n.doc.nodesBetween(H,n.doc.content.size,(W,ee)=>{if(z>-1)return!1;W.isTextblock&&W.content.size===0&&(z=ee+1)}),z>-1&&n.setSelection(we.near(n.doc.resolve(z))),n.scrollIntoView()}return!0}const v=h.pos===f.end()?m.contentMatchAt(0).defaultType:null,w={...$f(y,m.type.name,m.attrs),...e},S={...$f(y,f.node().type.name,f.node().attrs),...e};n.delete(f.pos,h.pos);const E=v?[{type:u,attrs:w},{type:v,attrs:S}]:[{type:u,attrs:w}];if(!Ti(n.doc,f.pos,2))return!1;if(i){const{selection:T,storedMarks:A}=r,{splittableMarks:C}=o.extensionManager,L=A||T.$to.parentOffset&&T.$from.marks();if(n.split(f.pos,2,E).scrollIntoView(),!L||!i)return!0;const I=L.filter(H=>C.includes(H.type.name));n.ensureMarks(I)}return!0},cg=(t,e)=>{const n=sh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&As(t.doc,n.pos)&&t.join(n.pos),!0},ug=(t,e)=>{const n=sh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&As(t.doc,r)&&t.join(r),!0},LI=(t,e,n,r={})=>({editor:i,tr:o,state:l,dispatch:u,chain:f,commands:h,can:p})=>{const{extensions:m,splittableMarks:y}=i.extensionManager,v=Ct(t,l.schema),w=Ct(e,l.schema),{selection:S,storedMarks:E}=l,{$from:T,$to:A}=S,C=T.blockRange(A),L=E||S.$to.parentOffset&&S.$from.marks();if(!C)return!1;const I=sh(H=>mE(H.type.name,m))(S);if(C.depth>=1&&I&&C.depth-I.depth<=1){if(I.node.type===v)return h.liftListItem(w);if(mE(I.node.type.name,m)&&v.validContent(I.node.content)&&u)return f().command(()=>(o.setNodeMarkup(I.pos,v),!0)).command(()=>cg(o,v)).command(()=>ug(o,v)).run()}return!n||!L||!u?f().command(()=>p().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>cg(o,v)).command(()=>ug(o,v)).run():f().command(()=>{const H=p().wrapInList(v,r),z=L.filter(W=>y.includes(W.type.name));return o.ensureMarks(z),H?!0:h.clearNodes()}).wrapInList(v,r).command(()=>cg(o,v)).command(()=>ug(o,v)).run()},jI=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,l=Oi(t,r.schema);return ry(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,e)},zI=(t,e,n={})=>({state:r,commands:i})=>{const o=Ct(t,r.schema),l=Ct(e,r.schema),u=Ts(r,o,n);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),u?i.setNode(l,f):i.setNode(o,{...f,...n})},II=(t,e={})=>({state:n,commands:r})=>{const i=Ct(t,n.schema);return Ts(n,i,e)?r.lift(i):r.wrapIn(i,e)},UI=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const l=t.tr,u=o.transform;for(let f=u.steps.length-1;f>=0;f-=1)l.step(u.steps[f].invert(u.docs[f]));if(o.text){const f=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,t.schema.text(o.text,f))}else l.delete(o.from,o.to)}return!0}}return!1},BI=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},PI=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=n,f=Oi(t,r.schema),{$from:h,empty:p,ranges:m}=u;if(!i)return!0;if(p&&l){let{from:y,to:v}=u;const w=(o=h.marks().find(E=>E.type===f))==null?void 0:o.attrs,S=Zy(h,f,w);S&&(y=S.from,v=S.to),n.removeMark(y,v,f)}else m.forEach(y=>{n.removeMark(y.$from.pos,y.$to.pos,f)});return n.removeStoredMark(f),!0},HI=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=i.from,l=i.to),r&&e.doc.nodesBetween(o,l,(u,f)=>{if(u.isText)return;const h={...u.attrs};delete h.dir,e.setNodeMarkup(f,void 0,h)}),!0},$I=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const u=ih(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(o=Ct(t,r.schema)),u==="mark"&&(l=Oi(t,r.schema));let f=!1;return n.selection.ranges.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;let y,v,w,S;n.selection.empty?r.doc.nodesBetween(p,m,(E,T)=>{o&&o===E.type&&(f=!0,w=Math.max(T,p),S=Math.min(T+E.nodeSize,m),y=T,v=E)}):r.doc.nodesBetween(p,m,(E,T)=>{T<p&&o&&o===E.type&&(f=!0,w=Math.max(T,p),S=Math.min(T+E.nodeSize,m),y=T,v=E),T>=p&&T<=m&&(o&&o===E.type&&(f=!0,i&&n.setNodeMarkup(T,void 0,{...E.attrs,...e})),l&&E.marks.length&&E.marks.forEach(A=>{if(l===A.type&&(f=!0,i)){const C=Math.max(T,p),L=Math.min(T+E.nodeSize,m);n.addMark(C,L,l.create({...A.attrs,...e}))}}))}),v&&(y!==void 0&&i&&n.setNodeMarkup(y,void 0,{...v.attrs,...e}),l&&v.marks.length&&v.marks.forEach(E=>{l===E.type&&i&&n.addMark(w,S,l.create({...E.attrs,...e}))}))}),f},qI=(t,e={})=>({state:n,dispatch:r})=>{const i=Ct(t,n.schema);return bL(i,e)(n,r)},VI=(t,e={})=>({state:n,dispatch:r})=>{const i=Ct(t,n.schema);return vL(i,e)(n,r)},FI=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},ah=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},GI=(t,e)=>{if(Qy(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function kf(t){var e;const{editor:n,from:r,to:i,text:o,rules:l,plugin:u}=t,{view:f}=n;if(f.composing)return!1;const h=f.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(y=>y.type.spec.code))return!1;let p=!1;const m=bI(h)+o;return l.forEach(y=>{if(p)return;const v=GI(m,y.find);if(!v)return;const w=f.state.tr,S=nh({state:f.state,transaction:w}),E={from:r-(v[0].length-o.length),to:i},{commands:T,chain:A,can:C}=new rh({editor:n,state:S});y.handler({state:S,range:E,match:v,commands:T,chain:A,can:C})===null||!w.steps.length||(y.undoable&&w.setMeta(u,{transform:w,from:r,to:i,text:o}),f.dispatch(w),p=!0)}),p}function KI(t){const{editor:e,rules:n}=t,r=new nt({state:{init(){return null},apply(i,o,l){const u=i.getMeta(r);if(u)return u;const f=i.getMeta("applyInputRules");return f&&setTimeout(()=>{let{text:p}=f;typeof p=="string"?p=p:p=n0(J.from(p),l.schema);const{from:m}=f,y=m+p.length;kf({editor:e,from:m,to:y,text:p,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,l,u){return kf({editor:e,from:o,to:l,text:u,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&kf({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?kf({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function WI(t){return Object.prototype.toString.call(t).slice(8,-1)}function Af(t){return WI(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function B_(t,e){const n={...t};return Af(t)&&Af(e)&&Object.keys(e).forEach(r=>{Af(e[r])&&Af(t[r])?n[r]=B_(t[r],e[r]):n[r]=e[r]}),n}var s0=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ge(de(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ge(de(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>B_(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},wo=class P_ extends s0{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new P_(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(h=>h?.type.name===n.name))return!1;const f=l.find(h=>h?.type.name===n.name);return f&&r.removeStoredMark(f),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function JI(t){return typeof t=="number"}var YI=class{constructor(t){this.find=t.find,this.handler=t.handler}},XI=(t,e,n)=>{if(Qy(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function QI(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:l,dropEvent:u}=t,{commands:f,chain:h,can:p}=new rh({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,i,(v,w)=>{var S,E,T,A,C;if((E=(S=v.type)==null?void 0:S.spec)!=null&&E.code||!(v.isText||v.isTextblock||v.isInline))return;const L=(C=(A=(T=v.content)==null?void 0:T.size)!=null?A:v.nodeSize)!=null?C:0,I=Math.max(r,w),H=Math.min(i,w+L);if(I>=H)return;const z=v.isText?v.text||"":v.textBetween(I-w,H-w,void 0,"");XI(z,o.find,l).forEach(ee=>{if(ee.index===void 0)return;const ne=I+ee.index+1,fe=ne+ee[0].length,ge={from:n.tr.mapping.map(ne),to:n.tr.mapping.map(fe)},Me=o.handler({state:n,range:ge,match:ee,commands:f,chain:h,can:p,pasteEvent:l,dropEvent:u});m.push(Me)})}),m.every(v=>v!==null)}var Cf=null,ZI=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function eU(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const f=({state:p,from:m,to:y,rule:v,pasteEvt:w})=>{const S=p.tr,E=nh({state:p,transaction:S});if(!(!QI({editor:e,state:E,from:Math.max(m-1,0),to:y.b-1,rule:v,pasteEvent:w,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(p=>new nt({view(m){const y=w=>{var S;r=(S=m.dom.parentElement)!=null&&S.contains(w.target)?m.dom.parentElement:null,r&&(Cf=e)},v=()=>{Cf&&(Cf=null)};return window.addEventListener("dragstart",y),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",y),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(m,y)=>{if(o=r===m.dom.parentElement,u=y,!o){const v=Cf;v?.isEditable&&setTimeout(()=>{const w=v.state.selection;w&&v.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,y)=>{var v;const w=(v=y.clipboardData)==null?void 0:v.getData("text/html");return l=y,i=!!w?.includes("data-pm-slice"),!1}}},appendTransaction:(m,y,v)=>{const w=m[0],S=w.getMeta("uiEvent")==="paste"&&!i,E=w.getMeta("uiEvent")==="drop"&&!o,T=w.getMeta("applyPasteRules"),A=!!T;if(!S&&!E&&!A)return;if(A){let{text:I}=T;typeof I=="string"?I=I:I=n0(J.from(I),v.schema);const{from:H}=T,z=H+I.length,W=ZI(I);return f({rule:p,state:v,from:H,to:{b:z},pasteEvt:W})}const C=y.doc.content.findDiffStart(v.doc.content),L=y.doc.content.findDiffEnd(v.doc.content);if(!(!JI(C)||!L||C===L.b))return f({rule:p,state:v,from:C,to:L,pasteEvt:l})}}))}var lh=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=R_(t),this.schema=dI(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:_f(e.name,this.schema)},r=de(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return cd([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:_f(r.name,this.schema)},o=[],l=de(r,"addKeyboardShortcuts",i);let u={};if(r.type==="mark"&&de(r,"exitable",i)&&(u.ArrowRight=()=>wo.handleExit({editor:t,mark:r})),l){const y=Object.fromEntries(Object.entries(l()).map(([v,w])=>[v,()=>w({editor:t})]));u={...u,...y}}const f=mz(u);o.push(f);const h=de(r,"addInputRules",i);if(pE(r,t.options.enableInputRules)&&h){const y=h();if(y&&y.length){const v=KI({editor:t,rules:y}),w=Array.isArray(v)?v:[v];o.push(...w)}}const p=de(r,"addPasteRules",i);if(pE(r,t.options.enablePasteRules)&&p){const y=p();if(y&&y.length){const v=eU({editor:t,rules:y});o.push(...v)}}const m=de(r,"addProseMirrorPlugins",i);if(m){const y=m();o.push(...y)}return o})}get attributes(){return O_(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ra(this.extensions);return Object.fromEntries(e.filter(n=>!!de(n,"addNodeView")).map(n=>{const r=this.attributes.filter(f=>f.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ct(n.name,this.schema)},o=de(n,"addNodeView",i);if(!o)return[];const l=o();if(!l)return[];const u=(f,h,p,m,y)=>{const v=Mc(f,r);return l({node:f,view:h,getPos:p,decorations:m,innerDecorations:y,editor:t,extension:n,HTMLAttributes:v})};return[n.name,u]}))}dispatchTransaction(t){const{editor:e}=this;return cd([...this.extensions].reverse()).reduceRight((r,i)=>{const o={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:_f(i.name,this.schema)},l=de(i,"dispatchTransaction",o);return l?u=>{l.call(o,{transaction:u,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ra(this.extensions);return Object.fromEntries(e.filter(n=>!!de(n,"addMarkView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Oi(n.name,this.schema)},o=de(n,"addMarkView",i);if(!o)return[];const l=(u,f,h)=>{const p=Mc(u,r);return o()({mark:u,view:f,inline:h,editor:t,extension:n,HTMLAttributes:p,updateAttributes:m=>{pU(u,t,m)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:_f(e.name,this.schema)};e.type==="mark"&&((n=Ge(de(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=de(e,"onBeforeCreate",r),o=de(e,"onCreate",r),l=de(e,"onUpdate",r),u=de(e,"onSelectionUpdate",r),f=de(e,"onTransaction",r),h=de(e,"onFocus",r),p=de(e,"onBlur",r),m=de(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),f&&this.editor.on("transaction",f),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};lh.resolve=R_;lh.sort=cd;lh.flatten=t0;var tU={};Xy(tU,{ClipboardTextSerializer:()=>$_,Commands:()=>q_,Delete:()=>V_,Drop:()=>F_,Editable:()=>G_,FocusEvents:()=>W_,Keymap:()=>J_,Paste:()=>Y_,Tabindex:()=>X_,TextDirection:()=>Q_,focusEventsPluginKey:()=>K_});var ut=class H_ extends s0{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new H_(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},$_=ut.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nt({key:new at("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,l=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),f=r0(n);return N_(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),q_=ut.create({name:"commands",addCommands(){return{...S_}}}),V_=ut.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var l,u,f,h;if((h=(f=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:f.call(u,t))!=null?h:t.getMeta("y-sync$"))return;const p=A_(t.before,[t,...e]);L_(p).forEach(v=>{p.mapping.mapResult(v.oldRange.from).deletedAfter&&p.mapping.mapResult(v.oldRange.to).deletedBefore&&p.before.nodesBetween(v.oldRange.from,v.oldRange.to,(w,S)=>{const E=S+w.nodeSize-2,T=v.oldRange.from<=S&&E<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:w,from:S,to:E,newFrom:p.mapping.map(S),newTo:p.mapping.map(E),deletedRange:v.oldRange,newRange:v.newRange,partial:!T,editor:this.editor,transaction:t,combinedTransform:p})})});const y=p.mapping;p.steps.forEach((v,w)=>{var S,E;if(v instanceof gr){const T=y.slice(w).map(v.from,-1),A=y.slice(w).map(v.to),C=y.invert().map(T,-1),L=y.invert().map(A),I=(S=p.doc.nodeAt(T-1))==null?void 0:S.marks.some(z=>z.eq(v.mark)),H=(E=p.doc.nodeAt(A))==null?void 0:E.marks.some(z=>z.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:C,to:L},newRange:{from:T,to:A},partial:!!(H||I),editor:this.editor,transaction:t,combinedTransform:p})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),F_=ut.create({name:"drop",addProseMirrorPlugins(){return[new nt({key:new at("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),G_=ut.create({name:"editable",addProseMirrorPlugins(){return[new nt({key:new at("editable"),props:{editable:()=>this.editor.options.editable}})]}}),K_=new at("focusEvents"),W_=ut.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new nt({key:K_,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),J_=ut.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:f,doc:h}=u,{empty:p,$anchor:m}=f,{pos:y,parent:v}=m,w=m.parent.isTextblock&&y>0?u.doc.resolve(y-1):m,S=w.parent.type.spec.isolating,E=m.pos-m.parentOffset,T=S&&w.parent.childCount===1?E===m.pos:ve.atStart(h).from===y;return!p||!v.type.isTextblock||v.textContent.length||!T||T&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ld()||__()?o:i},addProseMirrorPlugins(){return[new nt({key:new at("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(S=>S.getMeta("composition")))return;const r=t.some(S=>S.docChanged)&&!e.doc.eq(n.doc),i=t.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:u}=e.selection,f=ve.atStart(e.doc).from,h=ve.atEnd(e.doc).to;if(o||!(l===f&&u===h)||!oh(n.doc))return;const y=n.tr,v=nh({state:n,transaction:y}),{commands:w}=new rh({editor:this.editor,state:v});if(w.clearNodes(),!!y.steps.length)return y}})]}}),Y_=ut.create({name:"paste",addProseMirrorPlugins(){return[new nt({key:new at("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),X_=ut.create({name:"tabindex",addProseMirrorPlugins(){return[new nt({key:new at("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Q_=ut.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ra(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new nt({key:new at("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),nU=class nc{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new nc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new nc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new nc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,l=n.isInline,u=this.pos+r+(o?0:1);if(u<0||u>this.resolvedPos.doc.nodeSize-2)return;const f=this.resolvedPos.doc.resolve(u);if(!i&&!l&&f.depth<=this.depth)return;const h=new nc(f,this.editor,i,i||l?n:null);i&&(h.actualDepth=this.depth+1),e.push(h)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,l=Object.keys(n);for(let u=0;u<l.length;u+=1){const f=l[u];if(o[f]!==n[f])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&o.every(f=>n[f]===l.node.attrs[f])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},rU=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function iU(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var sU=class extends FI{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:xI,createMappablePosition:EI},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=E_(e,this.options.autofocus);this.editorState=Sa.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=iU(rU,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=C_(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(l=>!l.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[G_,$_.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),q_,W_,J_,X_,F_,Y_,V_,Q_.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new lh(r,this)}createCommandManager(){this.commandManager=new rh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=ny(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=ny(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new w_(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=l?.getMeta("focus"),f=l?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),f&&this.emit("blur",{editor:this,event:f.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return D_(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return vI(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return n0(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return M_(this.state.doc,{blockSeparator:e,textSerializers:{...r0(this.schema),...n}})}get isEmpty(){return oh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new nU(e,this)}get $doc(){return this.$pos(0)}};function Na(t){return new ah({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ge(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const f=u.search(/\S/),h=n.from+u.indexOf(l),p=h+l.length;if(i0(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(S=>S===t.type&&S!==v.mark.type)).filter(v=>v.to>h).length)return null;p<n.to&&o.delete(p,n.to),h>n.from&&o.delete(n.from+f,h);const y=n.from+f+l.length;o.addMark(n.from+f,y,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function oU(t){return new ah({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ge(t.getAttributes,void 0,r)||{},{tr:o}=e,l=n.from;let u=n.to;const f=t.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,u,f)}else if(r[0]){const h=t.type.isInline?l:l-1;o.insert(h,t.type.create(i)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()},undoable:t.undoable})}function iy(t){return new ah({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ge(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Ma(t){return new ah({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ge(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),f=l.doc.resolve(n.from).blockRange(),h=f&&Ly(f,t.type,o);if(!h)return null;if(l.wrap(f,h),t.keepMarks&&t.editor){const{selection:m,storedMarks:y}=e,{splittableMarks:v}=t.editor.extensionManager,w=y||m.$to.parentOffset&&m.$from.marks();if(w){const S=w.filter(E=>v.includes(E.type.name));l.ensureMarks(S)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,o).run()}const p=l.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&As(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&l.join(n.from-1)},undoable:t.undoable})}function aU(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof pe){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}var lU={};Xy(lU,{createAtomBlockMarkdownSpec:()=>cU,createBlockMarkdownSpec:()=>uU,createInlineMarkdownSpec:()=>hU,parseAttributes:()=>o0,parseIndentedBlocks:()=>sy,renderNestedMarkdownContent:()=>l0,serializeAttributes:()=>a0});function o0(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,h=>(n.push(h),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const h=i.map(p=>p.trim().slice(1));e.class=h.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,h,p])=>{var m;const y=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),v=n[y];v&&(e[h]=v.slice(1,-1))});const f=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return f&&f.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function a0(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function cU(t){const{nodeName:e,name:n,parseAttributes:r=o0,serializeAttributes:i=a0,defaultAttributes:o={},requiredAttributes:l=[],allowedAttributes:u}=t,f=n||e,h=p=>{if(!u)return p;const m={};return u.forEach(y=>{y in p&&(m[y]=p[y])}),m};return{parseMarkdown:(p,m)=>{const y={...o,...p.attributes};return m.createNode(e,y,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const y=new RegExp(`^:::${f}(?:\\s|$)`,"m"),v=(m=p.match(y))==null?void 0:m.index;return v!==void 0?v:-1},tokenize(p,m,y){const v=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),w=p.match(v);if(!w)return;const S=w[1]||"",E=r(S);if(!l.find(A=>!(A in E)))return{type:e,raw:w[0],attributes:E}}},renderMarkdown:p=>{const m=h(p.attrs||{}),y=i(m),v=y?` {${y}}`:"";return`:::${f}${v} :::`}}}function uU(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=o0,serializeAttributes:o=a0,defaultAttributes:l={},content:u="block",allowedAttributes:f}=t,h=n||e,p=m=>{if(!f)return m;const y={};return f.forEach(v=>{v in m&&(y[v]=m[v])}),y};return{parseMarkdown:(m,y)=>{let v;if(r){const S=r(m);v=typeof S=="string"?[{type:"text",text:S}]:S}else u==="block"?v=y.parseChildren(m.tokens||[]):v=y.parseInline(m.tokens||[]);const w={...l,...m.attributes};return y.createNode(e,w,v)},markdownTokenizer:{name:e,level:"block",start(m){var y;const v=new RegExp(`^:::${h}`,"m"),w=(y=m.match(v))==null?void 0:y.index;return w!==void 0?w:-1},tokenize(m,y,v){var w;const S=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=m.match(S);if(!E)return;const[T,A=""]=E,C=i(A);let L=1;const I=T.length;let H="";const z=/^:::([\w-]*)(\s.*)?/gm,W=m.slice(I);for(z.lastIndex=0;;){const ee=z.exec(W);if(ee===null)break;const ne=ee.index,fe=ee[1];if(!((w=ee[2])!=null&&w.endsWith(":::"))){if(fe)L+=1;else if(L-=1,L===0){const ge=W.slice(0,ne);H=ge.trim();const Me=m.slice(0,I+ne+ee[0].length);let Se=[];if(H)if(u==="block")for(Se=v.blockTokens(ge),Se.forEach(xe=>{xe.text&&(!xe.tokens||xe.tokens.length===0)&&(xe.tokens=v.inlineTokens(xe.text))});Se.length>0;){const xe=Se[Se.length-1];if(xe.type==="paragraph"&&(!xe.text||xe.text.trim()===""))Se.pop();else break}else Se=v.inlineTokens(H);return{type:e,raw:Me,attributes:C,content:H,tokens:Se}}}}}},renderMarkdown:(m,y)=>{const v=p(m.attrs||{}),w=o(v),S=w?` {${w}}`:"",E=y.renderChildren(m.content||[],`

`);return`:::${h}${S}

${E}

:::`}}}function fU(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,o,l]=r;e[i]=o||l,r=n.exec(t)}return e}function dU(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function hU(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=fU,serializeAttributes:o=dU,defaultAttributes:l={},selfClosing:u=!1,allowedAttributes:f}=t,h=n||e,p=y=>{if(!f)return y;const v={};return f.forEach(w=>{const S=typeof w=="string"?w:w.name,E=typeof w=="string"?void 0:w.skipIfDefault;if(S in y){const T=y[S];if(E!==void 0&&T===E)return;v[S]=T}}),v},m=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(y,v)=>{const w={...l,...y.attributes};if(u)return v.createNode(e,w);const S=r?r(y):y.content||"";return S?v.createNode(e,w,[v.createTextNode(S)]):v.createNode(e,w,[])},markdownTokenizer:{name:e,level:"inline",start(y){const v=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),w=y.match(v),S=w?.index;return S!==void 0?S:-1},tokenize(y,v,w){const S=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),E=y.match(S);if(!E)return;let T="",A="";if(u){const[,L]=E;A=L}else{const[,L,I]=E;A=L,T=I||""}const C=i(A.trim());return{type:e,raw:E[0],content:T.trim(),attributes:C}}},renderMarkdown:y=>{let v="";r?v=r(y):y.content&&y.content.length>0&&(v=y.content.filter(T=>T.type==="text").map(T=>T.text).join(""));const w=p(y.attrs||{}),S=o(w),E=S?` ${S}`:"";return u?`[${h}${E}]`:`[${h}${E}]${v}[/${h}]`}}}function sy(t,e,n){var r,i,o,l;const u=t.split(`
`),f=[];let h="",p=0;const m=e.baseIndentSize||2;for(;p<u.length;){const y=u[p],v=y.match(e.itemPattern);if(!v){if(f.length>0)break;if(y.trim()===""){p+=1,h=`${h}${y}
`;continue}else return}const w=e.extractItemData(v),{indentLevel:S,mainContent:E}=w;h=`${h}${y}
`;const T=[E];for(p+=1;p<u.length;){const I=u[p];if(I.trim()===""){const z=u.slice(p+1).findIndex(ne=>ne.trim()!=="");if(z===-1)break;if((((i=(r=u[p+1+z].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>S){T.push(I),h=`${h}${I}
`,p+=1;continue}else break}if((((l=(o=I.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:l.length)||0)>S)T.push(I),h=`${h}${I}
`,p+=1;else break}let A;const C=T.slice(1);if(C.length>0){const I=C.map(H=>H.slice(S+m)).join(`
`);I.trim()&&(e.customNestedParser?A=e.customNestedParser(I):A=n.blockTokens(I))}const L=e.createToken(w,A);f.push(L)}if(f.length!==0)return{items:f,raw:h}}function l0(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[o,...l]=t.content,u=e.renderChildren([o]),f=[`${i}${u}`];return l&&l.length>0&&l.forEach(h=>{const p=e.renderChildren([h]);if(p){const m=p.split(`
`).map(y=>y?e.indent(y):"").join(`
`);f.push(m)}}),f.join(`
`)}function pU(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,l=t;i.descendants((u,f)=>{const h=o.mapping.map(f),p=o.mapping.map(f)+u.nodeSize;let m=null;if(u.marks.forEach(v=>{if(v!==l)return!1;m=v}),!m)return;let y=!1;if(Object.keys(n).forEach(v=>{n[v]!==m.attrs[v]&&(y=!0)}),y){const v=t.type.create({...t.attrs,...n});o.removeMark(h,p,t.type),o.addMark(h,p,v)}}),o.docChanged&&e.view.dispatch(o)}var zn=class Z_ extends s0{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new Z_(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function yo(t){return new YI({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ge(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],f=r[0];let h=n.to;if(u){const p=f.search(/\S/),m=n.from+f.indexOf(u),y=m+u.length;if(i0(n.from,n.to,e.doc).filter(w=>w.mark.type.excluded.find(E=>E===t.type&&E!==w.mark.type)).filter(w=>w.to>m).length)return null;y<n.to&&l.delete(y,n.to),m>n.from&&l.delete(n.from+p,m),h=n.from+p+u.length,l.addMark(n.from+p,h,t.type.create(o||{})),l.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:mU,getOwnPropertySymbols:gU}=Object,{hasOwnProperty:yU}=Object.prototype;function fg(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function Of(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,l=o.get(n),u=o.get(r);if(l&&u)return l===r&&u===n;o.set(n,r),o.set(r,n);const f=t(n,r,i);return o.delete(n),o.delete(r),f}}function bU(t){return t?.[Symbol.toStringTag]}function yE(t){return mU(t).concat(gU(t))}const vU=Object.hasOwn||((t,e)=>yU.call(t,e));function So(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const wU="__v",SU="__o",xU="_owner",{getOwnPropertyDescriptor:bE,keys:vE}=Object;function EU(t,e){return t.byteLength===e.byteLength&&ud(new Uint8Array(t),new Uint8Array(e))}function TU(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function _U(t,e){return t.byteLength===e.byteLength&&ud(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function kU(t,e){return So(t.getTime(),e.getTime())}function AU(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function CU(t,e){return t===e}function wE(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let l,u,f=0;for(;(l=o.next())&&!l.done;){const h=e.entries();let p=!1,m=0;for(;(u=h.next())&&!u.done;){if(i[m]){m++;continue}const y=l.value,v=u.value;if(n.equals(y[0],v[0],f,m,t,e,n)&&n.equals(y[1],v[1],y[0],v[0],t,e,n)){p=i[m]=!0;break}m++}if(!p)return!1;f++}return!0}const OU=So;function RU(t,e,n){const r=vE(t);let i=r.length;if(vE(e).length!==i)return!1;for(;i-- >0;)if(!ek(t,e,n,r[i]))return!1;return!0}function Yl(t,e,n){const r=yE(t);let i=r.length;if(yE(e).length!==i)return!1;let o,l,u;for(;i-- >0;)if(o=r[i],!ek(t,e,n,o)||(l=bE(t,o),u=bE(e,o),(l||u)&&(!l||!u||l.configurable!==u.configurable||l.enumerable!==u.enumerable||l.writable!==u.writable)))return!1;return!0}function NU(t,e){return So(t.valueOf(),e.valueOf())}function MU(t,e){return t.source===e.source&&t.flags===e.flags}function SE(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let l,u;for(;(l=o.next())&&!l.done;){const f=e.values();let h=!1,p=0;for(;(u=f.next())&&!u.done;){if(!i[p]&&n.equals(l.value,u.value,l.value,u.value,t,e,n)){h=i[p]=!0;break}p++}if(!h)return!1}return!0}function ud(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function DU(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function ek(t,e,n,r){return(r===xU||r===SU||r===wU)&&(t.$$typeof||e.$$typeof)?!0:vU(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const LU="[object ArrayBuffer]",jU="[object Arguments]",zU="[object Boolean]",IU="[object DataView]",UU="[object Date]",BU="[object Error]",PU="[object Map]",HU="[object Number]",$U="[object Object]",qU="[object RegExp]",VU="[object Set]",FU="[object String]",GU={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},KU="[object URL]",WU=Object.prototype.toString;function JU({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:l,areNumbersEqual:u,areObjectsEqual:f,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:v,unknownTagComparators:w}){return function(E,T,A){if(E===T)return!0;if(E==null||T==null)return!1;const C=typeof E;if(C!==typeof T)return!1;if(C!=="object")return C==="number"?u(E,T,A):C==="function"?o(E,T,A):!1;const L=E.constructor;if(L!==T.constructor)return!1;if(L===Object)return f(E,T,A);if(Array.isArray(E))return e(E,T,A);if(L===Date)return r(E,T,A);if(L===RegExp)return p(E,T,A);if(L===Map)return l(E,T,A);if(L===Set)return m(E,T,A);const I=WU.call(E);if(I===UU)return r(E,T,A);if(I===qU)return p(E,T,A);if(I===PU)return l(E,T,A);if(I===VU)return m(E,T,A);if(I===$U)return typeof E.then!="function"&&typeof T.then!="function"&&f(E,T,A);if(I===KU)return v(E,T,A);if(I===BU)return i(E,T,A);if(I===jU)return f(E,T,A);if(GU[I])return y(E,T,A);if(I===LU)return t(E,T,A);if(I===IU)return n(E,T,A);if(I===zU||I===HU||I===FU)return h(E,T,A);if(w){let H=w[I];if(!H){const z=bU(E);z&&(H=w[z])}if(H)return H(E,T,A)}return!1}}function YU({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:EU,areArraysEqual:n?Yl:TU,areDataViewsEqual:_U,areDatesEqual:kU,areErrorsEqual:AU,areFunctionsEqual:CU,areMapsEqual:n?fg(wE,Yl):wE,areNumbersEqual:OU,areObjectsEqual:n?Yl:RU,arePrimitiveWrappersEqual:NU,areRegExpsEqual:MU,areSetsEqual:n?fg(SE,Yl):SE,areTypedArraysEqual:n?fg(ud,Yl):ud,areUrlsEqual:DU,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Of(r.areArraysEqual),o=Of(r.areMapsEqual),l=Of(r.areObjectsEqual),u=Of(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:u})}return r}function XU(t){return function(e,n,r,i,o,l,u){return t(e,n,u)}}function QU({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(u,f){const{cache:h=t?new WeakMap:void 0,meta:p}=n();return e(u,f,{cache:h,equals:r,meta:p,strict:i})};if(t)return function(u,f){return e(u,f,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(u,f){return e(u,f,o)}}const ZU=Os();Os({strict:!0});Os({circular:!0});Os({circular:!0,strict:!0});Os({createInternalComparator:()=>So});Os({strict:!0,createInternalComparator:()=>So});Os({circular:!0,createInternalComparator:()=>So});Os({circular:!0,createInternalComparator:()=>So,strict:!0});function Os(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=YU(t),l=JU(o),u=n?n(l):XU(l);return QU({circular:e,comparator:l,createState:r,equals:u,strict:i})}var dg={exports:{}},hg={};var xE;function e3(){if(xE)return hg;xE=1;var t=zc(),e=F1();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,u=t.useMemo,f=t.useDebugValue;return hg.useSyncExternalStoreWithSelector=function(h,p,m,y,v){var w=o(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=u(function(){function T(H){if(!A){if(A=!0,C=H,H=y(H),v!==void 0&&S.hasValue){var z=S.value;if(v(z,H))return L=z}return L=H}if(z=L,r(C,H))return z;var W=y(H);return v!==void 0&&v(z,W)?(C=H,z):(C=H,L=W)}var A=!1,C,L,I=m===void 0?null:m;return[function(){return T(p())},I===null?void 0:function(){return T(I())}]},[p,m,y,v]);var E=i(h,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=E},[E]),f(E),E},hg}var EE;function t3(){return EE||(EE=1,dg.exports=e3()),dg.exports}var n3=t3();const tk=["top","right","bottom","left"],TE=["start","end"],_E=tk.reduce((t,e)=>t.concat(e,e+"-"+TE[0],e+"-"+TE[1]),[]),Ur=Math.min,sn=Math.max,fd=Math.round,Dr=t=>({x:t,y:t}),r3={left:"right",right:"left",bottom:"top",top:"bottom"},i3={start:"end",end:"start"};function oy(t,e,n){return sn(t,Ur(e,n))}function Ri(t,e){return typeof t=="function"?t(e):t}function ir(t){return t.split("-")[0]}function yr(t){return t.split("-")[1]}function nk(t){return t==="x"?"y":"x"}function c0(t){return t==="y"?"height":"width"}const s3=new Set(["top","bottom"]);function Mr(t){return s3.has(ir(t))?"y":"x"}function u0(t){return nk(Mr(t))}function rk(t,e,n){n===void 0&&(n=!1);const r=yr(t),i=u0(t),o=c0(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=hd(l)),[l,hd(l)]}function o3(t){const e=hd(t);return[dd(t),e,dd(e)]}function dd(t){return t.replace(/start|end/g,e=>i3[e])}const kE=["left","right"],AE=["right","left"],a3=["top","bottom"],l3=["bottom","top"];function c3(t,e,n){switch(t){case"top":case"bottom":return n?e?AE:kE:e?kE:AE;case"left":case"right":return e?a3:l3;default:return[]}}function u3(t,e,n,r){const i=yr(t);let o=c3(ir(t),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),e&&(o=o.concat(o.map(dd)))),o}function hd(t){return t.replace(/left|right|bottom|top/g,e=>r3[e])}function f3(t){return{top:0,right:0,bottom:0,left:0,...t}}function f0(t){return typeof t!="number"?f3(t):{top:t,right:t,bottom:t,left:t}}function Da(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function CE(t,e,n){let{reference:r,floating:i}=t;const o=Mr(e),l=u0(e),u=c0(l),f=ir(e),h=o==="y",p=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,y=r[u]/2-i[u]/2;let v;switch(f){case"top":v={x:p,y:r.y-i.height};break;case"bottom":v={x:p,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-i.width,y:m};break;default:v={x:r.x,y:r.y}}switch(yr(e)){case"start":v[l]-=y*(n&&h?-1:1);break;case"end":v[l]+=y*(n&&h?-1:1);break}return v}async function d3(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:f}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:y=!1,padding:v=0}=Ri(e,t),w=f0(v),E=u[y?m==="floating"?"reference":"floating":m],T=Da(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(E)))==null||n?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:f})),A=m==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),L=await(o.isElement==null?void 0:o.isElement(C))?await(o.getScale==null?void 0:o.getScale(C))||{x:1,y:1}:{x:1,y:1},I=Da(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:A,offsetParent:C,strategy:f}):A);return{top:(T.top-I.top+w.top)/L.y,bottom:(I.bottom-T.bottom+w.bottom)/L.y,left:(T.left-I.left+w.left)/L.x,right:(I.right-T.right+w.right)/L.x}}const h3=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:m}=CE(h,r,f),y=r,v={},w=0;for(let E=0;E<u.length;E++){var S;const{name:T,fn:A}=u[E],{x:C,y:L,data:I,reset:H}=await A({x:p,y:m,initialPlacement:r,placement:y,strategy:i,middlewareData:v,rects:h,platform:{...l,detectOverflow:(S=l.detectOverflow)!=null?S:d3},elements:{reference:t,floating:e}});p=C??p,m=L??m,v={...v,[T]:{...v[T],...I}},H&&w<=50&&(w++,typeof H=="object"&&(H.placement&&(y=H.placement),H.rects&&(h=H.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):H.rects),{x:p,y:m}=CE(h,y,f)),E=-1)}return{x:p,y:m,placement:y,strategy:i,middlewareData:v}},p3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:l,elements:u,middlewareData:f}=e,{element:h,padding:p=0}=Ri(t,e)||{};if(h==null)return{};const m=f0(p),y={x:n,y:r},v=u0(i),w=c0(v),S=await l.getDimensions(h),E=v==="y",T=E?"top":"left",A=E?"bottom":"right",C=E?"clientHeight":"clientWidth",L=o.reference[w]+o.reference[v]-y[v]-o.floating[w],I=y[v]-o.reference[v],H=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let z=H?H[C]:0;(!z||!await(l.isElement==null?void 0:l.isElement(H)))&&(z=u.floating[C]||o.floating[w]);const W=L/2-I/2,ee=z/2-S[w]/2-1,ne=Ur(m[T],ee),fe=Ur(m[A],ee),ge=ne,Me=z-S[w]-fe,Se=z/2-S[w]/2+W,xe=oy(ge,Se,Me),$=!f.arrow&&yr(i)!=null&&Se!==xe&&o.reference[w]/2-(Se<ge?ne:fe)-S[w]/2<0,X=$?Se<ge?Se-ge:Se-Me:0;return{[v]:y[v]+X,data:{[v]:xe,centerOffset:Se-xe-X,...$&&{alignmentOffset:X}},reset:$}}});function m3(t,e,n){return(t?[...n.filter(i=>yr(i)===t),...n.filter(i=>yr(i)!==t)]:n.filter(i=>ir(i)===i)).filter(i=>t?yr(i)===t||(e?dd(i)!==i:!1):!0)}const g3=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:o,middlewareData:l,placement:u,platform:f,elements:h}=e,{crossAxis:p=!1,alignment:m,allowedPlacements:y=_E,autoAlignment:v=!0,...w}=Ri(t,e),S=m!==void 0||y===_E?m3(m||null,v,y):y,E=await f.detectOverflow(e,w),T=((n=l.autoPlacement)==null?void 0:n.index)||0,A=S[T];if(A==null)return{};const C=rk(A,o,await(f.isRTL==null?void 0:f.isRTL(h.floating)));if(u!==A)return{reset:{placement:S[0]}};const L=[E[ir(A)],E[C[0]],E[C[1]]],I=[...((r=l.autoPlacement)==null?void 0:r.overflows)||[],{placement:A,overflows:L}],H=S[T+1];if(H)return{data:{index:T+1,overflows:I},reset:{placement:H}};const z=I.map(ne=>{const fe=yr(ne.placement);return[ne.placement,fe&&p?ne.overflows.slice(0,2).reduce((ge,Me)=>ge+Me,0):ne.overflows[0],ne.overflows]}).sort((ne,fe)=>ne[1]-fe[1]),ee=((i=z.filter(ne=>ne[2].slice(0,yr(ne[0])?2:3).every(fe=>fe<=0))[0])==null?void 0:i[0])||z[0][0];return ee!==u?{data:{index:T+1,overflows:I},reset:{placement:ee}}:{}}}},y3=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:f,elements:h}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,...E}=Ri(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const T=ir(i),A=Mr(u),C=ir(u)===u,L=await(f.isRTL==null?void 0:f.isRTL(h.floating)),I=y||(C||!S?[hd(u)]:o3(u)),H=w!=="none";!y&&H&&I.push(...u3(u,S,w,L));const z=[u,...I],W=await f.detectOverflow(e,E),ee=[];let ne=((r=o.flip)==null?void 0:r.overflows)||[];if(p&&ee.push(W[T]),m){const Se=rk(i,l,L);ee.push(W[Se[0]],W[Se[1]])}if(ne=[...ne,{placement:i,overflows:ee}],!ee.every(Se=>Se<=0)){var fe,ge;const Se=(((fe=o.flip)==null?void 0:fe.index)||0)+1,xe=z[Se];if(xe&&(!(m==="alignment"?A!==Mr(xe):!1)||ne.every(ie=>Mr(ie.placement)===A?ie.overflows[0]>0:!0)))return{data:{index:Se,overflows:ne},reset:{placement:xe}};let $=(ge=ne.filter(X=>X.overflows[0]<=0).sort((X,ie)=>X.overflows[1]-ie.overflows[1])[0])==null?void 0:ge.placement;if(!$)switch(v){case"bestFit":{var Me;const X=(Me=ne.filter(ie=>{if(H){const Oe=Mr(ie.placement);return Oe===A||Oe==="y"}return!0}).map(ie=>[ie.placement,ie.overflows.filter(Oe=>Oe>0).reduce((Oe,Be)=>Oe+Be,0)]).sort((ie,Oe)=>ie[1]-Oe[1])[0])==null?void 0:Me[0];X&&($=X);break}case"initialPlacement":$=u;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function OE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function RE(t){return tk.some(e=>t[e]>=0)}const b3=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:r}=e,{strategy:i="referenceHidden",...o}=Ri(t,e);switch(i){case"referenceHidden":{const l=await r.detectOverflow(e,{...o,elementContext:"reference"}),u=OE(l,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:RE(u)}}}case"escaped":{const l=await r.detectOverflow(e,{...o,altBoundary:!0}),u=OE(l,n.floating);return{data:{escapedOffsets:u,escaped:RE(u)}}}default:return{}}}}};function ik(t){const e=Ur(...t.map(o=>o.left)),n=Ur(...t.map(o=>o.top)),r=sn(...t.map(o=>o.right)),i=sn(...t.map(o=>o.bottom));return{x:e,y:n,width:r-e,height:i-n}}function v3(t){const e=t.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<e.length;i++){const o=e[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>Da(ik(i)))}const w3=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:o,strategy:l}=e,{padding:u=2,x:f,y:h}=Ri(t,e),p=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),m=v3(p),y=Da(ik(p)),v=f0(u);function w(){if(m.length===2&&m[0].left>m[1].right&&f!=null&&h!=null)return m.find(E=>f>E.left-v.left&&f<E.right+v.right&&h>E.top-v.top&&h<E.bottom+v.bottom)||y;if(m.length>=2){if(Mr(n)==="y"){const ne=m[0],fe=m[m.length-1],ge=ir(n)==="top",Me=ne.top,Se=fe.bottom,xe=ge?ne.left:fe.left,$=ge?ne.right:fe.right,X=$-xe,ie=Se-Me;return{top:Me,bottom:Se,left:xe,right:$,width:X,height:ie,x:xe,y:Me}}const E=ir(n)==="left",T=sn(...m.map(ne=>ne.right)),A=Ur(...m.map(ne=>ne.left)),C=m.filter(ne=>E?ne.left===A:ne.right===T),L=C[0].top,I=C[C.length-1].bottom,H=A,z=T,W=z-H,ee=I-L;return{top:L,bottom:I,left:H,right:z,width:W,height:ee,x:H,y:L}}return y}const S=await o.getElementRects({reference:{getBoundingClientRect:w},floating:r.floating,strategy:l});return i.reference.x!==S.reference.x||i.reference.y!==S.reference.y||i.reference.width!==S.reference.width||i.reference.height!==S.reference.height?{reset:{rects:S}}:{}}}},S3=new Set(["left","top"]);async function x3(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=ir(n),u=yr(n),f=Mr(n)==="y",h=S3.has(l)?-1:1,p=o&&f?-1:1,m=Ri(e,t);let{mainAxis:y,crossAxis:v,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof w=="number"&&(v=u==="end"?w*-1:w),f?{x:v*p,y:y*h}:{x:y*h,y:v*p}}const E3=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:l,middlewareData:u}=e,f=await x3(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:o+f.y,data:{...f,placement:l}}}}},T3=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i,platform:o}=e,{mainAxis:l=!0,crossAxis:u=!1,limiter:f={fn:T=>{let{x:A,y:C}=T;return{x:A,y:C}}},...h}=Ri(t,e),p={x:n,y:r},m=await o.detectOverflow(e,h),y=Mr(ir(i)),v=nk(y);let w=p[v],S=p[y];if(l){const T=v==="y"?"top":"left",A=v==="y"?"bottom":"right",C=w+m[T],L=w-m[A];w=oy(C,w,L)}if(u){const T=y==="y"?"top":"left",A=y==="y"?"bottom":"right",C=S+m[T],L=S-m[A];S=oy(C,S,L)}const E=f.fn({...e,[v]:w,[y]:S});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[v]:l,[y]:u}}}}}},_3=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:l,elements:u}=e,{apply:f=()=>{},...h}=Ri(t,e),p=await l.detectOverflow(e,h),m=ir(i),y=yr(i),v=Mr(i)==="y",{width:w,height:S}=o.floating;let E,T;m==="top"||m==="bottom"?(E=m,T=y===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(T=m,E=y==="end"?"top":"bottom");const A=S-p.top-p.bottom,C=w-p.left-p.right,L=Ur(S-p[E],A),I=Ur(w-p[T],C),H=!e.middlewareData.shift;let z=L,W=I;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(W=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(z=A),H&&!y){const ne=sn(p.left,0),fe=sn(p.right,0),ge=sn(p.top,0),Me=sn(p.bottom,0);v?W=w-2*(ne!==0||fe!==0?ne+fe:sn(p.left,p.right)):z=S-2*(ge!==0||Me!==0?ge+Me:sn(p.top,p.bottom))}await f({...e,availableWidth:W,availableHeight:z});const ee=await l.getDimensions(u.floating);return w!==ee.width||S!==ee.height?{reset:{rects:!0}}:{}}}};function ch(){return typeof window<"u"}function Ba(t){return sk(t)?(t.nodeName||"").toLowerCase():"#document"}function Ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ni(t){var e;return(e=(sk(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function sk(t){return ch()?t instanceof Node||t instanceof Ln(t).Node:!1}function vr(t){return ch()?t instanceof Element||t instanceof Ln(t).Element:!1}function Br(t){return ch()?t instanceof HTMLElement||t instanceof Ln(t).HTMLElement:!1}function NE(t){return!ch()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ln(t).ShadowRoot}const k3=new Set(["inline","contents"]);function Vc(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=wr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!k3.has(i)}const A3=new Set(["table","td","th"]);function C3(t){return A3.has(Ba(t))}const O3=[":popover-open",":modal"];function uh(t){return O3.some(e=>{try{return t.matches(e)}catch{return!1}})}const R3=["transform","translate","scale","rotate","perspective"],N3=["transform","translate","scale","rotate","perspective","filter"],M3=["paint","layout","strict","content"];function d0(t){const e=h0(),n=vr(t)?wr(t):t;return R3.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||N3.some(r=>(n.willChange||"").includes(r))||M3.some(r=>(n.contain||"").includes(r))}function D3(t){let e=_s(t);for(;Br(e)&&!La(e);){if(d0(e))return e;if(uh(e))return null;e=_s(e)}return null}function h0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const L3=new Set(["html","body","#document"]);function La(t){return L3.has(Ba(t))}function wr(t){return Ln(t).getComputedStyle(t)}function fh(t){return vr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _s(t){if(Ba(t)==="html")return t;const e=t.assignedSlot||t.parentNode||NE(t)&&t.host||Ni(t);return NE(e)?e.host:e}function ok(t){const e=_s(t);return La(e)?t.ownerDocument?t.ownerDocument.body:t.body:Br(e)&&Vc(e)?e:ok(e)}function ak(t,e,n){var r;e===void 0&&(e=[]);const i=ok(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),l=Ln(i);return o?(ay(l),e.concat(l,l.visualViewport||[],Vc(i)?i:[],[])):e.concat(i,ak(i,[]))}function ay(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function lk(t){const e=wr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Br(t),o=i?t.offsetWidth:n,l=i?t.offsetHeight:r,u=fd(n)!==o||fd(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function ck(t){return vr(t)?t:t.contextElement}function _a(t){const e=ck(t);if(!Br(e))return Dr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=lk(e);let l=(o?fd(n.width):n.width)/r,u=(o?fd(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const j3=Dr(0);function uk(t){const e=Ln(t);return!h0()||!e.visualViewport?j3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function z3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ln(t)?!1:e}function Dc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=ck(t);let l=Dr(1);e&&(r?vr(r)&&(l=_a(r)):l=_a(t));const u=z3(o,n,r)?uk(o):Dr(0);let f=(i.left+u.x)/l.x,h=(i.top+u.y)/l.y,p=i.width/l.x,m=i.height/l.y;if(o){const y=Ln(o),v=r&&vr(r)?Ln(r):r;let w=y,S=ay(w);for(;S&&r&&v!==w;){const E=_a(S),T=S.getBoundingClientRect(),A=wr(S),C=T.left+(S.clientLeft+parseFloat(A.paddingLeft))*E.x,L=T.top+(S.clientTop+parseFloat(A.paddingTop))*E.y;f*=E.x,h*=E.y,p*=E.x,m*=E.y,f+=C,h+=L,w=Ln(S),S=ay(w)}}return Da({width:p,height:m,x:f,y:h})}function dh(t,e){const n=fh(t).scrollLeft;return e?e.left+n:Dc(Ni(t)).left+n}function fk(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-dh(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function I3(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",l=Ni(r),u=e?uh(e.floating):!1;if(r===l||u&&o)return n;let f={scrollLeft:0,scrollTop:0},h=Dr(1);const p=Dr(0),m=Br(r);if((m||!m&&!o)&&((Ba(r)!=="body"||Vc(l))&&(f=fh(r)),Br(r))){const v=Dc(r);h=_a(r),p.x=v.x+r.clientLeft,p.y=v.y+r.clientTop}const y=l&&!m&&!o?fk(l,f):Dr(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-f.scrollLeft*h.x+p.x+y.x,y:n.y*h.y-f.scrollTop*h.y+p.y+y.y}}function U3(t){return Array.from(t.getClientRects())}function B3(t){const e=Ni(t),n=fh(t),r=t.ownerDocument.body,i=sn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=sn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+dh(t);const u=-n.scrollTop;return wr(r).direction==="rtl"&&(l+=sn(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}const ME=25;function P3(t,e){const n=Ln(t),r=Ni(t),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,f=0;if(i){o=i.width,l=i.height;const p=h0();(!p||p&&e==="fixed")&&(u=i.offsetLeft,f=i.offsetTop)}const h=dh(r);if(h<=0){const p=r.ownerDocument,m=p.body,y=getComputedStyle(m),v=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,w=Math.abs(r.clientWidth-m.clientWidth-v);w<=ME&&(o-=w)}else h<=ME&&(o+=h);return{width:o,height:l,x:u,y:f}}const H3=new Set(["absolute","fixed"]);function $3(t,e){const n=Dc(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Br(t)?_a(t):Dr(1),l=t.clientWidth*o.x,u=t.clientHeight*o.y,f=i*o.x,h=r*o.y;return{width:l,height:u,x:f,y:h}}function DE(t,e,n){let r;if(e==="viewport")r=P3(t,n);else if(e==="document")r=B3(Ni(t));else if(vr(e))r=$3(e,n);else{const i=uk(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Da(r)}function dk(t,e){const n=_s(t);return n===e||!vr(n)||La(n)?!1:wr(n).position==="fixed"||dk(n,e)}function q3(t,e){const n=e.get(t);if(n)return n;let r=ak(t,[]).filter(u=>vr(u)&&Ba(u)!=="body"),i=null;const o=wr(t).position==="fixed";let l=o?_s(t):t;for(;vr(l)&&!La(l);){const u=wr(l),f=d0(l);!f&&u.position==="fixed"&&(i=null),(o?!f&&!i:!f&&u.position==="static"&&!!i&&H3.has(i.position)||Vc(l)&&!f&&dk(t,l))?r=r.filter(p=>p!==l):i=u,l=_s(l)}return e.set(t,r),r}function V3(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const l=[...n==="clippingAncestors"?uh(e)?[]:q3(e,this._c):[].concat(n),r],u=l[0],f=l.reduce((h,p)=>{const m=DE(e,p,i);return h.top=sn(m.top,h.top),h.right=Ur(m.right,h.right),h.bottom=Ur(m.bottom,h.bottom),h.left=sn(m.left,h.left),h},DE(e,u,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function F3(t){const{width:e,height:n}=lk(t);return{width:e,height:n}}function G3(t,e,n){const r=Br(e),i=Ni(e),o=n==="fixed",l=Dc(t,!0,o,e);let u={scrollLeft:0,scrollTop:0};const f=Dr(0);function h(){f.x=dh(i)}if(r||!r&&!o)if((Ba(e)!=="body"||Vc(i))&&(u=fh(e)),r){const v=Dc(e,!0,o,e);f.x=v.x+e.clientLeft,f.y=v.y+e.clientTop}else i&&h();o&&!r&&i&&h();const p=i&&!r&&!o?fk(i,u):Dr(0),m=l.left+u.scrollLeft-f.x-p.x,y=l.top+u.scrollTop-f.y-p.y;return{x:m,y,width:l.width,height:l.height}}function pg(t){return wr(t).position==="static"}function LE(t,e){if(!Br(t)||wr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ni(t)===n&&(n=n.ownerDocument.body),n}function hk(t,e){const n=Ln(t);if(uh(t))return n;if(!Br(t)){let i=_s(t);for(;i&&!La(i);){if(vr(i)&&!pg(i))return i;i=_s(i)}return n}let r=LE(t,e);for(;r&&C3(r)&&pg(r);)r=LE(r,e);return r&&La(r)&&pg(r)&&!d0(r)?n:r||D3(t)||n}const K3=async function(t){const e=this.getOffsetParent||hk,n=this.getDimensions,r=await n(t.floating);return{reference:G3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function W3(t){return wr(t).direction==="rtl"}const J3={convertOffsetParentRelativeRectToViewportRelativeRect:I3,getDocumentElement:Ni,getClippingRect:V3,getOffsetParent:hk,getElementRects:K3,getClientRects:U3,getDimensions:F3,getScale:_a,isElement:vr,isRTL:W3},pk=E3,mk=g3,gk=T3,yk=y3,bk=_3,vk=b3,wk=p3,Sk=w3,xk=(t,e,n)=>{const r=new Map,i={platform:J3,...n},o={...i.platform,_c:r};return h3(t,e,{...i,platform:o})};let ly,cy;if(typeof WeakMap<"u"){let t=new WeakMap;ly=e=>t.get(e),cy=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;ly=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},cy=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var wi=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,l=i+1;for(let u=1;o<this.width&&this.map[e+u]==n;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==n;u++)l++;return{left:r,top:i,right:o,bottom:l}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:o,bottom:l}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:l==this.height)?null:this.map[r+this.width*(n<0?o-1:l)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:o}=this.findCell(t),{left:l,right:u,top:f,bottom:h}=this.findCell(e);return{left:Math.min(n,l),top:Math.min(i,f),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,l=this.map[o];n[l]||(n[l]=!0,!(i==t.left&&i&&this.map[o-1]==l||r==t.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==t){let l=e+t*this.width;const u=(t+1)*this.width;for(;l<u&&this.map[l]<i;)l++;return l==u?o-1:this.map[l]}i=o}}static get(t){return ly(t)||cy(t,Y3(t))}};function Y3(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=X3(t),n=t.childCount,r=[];let i=0,o=null;const l=[];for(let h=0,p=e*n;h<p;h++)r[h]=0;for(let h=0,p=0;h<n;h++){const m=t.child(h);p++;for(let w=0;;w++){for(;i<r.length&&r[i]!=0;)i++;if(w==m.childCount)break;const S=m.child(w),{colspan:E,rowspan:T,colwidth:A}=S.attrs;for(let C=0;C<T;C++){if(C+h>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:T-C});break}const L=i+C*e;for(let I=0;I<E;I++){r[L+I]==0?r[L+I]=p:(o||(o=[])).push({type:"collision",row:h,pos:p,n:E-I});const H=A&&A[I];if(H){const z=(L+I)%e*2,W=l[z];W==null||W!=H&&l[z+1]==1?(l[z]=H,l[z+1]=1):W==H&&l[z+1]++}}}i+=E,p+=S.nodeSize}const y=(h+1)*e;let v=0;for(;i<y;)r[i++]==0&&v++;v&&(o||(o=[])).push({type:"missing",row:h,n:v}),p++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new wi(e,n,r,o);let f=!1;for(let h=0;!f&&h<l.length;h+=2)l[h]!=null&&l[h+1]<n&&(f=!0);return f&&Q3(u,l,t),u}function X3(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(n)for(let l=0;l<r;l++){const u=t.child(l);for(let f=0;f<u.childCount;f++){const h=u.child(f);l+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let l=0;l<i.childCount;l++){const u=i.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function Q3(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const l=n.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const f=l.attrs;for(let h=0;h<f.colspan;h++){const p=e[(i+h)%t.width*2];p!=null&&(!f.colwidth||f.colwidth[h]!=p)&&((u||(u=Z3(f)))[h]=p)}u&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function Z3(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function p0(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}new at("selectingCells");function eB(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Ek(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function tB(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=eB(e.$head)||nB(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function nB(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function jE(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Tk(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function _k(t,e,n){const r=t.node(-1),i=wi.get(r),o=t.start(-1),l=i.nextCell(t.pos-o,e,n);return l==null?null:t.node(0).resolve(o+l)}function zE(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var Lr=class gi extends ve{constructor(e,n=e){const r=e.node(-1),i=wi.get(r),o=e.start(-1),l=i.rectBetween(e.pos-o,n.pos-o),u=e.node(0),f=i.cellsInRect(l).filter(p=>p!=n.pos-o);f.unshift(n.pos-o);const h=f.map(p=>{const m=r.nodeAt(p);if(!m)throw new RangeError(`No cell with offset ${p} found`);const y=o+p+1;return new _T(u.resolve(y),u.resolve(y+m.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if(jE(r)&&jE(i)&&Tk(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?gi.rowSelection(r,i):o&&this.isColSelection()?gi.colSelection(r,i):new gi(r,i)}return we.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=wi.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let f=i.top;f<i.bottom;f++){const h=[];for(let p=f*n.width+i.left,m=i.left;m<i.right;m++,p++){const y=n.map[p];if(o[y])continue;o[y]=!0;const v=n.findCell(y);let w=e.nodeAt(y);if(!w)throw new RangeError(`No cell with offset ${y} found`);const S=i.left-v.left,E=v.right-i.right;if(S>0||E>0){let T=w.attrs;if(S>0&&(T=zE(T,0,S)),E>0&&(T=zE(T,T.colspan-E,E)),v.left<i.left){if(w=w.type.createAndFill(T),!w)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(T)}`)}else w=w.type.create(T,w.content)}if(v.top<i.top||v.bottom>i.bottom){const T={...w.attrs,rowspan:Math.min(v.bottom,i.bottom)-Math.max(v.top,i.top)};v.top<i.top?w=w.type.createAndFill(T):w=w.type.create(T,w.content)}h.push(w)}l.push(e.child(f).copy(J.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new te(J.from(u),1,1)}replace(e,n=te.empty){const r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){const{$from:u,$to:f}=i[l],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(f.pos),l?te.empty:n)}const o=ve.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new te(J.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=wi.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let l=0;l<o.length;l++)e(n.nodeAt(o[l]),i+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=wi.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(n.pos-o),f=e.node(0);return l.top<=u.top?(l.top>0&&(e=f.resolve(o+i.map[l.left])),u.bottom<i.height&&(n=f.resolve(o+i.map[i.width*(i.height-1)+u.right-1]))):(u.top>0&&(n=f.resolve(o+i.map[u.left])),l.bottom<i.height&&(e=f.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))),new gi(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=wi.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const l=i+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==n.width}eq(e){return e instanceof gi&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=wi.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(n.pos-o),f=e.node(0);return l.left<=u.left?(l.left>0&&(e=f.resolve(o+i.map[l.top*i.width])),u.right<i.width&&(n=f.resolve(o+i.map[i.width*(u.top+1)-1]))):(u.left>0&&(n=f.resolve(o+i.map[u.top*i.width])),l.right<i.width&&(e=f.resolve(o+i.map[i.width*(l.top+1)-1]))),new gi(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new gi(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new gi(e.resolve(n),e.resolve(r))}getBookmark(){return new rB(this.$anchorCell.pos,this.$headCell.pos)}};Lr.prototype.visible=!1;ve.jsonID("cell",Lr);var rB=class kk{constructor(e,n){this.anchor=e,this.head=n}map(e){return new kk(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&Tk(n,r)?new Lr(n,r):ve.near(r,1)}};new at("fix-tables");function Ak(t){const e=t.selection,n=tB(t),r=n.node(-1),i=n.start(-1),o=wi.get(r);return{...e instanceof Lr?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function iB(t){return function(e,n){if(!Ek(e))return!1;if(n){const r=p0(e.schema),i=Ak(e),o=e.tr,l=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),u=l.map(f=>i.table.nodeAt(f));for(let f=0;f<l.length;f++)u[f].type==r.header_cell&&o.setNodeMarkup(i.tableStart+l[f],r.cell,u[f].attrs);if(o.steps.length===0)for(let f=0;f<l.length;f++)o.setNodeMarkup(i.tableStart+l[f],r.header_cell,u[f].attrs);n(o)}return!0}}function IE(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function m0(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?iB(t):function(n,r){if(!Ek(n))return!1;if(r){const i=p0(n.schema),o=Ak(n),l=n.tr,u=IE("row",o,i),f=IE("column",o,i),h=(t==="column"?u:t==="row"&&f)?1:0,p=t=="column"?{left:0,top:h,right:1,bottom:o.map.height}:t=="row"?{left:h,top:0,right:o.map.width,bottom:1}:o,m=t=="column"?f?i.cell:i.header_cell:t=="row"?u?i.cell:i.header_cell:i.cell;o.map.cellsInRect(p).forEach(y=>{const v=y+o.tableStart,w=l.doc.nodeAt(v);w&&l.setNodeMarkup(v,m,w.attrs)}),r(l)}return!0}}m0("row",{useDeprecatedLogic:!0});m0("column",{useDeprecatedLogic:!0});m0("cell",{useDeprecatedLogic:!0});function Rf(t,e){const n=t.selection;if(!(n instanceof Lr))return!1;if(e){const r=t.tr,i=p0(t.schema).cell.createAndFill().content;n.forEachCell((o,l)=>{o.content.eq(i)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new te(i,0,0))}),r.docChanged&&e(r)}return!0}Yy({ArrowLeft:Nf("horiz",-1),ArrowRight:Nf("horiz",1),ArrowUp:Nf("vert",-1),ArrowDown:Nf("vert",1),"Shift-ArrowLeft":Mf("horiz",-1),"Shift-ArrowRight":Mf("horiz",1),"Shift-ArrowUp":Mf("vert",-1),"Shift-ArrowDown":Mf("vert",1),Backspace:Rf,"Mod-Backspace":Rf,Delete:Rf,"Mod-Delete":Rf});function qf(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Nf(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof Lr)return qf(n,r,ve.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const l=Ck(i,t,e);if(l==null)return!1;if(t=="horiz")return qf(n,r,ve.near(n.doc.resolve(o.head+e),e));{const u=n.doc.resolve(l),f=_k(u,t,e);let h;return f?h=ve.near(f,1):e<0?h=ve.near(n.doc.resolve(u.before(-1)),-1):h=ve.near(n.doc.resolve(u.after(-1)),1),qf(n,r,h)}}}function Mf(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let l;if(o instanceof Lr)l=o;else{const f=Ck(i,t,e);if(f==null)return!1;l=new Lr(n.doc.resolve(f))}const u=_k(l.$headCell,t,e);return u?qf(n,r,new Lr(l.$anchorCell,u)):!1}}function Ck(t,e,n){if(!(t.state.selection instanceof we))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const l=r.before(i),u=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(u)?l:null}}return null}new at("tableColumnResizing");function sB(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),i=Math.min(t.left,e.left),l=Math.max(t.right,e.right)-i,u=r-n,f=i,h=n;return new DOMRect(f,h,l,u)}var oB=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:o,appendTo:l,getReferencedVirtualElement:u,options:f}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:p,state:m,from:y,to:v})=>{const{doc:w,selection:S}=m,{empty:E}=S,T=!w.textBetween(y,v).length&&e0(m.selection),A=this.element.contains(document.activeElement);return!(!(p.hasFocus()||A)||E||T||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:p})=>{var m;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}p?.relatedTarget&&((m=this.element.parentNode)!=null&&m.contains(p.relatedTarget))||p?.relatedTarget!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(p,m)=>{const y=!m?.selection.eq(p.state.selection),v=!m?.doc.eq(p.state.doc);!y&&!v||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(p,y,v,m)},this.updateDelay))},this.updateHandler=(p,m,y,v)=>{const{composing:w}=p;if(w||!m&&!y)return;if(!this.getShouldShow(v)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:p})=>{const m=p.getMeta("bubbleMenu");m==="updatePosition"?this.updatePosition():m&&typeof m=="object"&&m.type==="updateOptions"&&this.updateOptions(m.options)};var h;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(h=f?.scrollTarget)!=null?h:window,this.getReferencedVirtualElement=u,this.floatingUIOptions={...this.floatingUIOptions,...f},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(yk(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(gk(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(pk(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(wk(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(bk(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(mk(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(vk(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(Sk(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t,e,n;const{selection:r}=this.editor.state,i=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(i)return i;if(!((n=(e=this.view)==null?void 0:e.dom)!=null&&n.parentNode))return;const o=U_(this.view,r.from,r.to);let l={getBoundingClientRect:()=>o,getClientRects:()=>[o]};if(r instanceof pe){let u=this.view.nodeDOM(r.from);const f=u.dataset.nodeViewWrapper?u:u.querySelector("[data-node-view-wrapper]");f&&(u=f),u&&(l={getBoundingClientRect:()=>u.getBoundingClientRect(),getClientRects:()=>[u.getBoundingClientRect()]})}if(r instanceof Lr){const{$anchorCell:u,$headCell:f}=r,h=u?u.pos:f.pos,p=f?f.pos:u.pos,m=this.view.nodeDOM(h),y=this.view.nodeDOM(p);if(!m||!y)return;const v=m===y?m.getBoundingClientRect():sB(m.getBoundingClientRect(),y.getBoundingClientRect());l={getBoundingClientRect:()=>v,getClientRects:()=>[v]}}return l}updatePosition(){const t=this.virtualElement;t&&xk(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r,middlewareData:i})=>{var o,l;if((o=i.hide)!=null&&o.referenceHidden||(l=i.hide)!=null&&l.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const i=!e?.selection.eq(t.state.selection),o=!e?.doc.eq(t.state.doc);this.updateHandler(t,i,o,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(f=>f.$from.pos)),l=Math.max(...i.map(f=>f.$to.pos));return((e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:o,to:l}))||!1}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.getReferencedVirtualElement!==void 0&&(this.getReferencedVirtualElement=t.getReferencedVirtualElement),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Ok=t=>new nt({key:typeof t.pluginKey=="string"?new at(t.pluginKey):t.pluginKey,view:e=>new oB({view:e,...t})});ut.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Ok({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var aB=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,options:o,appendTo:l,shouldShow:u}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.shouldShow=({view:h,state:p})=>{const{selection:m}=p,{$anchor:y,empty:v}=m,w=y.depth===1,S=y.parent.isTextblock&&!y.parent.type.spec.code&&!y.parent.textContent&&y.parent.childCount===0&&!this.getTextContent(y.parent);return!(!h.hasFocus()||!v||!w||!S||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(h,p,m,y)=>{const{composing:v}=h;if(v||!p&&!m)return;if(!this.getShouldShow(y)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:h})=>{var p;if(this.preventHide){this.preventHide=!1;return}h?.relatedTarget&&((p=this.element.parentNode)!=null&&p.contains(h.relatedTarget))||h?.relatedTarget!==this.editor.view.dom&&this.hide()},this.transactionHandler=({transaction:h})=>{const p=h.getMeta("floatingMenu");p==="updatePosition"?this.updatePosition():p&&typeof p=="object"&&p.type==="updateOptions"&&this.updateOptions(p.options)},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)};var f;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(f=o?.scrollTarget)!=null?f:window,this.floatingUIOptions={...this.floatingUIOptions,...o},this.element.tabIndex=0,u&&(this.shouldShow=u),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(t){return M_(t,{textSerializers:r0(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(yk(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(gk(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(pk(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(wk(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(bk(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(mk(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(vk(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(Sk(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(f=>f.$from.pos)),l=Math.max(...i.map(f=>f.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:o,to:l})}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}updatePosition(){const{selection:t}=this.editor.state,e=U_(this.view,t.from,t.to);xk({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:o,middlewareData:l})=>{var u,f;if((u=l.hide)!=null&&u.referenceHidden||(f=l.hide)!=null&&f.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=o,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!e?.selection.eq(t.state.selection),r=!e?.doc.eq(t.state.doc);this.updateHandler(t,n,r,e)}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Rk=t=>new nt({key:typeof t.pluginKey=="string"?new at(t.pluginKey):t.pluginKey,view:e=>new aB({view:e,...t})});ut.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",updateDelay:void 0,resizeDelay:void 0,appendTo:void 0,shouldShow:null}},addCommands(){return{updateFloatingMenuPosition:()=>({tr:t,dispatch:e})=>(e&&t.setMeta("floatingMenu","updatePosition"),!0)}},addProseMirrorPlugins(){return this.options.element?[Rk({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,resizeDelay:this.options.resizeDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var lB=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},cB=({contentComponent:t})=>{const e=G1.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return k.jsx(k.Fragment,{children:Object.values(e)})};function uB(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:oN.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var fB=class extends jr.Component{constructor(t){var e;super(t),this.editorContentRef=jr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=uB(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return k.jsxs(k.Fragment,{children:[k.jsx("div",{ref:lB(e,this.editorContentRef),...n}),t?.contentComponent&&k.jsx(cB,{contentComponent:t.contentComponent})]})}},dB=R.forwardRef((t,e)=>{const n=jr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return jr.createElement(fB,{key:n,innerRef:e,...t})}),Nk=jr.memo(dB),hB=typeof window<"u"?R.useLayoutEffect:R.useEffect,pB=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function mB(t){var e;const[n]=R.useState(()=>new pB(t.editor)),r=n3.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:ZU);return hB(()=>n.watch(t.editor),[t.editor,n]),R.useDebugValue(r),r}var gB=!1,uy=typeof window>"u",yB=uy||!!(typeof window<"u"&&window.next),bB=class Mk{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?uy||yB?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...r)},onDelete:(...r)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...r)}};return new sU(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var l;return i===((l=n.extensions)==null?void 0:l[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Mk.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function vB(t={},e=[]){const n=R.useRef(t);n.current=t;const[r]=R.useState(()=>new bB(n)),i=G1.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return R.useDebugValue(i),R.useEffect(r.onRender(e)),mB({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),i}var g0=R.createContext({editor:null});g0.Consumer;var Dk=()=>R.useContext(g0),wB=R.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),SB=()=>R.useContext(wB);jr.forwardRef((t,e)=>{const{onDragStart:n}=SB(),r=t.as||"div";return k.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});jr.createContext({markViewContentRef:()=>{}});var xB=jr.forwardRef(({pluginKey:t="bubbleMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,getReferencedVirtualElement:l,options:u,children:f,...h},p)=>{const m=R.useRef(document.createElement("div"));typeof p=="function"?p(m.current):p&&(p.current=m.current);const{editor:y}=Dk(),v=e||y,w={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,getReferencedVirtualElement:l,options:u},S=R.useRef(w);S.current=w;const[E,T]=R.useState(!1),A=R.useRef(!0);return R.useEffect(()=>{if(v?.isDestroyed)return;if(!v){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const C=m.current;C.style.visibility="hidden",C.style.position="absolute";const L=Ok({...S.current,editor:v,element:C});v.registerPlugin(L);const I=S.current.pluginKey;return A.current=!0,T(!0),()=>{T(!1),v.unregisterPlugin(I),window.requestAnimationFrame(()=>{C.parentNode&&C.parentNode.removeChild(C)})}},[v]),R.useEffect(()=>{if(!(!E||!v||v.isDestroyed)){if(A.current){A.current=!1;return}v.view.dispatch(v.state.tr.setMeta("bubbleMenu",{type:"updateOptions",options:S.current}))}},[E,v,n,r,o,u,i,l]),Oy.createPortal(k.jsx("div",{...h,children:f}),m.current)}),EB=jr.forwardRef(({pluginKey:t="floatingMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,options:l,children:u,...f},h)=>{const p=R.useRef(document.createElement("div"));typeof h=="function"?h(p.current):h&&(h.current=p.current);const{editor:m}=Dk(),y=e||m,v={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,options:l},w=R.useRef(v);w.current=v;const[S,E]=R.useState(!1),T=R.useRef(!0);return R.useEffect(()=>{if(y?.isDestroyed)return;if(!y){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const A=p.current;A.style.visibility="hidden",A.style.position="absolute";const C=Rk({...w.current,editor:y,element:A});y.registerPlugin(C);const L=w.current.pluginKey;return T.current=!0,E(!0),()=>{E(!1),y.unregisterPlugin(L),window.requestAnimationFrame(()=>{A.parentNode&&A.parentNode.removeChild(A)})}},[y]),R.useEffect(()=>{if(!(!S||!y||y.isDestroyed)){if(T.current){T.current=!1;return}y.view.dispatch(y.state.tr.setMeta("floatingMenu",{type:"updateOptions",options:w.current}))}},[S,y,n,r,o,l,i]),Oy.createPortal(k.jsx("div",{...f,children:u}),p.current)}),y0=R.createContext({editor:null,isReady:!1});y0.displayName="TiptapContext";var hh=()=>R.useContext(y0);function Lk({instance:t,children:e}){var n;const[r,i]=R.useState((n=t?.isInitialized)!=null?n:!1);R.useEffect(()=>{if(!t){i(!1);return}if(t.isInitialized){i(!0);return}const u=()=>{i(!0)};return t.on("create",u),()=>{t.off("create",u)}},[t]);const o=R.useMemo(()=>({editor:t,isReady:r}),[t,r]),l=R.useMemo(()=>({editor:t}),[t]);return k.jsx(g0.Provider,{value:l,children:k.jsx(y0.Provider,{value:o,children:e})})}Lk.displayName="Tiptap";function jk({...t}){const{editor:e}=hh();return k.jsx(Nk,{editor:e,...t})}jk.displayName="Tiptap.Content";function zk({children:t}){const{isReady:e}=hh();return e?null:t}zk.displayName="Tiptap.Loading";function Ik({children:t,...e}){const{editor:n}=hh();return n?k.jsx(xB,{editor:n,...e,children:t}):null}Ik.displayName="Tiptap.BubbleMenu";function Uk({children:t,...e}){const{editor:n}=hh();return n?k.jsx(EB,{...e,editor:n,children:t}):null}Uk.displayName="Tiptap.FloatingMenu";Object.assign(Lk,{Content:jk,Loading:zk,BubbleMenu:Ik,FloatingMenu:Uk});var pd=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},TB=/^\s*>\s$/,_B=zn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return pd("blockquote",{...Ot(this.options.HTMLAttributes,t),children:pd("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const u=e.renderChildren([i]).split(`
`).map(f=>f.trim()===""?n:`${n} ${f}`);r.push(u.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ma({find:TB,type:this.type})]}}),kB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,AB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,CB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,OB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,RB=wo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return pd("strong",{...Ot(this.options.HTMLAttributes,t),children:pd("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Na({find:kB,type:this.type}),Na({find:CB,type:this.type})]},addPasteRules(){return[yo({find:AB,type:this.type}),yo({find:OB,type:this.type})]}}),NB=/(^|[^`])`([^`]+)`(?!`)$/,MB=/(^|[^`])`([^`]+)`(?!`)/g,DB=wo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Na({find:NB,type:this.type})]},addPasteRules(){return[yo({find:MB,type:this.type})]}}),mg=4,LB=/^```([a-z]+)?[\s\n]$/,jB=/^~~~([a-z]+)?[\s\n]$/,zB=zn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:mg,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ot(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:mg,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;if(o.parent.type!==this.type)return!1;const u=" ".repeat(n);return l?t.commands.insertContent(u):t.commands.command(({tr:f})=>{const{from:h,to:p}=i,v=r.doc.textBetween(h,p,`
`,`
`).split(`
`).map(w=>u+w).join(`
`);return f.replaceWith(h,p,r.schema.text(v)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:mg,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;return o.parent.type!==this.type?!1:l?t.commands.command(({tr:u})=>{var f;const{pos:h}=o,p=o.start(),m=o.end(),v=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let w=0,S=0;const E=h-p;for(let H=0;H<v.length;H+=1){if(S+v[H].length>=E){w=H;break}S+=v[H].length+1}const A=((f=v[w].match(/^ */))==null?void 0:f[0])||"",C=Math.min(A.length,n);if(C===0)return!0;let L=p;for(let H=0;H<w;H+=1)L+=v[H].length+1;return u.delete(L,L+C),h-L<=C&&u.setSelection(we.create(u.doc,L)),!0}):t.commands.command(({tr:u})=>{const{from:f,to:h}=i,y=r.doc.textBetween(f,h,`
`,`
`).split(`
`).map(v=>{var w;const S=((w=v.match(/^ */))==null?void 0:w[0])||"",E=Math.min(S.length,n);return v.slice(E)}).join(`
`);return u.replaceWith(f,h,r.schema.text(y)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:t.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?t.commands.command(({tr:h})=>(h.setSelection(ve.near(r.resolve(u))),!0)):t.commands.exitCode()}}},addInputRules(){return[iy({find:LB,type:this.type,getAttributes:t=>({language:t[1]})}),iy({find:jB,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new nt({key:new at("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i?.mode;if(!n||!o)return!1;const{tr:l,schema:u}=t.state,f=u.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},f)),l.selection.$from.parent.type!==this.type&&l.setSelection(we.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),IB=zn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),UB=zn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ot(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,f=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&f&&l){const m=f.filter(y=>u.includes(y.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),BB=zn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ot(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>iy({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),PB=zn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ot(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!aU(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return j_(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:l,dispatch:u})=>{if(u){const{$to:f}=l.selection,h=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?l.setSelection(we.create(l.doc,f.pos+1)):f.nodeAfter.isBlock?l.setSelection(pe.create(l.doc,f.pos)):l.setSelection(we.create(l.doc,f.pos));else{const p=o.schema.nodes[this.options.nextNodeType]||f.parent.type.contentMatch.defaultType,m=p?.create();m&&(l.insert(h,m),l.setSelection(we.create(l.doc,h+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[oU({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),HB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,$B=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,qB=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,VB=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,FB=wo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ot(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Na({find:HB,type:this.type}),Na({find:qB,type:this.type})]},addPasteRules(){return[yo({find:$B,type:this.type}),yo({find:VB,type:this.type})]}});const GB="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",KB="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",fy="numeric",dy="ascii",hy="alpha",uc="asciinumeric",rc="alphanumeric",py="domain",Bk="emoji",WB="scheme",JB="slashscheme",gg="whitespace";function YB(t,e){return t in e||(e[t]=[]),e[t]}function oo(t,e,n){e[fy]&&(e[uc]=!0,e[rc]=!0),e[dy]&&(e[uc]=!0,e[hy]=!0),e[uc]&&(e[rc]=!0),e[hy]&&(e[rc]=!0),e[rc]&&(e[py]=!0),e[Bk]&&(e[py]=!0);for(const r in e){const i=YB(r,n);i.indexOf(t)<0&&i.push(t)}}function XB(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function vn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}vn.groups={};vn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||vn.groups;let i;return e&&e.j?i=e:(i=new vn(e),n&&r&&oo(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let l=0;l<o-1;l++)i=i.tt(t[l]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||vn.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let l,u=i.go(t);if(u?(l=new vn,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new vn,o){if(r)if(l.t&&typeof l.t=="string"){const f=Object.assign(XB(l.t,r),n);oo(o,f,r)}else n&&oo(o,n,r);l.t=o}return i.j[t]=l,l}};const Ce=(t,e,n,r,i)=>t.ta(e,n,r,i),pt=(t,e,n,r,i)=>t.tr(e,n,r,i),UE=(t,e,n,r,i)=>t.ts(e,n,r,i),Q=(t,e,n,r,i)=>t.tt(e,n,r,i),yi="WORD",my="UWORD",Pk="ASCIINUMERICAL",Hk="ALPHANUMERICAL",Lc="LOCALHOST",gy="TLD",yy="UTLD",Vf="SCHEME",va="SLASH_SCHEME",b0="NUM",by="WS",v0="NL",fc="OPENBRACE",dc="CLOSEBRACE",md="OPENBRACKET",gd="CLOSEBRACKET",yd="OPENPAREN",bd="CLOSEPAREN",vd="OPENANGLEBRACKET",wd="CLOSEANGLEBRACKET",Sd="FULLWIDTHLEFTPAREN",xd="FULLWIDTHRIGHTPAREN",Ed="LEFTCORNERBRACKET",Td="RIGHTCORNERBRACKET",_d="LEFTWHITECORNERBRACKET",kd="RIGHTWHITECORNERBRACKET",Ad="FULLWIDTHLESSTHAN",Cd="FULLWIDTHGREATERTHAN",Od="AMPERSAND",Rd="APOSTROPHE",Nd="ASTERISK",us="AT",Md="BACKSLASH",Dd="BACKTICK",Ld="CARET",ps="COLON",w0="COMMA",jd="DOLLAR",Or="DOT",zd="EQUALS",S0="EXCLAMATION",Xn="HYPHEN",hc="PERCENT",Id="PIPE",Ud="PLUS",Bd="POUND",pc="QUERY",x0="QUOTE",$k="FULLWIDTHMIDDLEDOT",E0="SEMI",Rr="SLASH",mc="TILDE",Pd="UNDERSCORE",qk="EMOJI",Hd="SYM";var Vk=Object.freeze({__proto__:null,ALPHANUMERICAL:Hk,AMPERSAND:Od,APOSTROPHE:Rd,ASCIINUMERICAL:Pk,ASTERISK:Nd,AT:us,BACKSLASH:Md,BACKTICK:Dd,CARET:Ld,CLOSEANGLEBRACKET:wd,CLOSEBRACE:dc,CLOSEBRACKET:gd,CLOSEPAREN:bd,COLON:ps,COMMA:w0,DOLLAR:jd,DOT:Or,EMOJI:qk,EQUALS:zd,EXCLAMATION:S0,FULLWIDTHGREATERTHAN:Cd,FULLWIDTHLEFTPAREN:Sd,FULLWIDTHLESSTHAN:Ad,FULLWIDTHMIDDLEDOT:$k,FULLWIDTHRIGHTPAREN:xd,HYPHEN:Xn,LEFTCORNERBRACKET:Ed,LEFTWHITECORNERBRACKET:_d,LOCALHOST:Lc,NL:v0,NUM:b0,OPENANGLEBRACKET:vd,OPENBRACE:fc,OPENBRACKET:md,OPENPAREN:yd,PERCENT:hc,PIPE:Id,PLUS:Ud,POUND:Bd,QUERY:pc,QUOTE:x0,RIGHTCORNERBRACKET:Td,RIGHTWHITECORNERBRACKET:kd,SCHEME:Vf,SEMI:E0,SLASH:Rr,SLASH_SCHEME:va,SYM:Hd,TILDE:mc,TLD:gy,UNDERSCORE:Pd,UTLD:yy,UWORD:my,WORD:yi,WS:by});const pi=/[a-z]/,Xl=new RegExp("\\p{L}","u"),yg=new RegExp("\\p{Emoji}","u"),mi=/\d/,bg=/\s/,BE="\r",vg=`
`,QB="",ZB="",wg="";let Df=null,Lf=null;function eP(t=[]){const e={};vn.groups=e;const n=new vn;Df==null&&(Df=PE(GB)),Lf==null&&(Lf=PE(KB)),Q(n,"'",Rd),Q(n,"{",fc),Q(n,"}",dc),Q(n,"[",md),Q(n,"]",gd),Q(n,"(",yd),Q(n,")",bd),Q(n,"<",vd),Q(n,">",wd),Q(n,"",Sd),Q(n,"",xd),Q(n,"",Ed),Q(n,"",Td),Q(n,"",_d),Q(n,"",kd),Q(n,"",Ad),Q(n,"",Cd),Q(n,"&",Od),Q(n,"*",Nd),Q(n,"@",us),Q(n,"`",Dd),Q(n,"^",Ld),Q(n,":",ps),Q(n,",",w0),Q(n,"$",jd),Q(n,".",Or),Q(n,"=",zd),Q(n,"!",S0),Q(n,"-",Xn),Q(n,"%",hc),Q(n,"|",Id),Q(n,"+",Ud),Q(n,"#",Bd),Q(n,"?",pc),Q(n,'"',x0),Q(n,"/",Rr),Q(n,";",E0),Q(n,"~",mc),Q(n,"_",Pd),Q(n,"\\",Md),Q(n,"",$k);const r=pt(n,mi,b0,{[fy]:!0});pt(r,mi,r);const i=pt(r,pi,Pk,{[uc]:!0}),o=pt(r,Xl,Hk,{[rc]:!0}),l=pt(n,pi,yi,{[dy]:!0});pt(l,mi,i),pt(l,pi,l),pt(i,mi,i),pt(i,pi,i);const u=pt(n,Xl,my,{[hy]:!0});pt(u,pi),pt(u,mi,o),pt(u,Xl,u),pt(o,mi,o),pt(o,pi),pt(o,Xl,o);const f=Q(n,vg,v0,{[gg]:!0}),h=Q(n,BE,by,{[gg]:!0}),p=pt(n,bg,by,{[gg]:!0});Q(n,wg,p),Q(h,vg,f),Q(h,wg,p),pt(h,bg,p),Q(p,BE),Q(p,vg),pt(p,bg,p),Q(p,wg,p);const m=pt(n,yg,qk,{[Bk]:!0});Q(m,"#"),pt(m,yg,m),Q(m,QB,m);const y=Q(m,ZB);Q(y,"#"),pt(y,yg,m);const v=[[pi,l],[mi,i]],w=[[pi,null],[Xl,u],[mi,o]];for(let S=0;S<Df.length;S++)ss(n,Df[S],gy,yi,v);for(let S=0;S<Lf.length;S++)ss(n,Lf[S],yy,my,w);oo(gy,{tld:!0,ascii:!0},e),oo(yy,{utld:!0,alpha:!0},e),ss(n,"file",Vf,yi,v),ss(n,"mailto",Vf,yi,v),ss(n,"http",va,yi,v),ss(n,"https",va,yi,v),ss(n,"ftp",va,yi,v),ss(n,"ftps",va,yi,v),oo(Vf,{scheme:!0,ascii:!0},e),oo(va,{slashscheme:!0,ascii:!0},e),t=t.sort((S,E)=>S[0]>E[0]?1:-1);for(let S=0;S<t.length;S++){const E=t[S][0],A=t[S][1]?{[WB]:!0}:{[JB]:!0};E.indexOf("-")>=0?A[py]=!0:pi.test(E)?mi.test(E)?A[uc]=!0:A[dy]=!0:A[fy]=!0,UE(n,E,E,A)}return UE(n,"localhost",Lc,{ascii:!0}),n.jd=new vn(Hd),{start:n,tokens:Object.assign({groups:e},Vk)}}function Fk(t,e){const n=tP(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=n.length,i=[];let o=0,l=0;for(;l<r;){let u=t,f=null,h=0,p=null,m=-1,y=-1;for(;l<r&&(f=u.go(n[l]));)u=f,u.accepts()?(m=0,y=0,p=u):m>=0&&(m+=n[l].length,y++),h+=n[l].length,o+=n[l].length,l++;o-=m,l-=y,h-=m,i.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return i}function tP(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,l=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function ss(t,e,n,r,i){let o;const l=e.length;for(let u=0;u<l-1;u++){const f=e[u];t.j[f]?o=t.j[f]:(o=new vn(r),o.jr=i.slice(),t.j[f]=o),t=o}return o=new vn(n),o.jr=i.slice(),t.j[e[l-1]]=o,o}function PE(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+o),10);l>0;l--)n.pop();r+=o}else n.push(t[r]),r++}return e}const jc={defaultProtocol:"http",events:null,format:HE,formatHref:HE,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function T0(t,e=null){let n=Object.assign({},jc);t&&(n=Object.assign(n,t instanceof T0?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}T0.prototype={o:jc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:jc[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function HE(t){return t}function Gk(t,e){this.t="token",this.v=t,this.tk=e}Gk.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=jc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),l={},u=t.get("className",n,e),f=t.get("target",n,e),h=t.get("rel",n,e),p=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return l.href=r,u&&(l.class=u),f&&(l.target=f),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:i,attributes:l,content:o,eventListeners:m}}};function ph(t,e){class n extends Gk{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const $E=ph("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),qE=ph("text"),nP=ph("nl"),jf=ph("url",{isLink:!0,toHref(t=jc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Lc&&t[1].t===ps}}),Yn=t=>new vn(t);function rP({groups:t}){const e=t.domain.concat([Od,Nd,us,Md,Dd,Ld,jd,zd,Xn,b0,hc,Id,Ud,Bd,Rr,Hd,mc,Pd]),n=[Rd,ps,w0,Or,S0,hc,pc,x0,E0,vd,wd,fc,dc,gd,md,yd,bd,Sd,xd,Ed,Td,_d,kd,Ad,Cd],r=[Od,Rd,Nd,Md,Dd,Ld,jd,zd,Xn,fc,dc,hc,Id,Ud,Bd,pc,Rr,Hd,mc,Pd],i=Yn(),o=Q(i,mc);Ce(o,r,o),Ce(o,t.domain,o);const l=Yn(),u=Yn(),f=Yn();Ce(i,t.domain,l),Ce(i,t.scheme,u),Ce(i,t.slashscheme,f),Ce(l,r,o),Ce(l,t.domain,l);const h=Q(l,us);Q(o,us,h),Q(u,us,h),Q(f,us,h);const p=Q(o,Or);Ce(p,r,o),Ce(p,t.domain,o);const m=Yn();Ce(h,t.domain,m),Ce(m,t.domain,m);const y=Q(m,Or);Ce(y,t.domain,m);const v=Yn($E);Ce(y,t.tld,v),Ce(y,t.utld,v),Q(h,Lc,v);const w=Q(m,Xn);Q(w,Xn,w),Ce(w,t.domain,m),Ce(v,t.domain,m),Q(v,Or,y),Q(v,Xn,w);const S=Q(v,ps);Ce(S,t.numeric,$E);const E=Q(l,Xn),T=Q(l,Or);Q(E,Xn,E),Ce(E,t.domain,l),Ce(T,r,o),Ce(T,t.domain,l);const A=Yn(jf);Ce(T,t.tld,A),Ce(T,t.utld,A),Ce(A,t.domain,l),Ce(A,r,o),Q(A,Or,T),Q(A,Xn,E),Q(A,us,h);const C=Q(A,ps),L=Yn(jf);Ce(C,t.numeric,L);const I=Yn(jf),H=Yn();Ce(I,e,I),Ce(I,n,H),Ce(H,e,I),Ce(H,n,H),Q(A,Rr,I),Q(L,Rr,I);const z=Q(u,ps),W=Q(f,ps),ee=Q(W,Rr),ne=Q(ee,Rr);Ce(u,t.domain,l),Q(u,Or,T),Q(u,Xn,E),Ce(f,t.domain,l),Q(f,Or,T),Q(f,Xn,E),Ce(z,t.domain,I),Q(z,Rr,I),Q(z,pc,I),Ce(ne,t.domain,I),Ce(ne,e,I),Q(ne,Rr,I);const fe=[[fc,dc],[md,gd],[yd,bd],[vd,wd],[Sd,xd],[Ed,Td],[_d,kd],[Ad,Cd]];for(let ge=0;ge<fe.length;ge++){const[Me,Se]=fe[ge],xe=Q(I,Me);Q(H,Me,xe),Q(xe,Se,I);const $=Yn(jf);Ce(xe,e,$);const X=Yn();Ce(xe,n),Ce($,e,$),Ce($,n,X),Ce(X,e,$),Ce(X,n,X),Q($,Se,I),Q(X,Se,I)}return Q(i,Lc,A),Q(i,v0,nP),{start:i,tokens:Vk}}function iP(t,e,n){let r=n.length,i=0,o=[],l=[];for(;i<r;){let u=t,f=null,h=null,p=0,m=null,y=-1;for(;i<r&&!(f=u.go(n[i].t));)l.push(n[i++]);for(;i<r&&(h=f||u.go(n[i].t));)f=null,u=h,u.accepts()?(y=0,m=u):y>=0&&y++,i++,p++;if(y<0)i-=p,i<r&&(l.push(n[i]),i++);else{l.length>0&&(o.push(Sg(qE,e,l)),l=[]),i-=y,p-=y;const v=m.t,w=n.slice(i-p,i);o.push(Sg(v,e,w))}}return l.length>0&&o.push(Sg(qE,e,l)),o}function Sg(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const sP=typeof console<"u"&&console&&console.warn||(()=>{}),oP="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",tt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function aP(){return vn.groups={},tt.scanner=null,tt.parser=null,tt.tokenQueue=[],tt.pluginQueue=[],tt.customSchemes=[],tt.initialized=!1,tt}function VE(t,e=!1){if(tt.initialized&&sP(`linkifyjs: already initialized - will not register custom scheme "${t}" ${oP}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);tt.customSchemes.push([t,e])}function lP(){tt.scanner=eP(tt.customSchemes);for(let t=0;t<tt.tokenQueue.length;t++)tt.tokenQueue[t][1]({scanner:tt.scanner});tt.parser=rP(tt.scanner.tokens);for(let t=0;t<tt.pluginQueue.length;t++)tt.pluginQueue[t][1]({scanner:tt.scanner,parser:tt.parser});return tt.initialized=!0,tt}function _0(t){return tt.initialized||lP(),iP(tt.parser.start,t,Fk(tt.scanner.start,t))}_0.scan=Fk;function Kk(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new T0(n),i=_0(t),o=[];for(let l=0;l<i.length;l++){const u=i[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}var k0="[\0- -\u2029]",cP=new RegExp(k0),uP=new RegExp(`${k0}$`),fP=new RegExp(k0,"g");function dP(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function hP(t){return new nt({key:new at("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(h=>h.docChanged)&&!n.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!i||o)return;const{tr:l}=r,u=A_(n.doc,[...e]);if(L_(u).forEach(({newRange:h})=>{const p=lI(r.doc,h,v=>v.isTextblock);let m,y;if(p.length>1)m=p[0],y=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const v=r.doc.textBetween(h.from,h.to," "," ");if(!uP.test(v))return;m=p[0],y=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&y){const v=y.split(cP).filter(Boolean);if(v.length<=0)return!1;const w=v[v.length-1],S=m.pos+y.lastIndexOf(w);if(!w)return!1;const E=_0(w).map(T=>T.toObject(t.defaultProtocol));if(!dP(E))return!1;E.filter(T=>T.isLink).map(T=>({...T,from:S+T.start+1,to:S+T.end+1})).filter(T=>r.schema.marks.code?!r.doc.rangeHasMark(T.from,T.to,r.schema.marks.code):!0).filter(T=>t.validate(T.value)).filter(T=>t.shouldAutoLink(T.value)).forEach(T=>{i0(T.from,T.to,r.doc).some(A=>A.mark.type===t.type)||l.addMark(T.from,T.to,t.type.create({href:T.href}))})}}),!!l.steps.length)return l}})}function pP(t){return new nt({key:new at("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const f=r.target;if(!f)return!1;const h=t.editor.view.dom;l=f.closest("a"),l&&!h.contains(l)&&(l=null)}if(!l)return!1;let u=!1;if(t.enableClickSelection&&(u=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const f=D_(e.state,t.type.name),h=(i=l.href)!=null?i:f.href,p=(o=l.target)!=null?o:f.target;h&&(window.open(h,p),u=!0)}return u}}})}function mP(t){return new nt({key:new at("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:o}=e,{selection:l}=o,{empty:u}=l;if(u)return!1;let f="";r.content.forEach(p=>{f+=p.textContent});const h=Kk(f,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===f);return!f||!h||i!==void 0&&!i(h.value)?!1:t.editor.commands.setMark(t.type,{href:h.href})}}})}function Qs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(fP,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var gP=wo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){VE(t);return}VE(t.scheme,t.optionalSlashes)})},onDestroy(){aP()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Qs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Qs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Qs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ot(this.options.HTMLAttributes,t),0]:["a",Ot(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Qs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Qs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[yo({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=Kk(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!Qs(l,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(hP({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Qs(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(pP({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(mP({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),yP=Object.defineProperty,bP=(t,e)=>{for(var n in e)yP(t,n,{get:e[n],enumerable:!0})},vP="listItem",FE="textStyle",GE=/^\s*([-+*])\s$/,Wk=zn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(vP,this.editor.getAttributes(FE)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ma({find:GE,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ma({find:GE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(FE),editor:this.editor})),[t]}}),Jk=zn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),u=e.parseChildren(l);n.push(...u)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>l0(t,e,r=>{var i,o;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((o=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:o.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),wP={};bP(wP,{findListItemPos:()=>Fc,getNextListDepth:()=>A0,handleBackspace:()=>vy,handleDelete:()=>wy,hasListBefore:()=>Yk,hasListItemAfter:()=>SP,hasListItemBefore:()=>Xk,listItemHasSubList:()=>Qk,nextListIsDeeper:()=>Zk,nextListIsHigher:()=>eA});var Fc=(t,e)=>{const{$from:n}=e.selection,r=Ct(t,e.schema);let i=null,o=n.depth,l=n.pos,u=null;for(;o>0&&u===null;)i=n.node(o),i.type===r?u=o:(o-=1,l-=1);return u===null?null:{$pos:e.doc.resolve(l),depth:u}},A0=(t,e)=>{const n=Fc(t,e);if(!n)return!1;const[,r]=yI(e,t,n.$pos.pos+4);return r},Yk=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),o=t.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},Xk=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},Qk=(t,e,n)=>{if(!n)return!1;const r=Ct(t,e.schema);let i=!1;return n.descendants(o=>{o.type===r&&(i=!0)}),i},vy=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Ts(t.state,e)&&Yk(t.state,e,n)){const{$anchor:u}=t.state.selection,f=t.state.doc.resolve(u.before()-1),h=[];f.node().descendants((y,v)=>{y.type.name===e&&h.push({node:y,pos:v})});const p=h.at(-1);if(!p)return!1;const m=t.state.doc.resolve(f.start()+p.pos+1);return t.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!Ts(t.state,e)||!SI(t.state))return!1;const r=Fc(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=Qk(e,t.state,o);return Xk(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Zk=(t,e)=>{const n=A0(t,e),r=Fc(t,e);return!r||!n?!1:n>r.depth},eA=(t,e)=>{const n=A0(t,e),r=Fc(t,e);return!r||!n?!1:n<r.depth},wy=(t,e)=>{if(!Ts(t.state,e)||!wI(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Zk(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():eA(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},SP=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},tA=ut.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&wy(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&wy(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&vy(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&vy(t,n,r)&&(e=!0)}),e}}}}),KE=/^(\s*)(\d+)\.\s+(.*)$/,xP=/^\s/;function EP(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],o=i.match(KE);if(!o)break;const[,l,u,f]=o,h=l.length;let p=f,m=n+1;const y=[i];for(;m<t.length;){const v=t[m];if(v.match(KE))break;if(v.trim()==="")y.push(v),p+=`
`,m+=1;else if(v.match(xP))y.push(v),p+=`
${v.slice(h+2)}`,m+=1;else break}e.push({indent:h,number:parseInt(u,10),content:p.trim(),raw:y.join(`
`)}),r=m,n=m}return[e,r]}function nA(t,e,n){var r;const i=[];let o=0;for(;o<t.length;){const l=t[o];if(l.indent===e){const u=l.content.split(`
`),f=((r=u[0])==null?void 0:r.trim())||"",h=[];f&&h.push({type:"paragraph",raw:f,tokens:n.inlineTokens(f)});const p=u.slice(1).join(`
`).trim();if(p){const v=n.blockTokens(p);h.push(...v)}let m=o+1;const y=[];for(;m<t.length&&t[m].indent>e;)y.push(t[m]),m+=1;if(y.length>0){const v=Math.min(...y.map(S=>S.indent)),w=nA(y,v,n);h.push({type:"list",ordered:!0,start:y[0].number,items:w,raw:y.map(S=>S.raw).join(`
`)})}i.push({type:"list_item",raw:l.raw,tokens:h}),o=m}else o+=1}return i}function TP(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=e.parseChildren([i]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([i]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var _P="listItem",WE="textStyle",JE=/^(\d+)\.\s$/,rA=zn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ot(this.options.HTMLAttributes,n),0]:["ol",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?TP(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[o,l]=EP(i);if(o.length===0)return;const u=nA(o,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:u,raw:i.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(_P,this.editor.getAttributes(WE)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ma({find:JE,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ma({find:JE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(WE)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),kP=/^\s*(\[([( |x])?\])\s$/,AP=zn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Ot(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return l0(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),f=document.createElement("div"),h=m=>{var y,v;u.ariaLabel=((v=(y=this.options.a11y)==null?void 0:y.checkboxLabel)==null?void 0:v.call(y,m,u.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};h(t),o.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",m=>m.preventDefault()),u.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:y}=m.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const w=n();if(typeof w!="number")return!1;const S=v.doc.nodeAt(w);return v.setNodeMarkup(w,void 0,{...S?.attrs,checked:y}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,y)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,y])=>{i.setAttribute(m,y)}),i.dataset.checked=t.attrs.checked,u.checked=t.attrs.checked,o.append(u,l),i.append(o,f),Object.entries(e).forEach(([m,y])=>{i.setAttribute(m,y)});let p=new Set(Object.keys(e));return{dom:i,contentDOM:f,update:m=>{if(m.type!==this.type)return!1;i.dataset.checked=m.attrs.checked,u.checked=m.attrs.checked,h(m);const y=r.extensionManager.attributes,v=Mc(m,y),w=new Set(Object.keys(v)),S=this.options.HTMLAttributes;return p.forEach(E=>{w.has(E)||(E in S?i.setAttribute(E,S[E]):i.removeAttribute(E))}),Object.entries(v).forEach(([E,T])=>{T==null?E in S?i.setAttribute(E,S[E]):i.removeAttribute(E):i.setAttribute(E,T)}),p=w,!0}}}},addInputRules(){return[Ma({find:kP,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),CP=zn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Ot(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const l=sy(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,f)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:f}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(o)},i=sy(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ut.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Wk.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Jk.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(tA.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(rA.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(AP.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(CP.configure(this.options.taskList)),t}});var YE="&nbsp;",OP="",RP=zn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ot(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===YE||r[0].text===OP)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?YE:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),NP=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,MP=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,DP=wo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ot(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Na({find:NP,type:this.type})]},addPasteRules(){return[yo({find:MP,type:this.type})]}}),LP=zn.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),jP=wo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ot(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function zP(t={}){return new nt({view(e){return new IP(e,t)}})}class IP{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),l=o.width/i.offsetWidth,u=o.height/i.offsetHeight;if(n){let m=e.nodeBefore,y=e.nodeAfter;if(m||y){let v=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(v){let w=v.getBoundingClientRect(),S=m?w.bottom:w.top;m&&y&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*u;r={left:w.left,right:w.right,top:S-E,bottom:S+E}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*l;r={left:m.left-y,right:m.left+y,top:m.top,bottom:m.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let h,p;if(!f||f==document.body&&getComputedStyle(f).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=f.getBoundingClientRect(),y=m.width/f.offsetWidth,v=m.height/f.offsetHeight;h=m.left-f.scrollLeft*y,p=m.top-f.scrollTop*v}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=vT(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class gt extends ve{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return gt.valid(r)?new gt(r):ve.near(r)}content(){return te.empty}eq(e){return e instanceof gt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new gt(e.resolve(n.pos))}getBookmark(){return new C0(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!UP(e)||!BP(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&gt.valid(e))return e;let i=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(n>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=n;let f=e.doc.resolve(i);if(gt.valid(f))return f}for(;;){let l=n>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!pe.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=l,i+=n;let u=e.doc.resolve(i);if(gt.valid(u))return u}return null}}}gt.prototype.visible=!1;gt.findFrom=gt.findGapCursorFrom;ve.jsonID("gapcursor",gt);class C0{constructor(e){this.pos=e}map(e){return new C0(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return gt.valid(n)?new gt(n):ve.near(n)}}function iA(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function UP(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||iA(i.type))return!0;if(i.inlineContent)return!1}}return!0}function BP(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||iA(i.type))return!0;if(i.inlineContent)return!1}}return!0}function PP(){return new nt({props:{decorations:VP,createSelectionBetween(t,e,n){return e.pos==n.pos&&gt.valid(n)?new gt(n):null},handleClick:$P,handleKeyDown:HP,handleDOMEvents:{beforeinput:qP}}})}const HP=Yy({ArrowLeft:zf("horiz",-1),ArrowRight:zf("horiz",1),ArrowUp:zf("vert",-1),ArrowDown:zf("vert",1)});function zf(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let l=r.selection,u=e>0?l.$to:l.$from,f=l.empty;if(l instanceof we){if(!o.endOfTextblock(n)||u.depth==0)return!1;f=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=gt.findGapCursorFrom(u,e,f);return h?(i&&i(r.tr.setSelection(new gt(h))),!0):!1}}function $P(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!gt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&pe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new gt(r))),!0)}function qP(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof gt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=J.empty;for(let l=r.length-1;l>=0;l--)i=J.from(r[l].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new te(i,0,0));return o.setSelection(we.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function VP(t){if(!(t.selection instanceof gt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ct.create(t.doc,[on.widget(t.selection.head,e,{key:"gapcursor"})])}var $d=200,Pt=function(){};Pt.prototype.append=function(e){return e.length?(e=Pt.from(e),!this.length&&e||e.length<$d&&this.leafAppend(e)||this.length<$d&&e.leafPrepend(this)||this.appendInner(e)):this};Pt.prototype.prepend=function(e){return e.length?Pt.from(e).append(this):this};Pt.prototype.appendInner=function(e){return new FP(this,e)};Pt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Pt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Pt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Pt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Pt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},n,r),i};Pt.from=function(e){return e instanceof Pt?e:e&&e.length?new sA(e):Pt.empty};var sA=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,u){for(var f=o;f<l;f++)if(i(this.values[f],u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,u){for(var f=o-1;f>=l;f--)if(i(this.values[f],u+f)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=$d)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=$d)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Pt);Pt.empty=new sA([]);var FP=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(i,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Pt);const GP=500;class mr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,u,f,h=[],p=[];return this.items.forEach((m,y)=>{if(!m.step){i||(i=this.remapping(r,y+1),o=i.maps.length),o--,p.push(m);return}if(i){p.push(new Nr(m.map));let v=m.step.map(i.slice(o)),w;v&&l.maybeStep(v).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],h.push(new Nr(w,void 0,void 0,h.length+p.length))),o--,w&&i.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return u=i?m.selection.map(i.slice(o)):m.selection,f=new mr(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:l,selection:u}}addTransform(e,n,r,i){let o=[],l=this.eventCount,u=this.items,f=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),y=new Nr(e.mapping.maps[p],m,n),v;(v=f&&f.merge(y))&&(y=v,p?o.pop():u=u.slice(0,u.length-1)),o.push(y),n&&(l++,n=void 0),i||(f=y)}let h=l-r.depth;return h>WP&&(u=KP(u,h),l-=h),new mr(u.append(o),l)}remapping(e,n){let r=new kc;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new mr(this.items.append(e.map(n=>new Nr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(y=>{y.selection&&u--},i);let f=n;this.items.forEach(y=>{let v=o.getMirror(--f);if(v==null)return;l=Math.min(l,v);let w=o.maps[v];if(y.step){let S=e.steps[v].invert(e.docs[v]),E=y.selection&&y.selection.map(o.slice(f+1,v));E&&u++,r.push(new Nr(w,S,E))}else r.push(new Nr(w))},i);let h=[];for(let y=n;y<l;y++)h.push(new Nr(o.maps[y]));let p=this.items.slice(0,i).append(h).append(r),m=new mr(p,u);return m.emptyItemCount()>GP&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)i.push(l),l.selection&&o++;else if(l.step){let f=l.step.map(n.slice(r)),h=f&&f.getMap();if(r--,h&&n.appendMap(h,r),f){let p=l.selection&&l.selection.map(n.slice(r));p&&o++;let m=new Nr(h.invert(),f,p),y,v=i.length-1;(y=i.length&&i[v].merge(m))?i[v]=y:i.push(m)}}else l.map&&r--},this.items.length,0),new mr(Pt.from(i.reverse()),o)}}mr.empty=new mr(Pt.empty,0);function KP(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Nr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Nr(n.getMap().invert(),n,this.selection)}}}class fs{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const WP=20;function JP(t,e,n,r){let i=n.getMeta(fo),o;if(i)return i.historyState;n.getMeta(QP)&&(t=new fs(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(fo))return l.getMeta(fo).redo?new fs(t.done.addTransform(n,void 0,r,Ff(e)),t.undone,XE(n.mapping.maps),t.prevTime,t.prevComposition):new fs(t.done,t.undone.addTransform(n,void 0,r,Ff(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),f=t.prevTime==0||!l&&t.prevComposition!=u&&(t.prevTime<(n.time||0)-r.newGroupDelay||!YP(n,t.prevRanges)),h=l?xg(t.prevRanges,n.mapping):XE(n.mapping.maps);return new fs(t.done.addTransform(n,f?e.selection.getBookmark():void 0,r,Ff(e)),mr.empty,h,n.time,u??t.prevComposition)}else return(o=n.getMeta("rebased"))?new fs(t.done.rebased(n,o),t.undone.rebased(n,o),xg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new fs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),xg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function YP(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function XE(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,l)=>e.push(o,l));return e}function xg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function XP(t,e,n){let r=Ff(e),i=fo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),f=new fs(n?u:o.remaining,n?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(fo,{redo:n,historyState:f})}let Eg=!1,QE=null;function Ff(t){let e=t.plugins;if(QE!=e){Eg=!1,QE=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Eg=!0;break}}return Eg}const fo=new at("history"),QP=new at("closeHistory");function ZP(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new nt({key:fo,state:{init(){return new fs(mr.empty,mr.empty,null,0,-1)},apply(e,n,r){return JP(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?aA:r=="historyRedo"?lA:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function oA(t,e){return(n,r)=>{let i=fo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=XP(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const aA=oA(!1,!0),lA=oA(!0,!0);ut.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new nt({key:new at("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const l=o-i,u=0,f=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(u,f);return t=!0,h}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,f=o-r,h=u-f,p=u;return e.deleteRange(h,p),!(this.storage.characters({node:e.doc})>r)}})]}});var e4=ut.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[zP(this.options)]}});ut.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new nt({key:new at("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return ct.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((f,h)=>{if(f.isText)return;if(!(i>=h&&i<=h+f.nodeSize-1))return!1;l+=1});let u=0;return t.descendants((f,h)=>{if(f.isText||!(i>=h&&i<=h+f.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";o.push(on.node(h,h+f.nodeSize,{class:this.options.className}))}),ct.create(t,o)}}})]}});var t4=ut.create({name:"gapCursor",addProseMirrorPlugins(){return[PP()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ge(de(t,"allowGapCursor",n)))!=null?e:null}}}),ZE="placeholder";function n4(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}ut.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:ZE,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${n4(this.options.dataAttribute)}`:`data-${ZE}`;return[new nt({key:new at("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,o=[];if(!r)return null;const l=this.editor.isEmpty;return e.descendants((u,f)=>{const h=i>=f&&i<=f+u.nodeSize,p=!u.isLeaf&&oh(u);if((h||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];l&&m.push(this.options.emptyEditorClass);const y=on.node(f,f+u.nodeSize,{class:m.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:u,pos:f,hasAnchor:h}):this.options.placeholder});o.push(y)}return this.options.includeChildren}),ct.create(e,o)}}})]}});ut.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new nt({key:new at("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||j_(n.selection)||t.view.dragging?null:ct.create(n.doc,[on.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function e1({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var r4=ut.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new at(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new nt({key:e,appendTransaction:(i,o,l)=>{const{doc:u,tr:f,schema:h}=l,p=e.getState(l),m=u.content.size,y=h.nodes[n];if(p)return f.insert(m,y.create())},state:{init:(i,o)=>{const l=o.tr.doc.lastChild;return!e1({node:l,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const l=i.doc.lastChild;return!e1({node:l,types:r})}}})]}}),i4=ut.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>aA(t,e),redo:()=>({state:t,dispatch:e})=>lA(t,e)}},addProseMirrorPlugins(){return[ZP(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),s4=ut.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(RB.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(_B.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Wk.configure(this.options.bulletList)),this.options.code!==!1&&i.push(DB.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(zB.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(IB.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(e4.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(t4.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(UB.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(BB.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(i4.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(PB.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(FB.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Jk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(tA.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(gP.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(rA.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(RP.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(DP.configure(this.options.strike)),this.options.text!==!1&&i.push(LP.configure(this.options.text)),this.options.underline!==!1&&i.push(jP.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(r4.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),o4=s4;function a4({value:t,onChange:e}){const n=vB({extensions:[o4.configure({heading:!1,bulletList:!1,orderedList:!1,listItem:!1})],content:t,onUpdate:({editor:r})=>e(r.getHTML())});return n?k.jsxs("div",{className:"space-y-2",children:[k.jsxs("div",{role:"toolbar","aria-label":"Text formatting toolbar",className:`
          flex gap-2 bg-gray-100 border border-gray-300 
          rounded-3xl lg:rounded-2xl p-2 shadow-inner
        `,children:[k.jsx(t1,{"aria-label":"Bold",active:n.isActive("bold"),onClick:()=>n.chain().focus().toggleBold().run(),children:k.jsx("b",{children:"B"})}),k.jsx(t1,{"aria-label":"Italic",active:n.isActive("italic"),onClick:()=>n.chain().focus().toggleItalic().run(),children:k.jsx("i",{children:"I"})})]}),k.jsx("label",{htmlFor:"editor",className:"sr-only",children:"Post content"}),k.jsx("div",{className:`
          bg-white border border-gray-300 rounded-3xl lg:rounded-2xl 
          p-3 shadow-inner min-h-[100px]
        `,children:k.jsx(Nk,{id:"editor",editor:n})})]}):null}function t1({children:t,onClick:e,active:n,...r}){return k.jsx("button",{...r,type:"button",onClick:e,className:`
        w-10 h-10 flex items-center justify-center rounded-xl text-sm
        transition shadow-sm select-none
        focus-visible:ring-2 focus-visible:ring-teal-500 focus-visible:ring-offset-2

        ${n?"bg-teal-700 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}
      `,children:t})}function Dt({className:t=""}){return k.jsx("div",{className:`animate-pulse bg-gray-200 rounded-xl ${t}`,"aria-hidden":"true"})}function l4(){return k.jsxs("div",{className:"bg-white rounded-3xl lg:rounded-2xl p-6 shadow-lg border border-gray-200 space-y-5",children:[k.jsxs("div",{className:"flex items-start gap-3",children:[k.jsx(Dt,{className:"w-10 h-10 rounded-full flex-shrink-0"}),k.jsxs("div",{className:"space-y-2 flex-1",children:[k.jsx(Dt,{className:"h-4 w-32"}),k.jsx(Dt,{className:"h-3 w-20"})]})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx(Dt,{className:"h-4 w-full"}),k.jsx(Dt,{className:"h-4 w-5/6"}),k.jsx(Dt,{className:"h-4 w-4/6"})]}),k.jsx(Dt,{className:"h-48 w-full rounded-3xl lg:rounded-2xl"}),k.jsx("div",{className:"pt-4 border-t border-gray-200",children:k.jsx(Dt,{className:"h-10 w-full rounded-xl"})})]})}function c4(){return k.jsx("div",{className:"space-y-10 pb-24","aria-label":"Loading posts","aria-busy":"true",children:[1,2,3].map(t=>k.jsx(l4,{},t))})}function u4(){return k.jsxs("div",{className:"bg-white rounded-3xl lg:rounded-2xl p-6 shadow-lg border border-gray-200 space-y-4",children:[k.jsx(Dt,{className:"h-5 w-3/4"}),k.jsxs("div",{className:"space-y-2",children:[k.jsx(Dt,{className:"h-4 w-full"}),k.jsx(Dt,{className:"h-4 w-5/6"})]}),k.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[k.jsx(Dt,{className:"h-6 w-20 rounded-full"}),k.jsx(Dt,{className:"h-6 w-24 rounded-full"})]})]})}function f4(){return k.jsx("div",{className:"space-y-6 pb-24","aria-label":"Loading resources","aria-busy":"true",children:[1,2,3,4].map(t=>k.jsx(u4,{},t))})}function d4(){return k.jsxs("div",{className:"bg-white rounded-3xl lg:rounded-2xl p-6 shadow-lg border border-gray-200 space-y-5",children:[k.jsxs("div",{className:"flex items-start gap-3",children:[k.jsx(Dt,{className:"w-10 h-10 rounded-full flex-shrink-0"}),k.jsxs("div",{className:"space-y-2 flex-1",children:[k.jsx(Dt,{className:"h-4 w-36"}),k.jsx(Dt,{className:"h-3 w-20"})]})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx(Dt,{className:"h-5 w-full"}),k.jsx(Dt,{className:"h-4 w-4/5"})]}),k.jsx(Dt,{className:"h-6 w-24 rounded-full"})]})}function h4(){return k.jsx("div",{className:"space-y-10 pb-24","aria-label":"Loading questions","aria-busy":"true",children:[1,2,3].map(t=>k.jsx(d4,{},t))})}const p4=5*1024*1024,Tg=20;async function m4(t,e=p4){return t.size<=e?t:new Promise((n,r)=>{const i=new Image,o=document.createElement("canvas"),l=o.getContext("2d"),u=setTimeout(()=>{r(new Error("Image compression timeout"))},3e4);i.onerror=()=>{clearTimeout(u),r(new Error("Failed to load image"))},i.onload=()=>{let{width:f,height:h}=i;const p=1920;if(f>p||h>p){const m=Math.min(p/f,p/h);f=Math.round(f*m),h=Math.round(h*m)}o.width=f,o.height=h,l.drawImage(i,0,0,f,h),o.toBlob(m=>{clearTimeout(u),m&&m.size<=e?n(new File([m],t.name,{type:"image/jpeg"})):m?o.toBlob(y=>{n(new File([y],t.name,{type:"image/jpeg"}))},"image/jpeg",.5):r(new Error("Failed to compress image"))},"image/jpeg",.7)},i.src=URL.createObjectURL(t)})}function n1(){const{user:t,profile:e}=Pr(),n=e?.role==="admin",[r,i]=R.useState([]),[o,l]=R.useState(0),[u,f]=R.useState(!0),[h,p]=R.useState(""),[m,y]=R.useState(null),[v,w]=R.useState(!1),[S,E]=R.useState(!0),[T,A]=R.useState(!1),{showToast:C}=ks();R.useEffect(()=>{L(0);const z=Te.channel("posts-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},async W=>{const{data:ee}=await Te.from("posts").select("*, profiles(email)").eq("id",W.new.id).single();ee&&i(ne=>[ee,...ne])}).subscribe();return()=>{Te.removeChannel(z)}},[]);async function L(z){const W=z*Tg,ee=W+Tg-1;z===0?E(!0):A(!0);try{const{data:ne,error:fe}=await Te.from("posts").select("*, profiles(email)").order("created_at",{ascending:!1}).range(W,ee);if(fe)C({title:"Failed to load posts",description:fe.message,type:"error"});else{const ge=ne||[];i(Me=>{if(z===0)return ge;const Se=new Set(Me.map(xe=>xe.id));return[...Me,...ge.filter(xe=>!Se.has(xe.id))]}),l(z+1),f(ge.length===Tg)}}catch(ne){C({title:"Error loading posts",description:ne.message,type:"error"})}finally{E(!1),A(!1)}}async function I(){if(!h.trim()&&!m){C({title:"Write something or add a photo",type:"error"});return}w(!0);let z=null;try{if(m){C({title:"Compressing image...",type:"info"});const ee=await m4(m),ne=ee.name.split(".").pop()||"jpg",fe=`${t.id}-${Date.now()}.${ne}`;C({title:"Uploading image...",type:"info"});const{error:ge}=await Te.storage.from("post-images").upload(fe,ee);if(ge){C({title:"Upload failed",description:ge.message,type:"error"}),w(!1);return}z=Te.storage.from("post-images").getPublicUrl(fe).data.publicUrl}const{error:W}=await Te.from("posts").insert({user_id:t.id,content:h,image_url:z});W?C({title:"Post failed",description:W.message,type:"error"}):(C({title:"Posted successfully!",type:"success"}),p(""),y(null),L(0))}catch(W){console.error("Create post error:",W),C({title:"Error creating post",description:W.message,type:"error"})}finally{w(!1)}}const H=R.useCallback(async z=>{if(!confirm("Delete this post?"))return;const{error:W}=await Te.from("posts").delete().eq("id",z);W?C({title:"Failed to delete post",description:W.message,type:"error"}):L(0)},[]);return k.jsxs("div",{className:"space-y-10",children:[k.jsxs("div",{className:`bg-white rounded-3xl lg:rounded-2xl p-6 shadow-xl border border-gray-200 
                   space-y-6`,children:[k.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-teal-800 flex items-center gap-2",children:"Update the Garden "}),k.jsx(a4,{value:h,onChange:p}),k.jsxs("div",{className:"space-y-1",children:[k.jsx("label",{className:"text-sm lg:text-base font-semibold text-gray-600",children:"Add Image"}),k.jsx("label",{htmlFor:"post-image-upload",className:`cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 
                       px-4 py-2 rounded-xl text-sm lg:text-base shadow border border-gray-300 
                       inline-block focus-visible:ring-2 focus-visible:ring-teal-500`,children:"Choose File"}),k.jsx("input",{id:"post-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:z=>y(z.target.files[0])}),m&&k.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:m.name})]}),k.jsx(br,{"aria-label":"Post update",className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4 
                     rounded-xl shadow-lg font-semibold text-sm lg:text-base`,onClick:I,disabled:v,children:v?"Posting":"Post"})]}),S?k.jsx(c4,{}):k.jsxs("div",{className:"space-y-10 pb-24",children:[r.map(z=>k.jsx(g4,{post:z,user:t,isAdmin:n,onDelete:H},z.id)),u&&k.jsx("div",{className:"flex justify-center pt-2",children:k.jsx(br,{onClick:()=>L(o),disabled:T,className:`bg-white border border-teal-700 text-teal-700 hover:bg-teal-50
                           px-8 py-3 rounded-xl shadow font-semibold text-sm lg:text-base
                           disabled:opacity-50`,children:T?"Loading":"Load more posts"})}),!u&&r.length>0&&k.jsx("p",{className:"text-center text-xs text-gray-400 pb-4",children:"You've reached the end of the feed"})]})]})}const g4=R.memo(function({post:e,user:n,isAdmin:r,onDelete:i}){return k.jsxs("div",{className:`bg-white rounded-3xl lg:rounded-2xl p-6 shadow-lg 
                 border border-gray-200 space-y-5`,role:"region","aria-label":`Post by ${e.profiles?.email}`,children:[k.jsxs("div",{className:"flex items-start gap-3",children:[k.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 rounded-full bg-teal-700 text-white flex items-center 
                     justify-center font-bold text-sm`,children:e.profiles?.email?.charAt(0).toUpperCase()}),k.jsxs("div",{className:"flex flex-col",children:[k.jsx("p",{className:"font-semibold text-teal-800 text-sm lg:text-base",children:e.profiles?.email?.split("@")[0]}),k.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),r&&k.jsx("button",{"aria-label":"Delete post",onClick:o=>{o.stopPropagation(),i(e.id)},className:`ml-auto w-10 h-10 flex items-center justify-center rounded-xl
                       text-red-500 hover:text-red-700 text-lg focus-visible:ring-2 
                       focus-visible:ring-red-500`,children:""})]}),k.jsx("div",{className:"prose prose-sm lg:prose-base text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:u2.sanitize(e.content)}}),e.image_url&&k.jsx("img",{src:e.image_url,alt:"",loading:"lazy",className:"rounded-3xl lg:rounded-2xl border border-gray-200 shadow-md"}),k.jsx(y4,{postId:e.id,user:n,isAdmin:r})]})});function y4({postId:t,user:e,isAdmin:n}){const{showToast:r}=ks(),[i,o]=R.useState([]),[l,u]=R.useState("");async function f(){const{data:m,error:y}=await Te.from("comments").select("*, profiles(email)").eq("post_id",t).order("created_at",{ascending:!0});y?r({title:"Failed to load comments",type:"error"}):o(m||[])}R.useEffect(()=>{f()},[]);async function h(m){if(m.preventDefault(),!l.trim())return;const{error:y}=await Te.from("comments").insert({post_id:t,user_id:e.id,content:l});y?r({title:"Failed to post comment",type:"error"}):(u(""),f())}async function p(m){const{error:y}=await Te.from("comments").delete().eq("id",m);y?r({title:"Failed to delete comment",type:"error"}):f()}return k.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[i.map(m=>k.jsxs("div",{className:`
            bg-gray-50 p-3 rounded-3xl lg:rounded-2xl border border-gray-200 
            shadow-sm relative
          `,role:"group","aria-label":`Comment by ${m.profiles?.email}`,children:[k.jsx("p",{className:"text-xs lg:text-sm font-semibold text-teal-800",children:m.profiles?.email?.split("@")[0]}),k.jsx("p",{className:"text-sm lg:text-base text-gray-700",children:m.content}),n&&k.jsx("button",{"aria-label":"Delete comment",onClick:()=>p(m.id),className:`
                absolute top-2 right-3 w-8 h-8 flex items-center justify-center 
                rounded-xl text-red-400 hover:text-red-600 text-xs 
                focus-visible:ring-2 focus-visible:ring-red-500
              `,children:""})]},m.id)),k.jsxs("form",{onSubmit:h,className:"flex gap-2",children:[k.jsx("label",{htmlFor:`comment-input-${t}`,className:"sr-only",children:"Add a comment"}),k.jsx("input",{id:`comment-input-${t}`,className:`flex-1 p-2 rounded-xl lg:rounded-lg border border-gray-300 
                     text-sm lg:text-base shadow-inner focus-visible:ring-2 
                     focus-visible:ring-teal-700`,placeholder:"Write a comment",value:l,onChange:m=>u(m.target.value)}),k.jsx(br,{"aria-label":"Submit comment",className:`bg-teal-700 hover:bg-teal-800 text-white rounded-xl px-4 
                     w-12 h-12 flex items-center justify-center text-lg`,children:""})]})]})}function b4(){const{user:t,profile:e}=Pr(),n=e?.role==="admin",{showToast:r}=ks(),[i,o]=R.useState([]),[l,u]=R.useState(!0),[f,h]=R.useState(!1),[p,m]=R.useState("");async function y(){const{data:w}=await Te.from("questions").select("*, profiles(email)").order("created_at",{ascending:!1});o(w||[]),u(!1)}async function v(w){if(w.preventDefault(),!p.trim())return;const{error:S}=await Te.from("questions").insert({user_id:t.id,title:p});S?r({title:"Could not post question",type:"error"}):(m(""),h(!1),y())}return R.useEffect(()=>{y();const w=Te.channel("questions-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"questions"},async S=>{const{data:E}=await Te.from("questions").select("*, profiles(email)").eq("id",S.new.id).single();E&&o(T=>[E,...T])}).subscribe();return()=>{Te.removeChannel(w)}},[]),k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"flex justify-between items-center px-1",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-100 text-teal-700 rounded-3xl lg:rounded-2xl 
                       flex items-center justify-center shadow-sm`,children:""}),k.jsx("h1",{className:"text-xl lg:text-3xl font-bold text-teal-800",children:"Q & A"})]}),k.jsx(br,{"aria-label":f?"Cancel question form":"Open question form",onClick:()=>h(!f),className:`bg-teal-700 hover:bg-teal-800 text-white px-4 py-2 
                     rounded-xl lg:rounded-lg shadow-md text-xs lg:text-sm 
                     min-h-[44px]`,children:f?"Cancel":"Ask Question"})]}),f&&k.jsxs("form",{onSubmit:v,className:`bg-white p-6 rounded-3xl lg:rounded-2xl border border-gray-200 
                     shadow-md space-y-4 animate-fadeIn`,"aria-labelledby":"ask-question-title",children:[k.jsx("label",{id:"ask-question-title",htmlFor:"question-input",className:"sr-only",children:"Ask your question"}),k.jsx("textarea",{id:"question-input",className:`w-full p-4 rounded-xl border border-gray-300 shadow-inner 
                       text-sm lg:text-base h-24 focus-visible:ring-2 
                       focus-visible:ring-teal-700`,placeholder:"What is your question?",value:p,onChange:w=>m(w.target.value)}),k.jsx(br,{"aria-label":"Submit question",className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4 
                       rounded-xl shadow-lg text-xs lg:text-base`,children:"Submit Question"})]}),l?k.jsx(h4,{}):k.jsx("div",{className:"space-y-4 pb-24",children:i.map(w=>k.jsx(v4,{question:w,user:t,isAdmin:n,onDelete:()=>o(S=>S.filter(E=>E.id!==w.id))},w.id))})]})}function v4({question:t,user:e,isAdmin:n,onDelete:r}){const[i,o]=R.useState(!1),[l,u]=R.useState([]),[f,h]=R.useState(""),{showToast:p}=ks();async function m(){const{data:S}=await Te.from("answers").select("*, profiles(email)").eq("question_id",t.id).order("created_at",{ascending:!0});u(S||[])}async function y(){if(!confirm("Delete this question?"))return;const{error:S}=await Te.from("questions").delete().eq("id",t.id);S?p({title:"Error deleting question",type:"error"}):(r(),p({title:"Question deleted",type:"success"}))}async function v(S){await Te.from("answers").delete().eq("id",S),m()}async function w(S){S.preventDefault(),f.trim()&&(await Te.from("answers").insert({question_id:t.id,user_id:e.id,content:f}),h(""),m())}return R.useEffect(()=>{if(!i)return;const S=Te.channel(`answers-${t.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"answers",filter:`question_id=eq.${t.id}`},async E=>{const{data:T}=await Te.from("answers").select("*, profiles(email)").eq("id",E.new.id).single();T&&u(A=>[...A,T])}).subscribe();return()=>{Te.removeChannel(S)}},[i,t.id]),k.jsxs("div",{className:`bg-white rounded-3xl lg:rounded-2xl border border-gray-200 
                 shadow-md overflow-hidden`,role:"region","aria-labelledby":`question-${t.id}`,children:[k.jsxs("div",{className:"flex items-start p-5 gap-4",children:[k.jsx("div",{id:`question-${t.id}`,className:"flex-1 cursor-pointer",onClick:()=>{o(!i),i||m()},children:k.jsx("h2",{className:"font-semibold text-gray-800 text-sm lg:text-base",children:t.title})}),n&&k.jsx("button",{"aria-label":"Delete question",onClick:S=>{S.stopPropagation(),y()},className:`w-10 h-10 flex items-center justify-center rounded-xl 
                       text-red-500 hover:text-red-700 text-lg 
                       focus-visible:ring-2 focus-visible:ring-red-500`,children:""}),k.jsx("button",{"aria-expanded":i,"aria-controls":`answers-${t.id}`,"aria-label":i?"Collapse answers":"Expand answers",onClick:S=>{S.stopPropagation(),o(!i),i||m()},className:`w-10 h-10 flex items-center justify-center rounded-xl 
                     text-gray-400 hover:text-gray-600 
                     focus-visible:ring-2 focus-visible:ring-teal-500`,children:i?"":""})]}),k.jsxs("div",{className:"px-5 pb-2 text-xs lg:text-sm flex items-center gap-2 text-gray-500",children:[k.jsx("span",{className:`bg-teal-100 text-teal-700 px-2 py-0.5 rounded-md 
                         uppercase font-bold text-[10px] lg:text-xs`,children:"Question"}),k.jsx("span",{children:t.profiles?.email?.split("@")[0]})]}),i&&k.jsxs("div",{id:`answers-${t.id}`,className:"bg-gray-50 p-5 border-t border-gray-200 space-y-4",children:[l.length===0&&k.jsx("p",{className:"text-xs lg:text-sm text-gray-400 italic",children:"No answers yet"}),l.map(S=>k.jsxs("div",{className:`bg-white p-3 rounded-3xl lg:rounded-2xl 
                         border border-gray-200 shadow-sm relative`,role:"group","aria-label":`Answer by ${S.profiles?.email}`,children:[k.jsx("p",{className:"text-sm lg:text-base text-gray-700",children:S.content}),k.jsxs("p",{className:"text-[10px] lg:text-xs text-teal-700 font-bold uppercase mt-1",children:[" ",S.profiles?.email?.split("@")[0]]}),n&&k.jsx("button",{"aria-label":"Delete answer",onClick:E=>{E.stopPropagation(),v(S.id)},className:`absolute top-2 right-3 w-8 h-8 flex items-center 
                             justify-center rounded-xl text-red-400 hover:text-red-600 
                             text-xs focus-visible:ring-2 focus-visible:ring-red-500`,children:""})]},S.id)),k.jsxs("form",{onSubmit:w,className:"flex gap-2",children:[k.jsx("label",{htmlFor:`answer-input-${t.id}`,className:"sr-only",children:"Your answer"}),k.jsx("input",{id:`answer-input-${t.id}`,className:`flex-1 bg-white border border-gray-300 rounded-xl lg:rounded-lg 
                         px-4 py-2 text-sm lg:text-base shadow-inner 
                         focus-visible:ring-2 focus-visible:ring-teal-700`,placeholder:"Write an answer",value:f,onChange:S=>h(S.target.value)}),k.jsx(br,{"aria-label":"Submit answer",className:`bg-teal-700 hover:bg-teal-800 text-white rounded-xl px-4 
                         w-12 h-12 flex items-center justify-center text-lg`,children:""})]})]})]})}function w4(){const{profile:t}=Pr(),e=t?.role==="admin",{showToast:n}=ks(),[r,i]=R.useState([]),[o,l]=R.useState(!0),[u,f]=R.useState(!1),[h,p]=R.useState(""),[m,y]=R.useState(""),[v,w]=R.useState("Guide");async function S(){const{data:A}=await Te.from("resources").select("*").order("created_at",{ascending:!1});i(A||[]),l(!1)}R.useEffect(()=>{S()},[]);async function E(A){if(A.preventDefault(),!e){n({title:"Only admins can add resources",type:"error"});return}if(!h.trim()||!m.trim())return;const{error:C}=await Te.from("resources").insert({title:h,url:m,category:v});C?n({title:"Failed to add resource",type:"error"}):(p(""),y(""),w("Guide"),f(!1),S(),n({title:"Resource added",type:"success"}))}async function T(A){confirm("Delete this resource?")&&(await Te.from("resources").delete().eq("id",A),S())}return k.jsxs("div",{className:"space-y-6",children:[k.jsxs("div",{className:"flex justify-between items-center",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-100 text-teal-700 
                       rounded-3xl lg:rounded-2xl flex items-center justify-center shadow`,children:""}),k.jsx("h1",{className:"text-xl lg:text-3xl font-bold text-teal-800",children:"Library"})]}),e&&k.jsx(br,{"aria-label":u?"Cancel add resource form":"Add new resource",className:`bg-teal-700 hover:bg-teal-800 text-white 
                       px-4 py-2 rounded-xl lg:rounded-lg shadow-md 
                       text-xs lg:text-sm min-h-[44px]`,onClick:()=>f(!u),children:u?"Cancel":"Add"})]}),u&&k.jsxs("form",{onSubmit:E,"aria-labelledby":"add-resource-title",className:`bg-white p-6 rounded-3xl lg:rounded-2xl border border-gray-200 
                     shadow-md space-y-4 animate-fadeIn`,children:[k.jsx("label",{id:"add-resource-title",className:"sr-only",children:"Add a new resource"}),k.jsx("label",{htmlFor:"resource-title",className:"sr-only",children:"Resource Title"}),k.jsx("input",{id:"resource-title",type:"text",placeholder:"Title",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl lg:rounded-lg 
                       shadow-inner text-sm lg:text-base focus-visible:ring-2 
                       focus-visible:ring-teal-700`,value:h,onChange:A=>p(A.target.value)}),k.jsx("label",{htmlFor:"resource-url",className:"sr-only",children:"Resource URL"}),k.jsx("input",{id:"resource-url",type:"text",placeholder:"URL",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl lg:rounded-lg 
                       shadow-inner text-sm lg:text-base focus-visible:ring-2 
                       focus-visible:ring-teal-700`,value:m,onChange:A=>y(A.target.value)}),k.jsx("label",{htmlFor:"resource-category",className:"sr-only",children:"Resource Category"}),k.jsxs("select",{id:"resource-category",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl lg:rounded-lg
                       text-sm lg:text-base bg-white shadow-inner focus-visible:ring-2 
                       focus-visible:ring-teal-700`,value:v,onChange:A=>w(A.target.value),children:[k.jsx("option",{children:"Guide"}),k.jsx("option",{children:"Curriculum"}),k.jsx("option",{children:"Video"})]}),k.jsx(br,{"aria-label":"Submit new resource",className:`w-full bg-teal-700 hover:bg-teal-800 text-white 
                       py-3 lg:py-4 rounded-xl shadow-lg text-xs lg:text-base`,children:"Add Resource"})]}),o?k.jsx(f4,{}):null,k.jsx("div",{className:"space-y-4 pb-24",children:!o&&r.map(A=>k.jsxs("div",{className:`bg-white p-5 rounded-3xl lg:rounded-2xl border border-gray-200 
                       shadow-md flex justify-between items-center`,role:"group","aria-label":`Resource titled ${A.title}`,children:[k.jsxs("a",{href:A.url,target:"_blank",rel:"noopener noreferrer","aria-label":`Open resource: ${A.title}`,className:`flex items-center gap-4 flex-1 hover:underline 
                         focus-visible:ring-2 focus-visible:ring-teal-700 rounded-lg`,children:[k.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-100 text-teal-700 rounded-xl 
                           flex items-center justify-center shadow`,children:""}),k.jsxs("div",{className:"flex flex-col",children:[k.jsx("p",{className:"font-semibold text-gray-800 text-sm lg:text-base",children:A.title}),k.jsx("span",{className:"text-[10px] lg:text-xs uppercase font-bold text-teal-700",children:A.category})]})]}),e&&k.jsx("button",{"aria-label":`Delete resource titled ${A.title}`,onClick:()=>T(A.id),className:`
                  w-10 h-10 flex items-center justify-center rounded-xl 
                  text-red-400 hover:text-red-600 text-base 
                  focus-visible:ring-2 focus-visible:ring-red-500 ml-2
                `,children:""})]},A.id))})]})}function S4(){const{profile:t,loading:e}=Pr(),{showToast:n}=ks(),[r,i]=R.useState([]),[o,l]=R.useState(!0),u=R.useCallback(async()=>{const{data:m,error:y}=await Te.from("profiles").select("*").order("created_at",{ascending:!1});y?n({title:"Failed to load users",description:y.message,type:"error"}):i(m||[]),l(!1)},[n]),f=R.useCallback(async(m,y)=>{const{error:v}=await Te.from("profiles").update({is_approved:y}).eq("id",m);v?n({title:"Error updating educator",description:v.message,type:"error"}):(u(),n({title:y?"Educator Approved":"Educator Restricted",type:"success"}))},[n]);if(R.useEffect(()=>{!e&&t?.role==="admin"&&u()},[e,t?.role]),e)return k.jsx("div",{className:"text-center p-10",children:"Loading"});if(!t||t.role!=="admin")return k.jsx(yc,{to:"/feed",replace:!0});const h=r.filter(m=>!m.is_approved),p=r.filter(m=>m.is_approved);return k.jsxs("div",{className:"space-y-10",children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-100 text-teal-700
                     rounded-3xl lg:rounded-2xl flex items-center justify-center shadow`,children:""}),k.jsx("h1",{className:"text-xl lg:text-3xl font-bold text-teal-800",children:"Admin Panel"})]}),o&&k.jsx("p",{className:"text-center text-gray-400",children:"Loading educators"}),!o&&k.jsxs("section",{"aria-labelledby":"pending-title",className:"space-y-4",children:[k.jsxs("h2",{id:"pending-title",className:`text-xs lg:text-sm uppercase tracking-widest font-bold text-amber-600
                       flex items-center gap-2`,children:[" Pending Approval (",h.length,")"]}),h.length===0&&k.jsx("p",{className:"text-sm lg:text-base text-gray-500 italic pl-1",children:"No pending educators."}),h.map(m=>k.jsxs("div",{role:"group","aria-label":`Pending educator ${m.email}`,className:`bg-white p-5 rounded-3xl lg:rounded-2xl border border-amber-200
                         shadow-md space-y-3`,children:[k.jsx("p",{className:"font-semibold text-gray-800 text-sm lg:text-base truncate",children:m.email}),k.jsx(br,{"aria-label":`Approve ${m.email}`,className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4
                           rounded-xl shadow-md text-xs lg:text-sm uppercase font-bold`,onClick:()=>f(m.id,!0),children:"Approve Educator"})]},m.id))]}),!o&&k.jsxs("section",{"aria-labelledby":"active-title",className:"space-y-4 pb-24",children:[k.jsxs("h2",{id:"active-title",className:`text-xs lg:text-sm uppercase tracking-widest font-bold text-teal-600
                       flex items-center gap-2`,children:[" Active Educators (",p.length,")"]}),p.map(m=>k.jsxs("div",{role:"group","aria-label":`Active educator ${m.email}`,className:`bg-white p-5 rounded-3xl lg:rounded-2xl border border-gray-200
                         shadow-md flex items-center justify-between`,children:[k.jsxs("div",{className:"flex flex-col pr-3 overflow-hidden",children:[k.jsx("p",{className:"font-semibold text-gray-800 text-sm lg:text-base truncate",children:m.email}),k.jsx("p",{className:"text-[10px] lg:text-xs text-teal-700 uppercase font-bold",children:m.role})]}),k.jsx("button",{"aria-label":`Restrict educator ${m.email}`,onClick:()=>f(m.id,!1),className:`
                  w-10 h-10 flex items-center justify-center rounded-xl
                  text-red-400 hover:text-red-600 text-lg
                  focus-visible:ring-2 focus-visible:ring-red-500
                `,children:""})]},m.id))]})]})}function x4({navigate:t,isAdmin:e}){const{profile:n}=Pr(),r=[{label:"Feed",path:"/feed",icon:""},{label:"Library",path:"/library",icon:""},{label:"Q&A",path:"/qa",icon:""}];return e&&r.push({label:"Admin",path:"/admin",icon:""}),k.jsxs("nav",{"aria-label":"Sidebar navigation",className:`w-64 bg-white border-r border-gray-200 h-screen p-6 
                 flex flex-col gap-6 shadow-xl`,children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-700 text-white rounded-full 
                     flex items-center justify-center font-bold`,children:n?.email?.charAt(0).toUpperCase()}),k.jsxs("div",{children:[k.jsx("p",{className:"font-bold text-gray-800 text-sm lg:text-base",children:n?.email?.split("@")[0]}),k.jsx("p",{className:"text-xs lg:text-sm text-gray-500 uppercase tracking-wide",children:e?"Admin":"Educator"})]})]}),k.jsx("img",{src:"https://aaiovfryjlcdijdyknik.supabase.co/storage/v1/object/public/branding/projectlogo.png",alt:"Growing Minds logo",className:"w-28 mx-auto mt-4 opacity-95 object-contain"}),k.jsx("ul",{className:"flex flex-col gap-1 mt-6",children:r.map(i=>k.jsx("li",{children:k.jsxs("button",{onClick:()=>t(i.path),"aria-label":i.label,className:`
                flex items-center gap-3 w-full text-left
                p-3 rounded-2xl hover:bg-gray-100 
                focus-visible:ring-2 focus-visible:ring-teal-500 focus-visible:ring-offset-2
                min-h-[44px]
              `,children:[k.jsx("span",{className:"text-lg lg:text-xl",children:i.icon}),k.jsx("span",{className:"font-medium text-sm lg:text-base",children:i.label})]})},i.path))}),k.jsx("div",{className:"mt-auto pt-6 border-t",children:k.jsxs("button",{"aria-label":"Logout",onClick:()=>Te.auth.signOut(),className:`
            flex items-center gap-3 p-3 rounded-xl text-red-600
            hover:bg-red-100 
            focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2
            min-h-[44px]
          `,children:[k.jsx("span",{className:"text-lg lg:text-xl",children:""}),k.jsx("span",{className:"font-medium text-sm lg:text-base",children:"Logout"})]})})]})}function E4(){const[t,e]=R.useState(()=>typeof window<"u"?window.innerWidth<768:!1);return R.useEffect(()=>{e(window.innerWidth<768);function n(){e(window.innerWidth<768)}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function T4(){const{user:t}=Pr(),e=Uc(),[n,r]=R.useState([]),[i,o]=R.useState(!1),[l,u]=R.useState(0);async function f(){if(t)try{const{data:y,error:v}=await Te.from("notifications").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(10);if(v){console.error("Failed to load notifications:",v);return}r(y||[]),u((y||[]).filter(w=>!w.read).length)}catch(y){console.error("Notification load exception:",y)}}async function h(y){await Te.from("notifications").update({read:!0}).eq("id",y),f()}async function p(){await Te.from("notifications").update({read:!0}).eq("user_id",t.id).eq("read",!1),f()}function m(y){h(y.id),o(!1),y.related_type==="post"?e("/feed"):y.related_type==="question"&&e("/qa")}return R.useEffect(()=>{if(!t?.id)return;f();let y;try{y=Te.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${t.id}`},()=>{f()}).subscribe()}catch(v){console.error("Failed to subscribe to notifications:",v)}return()=>{if(y)try{Te.removeChannel(y)}catch(v){console.error("Failed to unsubscribe:",v)}}},[t?.id]),k.jsxs("div",{className:"relative",children:[k.jsxs("button",{onClick:()=>o(!i),className:`relative w-10 h-10 flex items-center justify-center rounded-xl
                   text-white hover:bg-white/10 transition-colors`,"aria-label":"View notifications",children:[k.jsx("span",{className:"text-2xl",children:""}),l>0&&k.jsx("span",{className:`absolute top-0 right-0 w-5 h-5 bg-red-500 text-white
                         text-[10px] font-bold rounded-full flex items-center justify-center`,children:l>9?"9+":l})]}),i&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),k.jsxs("div",{className:`absolute right-0 top-12 w-80 bg-white rounded-xl shadow-xl
                         border border-gray-200 z-50 max-h-96 overflow-hidden`,children:[k.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[k.jsx("h3",{className:"font-semibold text-gray-800",children:"Notifications"}),l>0&&k.jsx("button",{onClick:p,className:"text-xs text-teal-700 hover:text-teal-900",children:"Mark all read"})]}),k.jsx("div",{className:"overflow-y-auto max-h-80",children:n.length===0?k.jsx("div",{className:"p-8 text-center text-gray-400 text-sm",children:"No notifications yet"}):n.map(y=>k.jsxs("button",{onClick:()=>m(y),className:`w-full text-left p-4 border-b border-gray-100
                               hover:bg-gray-50 transition-colors ${y.read?"":"bg-teal-50"}`,children:[k.jsx("p",{className:"text-sm text-gray-800 line-clamp-2",children:y.message}),k.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(y.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]},y.id))})]})]})]})}function _4(){const t=Uc(),e=Ai(),{profile:n}=Pr(),r=E4();if(!n)return k.jsx("div",{className:"w-full min-h-screen bg-gradient-to-b from-teal-900/20 via-teal-50 to-gray-100 flex",children:k.jsxs("div",{className:"flex-1 max-w-3xl mx-auto flex flex-col",children:[k.jsx("div",{className:"bg-gradient-to-br from-teal-800 to-teal-900 p-6 rounded-b-3xl lg:rounded-b-2xl",children:k.jsx("div",{className:"h-7 w-40 bg-white/20 rounded-xl animate-pulse mx-auto"})}),k.jsx("div",{className:"flex-1 px-5 py-6 space-y-6",children:[1,2,3].map(l=>k.jsxs("div",{className:"bg-white rounded-3xl lg:rounded-2xl p-6 shadow-lg border border-gray-200 space-y-4",children:[k.jsxs("div",{className:"flex gap-3 items-center",children:[k.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 animate-pulse flex-shrink-0"}),k.jsxs("div",{className:"space-y-2 flex-1",children:[k.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded-xl animate-pulse"}),k.jsx("div",{className:"h-3 w-20 bg-gray-200 rounded-xl animate-pulse"})]})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("div",{className:"h-4 w-full bg-gray-200 rounded-xl animate-pulse"}),k.jsx("div",{className:"h-4 w-5/6 bg-gray-200 rounded-xl animate-pulse"})]})]},l))})]})});const i=n.role==="admin",o=[{path:"/feed",label:"Feed",icon:""},{path:"/library",label:"Library",icon:""},{path:"/qa",label:"Q&A",icon:""}];return i&&o.push({path:"/admin",label:"Admin",icon:""}),k.jsxs("div",{className:`w-full min-h-screen bg-gradient-to-b 
                    from-teal-900/20 via-teal-50 to-gray-100 flex`,children:[k.jsx("a",{href:"#main-content",className:`sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 
                   focus:bg-white focus:text-teal-700 focus:p-2 focus:rounded-lg shadow`,children:"Skip to main content"}),!r&&k.jsx(x4,{navigate:t,isAdmin:i}),k.jsxs("div",{className:"flex-1 max-w-3xl mx-auto flex flex-col",children:[k.jsx("header",{className:`bg-gradient-to-br from-teal-800 to-teal-900 text-white p-6 
                     shadow-xl rounded-b-3xl lg:rounded-b-2xl`,children:k.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[k.jsxs("div",{className:"flex justify-between items-center w-full",children:[k.jsx("h1",{className:"text-xl lg:text-2xl font-bold tracking-tight",children:"Growing Minds"}),k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx(T4,{}),k.jsx("span",{className:"px-3 py-1 text-xs lg:text-sm bg-white/20 rounded-full uppercase",children:i?"ADMIN":"EDUCATOR"})]})]}),r&&k.jsx("img",{src:"https://aaiovfryjlcdijdyknik.supabase.co/storage/v1/object/public/branding/projectlogo.png",alt:"Growing Minds logo",className:"w-28 mx-auto mt-4 opacity-95 object-contain"})]})}),k.jsx("main",{id:"main-content",className:`flex-1 overflow-y-auto px-5 py-6 ${r?"mb-28":"lg:py-10"}`,children:k.jsx(TR,{})}),r&&k.jsx("nav",{"aria-label":"Primary navigation",className:`fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-md 
                       px-4 pb-4 z-50`,children:k.jsx("div",{className:`bg-white shadow-xl border border-gray-200 
                            rounded-3xl p-4 flex justify-around`,children:o.map(l=>{const u=e.pathname===l.path;return k.jsxs("button",{onClick:()=>t(l.path),"aria-label":l.label,"aria-current":u?"page":void 0,className:`
                      flex flex-col items-center gap-1 min-h-[44px]
                      transition px-2 py-1
                      ${u?"text-teal-700 scale-110":"text-gray-400"}
                    `,children:[k.jsx("span",{className:"text-xl",children:l.icon}),k.jsx("span",{className:"text-[10px] font-semibold uppercase",children:l.label})]},l.path)})})})]})]})}class k4 extends R.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n.componentStack)}handleReload=()=>{this.setState({hasError:!1,error:null},()=>{window.location.reload()})};render(){return this.state.hasError?k.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:k.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-gray-200 p-10 max-w-md w-full text-center space-y-6",children:[k.jsx("div",{className:"text-5xl","aria-hidden":"true",children:""}),k.jsx("h1",{className:"text-2xl font-bold text-teal-800",children:"Something went wrong"}),k.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"GrowingMinds hit an unexpected error. Your data is safe  this is just a temporary glitch. Try reloading the page."}),this.state.error&&k.jsxs("details",{className:"text-left bg-gray-50 rounded-xl p-4 text-xs text-gray-500 border border-gray-200",children:[k.jsx("summary",{className:"cursor-pointer font-semibold text-gray-600 mb-1",children:"Error details"}),k.jsx("pre",{className:"whitespace-pre-wrap break-words mt-2",children:this.state.error.message})]}),k.jsx("button",{onClick:this.handleReload,className:`w-full bg-teal-700 hover:bg-teal-800 text-white font-semibold
                       py-3 rounded-xl shadow-lg transition-colors text-sm`,children:"Reload GrowingMinds"})]})}):this.props.children}}function A4({children:t}){const{user:e,profile:n,loading:r}=Pr();return r?k.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-800 to-teal-900 flex items-center justify-center",children:k.jsx("div",{className:"text-white text-xl font-semibold",children:"Loading..."})}):e?n&&n.role!=="admin"&&n.is_approved!==!0?k.jsx(yc,{to:"/pending",replace:!0}):t:k.jsx(yc,{to:"/auth",replace:!0})}function C4({children:t}){const{user:e,loading:n}=Pr();return n?null:e?k.jsx(yc,{to:"/",replace:!0}):t}kO.createRoot(document.getElementById("root")).render(k.jsx(jr.StrictMode,{children:k.jsx(k4,{children:k.jsx(YR,{basename:"/",children:k.jsx(ID,{children:k.jsx(PD,{children:k.jsxs(kR,{children:[k.jsx(ur,{path:"/auth",element:k.jsx(C4,{children:k.jsx(BD,{})})}),k.jsx(ur,{path:"/pending",element:k.jsx(HD,{})}),k.jsx(ur,{path:"/reset-password",element:k.jsx($D,{})}),k.jsxs(ur,{path:"/",element:k.jsx(A4,{children:k.jsx(_4,{})}),children:[k.jsx(ur,{index:!0,element:k.jsx(n1,{})}),k.jsx(ur,{path:"feed",element:k.jsx(n1,{})}),k.jsx(ur,{path:"library",element:k.jsx(w4,{})}),k.jsx(ur,{path:"qa",element:k.jsx(b4,{})}),k.jsx(ur,{path:"admin",element:k.jsx(S4,{})})]}),k.jsx(ur,{path:"*",element:k.jsx(yc,{to:"/",replace:!0})})]})})})})})}));
