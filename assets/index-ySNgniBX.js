(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function yg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rp={exports:{}},Ga={};var _w;function DA(){if(_w)return Ga;_w=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var l=null;if(o!==void 0&&(l=""+o),i.key!==void 0&&(l=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:o}}return Ga.Fragment=e,Ga.jsx=n,Ga.jsxs=n,Ga}var Aw;function jA(){return Aw||(Aw=1,Rp.exports=DA()),Rp.exports}var O=jA(),Mp={exports:{}},pe={};var Ow;function LA(){if(Ow)return pe;Ow=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function T(M,F,Z){this.props=M,this.context=F,this.refs=E,this.updater=Z||w}T.prototype.isReactComponent={},T.prototype.setState=function(M,F){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,F,"setState")},T.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=T.prototype;function _(M,F,Z){this.props=M,this.context=F,this.refs=E,this.updater=Z||w}var j=_.prototype=new C;j.constructor=_,S(j,T.prototype),j.isPureReactComponent=!0;var L=Array.isArray;function $(){}var U={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function X(M,F,Z){var ne=Z.ref;return{$$typeof:t,type:M,key:F,ref:ne!==void 0?ne:null,props:Z}}function re(M,F){return X(M.type,F,M.props)}function Ce(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function we(M){var F={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Z){return F[Z]})}var je=/\/+/g;function ye(M,F){return typeof M=="object"&&M!==null&&M.key!=null?we(""+M.key):F.toString(36)}function Se(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then($,$):(M.status="pending",M.then(function(F){M.status==="pending"&&(M.status="fulfilled",M.value=F)},function(F){M.status==="pending"&&(M.status="rejected",M.reason=F)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function P(M,F,Z,ne,me){var Ee=typeof M;(Ee==="undefined"||Ee==="boolean")&&(M=null);var De=!1;if(M===null)De=!0;else switch(Ee){case"bigint":case"string":case"number":De=!0;break;case"object":switch(M.$$typeof){case t:case e:De=!0;break;case p:return De=M._init,P(De(M._payload),F,Z,ne,me)}}if(De)return me=me(M),De=ne===""?"."+ye(M,0):ne,L(me)?(Z="",De!=null&&(Z=De.replace(je,"$&/")+"/"),P(me,F,Z,"",function(ea){return ea})):me!=null&&(Ce(me)&&(me=re(me,Z+(me.key==null||M&&M.key===me.key?"":(""+me.key).replace(je,"$&/")+"/")+De)),F.push(me)),1;De=0;var It=ne===""?".":ne+":";if(L(M))for(var ot=0;ot<M.length;ot++)ne=M[ot],Ee=It+ye(ne,ot),De+=P(ne,F,Z,Ee,me);else if(ot=v(M),typeof ot=="function")for(M=ot.call(M),ot=0;!(ne=M.next()).done;)ne=ne.value,Ee=It+ye(ne,ot++),De+=P(ne,F,Z,Ee,me);else if(Ee==="object"){if(typeof M.then=="function")return P(Se(M),F,Z,ne,me);throw F=String(M),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return De}function J(M,F,Z){if(M==null)return M;var ne=[],me=0;return P(M,ne,"","",function(Ee){return F.call(Z,Ee,me++)}),ne}function te(M){if(M._status===-1){var F=M._result;F=F(),F.then(function(Z){(M._status===0||M._status===-1)&&(M._status=1,M._result=Z)},function(Z){(M._status===0||M._status===-1)&&(M._status=2,M._result=Z)}),M._status===-1&&(M._status=0,M._result=F)}if(M._status===1)return M._result.default;throw M._result}var xe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Le={map:J,forEach:function(M,F,Z){J(M,function(){F.apply(this,arguments)},Z)},count:function(M){var F=0;return J(M,function(){F++}),F},toArray:function(M){return J(M,function(F){return F})||[]},only:function(M){if(!Ce(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return pe.Activity=m,pe.Children=Le,pe.Component=T,pe.Fragment=n,pe.Profiler=i,pe.PureComponent=_,pe.StrictMode=r,pe.Suspense=f,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,pe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return U.H.useMemoCache(M)}},pe.cache=function(M){return function(){return M.apply(null,arguments)}},pe.cacheSignal=function(){return null},pe.cloneElement=function(M,F,Z){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ne=S({},M.props),me=M.key;if(F!=null)for(Ee in F.key!==void 0&&(me=""+F.key),F)!Y.call(F,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&F.ref===void 0||(ne[Ee]=F[Ee]);var Ee=arguments.length-2;if(Ee===1)ne.children=Z;else if(1<Ee){for(var De=Array(Ee),It=0;It<Ee;It++)De[It]=arguments[It+2];ne.children=De}return X(M.type,me,ne)},pe.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},pe.createElement=function(M,F,Z){var ne,me={},Ee=null;if(F!=null)for(ne in F.key!==void 0&&(Ee=""+F.key),F)Y.call(F,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(me[ne]=F[ne]);var De=arguments.length-2;if(De===1)me.children=Z;else if(1<De){for(var It=Array(De),ot=0;ot<De;ot++)It[ot]=arguments[ot+2];me.children=It}if(M&&M.defaultProps)for(ne in De=M.defaultProps,De)me[ne]===void 0&&(me[ne]=De[ne]);return X(M,Ee,me)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(M){return{$$typeof:u,render:M}},pe.isValidElement=Ce,pe.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:te}},pe.memo=function(M,F){return{$$typeof:h,type:M,compare:F===void 0?null:F}},pe.startTransition=function(M){var F=U.T,Z={};U.T=Z;try{var ne=M(),me=U.S;me!==null&&me(Z,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then($,xe)}catch(Ee){xe(Ee)}finally{F!==null&&Z.types!==null&&(F.types=Z.types),U.T=F}},pe.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},pe.use=function(M){return U.H.use(M)},pe.useActionState=function(M,F,Z){return U.H.useActionState(M,F,Z)},pe.useCallback=function(M,F){return U.H.useCallback(M,F)},pe.useContext=function(M){return U.H.useContext(M)},pe.useDebugValue=function(){},pe.useDeferredValue=function(M,F){return U.H.useDeferredValue(M,F)},pe.useEffect=function(M,F){return U.H.useEffect(M,F)},pe.useEffectEvent=function(M){return U.H.useEffectEvent(M)},pe.useId=function(){return U.H.useId()},pe.useImperativeHandle=function(M,F,Z){return U.H.useImperativeHandle(M,F,Z)},pe.useInsertionEffect=function(M,F){return U.H.useInsertionEffect(M,F)},pe.useLayoutEffect=function(M,F){return U.H.useLayoutEffect(M,F)},pe.useMemo=function(M,F){return U.H.useMemo(M,F)},pe.useOptimistic=function(M,F){return U.H.useOptimistic(M,F)},pe.useReducer=function(M,F,Z){return U.H.useReducer(M,F,Z)},pe.useRef=function(M){return U.H.useRef(M)},pe.useState=function(M){return U.H.useState(M)},pe.useSyncExternalStore=function(M,F,Z){return U.H.useSyncExternalStore(M,F,Z)},pe.useTransition=function(){return U.H.useTransition()},pe.version="19.2.4",pe}var Rw;function Bl(){return Rw||(Rw=1,Mp.exports=LA()),Mp.exports}var N=Bl();const sr=yg(N);var Np={exports:{}},Ja={},Dp={exports:{}},jp={};var Mw;function zA(){return Mw||(Mw=1,(function(t){function e(P,J){var te=P.length;P.push(J);e:for(;0<te;){var xe=te-1>>>1,Le=P[xe];if(0<i(Le,J))P[xe]=J,P[te]=Le,te=xe;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var J=P[0],te=P.pop();if(te!==J){P[0]=te;e:for(var xe=0,Le=P.length,M=Le>>>1;xe<M;){var F=2*(xe+1)-1,Z=P[F],ne=F+1,me=P[ne];if(0>i(Z,te))ne<Le&&0>i(me,Z)?(P[xe]=me,P[ne]=te,xe=ne):(P[xe]=Z,P[F]=te,xe=F);else if(ne<Le&&0>i(me,te))P[xe]=me,P[ne]=te,xe=ne;else break e}}return J}function i(P,J){var te=P.sortIndex-J.sortIndex;return te!==0?te:P.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var f=[],h=[],p=1,m=null,b=3,v=!1,w=!1,S=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function j(P){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=P)r(h),J.sortIndex=J.expirationTime,e(f,J);else break;J=n(h)}}function L(P){if(S=!1,j(P),!w)if(n(f)!==null)w=!0,$||($=!0,we());else{var J=n(h);J!==null&&Se(L,J.startTime-P)}}var $=!1,U=-1,Y=5,X=-1;function re(){return E?!0:!(t.unstable_now()-X<Y)}function Ce(){if(E=!1,$){var P=t.unstable_now();X=P;var J=!0;try{e:{w=!1,S&&(S=!1,C(U),U=-1),v=!0;var te=b;try{t:{for(j(P),m=n(f);m!==null&&!(m.expirationTime>P&&re());){var xe=m.callback;if(typeof xe=="function"){m.callback=null,b=m.priorityLevel;var Le=xe(m.expirationTime<=P);if(P=t.unstable_now(),typeof Le=="function"){m.callback=Le,j(P),J=!0;break t}m===n(f)&&r(f),j(P)}else r(f);m=n(f)}if(m!==null)J=!0;else{var M=n(h);M!==null&&Se(L,M.startTime-P),J=!1}}break e}finally{m=null,b=te,v=!1}J=void 0}}finally{J?we():$=!1}}}var we;if(typeof _=="function")we=function(){_(Ce)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,ye=je.port2;je.port1.onmessage=Ce,we=function(){ye.postMessage(null)}}else we=function(){T(Ce,0)};function Se(P,J){U=T(function(){P(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(P){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var te=b;b=J;try{return P()}finally{b=te}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(P,J){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var te=b;b=P;try{return J()}finally{b=te}},t.unstable_scheduleCallback=function(P,J,te){var xe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?xe+te:xe):te=xe,P){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=te+Le,P={id:p++,callback:J,priorityLevel:P,startTime:te,expirationTime:Le,sortIndex:-1},te>xe?(P.sortIndex=te,e(h,P),n(f)===null&&P===n(h)&&(S?(C(U),U=-1):S=!0,Se(L,te-xe))):(P.sortIndex=Le,e(f,P),w||v||(w=!0,$||($=!0,we()))),P},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(P){var J=b;return function(){var te=b;b=J;try{return P.apply(this,arguments)}finally{b=te}}}})(jp)),jp}var Nw;function BA(){return Nw||(Nw=1,Dp.exports=zA()),Dp.exports}var Lp={exports:{}},zt={};var Dw;function UA(){if(Dw)return zt;Dw=1;var t=Bl();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:f,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,zt.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,p)},zt.flushSync=function(f){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=h,r.p=p,r.d.f()}},zt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},zt.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},zt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:v}):p==="script"&&r.d.X(f,{crossOrigin:m,integrity:b,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},zt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},zt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},zt.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},zt.requestFormReset=function(f){r.d.r(f)},zt.unstable_batchedUpdates=function(f,h){return f(h)},zt.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},zt.useFormStatus=function(){return l.H.useHostTransitionStatus()},zt.version="19.2.4",zt}var jw;function c1(){if(jw)return Lp.exports;jw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Lp.exports=UA(),Lp.exports}var Lw;function IA(){if(Lw)return Ja;Lw=1;var t=BA(),e=Bl(),n=c1();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(r(188))}function h(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var c=s,d=a;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return f(g),s;if(y===d)return f(g),a;y=y.sibling}throw Error(r(188))}if(c.return!==d.return)c=g,d=y;else{for(var x=!1,k=g.child;k;){if(k===c){x=!0,c=g,d=y;break}if(k===d){x=!0,d=g,c=y;break}k=k.sibling}if(!x){for(k=y.child;k;){if(k===c){x=!0,c=y,d=g;break}if(k===d){x=!0,d=y,c=g;break}k=k.sibling}if(!x)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),_=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function we(s){return s===null||typeof s!="object"?null:(s=Ce&&s[Ce]||s["@@iterator"],typeof s=="function"?s:null)}var je=Symbol.for("react.client.reference");function ye(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===je?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case $:return"SuspenseList";case X:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case _:return s.displayName||"Context";case C:return(s._context.displayName||"Context")+".Consumer";case j:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case U:return a=s.displayName||null,a!==null?a:ye(s.type)||"Memo";case Y:a=s._payload,s=s._init;try{return ye(s(a))}catch{}}return null}var Se=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},xe=[],Le=-1;function M(s){return{current:s}}function F(s){0>Le||(s.current=xe[Le],xe[Le]=null,Le--)}function Z(s,a){Le++,xe[Le]=s.current,s.current=a}var ne=M(null),me=M(null),Ee=M(null),De=M(null);function It(s,a){switch(Z(Ee,a),Z(me,s),Z(ne,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Yv(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Yv(a),s=Qv(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}F(ne),Z(ne,s)}function ot(){F(ne),F(me),F(Ee)}function ea(s){s.memoizedState!==null&&Z(De,s);var a=ne.current,c=Qv(a,s.type);a!==c&&(Z(me,s),Z(ne,c))}function Fl(s){me.current===s&&(F(ne),F(me)),De.current===s&&(F(De),qa._currentValue=te)}var dd,Cy;function Hi(s){if(dd===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);dd=a&&a[1]||"",Cy=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dd+s+Cy}var hd=!1;function pd(s,a){if(!s||hd)return"";hd=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(H){var I=H}Reflect.construct(s,[],K)}else{try{K.call()}catch(H){I=H}s.call(K.prototype)}}else{try{throw Error()}catch(H){I=H}(K=s())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(H){if(H&&I&&typeof H.stack=="string")return[H.stack,I.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),x=y[0],k=y[1];if(x&&k){var A=x.split(`
`),B=k.split(`
`);for(g=d=0;d<A.length&&!A[d].includes("DetermineComponentFrameRoot");)d++;for(;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;if(d===A.length||g===B.length)for(d=A.length-1,g=B.length-1;1<=d&&0<=g&&A[d]!==B[g];)g--;for(;1<=d&&0<=g;d--,g--)if(A[d]!==B[g]){if(d!==1||g!==1)do if(d--,g--,0>g||A[d]!==B[g]){var q=`
`+A[d].replace(" at new "," at ");return s.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",s.displayName)),q}while(1<=d&&0<=g);break}}}finally{hd=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Hi(c):""}function uC(s,a){switch(s.tag){case 26:case 27:case 5:return Hi(s.type);case 16:return Hi("Lazy");case 13:return s.child!==a&&a!==null?Hi("Suspense Fallback"):Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 15:return pd(s.type,!1);case 11:return pd(s.type.render,!1);case 1:return pd(s.type,!0);case 31:return Hi("Activity");default:return""}}function _y(s){try{var a="",c=null;do a+=uC(s,c),c=s,s=s.return;while(s);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var md=Object.prototype.hasOwnProperty,gd=t.unstable_scheduleCallback,yd=t.unstable_cancelCallback,fC=t.unstable_shouldYield,dC=t.unstable_requestPaint,en=t.unstable_now,hC=t.unstable_getCurrentPriorityLevel,Ay=t.unstable_ImmediatePriority,Oy=t.unstable_UserBlockingPriority,Gl=t.unstable_NormalPriority,pC=t.unstable_LowPriority,Ry=t.unstable_IdlePriority,mC=t.log,gC=t.unstable_setDisableYieldValue,ta=null,tn=null;function Jr(s){if(typeof mC=="function"&&gC(s),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(ta,s)}catch{}}var nn=Math.clz32?Math.clz32:vC,yC=Math.log,bC=Math.LN2;function vC(s){return s>>>=0,s===0?32:31-(yC(s)/bC|0)|0}var Jl=256,Wl=262144,Yl=4194304;function qi(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ql(s,a,c){var d=s.pendingLanes;if(d===0)return 0;var g=0,y=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var k=d&134217727;return k!==0?(d=k&~y,d!==0?g=qi(d):(x&=k,x!==0?g=qi(x):c||(c=k&~s,c!==0&&(g=qi(c))))):(k=d&~y,k!==0?g=qi(k):x!==0?g=qi(x):c||(c=d&~s,c!==0&&(g=qi(c)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:g}function na(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function wC(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function My(){var s=Yl;return Yl<<=1,(Yl&62914560)===0&&(Yl=4194304),s}function bd(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function ra(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function SC(s,a,c,d,g,y){var x=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var k=s.entanglements,A=s.expirationTimes,B=s.hiddenUpdates;for(c=x&~c;0<c;){var q=31-nn(c),K=1<<q;k[q]=0,A[q]=-1;var I=B[q];if(I!==null)for(B[q]=null,q=0;q<I.length;q++){var H=I[q];H!==null&&(H.lane&=-536870913)}c&=~K}d!==0&&Ny(s,d,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(x&~a))}function Ny(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-nn(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|c&261930}function Dy(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var d=31-nn(c),g=1<<d;g&a|s[d]&a&&(s[d]|=a),c&=~g}}function jy(s,a){var c=a&-a;return c=(c&42)!==0?1:vd(c),(c&(s.suspendedLanes|a))!==0?0:c}function vd(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function wd(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ly(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:ww(s.type))}function zy(s,a){var c=J.p;try{return J.p=s,a()}finally{J.p=c}}var Wr=Math.random().toString(36).slice(2),kt="__reactFiber$"+Wr,Kt="__reactProps$"+Wr,js="__reactContainer$"+Wr,Sd="__reactEvents$"+Wr,xC="__reactListeners$"+Wr,EC="__reactHandles$"+Wr,By="__reactResources$"+Wr,ia="__reactMarker$"+Wr;function xd(s){delete s[kt],delete s[Kt],delete s[Sd],delete s[xC],delete s[EC]}function Ls(s){var a=s[kt];if(a)return a;for(var c=s.parentNode;c;){if(a=c[js]||c[kt]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=iw(s);s!==null;){if(c=s[kt])return c;s=iw(s)}return a}s=c,c=s.parentNode}return null}function zs(s){if(s=s[kt]||s[js]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function sa(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function Bs(s){var a=s[By];return a||(a=s[By]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function vt(s){s[ia]=!0}var Uy=new Set,Iy={};function Vi(s,a){Us(s,a),Us(s+"Capture",a)}function Us(s,a){for(Iy[s]=a,s=0;s<a.length;s++)Uy.add(a[s])}var TC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Py={},$y={};function kC(s){return md.call($y,s)?!0:md.call(Py,s)?!1:TC.test(s)?$y[s]=!0:(Py[s]=!0,!1)}function Xl(s,a,c){if(kC(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function Zl(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function dr(s,a,c,d){if(d===null)s.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+d)}}function bn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Hy(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function CC(s,a,c){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(x){c=""+x,y.call(this,x)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Ed(s){if(!s._valueTracker){var a=Hy(s)?"checked":"value";s._valueTracker=CC(s,a,""+s[a])}}function qy(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),d="";return s&&(d=Hy(s)?s.checked?"true":"false":s.value),s=d,s!==c?(a.setValue(s),!0):!1}function ec(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var _C=/[\n"\\]/g;function vn(s){return s.replace(_C,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Td(s,a,c,d,g,y,x,k){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),a!=null?x==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+bn(a)):s.value!==""+bn(a)&&(s.value=""+bn(a)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),a!=null?kd(s,x,bn(a)):c!=null?kd(s,x,bn(c)):d!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.name=""+bn(k):s.removeAttribute("name")}function Vy(s,a,c,d,g,y,x,k){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){Ed(s);return}c=c!=null?""+bn(c):"",a=a!=null?""+bn(a):c,k||a===s.value||(s.value=a),s.defaultValue=a}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=k?s.checked:!!d,s.defaultChecked=!!d,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),Ed(s)}function kd(s,a,c){a==="number"&&ec(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Is(s,a,c,d){if(s=s.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=a.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&d&&(s[c].defaultSelected=!0)}else{for(c=""+bn(c),a=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Ky(s,a,c){if(a!=null&&(a=""+bn(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+bn(c):""}function Fy(s,a,c,d){if(a==null){if(d!=null){if(c!=null)throw Error(r(92));if(Se(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),a=c}c=bn(a),s.defaultValue=c,d=s.textContent,d===c&&d!==""&&d!==null&&(s.value=d),Ed(s)}function Ps(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var AC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gy(s,a,c){var d=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,c):typeof c!="number"||c===0||AC.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function Jy(s,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var g in a)d=a[g],a.hasOwnProperty(g)&&c[g]!==d&&Gy(s,g,d)}else for(var y in a)a.hasOwnProperty(y)&&Gy(s,y,a[y])}function Cd(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),RC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tc(s){return RC.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function hr(){}var _d=null;function Ad(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $s=null,Hs=null;function Wy(s){var a=zs(s);if(a&&(s=a.stateNode)){var c=s[Kt]||null;e:switch(s=a.stateNode,a.type){case"input":if(Td(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+vn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var d=c[a];if(d!==s&&d.form===s.form){var g=d[Kt]||null;if(!g)throw Error(r(90));Td(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)d=c[a],d.form===s.form&&qy(d)}break e;case"textarea":Ky(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Is(s,!!c.multiple,a,!1)}}}var Od=!1;function Yy(s,a,c){if(Od)return s(a,c);Od=!0;try{var d=s(a);return d}finally{if(Od=!1,($s!==null||Hs!==null)&&(Hc(),$s&&(a=$s,s=Hs,Hs=$s=null,Wy(a),s)))for(a=0;a<s.length;a++)Wy(s[a])}}function oa(s,a){var c=s.stateNode;if(c===null)return null;var d=c[Kt]||null;if(d===null)return null;c=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rd=!1;if(pr)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){Rd=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{Rd=!1}var Yr=null,Md=null,nc=null;function Qy(){if(nc)return nc;var s,a=Md,c=a.length,d,g="value"in Yr?Yr.value:Yr.textContent,y=g.length;for(s=0;s<c&&a[s]===g[s];s++);var x=c-s;for(d=1;d<=x&&a[c-d]===g[y-d];d++);return nc=g.slice(s,1<d?1-d:void 0)}function rc(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ic(){return!0}function Xy(){return!1}function Ft(s){function a(c,d,g,y,x){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(c=s[k],this[k]=c?c(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ic:Xy,this.isPropagationStopped=Xy,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),a}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sc=Ft(Ki),la=m({},Ki,{view:0,detail:0}),MC=Ft(la),Nd,Dd,ca,oc=m({},la,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ld,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ca&&(ca&&s.type==="mousemove"?(Nd=s.screenX-ca.screenX,Dd=s.screenY-ca.screenY):Dd=Nd=0,ca=s),Nd)},movementY:function(s){return"movementY"in s?s.movementY:Dd}}),Zy=Ft(oc),NC=m({},oc,{dataTransfer:0}),DC=Ft(NC),jC=m({},la,{relatedTarget:0}),jd=Ft(jC),LC=m({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),zC=Ft(LC),BC=m({},Ki,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),UC=Ft(BC),IC=m({},Ki,{data:0}),e0=Ft(IC),PC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$C={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qC(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=HC[s])?!!a[s]:!1}function Ld(){return qC}var VC=m({},la,{key:function(s){if(s.key){var a=PC[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=rc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$C[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ld,charCode:function(s){return s.type==="keypress"?rc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?rc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),KC=Ft(VC),FC=m({},oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t0=Ft(FC),GC=m({},la,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ld}),JC=Ft(GC),WC=m({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),YC=Ft(WC),QC=m({},oc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),XC=Ft(QC),ZC=m({},Ki,{newState:0,oldState:0}),e_=Ft(ZC),t_=[9,13,27,32],zd=pr&&"CompositionEvent"in window,ua=null;pr&&"documentMode"in document&&(ua=document.documentMode);var n_=pr&&"TextEvent"in window&&!ua,n0=pr&&(!zd||ua&&8<ua&&11>=ua),r0=" ",i0=!1;function s0(s,a){switch(s){case"keyup":return t_.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qs=!1;function r_(s,a){switch(s){case"compositionend":return o0(a);case"keypress":return a.which!==32?null:(i0=!0,r0);case"textInput":return s=a.data,s===r0&&i0?null:s;default:return null}}function i_(s,a){if(qs)return s==="compositionend"||!zd&&s0(s,a)?(s=Qy(),nc=Md=Yr=null,qs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return n0&&a.locale!=="ko"?null:a.data;default:return null}}var s_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!s_[s.type]:a==="textarea"}function l0(s,a,c,d){$s?Hs?Hs.push(d):Hs=[d]:$s=d,a=Wc(a,"onChange"),0<a.length&&(c=new sc("onChange","change",null,c,d),s.push({event:c,listeners:a}))}var fa=null,da=null;function o_(s){Vv(s,0)}function ac(s){var a=sa(s);if(qy(a))return s}function c0(s,a){if(s==="change")return a}var u0=!1;if(pr){var Bd;if(pr){var Ud="oninput"in document;if(!Ud){var f0=document.createElement("div");f0.setAttribute("oninput","return;"),Ud=typeof f0.oninput=="function"}Bd=Ud}else Bd=!1;u0=Bd&&(!document.documentMode||9<document.documentMode)}function d0(){fa&&(fa.detachEvent("onpropertychange",h0),da=fa=null)}function h0(s){if(s.propertyName==="value"&&ac(da)){var a=[];l0(a,da,s,Ad(s)),Yy(o_,a)}}function a_(s,a,c){s==="focusin"?(d0(),fa=a,da=c,fa.attachEvent("onpropertychange",h0)):s==="focusout"&&d0()}function l_(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ac(da)}function c_(s,a){if(s==="click")return ac(a)}function u_(s,a){if(s==="input"||s==="change")return ac(a)}function f_(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var rn=typeof Object.is=="function"?Object.is:f_;function ha(s,a){if(rn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),d=Object.keys(a);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!md.call(a,g)||!rn(s[g],a[g]))return!1}return!0}function p0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function m0(s,a){var c=p0(s);s=0;for(var d;c;){if(c.nodeType===3){if(d=s+c.textContent.length,s<=a&&d>=a)return{node:c,offset:a-s};s=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=p0(c)}}function g0(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?g0(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function y0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ec(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=ec(s.document)}return a}function Id(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var d_=pr&&"documentMode"in document&&11>=document.documentMode,Vs=null,Pd=null,pa=null,$d=!1;function b0(s,a,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$d||Vs==null||Vs!==ec(d)||(d=Vs,"selectionStart"in d&&Id(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),pa&&ha(pa,d)||(pa=d,d=Wc(Pd,"onSelect"),0<d.length&&(a=new sc("onSelect","select",null,a,c),s.push({event:a,listeners:d}),a.target=Vs)))}function Fi(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var Ks={animationend:Fi("Animation","AnimationEnd"),animationiteration:Fi("Animation","AnimationIteration"),animationstart:Fi("Animation","AnimationStart"),transitionrun:Fi("Transition","TransitionRun"),transitionstart:Fi("Transition","TransitionStart"),transitioncancel:Fi("Transition","TransitionCancel"),transitionend:Fi("Transition","TransitionEnd")},Hd={},v0={};pr&&(v0=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function Gi(s){if(Hd[s])return Hd[s];if(!Ks[s])return s;var a=Ks[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in v0)return Hd[s]=a[c];return s}var w0=Gi("animationend"),S0=Gi("animationiteration"),x0=Gi("animationstart"),h_=Gi("transitionrun"),p_=Gi("transitionstart"),m_=Gi("transitioncancel"),E0=Gi("transitionend"),T0=new Map,qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qd.push("scrollEnd");function Ln(s,a){T0.set(s,a),Vi(a,[s])}var lc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},wn=[],Fs=0,Vd=0;function cc(){for(var s=Fs,a=Vd=Fs=0;a<s;){var c=wn[a];wn[a++]=null;var d=wn[a];wn[a++]=null;var g=wn[a];wn[a++]=null;var y=wn[a];if(wn[a++]=null,d!==null&&g!==null){var x=d.pending;x===null?g.next=g:(g.next=x.next,x.next=g),d.pending=g}y!==0&&k0(c,g,y)}}function uc(s,a,c,d){wn[Fs++]=s,wn[Fs++]=a,wn[Fs++]=c,wn[Fs++]=d,Vd|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Kd(s,a,c,d){return uc(s,a,c,d),fc(s)}function Ji(s,a){return uc(s,null,null,a),fc(s)}function k0(s,a,c){s.lanes|=c;var d=s.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=s.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&a!==null&&(g=31-nn(c),s=y.hiddenUpdates,d=s[g],d===null?s[g]=[a]:d.push(a),a.lane=c|536870912),y):null}function fc(s){if(50<za)throw za=0,ep=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Gs={};function g_(s,a,c,d){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(s,a,c,d){return new g_(s,a,c,d)}function Fd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function mr(s,a){var c=s.alternate;return c===null?(c=sn(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function C0(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function dc(s,a,c,d,g,y){var x=0;if(d=s,typeof s=="function")Fd(s)&&(x=1);else if(typeof s=="string")x=SA(s,c,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case X:return s=sn(31,c,a,g),s.elementType=X,s.lanes=y,s;case S:return Wi(c.children,g,y,a);case E:x=8,g|=24;break;case T:return s=sn(12,c,a,g|2),s.elementType=T,s.lanes=y,s;case L:return s=sn(13,c,a,g),s.elementType=L,s.lanes=y,s;case $:return s=sn(19,c,a,g),s.elementType=$,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:x=10;break e;case C:x=9;break e;case j:x=11;break e;case U:x=14;break e;case Y:x=16,d=null;break e}x=29,c=Error(r(130,s===null?"null":typeof s,"")),d=null}return a=sn(x,c,a,g),a.elementType=s,a.type=d,a.lanes=y,a}function Wi(s,a,c,d){return s=sn(7,s,d,a),s.lanes=c,s}function Gd(s,a,c){return s=sn(6,s,null,a),s.lanes=c,s}function _0(s){var a=sn(18,null,null,0);return a.stateNode=s,a}function Jd(s,a,c){return a=sn(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var A0=new WeakMap;function Sn(s,a){if(typeof s=="object"&&s!==null){var c=A0.get(s);return c!==void 0?c:(a={value:s,source:a,stack:_y(a)},A0.set(s,a),a)}return{value:s,source:a,stack:_y(a)}}var Js=[],Ws=0,hc=null,ma=0,xn=[],En=0,Qr=null,Jn=1,Wn="";function gr(s,a){Js[Ws++]=ma,Js[Ws++]=hc,hc=s,ma=a}function O0(s,a,c){xn[En++]=Jn,xn[En++]=Wn,xn[En++]=Qr,Qr=s;var d=Jn;s=Wn;var g=32-nn(d)-1;d&=~(1<<g),c+=1;var y=32-nn(a)+g;if(30<y){var x=g-g%5;y=(d&(1<<x)-1).toString(32),d>>=x,g-=x,Jn=1<<32-nn(a)+g|c<<g|d,Wn=y+s}else Jn=1<<y|c<<g|d,Wn=s}function Wd(s){s.return!==null&&(gr(s,1),O0(s,1,0))}function Yd(s){for(;s===hc;)hc=Js[--Ws],Js[Ws]=null,ma=Js[--Ws],Js[Ws]=null;for(;s===Qr;)Qr=xn[--En],xn[En]=null,Wn=xn[--En],xn[En]=null,Jn=xn[--En],xn[En]=null}function R0(s,a){xn[En++]=Jn,xn[En++]=Wn,xn[En++]=Qr,Jn=a.id,Wn=a.overflow,Qr=s}var Ct=null,Fe=null,Oe=!1,Xr=null,Tn=!1,Qd=Error(r(519));function Zr(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ga(Sn(a,s)),Qd}function M0(s){var a=s.stateNode,c=s.type,d=s.memoizedProps;switch(a[kt]=s,a[Kt]=d,c){case"dialog":ke("cancel",a),ke("close",a);break;case"iframe":case"object":case"embed":ke("load",a);break;case"video":case"audio":for(c=0;c<Ua.length;c++)ke(Ua[c],a);break;case"source":ke("error",a);break;case"img":case"image":case"link":ke("error",a),ke("load",a);break;case"details":ke("toggle",a);break;case"input":ke("invalid",a),Vy(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":ke("invalid",a);break;case"textarea":ke("invalid",a),Fy(a,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||d.suppressHydrationWarning===!0||Jv(a.textContent,c)?(d.popover!=null&&(ke("beforetoggle",a),ke("toggle",a)),d.onScroll!=null&&ke("scroll",a),d.onScrollEnd!=null&&ke("scrollend",a),d.onClick!=null&&(a.onclick=hr),a=!0):a=!1,a||Zr(s,!0)}function N0(s){for(Ct=s.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:Tn=!1;return;case 27:case 3:Tn=!0;return;default:Ct=Ct.return}}function Ys(s){if(s!==Ct)return!1;if(!Oe)return N0(s),Oe=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||mp(s.type,s.memoizedProps)),c=!c),c&&Fe&&Zr(s),N0(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fe=rw(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Fe=rw(s)}else a===27?(a=Fe,hi(s.type)?(s=wp,wp=null,Fe=s):Fe=a):Fe=Ct?Cn(s.stateNode.nextSibling):null;return!0}function Yi(){Fe=Ct=null,Oe=!1}function Xd(){var s=Xr;return s!==null&&(Yt===null?Yt=s:Yt.push.apply(Yt,s),Xr=null),s}function ga(s){Xr===null?Xr=[s]:Xr.push(s)}var Zd=M(null),Qi=null,yr=null;function ei(s,a,c){Z(Zd,a._currentValue),a._currentValue=c}function br(s){s._currentValue=Zd.current,F(Zd)}function eh(s,a,c){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===c)break;s=s.return}}function th(s,a,c,d){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var x=g.child;y=y.firstContext;e:for(;y!==null;){var k=y;y=g;for(var A=0;A<a.length;A++)if(k.context===a[A]){y.lanes|=c,k=y.alternate,k!==null&&(k.lanes|=c),eh(y.return,c,s),d||(x=null);break e}y=k.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=c,y=x.alternate,y!==null&&(y.lanes|=c),eh(x,c,s),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===s){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function Qs(s,a,c,d){s=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var k=g.type;rn(g.pendingProps.value,x.value)||(s!==null?s.push(k):s=[k])}}else if(g===De.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(qa):s=[qa])}g=g.return}s!==null&&th(a,s,c,d),a.flags|=262144}function pc(s){for(s=s.firstContext;s!==null;){if(!rn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Xi(s){Qi=s,yr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function _t(s){return D0(Qi,s)}function mc(s,a){return Qi===null&&Xi(s),D0(s,a)}function D0(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},yr===null){if(s===null)throw Error(r(308));yr=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else yr=yr.next=a;return c}var y_=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},b_=t.unstable_scheduleCallback,v_=t.unstable_NormalPriority,ct={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nh(){return{controller:new y_,data:new Map,refCount:0}}function ya(s){s.refCount--,s.refCount===0&&b_(v_,function(){s.controller.abort()})}var ba=null,rh=0,Xs=0,Zs=null;function w_(s,a){if(ba===null){var c=ba=[];rh=0,Xs=op(),Zs={status:"pending",value:void 0,then:function(d){c.push(d)}}}return rh++,a.then(j0,j0),a}function j0(){if(--rh===0&&ba!==null){Zs!==null&&(Zs.status="fulfilled");var s=ba;ba=null,Xs=0,Zs=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function S_(s,a){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var L0=P.S;P.S=function(s,a){bv=en(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&w_(s,a),L0!==null&&L0(s,a)};var Zi=M(null);function ih(){var s=Zi.current;return s!==null?s:qe.pooledCache}function gc(s,a){a===null?Z(Zi,Zi.current):Z(Zi,a.pool)}function z0(){var s=ih();return s===null?null:{parent:ct._currentValue,pool:s}}var eo=Error(r(460)),sh=Error(r(474)),yc=Error(r(542)),bc={then:function(){}};function B0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function U0(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(hr,hr),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,P0(s),s;default:if(typeof a.status=="string")a.then(hr,hr);else{if(s=qe,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=d}},function(d){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,P0(s),s}throw ts=a,eo}}function es(s){try{var a=s._init;return a(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ts=c,eo):c}}var ts=null;function I0(){if(ts===null)throw Error(r(459));var s=ts;return ts=null,s}function P0(s){if(s===eo||s===yc)throw Error(r(483))}var to=null,va=0;function vc(s){var a=va;return va+=1,to===null&&(to=[]),U0(to,s,a)}function wa(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function wc(s,a){throw a.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function $0(s){function a(D,R){if(s){var z=D.deletions;z===null?(D.deletions=[R],D.flags|=16):z.push(R)}}function c(D,R){if(!s)return null;for(;R!==null;)a(D,R),R=R.sibling;return null}function d(D){for(var R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function g(D,R){return D=mr(D,R),D.index=0,D.sibling=null,D}function y(D,R,z){return D.index=z,s?(z=D.alternate,z!==null?(z=z.index,z<R?(D.flags|=67108866,R):z):(D.flags|=67108866,R)):(D.flags|=1048576,R)}function x(D){return s&&D.alternate===null&&(D.flags|=67108866),D}function k(D,R,z,V){return R===null||R.tag!==6?(R=Gd(z,D.mode,V),R.return=D,R):(R=g(R,z),R.return=D,R)}function A(D,R,z,V){var ae=z.type;return ae===S?q(D,R,z.props.children,V,z.key):R!==null&&(R.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Y&&es(ae)===R.type)?(R=g(R,z.props),wa(R,z),R.return=D,R):(R=dc(z.type,z.key,z.props,null,D.mode,V),wa(R,z),R.return=D,R)}function B(D,R,z,V){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=Jd(z,D.mode,V),R.return=D,R):(R=g(R,z.children||[]),R.return=D,R)}function q(D,R,z,V,ae){return R===null||R.tag!==7?(R=Wi(z,D.mode,V,ae),R.return=D,R):(R=g(R,z),R.return=D,R)}function K(D,R,z){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Gd(""+R,D.mode,z),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case v:return z=dc(R.type,R.key,R.props,null,D.mode,z),wa(z,R),z.return=D,z;case w:return R=Jd(R,D.mode,z),R.return=D,R;case Y:return R=es(R),K(D,R,z)}if(Se(R)||we(R))return R=Wi(R,D.mode,z,null),R.return=D,R;if(typeof R.then=="function")return K(D,vc(R),z);if(R.$$typeof===_)return K(D,mc(D,R),z);wc(D,R)}return null}function I(D,R,z,V){var ae=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ae!==null?null:k(D,R,""+z,V);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case v:return z.key===ae?A(D,R,z,V):null;case w:return z.key===ae?B(D,R,z,V):null;case Y:return z=es(z),I(D,R,z,V)}if(Se(z)||we(z))return ae!==null?null:q(D,R,z,V,null);if(typeof z.then=="function")return I(D,R,vc(z),V);if(z.$$typeof===_)return I(D,R,mc(D,z),V);wc(D,z)}return null}function H(D,R,z,V,ae){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return D=D.get(z)||null,k(R,D,""+V,ae);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return D=D.get(V.key===null?z:V.key)||null,A(R,D,V,ae);case w:return D=D.get(V.key===null?z:V.key)||null,B(R,D,V,ae);case Y:return V=es(V),H(D,R,z,V,ae)}if(Se(V)||we(V))return D=D.get(z)||null,q(R,D,V,ae,null);if(typeof V.then=="function")return H(D,R,z,vc(V),ae);if(V.$$typeof===_)return H(D,R,z,mc(R,V),ae);wc(R,V)}return null}function ee(D,R,z,V){for(var ae=null,Re=null,ie=R,be=R=0,Ae=null;ie!==null&&be<z.length;be++){ie.index>be?(Ae=ie,ie=null):Ae=ie.sibling;var Me=I(D,ie,z[be],V);if(Me===null){ie===null&&(ie=Ae);break}s&&ie&&Me.alternate===null&&a(D,ie),R=y(Me,R,be),Re===null?ae=Me:Re.sibling=Me,Re=Me,ie=Ae}if(be===z.length)return c(D,ie),Oe&&gr(D,be),ae;if(ie===null){for(;be<z.length;be++)ie=K(D,z[be],V),ie!==null&&(R=y(ie,R,be),Re===null?ae=ie:Re.sibling=ie,Re=ie);return Oe&&gr(D,be),ae}for(ie=d(ie);be<z.length;be++)Ae=H(ie,D,be,z[be],V),Ae!==null&&(s&&Ae.alternate!==null&&ie.delete(Ae.key===null?be:Ae.key),R=y(Ae,R,be),Re===null?ae=Ae:Re.sibling=Ae,Re=Ae);return s&&ie.forEach(function(bi){return a(D,bi)}),Oe&&gr(D,be),ae}function ce(D,R,z,V){if(z==null)throw Error(r(151));for(var ae=null,Re=null,ie=R,be=R=0,Ae=null,Me=z.next();ie!==null&&!Me.done;be++,Me=z.next()){ie.index>be?(Ae=ie,ie=null):Ae=ie.sibling;var bi=I(D,ie,Me.value,V);if(bi===null){ie===null&&(ie=Ae);break}s&&ie&&bi.alternate===null&&a(D,ie),R=y(bi,R,be),Re===null?ae=bi:Re.sibling=bi,Re=bi,ie=Ae}if(Me.done)return c(D,ie),Oe&&gr(D,be),ae;if(ie===null){for(;!Me.done;be++,Me=z.next())Me=K(D,Me.value,V),Me!==null&&(R=y(Me,R,be),Re===null?ae=Me:Re.sibling=Me,Re=Me);return Oe&&gr(D,be),ae}for(ie=d(ie);!Me.done;be++,Me=z.next())Me=H(ie,D,be,Me.value,V),Me!==null&&(s&&Me.alternate!==null&&ie.delete(Me.key===null?be:Me.key),R=y(Me,R,be),Re===null?ae=Me:Re.sibling=Me,Re=Me);return s&&ie.forEach(function(NA){return a(D,NA)}),Oe&&gr(D,be),ae}function He(D,R,z,V){if(typeof z=="object"&&z!==null&&z.type===S&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case v:e:{for(var ae=z.key;R!==null;){if(R.key===ae){if(ae=z.type,ae===S){if(R.tag===7){c(D,R.sibling),V=g(R,z.props.children),V.return=D,D=V;break e}}else if(R.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Y&&es(ae)===R.type){c(D,R.sibling),V=g(R,z.props),wa(V,z),V.return=D,D=V;break e}c(D,R);break}else a(D,R);R=R.sibling}z.type===S?(V=Wi(z.props.children,D.mode,V,z.key),V.return=D,D=V):(V=dc(z.type,z.key,z.props,null,D.mode,V),wa(V,z),V.return=D,D=V)}return x(D);case w:e:{for(ae=z.key;R!==null;){if(R.key===ae)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){c(D,R.sibling),V=g(R,z.children||[]),V.return=D,D=V;break e}else{c(D,R);break}else a(D,R);R=R.sibling}V=Jd(z,D.mode,V),V.return=D,D=V}return x(D);case Y:return z=es(z),He(D,R,z,V)}if(Se(z))return ee(D,R,z,V);if(we(z)){if(ae=we(z),typeof ae!="function")throw Error(r(150));return z=ae.call(z),ce(D,R,z,V)}if(typeof z.then=="function")return He(D,R,vc(z),V);if(z.$$typeof===_)return He(D,R,mc(D,z),V);wc(D,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,R!==null&&R.tag===6?(c(D,R.sibling),V=g(R,z),V.return=D,D=V):(c(D,R),V=Gd(z,D.mode,V),V.return=D,D=V),x(D)):c(D,R)}return function(D,R,z,V){try{va=0;var ae=He(D,R,z,V);return to=null,ae}catch(ie){if(ie===eo||ie===yc)throw ie;var Re=sn(29,ie,null,D.mode);return Re.lanes=V,Re.return=D,Re}}}var ns=$0(!0),H0=$0(!1),ti=!1;function oh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ah(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ni(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ri(s,a,c){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ne&2)!==0){var g=d.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),d.pending=a,a=fc(s),k0(s,null,c),a}return uc(s,d,a,c),fc(s)}function Sa(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,Dy(s,c)}}function lh(s,a){var c=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var x={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=x:y=y.next=x,c=c.next}while(c!==null);y===null?g=y=a:y=y.next=a}else g=y=a;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var ch=!1;function xa(){if(ch){var s=Zs;if(s!==null)throw s}}function Ea(s,a,c,d){ch=!1;var g=s.updateQueue;ti=!1;var y=g.firstBaseUpdate,x=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var A=k,B=A.next;A.next=null,x===null?y=B:x.next=B,x=A;var q=s.alternate;q!==null&&(q=q.updateQueue,k=q.lastBaseUpdate,k!==x&&(k===null?q.firstBaseUpdate=B:k.next=B,q.lastBaseUpdate=A))}if(y!==null){var K=g.baseState;x=0,q=B=A=null,k=y;do{var I=k.lane&-536870913,H=I!==k.lane;if(H?(_e&I)===I:(d&I)===I){I!==0&&I===Xs&&(ch=!0),q!==null&&(q=q.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var ee=s,ce=k;I=a;var He=c;switch(ce.tag){case 1:if(ee=ce.payload,typeof ee=="function"){K=ee.call(He,K,I);break e}K=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=ce.payload,I=typeof ee=="function"?ee.call(He,K,I):ee,I==null)break e;K=m({},K,I);break e;case 2:ti=!0}}I=k.callback,I!==null&&(s.flags|=64,H&&(s.flags|=8192),H=g.callbacks,H===null?g.callbacks=[I]:H.push(I))}else H={lane:I,tag:k.tag,payload:k.payload,callback:k.callback,next:null},q===null?(B=q=H,A=K):q=q.next=H,x|=I;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;H=k,k=H.next,H.next=null,g.lastBaseUpdate=H,g.shared.pending=null}}while(!0);q===null&&(A=K),g.baseState=A,g.firstBaseUpdate=B,g.lastBaseUpdate=q,y===null&&(g.shared.lanes=0),li|=x,s.lanes=x,s.memoizedState=K}}function q0(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function V0(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)q0(c[s],a)}var no=M(null),Sc=M(0);function K0(s,a){s=_r,Z(Sc,s),Z(no,a),_r=s|a.baseLanes}function uh(){Z(Sc,_r),Z(no,no.current)}function fh(){_r=Sc.current,F(no),F(Sc)}var on=M(null),kn=null;function ii(s){var a=s.alternate;Z(at,at.current&1),Z(on,s),kn===null&&(a===null||no.current!==null||a.memoizedState!==null)&&(kn=s)}function dh(s){Z(at,at.current),Z(on,s),kn===null&&(kn=s)}function F0(s){s.tag===22?(Z(at,at.current),Z(on,s),kn===null&&(kn=s)):si()}function si(){Z(at,at.current),Z(on,on.current)}function an(s){F(on),kn===s&&(kn=null),F(at)}var at=M(0);function xc(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||bp(c)||vp(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var vr=0,ge=null,Pe=null,ut=null,Ec=!1,ro=!1,rs=!1,Tc=0,Ta=0,io=null,x_=0;function tt(){throw Error(r(321))}function hh(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!rn(s[c],a[c]))return!1;return!0}function ph(s,a,c,d,g,y){return vr=y,ge=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=s===null||s.memoizedState===null?Ob:Oh,rs=!1,y=c(d,g),rs=!1,ro&&(y=J0(a,c,d,g)),G0(s),y}function G0(s){P.H=_a;var a=Pe!==null&&Pe.next!==null;if(vr=0,ut=Pe=ge=null,Ec=!1,Ta=0,io=null,a)throw Error(r(300));s===null||ft||(s=s.dependencies,s!==null&&pc(s)&&(ft=!0))}function J0(s,a,c,d){ge=s;var g=0;do{if(ro&&(io=null),Ta=0,ro=!1,25<=g)throw Error(r(301));if(g+=1,ut=Pe=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}P.H=Rb,y=a(c,d)}while(ro);return y}function E_(){var s=P.H,a=s.useState()[0];return a=typeof a.then=="function"?ka(a):a,s=s.useState()[0],(Pe!==null?Pe.memoizedState:null)!==s&&(ge.flags|=1024),a}function mh(){var s=Tc!==0;return Tc=0,s}function gh(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function yh(s){if(Ec){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ec=!1}vr=0,ut=Pe=ge=null,ro=!1,Ta=Tc=0,io=null}function Pt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?ge.memoizedState=ut=s:ut=ut.next=s,ut}function lt(){if(Pe===null){var s=ge.alternate;s=s!==null?s.memoizedState:null}else s=Pe.next;var a=ut===null?ge.memoizedState:ut.next;if(a!==null)ut=a,Pe=s;else{if(s===null)throw ge.alternate===null?Error(r(467)):Error(r(310));Pe=s,s={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},ut===null?ge.memoizedState=ut=s:ut=ut.next=s}return ut}function kc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ka(s){var a=Ta;return Ta+=1,io===null&&(io=[]),s=U0(io,s,a),a=ge,(ut===null?a.memoizedState:ut.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Ob:Oh),s}function Cc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ka(s);if(s.$$typeof===_)return _t(s)}throw Error(r(438,String(s)))}function bh(s){var a=null,c=ge.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var d=ge.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=kc(),ge.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),d=0;d<s;d++)c[d]=re;return a.index++,c}function wr(s,a){return typeof a=="function"?a(s):a}function _c(s){var a=lt();return vh(a,Pe,s)}function vh(s,a,c){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var g=s.baseQueue,y=d.pending;if(y!==null){if(g!==null){var x=g.next;g.next=y.next,y.next=x}a.baseQueue=g=y,d.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{a=g.next;var k=x=null,A=null,B=a,q=!1;do{var K=B.lane&-536870913;if(K!==B.lane?(_e&K)===K:(vr&K)===K){var I=B.revertLane;if(I===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),K===Xs&&(q=!0);else if((vr&I)===I){B=B.next,I===Xs&&(q=!0);continue}else K={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},A===null?(k=A=K,x=y):A=A.next=K,ge.lanes|=I,li|=I;K=B.action,rs&&c(y,K),y=B.hasEagerState?B.eagerState:c(y,K)}else I={lane:K,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},A===null?(k=A=I,x=y):A=A.next=I,ge.lanes|=K,li|=K;B=B.next}while(B!==null&&B!==a);if(A===null?x=y:A.next=k,!rn(y,s.memoizedState)&&(ft=!0,q&&(c=Zs,c!==null)))throw c;s.memoizedState=y,s.baseState=x,s.baseQueue=A,d.lastRenderedState=y}return g===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function wh(s){var a=lt(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var d=c.dispatch,g=c.pending,y=a.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do y=s(y,x.action),x=x.next;while(x!==g);rn(y,a.memoizedState)||(ft=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,d]}function W0(s,a,c){var d=ge,g=lt(),y=Oe;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=a();var x=!rn((Pe||g).memoizedState,c);if(x&&(g.memoizedState=c,ft=!0),g=g.queue,Eh(X0.bind(null,d,g,s),[s]),g.getSnapshot!==a||x||ut!==null&&ut.memoizedState.tag&1){if(d.flags|=2048,so(9,{destroy:void 0},Q0.bind(null,d,g,c,a),null),qe===null)throw Error(r(349));y||(vr&127)!==0||Y0(d,a,c)}return c}function Y0(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=ge.updateQueue,a===null?(a=kc(),ge.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function Q0(s,a,c,d){a.value=c,a.getSnapshot=d,Z0(a)&&eb(s)}function X0(s,a,c){return c(function(){Z0(a)&&eb(s)})}function Z0(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!rn(s,c)}catch{return!0}}function eb(s){var a=Ji(s,2);a!==null&&Qt(a,s,2)}function Sh(s){var a=Pt();if(typeof s=="function"){var c=s;if(s=c(),rs){Jr(!0);try{c()}finally{Jr(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:s},a}function tb(s,a,c,d){return s.baseState=c,vh(s,Pe,typeof d=="function"?d:wr)}function T_(s,a,c,d,g){if(Rc(s))throw Error(r(485));if(s=a.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};P.T!==null?c(!0):y.isTransition=!1,d(y),c=a.pending,c===null?(y.next=a.pending=y,nb(a,y)):(y.next=c.next,a.pending=c.next=y)}}function nb(s,a){var c=a.action,d=a.payload,g=s.state;if(a.isTransition){var y=P.T,x={};P.T=x;try{var k=c(g,d),A=P.S;A!==null&&A(x,k),rb(s,a,k)}catch(B){xh(s,a,B)}finally{y!==null&&x.types!==null&&(y.types=x.types),P.T=y}}else try{y=c(g,d),rb(s,a,y)}catch(B){xh(s,a,B)}}function rb(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){ib(s,a,d)},function(d){return xh(s,a,d)}):ib(s,a,c)}function ib(s,a,c){a.status="fulfilled",a.value=c,sb(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,nb(s,c)))}function xh(s,a,c){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=c,sb(a),a=a.next;while(a!==d)}s.action=null}function sb(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function ob(s,a){return a}function ab(s,a){if(Oe){var c=qe.formState;if(c!==null){e:{var d=ge;if(Oe){if(Fe){t:{for(var g=Fe,y=Tn;g.nodeType!==8;){if(!y){g=null;break t}if(g=Cn(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Fe=Cn(g.nextSibling),d=g.data==="F!";break e}}Zr(d)}d=!1}d&&(a=c[0])}}return c=Pt(),c.memoizedState=c.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ob,lastRenderedState:a},c.queue=d,c=Cb.bind(null,ge,d),d.dispatch=c,d=Sh(!1),y=Ah.bind(null,ge,!1,d.queue),d=Pt(),g={state:a,dispatch:null,action:s,pending:null},d.queue=g,c=T_.bind(null,ge,g,y,c),g.dispatch=c,d.memoizedState=s,[a,c,!1]}function lb(s){var a=lt();return cb(a,Pe,s)}function cb(s,a,c){if(a=vh(s,a,ob)[0],s=_c(wr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=ka(a)}catch(x){throw x===eo?yc:x}else d=a;a=lt();var g=a.queue,y=g.dispatch;return c!==a.memoizedState&&(ge.flags|=2048,so(9,{destroy:void 0},k_.bind(null,g,c),null)),[d,y,s]}function k_(s,a){s.action=a}function ub(s){var a=lt(),c=Pe;if(c!==null)return cb(a,c,s);lt(),a=a.memoizedState,c=lt();var d=c.queue.dispatch;return c.memoizedState=s,[a,d,!1]}function so(s,a,c,d){return s={tag:s,create:c,deps:d,inst:a,next:null},a=ge.updateQueue,a===null&&(a=kc(),ge.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(d=c.next,c.next=s,s.next=d,a.lastEffect=s),s}function fb(){return lt().memoizedState}function Ac(s,a,c,d){var g=Pt();ge.flags|=s,g.memoizedState=so(1|a,{destroy:void 0},c,d===void 0?null:d)}function Oc(s,a,c,d){var g=lt();d=d===void 0?null:d;var y=g.memoizedState.inst;Pe!==null&&d!==null&&hh(d,Pe.memoizedState.deps)?g.memoizedState=so(a,y,c,d):(ge.flags|=s,g.memoizedState=so(1|a,y,c,d))}function db(s,a){Ac(8390656,8,s,a)}function Eh(s,a){Oc(2048,8,s,a)}function C_(s){ge.flags|=4;var a=ge.updateQueue;if(a===null)a=kc(),ge.updateQueue=a,a.events=[s];else{var c=a.events;c===null?a.events=[s]:c.push(s)}}function hb(s){var a=lt().memoizedState;return C_({ref:a,nextImpl:s}),function(){if((Ne&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function pb(s,a){return Oc(4,2,s,a)}function mb(s,a){return Oc(4,4,s,a)}function gb(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function yb(s,a,c){c=c!=null?c.concat([s]):null,Oc(4,4,gb.bind(null,a,s),c)}function Th(){}function bb(s,a){var c=lt();a=a===void 0?null:a;var d=c.memoizedState;return a!==null&&hh(a,d[1])?d[0]:(c.memoizedState=[s,a],s)}function vb(s,a){var c=lt();a=a===void 0?null:a;var d=c.memoizedState;if(a!==null&&hh(a,d[1]))return d[0];if(d=s(),rs){Jr(!0);try{s()}finally{Jr(!1)}}return c.memoizedState=[d,a],d}function kh(s,a,c){return c===void 0||(vr&1073741824)!==0&&(_e&261930)===0?s.memoizedState=a:(s.memoizedState=c,s=wv(),ge.lanes|=s,li|=s,c)}function wb(s,a,c,d){return rn(c,a)?c:no.current!==null?(s=kh(s,c,d),rn(s,a)||(ft=!0),s):(vr&42)===0||(vr&1073741824)!==0&&(_e&261930)===0?(ft=!0,s.memoizedState=c):(s=wv(),ge.lanes|=s,li|=s,a)}function Sb(s,a,c,d,g){var y=J.p;J.p=y!==0&&8>y?y:8;var x=P.T,k={};P.T=k,Ah(s,!1,a,c);try{var A=g(),B=P.S;if(B!==null&&B(k,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var q=S_(A,d);Ca(s,a,q,un(s))}else Ca(s,a,d,un(s))}catch(K){Ca(s,a,{then:function(){},status:"rejected",reason:K},un())}finally{J.p=y,x!==null&&k.types!==null&&(x.types=k.types),P.T=x}}function __(){}function Ch(s,a,c,d){if(s.tag!==5)throw Error(r(476));var g=xb(s).queue;Sb(s,g,a,te,c===null?__:function(){return Eb(s),c(d)})}function xb(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:te},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function Eb(s){var a=xb(s);a.next===null&&(a=s.alternate.memoizedState),Ca(s,a.next.queue,{},un())}function _h(){return _t(qa)}function Tb(){return lt().memoizedState}function kb(){return lt().memoizedState}function A_(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=un();s=ni(c);var d=ri(a,s,c);d!==null&&(Qt(d,a,c),Sa(d,a,c)),a={cache:nh()},s.payload=a;return}a=a.return}}function O_(s,a,c){var d=un();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Rc(s)?_b(a,c):(c=Kd(s,a,c,d),c!==null&&(Qt(c,s,d),Ab(c,a,d)))}function Cb(s,a,c){var d=un();Ca(s,a,c,d)}function Ca(s,a,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Rc(s))_b(a,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var x=a.lastRenderedState,k=y(x,c);if(g.hasEagerState=!0,g.eagerState=k,rn(k,x))return uc(s,a,g,0),qe===null&&cc(),!1}catch{}if(c=Kd(s,a,g,d),c!==null)return Qt(c,s,d),Ab(c,a,d),!0}return!1}function Ah(s,a,c,d){if(d={lane:2,revertLane:op(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Rc(s)){if(a)throw Error(r(479))}else a=Kd(s,c,d,2),a!==null&&Qt(a,s,2)}function Rc(s){var a=s.alternate;return s===ge||a!==null&&a===ge}function _b(s,a){ro=Ec=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function Ab(s,a,c){if((c&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,c|=d,a.lanes=c,Dy(s,c)}}var _a={readContext:_t,use:Cc,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};_a.useEffectEvent=tt;var Ob={readContext:_t,use:Cc,useCallback:function(s,a){return Pt().memoizedState=[s,a===void 0?null:a],s},useContext:_t,useEffect:db,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Ac(4194308,4,gb.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Ac(4194308,4,s,a)},useInsertionEffect:function(s,a){Ac(4,2,s,a)},useMemo:function(s,a){var c=Pt();a=a===void 0?null:a;var d=s();if(rs){Jr(!0);try{s()}finally{Jr(!1)}}return c.memoizedState=[d,a],d},useReducer:function(s,a,c){var d=Pt();if(c!==void 0){var g=c(a);if(rs){Jr(!0);try{c(a)}finally{Jr(!1)}}}else g=a;return d.memoizedState=d.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},d.queue=s,s=s.dispatch=O_.bind(null,ge,s),[d.memoizedState,s]},useRef:function(s){var a=Pt();return s={current:s},a.memoizedState=s},useState:function(s){s=Sh(s);var a=s.queue,c=Cb.bind(null,ge,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:Th,useDeferredValue:function(s,a){var c=Pt();return kh(c,s,a)},useTransition:function(){var s=Sh(!1);return s=Sb.bind(null,ge,s.queue,!0,!1),Pt().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var d=ge,g=Pt();if(Oe){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),qe===null)throw Error(r(349));(_e&127)!==0||Y0(d,a,c)}g.memoizedState=c;var y={value:c,getSnapshot:a};return g.queue=y,db(X0.bind(null,d,y,s),[s]),d.flags|=2048,so(9,{destroy:void 0},Q0.bind(null,d,y,c,a),null),c},useId:function(){var s=Pt(),a=qe.identifierPrefix;if(Oe){var c=Wn,d=Jn;c=(d&~(1<<32-nn(d)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Tc++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=x_++,a="_"+a+"r_"+c.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:_h,useFormState:ab,useActionState:ab,useOptimistic:function(s){var a=Pt();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Ah.bind(null,ge,!0,c),c.dispatch=a,[s,a]},useMemoCache:bh,useCacheRefresh:function(){return Pt().memoizedState=A_.bind(null,ge)},useEffectEvent:function(s){var a=Pt(),c={impl:s};return a.memoizedState=c,function(){if((Ne&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Oh={readContext:_t,use:Cc,useCallback:bb,useContext:_t,useEffect:Eh,useImperativeHandle:yb,useInsertionEffect:pb,useLayoutEffect:mb,useMemo:vb,useReducer:_c,useRef:fb,useState:function(){return _c(wr)},useDebugValue:Th,useDeferredValue:function(s,a){var c=lt();return wb(c,Pe.memoizedState,s,a)},useTransition:function(){var s=_c(wr)[0],a=lt().memoizedState;return[typeof s=="boolean"?s:ka(s),a]},useSyncExternalStore:W0,useId:Tb,useHostTransitionStatus:_h,useFormState:lb,useActionState:lb,useOptimistic:function(s,a){var c=lt();return tb(c,Pe,s,a)},useMemoCache:bh,useCacheRefresh:kb};Oh.useEffectEvent=hb;var Rb={readContext:_t,use:Cc,useCallback:bb,useContext:_t,useEffect:Eh,useImperativeHandle:yb,useInsertionEffect:pb,useLayoutEffect:mb,useMemo:vb,useReducer:wh,useRef:fb,useState:function(){return wh(wr)},useDebugValue:Th,useDeferredValue:function(s,a){var c=lt();return Pe===null?kh(c,s,a):wb(c,Pe.memoizedState,s,a)},useTransition:function(){var s=wh(wr)[0],a=lt().memoizedState;return[typeof s=="boolean"?s:ka(s),a]},useSyncExternalStore:W0,useId:Tb,useHostTransitionStatus:_h,useFormState:ub,useActionState:ub,useOptimistic:function(s,a){var c=lt();return Pe!==null?tb(c,Pe,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:bh,useCacheRefresh:kb};Rb.useEffectEvent=hb;function Rh(s,a,c,d){a=s.memoizedState,c=c(d,a),c=c==null?a:m({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Mh={enqueueSetState:function(s,a,c){s=s._reactInternals;var d=un(),g=ni(d);g.payload=a,c!=null&&(g.callback=c),a=ri(s,g,d),a!==null&&(Qt(a,s,d),Sa(a,s,d))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var d=un(),g=ni(d);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=ri(s,g,d),a!==null&&(Qt(a,s,d),Sa(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=un(),d=ni(c);d.tag=2,a!=null&&(d.callback=a),a=ri(s,d,c),a!==null&&(Qt(a,s,c),Sa(a,s,c))}};function Mb(s,a,c,d,g,y,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,y,x):a.prototype&&a.prototype.isPureReactComponent?!ha(c,d)||!ha(g,y):!0}function Nb(s,a,c,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,d),a.state!==s&&Mh.enqueueReplaceState(a,a.state,null)}function is(s,a){var c=a;if("ref"in a){c={};for(var d in a)d!=="ref"&&(c[d]=a[d])}if(s=s.defaultProps){c===a&&(c=m({},c));for(var g in s)c[g]===void 0&&(c[g]=s[g])}return c}function Db(s){lc(s)}function jb(s){console.error(s)}function Lb(s){lc(s)}function Mc(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function zb(s,a,c){try{var d=s.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Nh(s,a,c){return c=ni(c),c.tag=3,c.payload={element:null},c.callback=function(){Mc(s,a)},c}function Bb(s){return s=ni(s),s.tag=3,s}function Ub(s,a,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;s.payload=function(){return g(y)},s.callback=function(){zb(a,c,d)}}var x=c.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){zb(a,c,d),typeof g!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var k=d.stack;this.componentDidCatch(d.value,{componentStack:k!==null?k:""})})}function R_(s,a,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=c.alternate,a!==null&&Qs(a,c,g,!0),c=on.current,c!==null){switch(c.tag){case 31:case 13:return kn===null?qc():c.alternate===null&&nt===0&&(nt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===bc?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([d]):a.add(d),rp(s,d,g)),!1;case 22:return c.flags|=65536,d===bc?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([d]):c.add(d)),rp(s,d,g)),!1}throw Error(r(435,c.tag))}return rp(s,d,g),qc(),!1}if(Oe)return a=on.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,d!==Qd&&(s=Error(r(422),{cause:d}),ga(Sn(s,c)))):(d!==Qd&&(a=Error(r(423),{cause:d}),ga(Sn(a,c))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,d=Sn(d,c),g=Nh(s.stateNode,d,g),lh(s,g),nt!==4&&(nt=2)),!1;var y=Error(r(520),{cause:d});if(y=Sn(y,c),La===null?La=[y]:La.push(y),nt!==4&&(nt=2),a===null)return!0;d=Sn(d,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=g&-g,c.lanes|=s,s=Nh(c.stateNode,d,s),lh(c,s),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ci===null||!ci.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Bb(g),Ub(g,s,c,d),lh(c,g),!1}c=c.return}while(c!==null);return!1}var Dh=Error(r(461)),ft=!1;function At(s,a,c,d){a.child=s===null?H0(a,null,c,d):ns(a,s.child,c,d)}function Ib(s,a,c,d,g){c=c.render;var y=a.ref;if("ref"in d){var x={};for(var k in d)k!=="ref"&&(x[k]=d[k])}else x=d;return Xi(a),d=ph(s,a,c,x,y,g),k=mh(),s!==null&&!ft?(gh(s,a,g),Sr(s,a,g)):(Oe&&k&&Wd(a),a.flags|=1,At(s,a,d,g),a.child)}function Pb(s,a,c,d,g){if(s===null){var y=c.type;return typeof y=="function"&&!Fd(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,$b(s,a,y,d,g)):(s=dc(c.type,null,d,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!$h(s,g)){var x=y.memoizedProps;if(c=c.compare,c=c!==null?c:ha,c(x,d)&&s.ref===a.ref)return Sr(s,a,g)}return a.flags|=1,s=mr(y,d),s.ref=a.ref,s.return=a,a.child=s}function $b(s,a,c,d,g){if(s!==null){var y=s.memoizedProps;if(ha(y,d)&&s.ref===a.ref)if(ft=!1,a.pendingProps=d=y,$h(s,g))(s.flags&131072)!==0&&(ft=!0);else return a.lanes=s.lanes,Sr(s,a,g)}return jh(s,a,c,d,g)}function Hb(s,a,c,d){var g=d.children,y=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,s!==null){for(d=a.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~y}else d=0,a.child=null;return qb(s,a,y,c,d)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&gc(a,y!==null?y.cachePool:null),y!==null?K0(a,y):uh(),F0(a);else return d=a.lanes=536870912,qb(s,a,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(gc(a,y.cachePool),K0(a,y),si(),a.memoizedState=null):(s!==null&&gc(a,null),uh(),si());return At(s,a,g,c),a.child}function Aa(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function qb(s,a,c,d,g){var y=ih();return y=y===null?null:{parent:ct._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},s!==null&&gc(a,null),uh(),F0(a),s!==null&&Qs(s,a,d,!0),a.childLanes=g,null}function Nc(s,a){return a=jc({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function Vb(s,a,c){return ns(a,s.child,null,c),s=Nc(a,a.pendingProps),s.flags|=2,an(a),a.memoizedState=null,s}function M_(s,a,c){var d=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(Oe){if(d.mode==="hidden")return s=Nc(a,d),a.lanes=536870912,Aa(null,s);if(dh(a),(s=Fe)?(s=nw(s,Tn),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Qr!==null?{id:Jn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},c=_0(s),c.return=a,a.child=c,Ct=a,Fe=null)):s=null,s===null)throw Zr(a);return a.lanes=536870912,null}return Nc(a,d)}var y=s.memoizedState;if(y!==null){var x=y.dehydrated;if(dh(a),g)if(a.flags&256)a.flags&=-257,a=Vb(s,a,c);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(ft||Qs(s,a,c,!1),g=(c&s.childLanes)!==0,ft||g){if(d=qe,d!==null&&(x=jy(d,c),x!==0&&x!==y.retryLane))throw y.retryLane=x,Ji(s,x),Qt(d,s,x),Dh;qc(),a=Vb(s,a,c)}else s=y.treeContext,Fe=Cn(x.nextSibling),Ct=a,Oe=!0,Xr=null,Tn=!1,s!==null&&R0(a,s),a=Nc(a,d),a.flags|=4096;return a}return s=mr(s.child,{mode:d.mode,children:d.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Dc(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function jh(s,a,c,d,g){return Xi(a),c=ph(s,a,c,d,void 0,g),d=mh(),s!==null&&!ft?(gh(s,a,g),Sr(s,a,g)):(Oe&&d&&Wd(a),a.flags|=1,At(s,a,c,g),a.child)}function Kb(s,a,c,d,g,y){return Xi(a),a.updateQueue=null,c=J0(a,d,c,g),G0(s),d=mh(),s!==null&&!ft?(gh(s,a,y),Sr(s,a,y)):(Oe&&d&&Wd(a),a.flags|=1,At(s,a,c,y),a.child)}function Fb(s,a,c,d,g){if(Xi(a),a.stateNode===null){var y=Gs,x=c.contextType;typeof x=="object"&&x!==null&&(y=_t(x)),y=new c(d,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Mh,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=d,y.state=a.memoizedState,y.refs={},oh(a),x=c.contextType,y.context=typeof x=="object"&&x!==null?_t(x):Gs,y.state=a.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(Rh(a,c,x,d),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&Mh.enqueueReplaceState(y,y.state,null),Ea(a,d,y,g),xa(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){y=a.stateNode;var k=a.memoizedProps,A=is(c,k);y.props=A;var B=y.context,q=c.contextType;x=Gs,typeof q=="object"&&q!==null&&(x=_t(q));var K=c.getDerivedStateFromProps;q=typeof K=="function"||typeof y.getSnapshotBeforeUpdate=="function",k=a.pendingProps!==k,q||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k||B!==x)&&Nb(a,y,d,x),ti=!1;var I=a.memoizedState;y.state=I,Ea(a,d,y,g),xa(),B=a.memoizedState,k||I!==B||ti?(typeof K=="function"&&(Rh(a,c,K,d),B=a.memoizedState),(A=ti||Mb(a,c,A,d,I,B,x))?(q||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=B),y.props=d,y.state=B,y.context=x,d=A):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{y=a.stateNode,ah(s,a),x=a.memoizedProps,q=is(c,x),y.props=q,K=a.pendingProps,I=y.context,B=c.contextType,A=Gs,typeof B=="object"&&B!==null&&(A=_t(B)),k=c.getDerivedStateFromProps,(B=typeof k=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==K||I!==A)&&Nb(a,y,d,A),ti=!1,I=a.memoizedState,y.state=I,Ea(a,d,y,g),xa();var H=a.memoizedState;x!==K||I!==H||ti||s!==null&&s.dependencies!==null&&pc(s.dependencies)?(typeof k=="function"&&(Rh(a,c,k,d),H=a.memoizedState),(q=ti||Mb(a,c,q,d,I,H,A)||s!==null&&s.dependencies!==null&&pc(s.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,H,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,H,A)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===s.memoizedProps&&I===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&I===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=H),y.props=d,y.state=H,y.context=A,d=q):(typeof y.componentDidUpdate!="function"||x===s.memoizedProps&&I===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&I===s.memoizedState||(a.flags|=1024),d=!1)}return y=d,Dc(s,a),d=(a.flags&128)!==0,y||d?(y=a.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&d?(a.child=ns(a,s.child,null,g),a.child=ns(a,null,c,g)):At(s,a,c,g),a.memoizedState=y.state,s=a.child):s=Sr(s,a,g),s}function Gb(s,a,c,d){return Yi(),a.flags|=256,At(s,a,c,d),a.child}var Lh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zh(s){return{baseLanes:s,cachePool:z0()}}function Bh(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=cn),s}function Jb(s,a,c){var d=a.pendingProps,g=!1,y=(a.flags&128)!==0,x;if((x=y)||(x=s!==null&&s.memoizedState===null?!1:(at.current&2)!==0),x&&(g=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,s===null){if(Oe){if(g?ii(a):si(),(s=Fe)?(s=nw(s,Tn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Qr!==null?{id:Jn,overflow:Wn}:null,retryLane:536870912,hydrationErrors:null},c=_0(s),c.return=a,a.child=c,Ct=a,Fe=null)):s=null,s===null)throw Zr(a);return vp(s)?a.lanes=32:a.lanes=536870912,null}var k=d.children;return d=d.fallback,g?(si(),g=a.mode,k=jc({mode:"hidden",children:k},g),d=Wi(d,g,c,null),k.return=a,d.return=a,k.sibling=d,a.child=k,d=a.child,d.memoizedState=zh(c),d.childLanes=Bh(s,x,c),a.memoizedState=Lh,Aa(null,d)):(ii(a),Uh(a,k))}var A=s.memoizedState;if(A!==null&&(k=A.dehydrated,k!==null)){if(y)a.flags&256?(ii(a),a.flags&=-257,a=Ih(s,a,c)):a.memoizedState!==null?(si(),a.child=s.child,a.flags|=128,a=null):(si(),k=d.fallback,g=a.mode,d=jc({mode:"visible",children:d.children},g),k=Wi(k,g,c,null),k.flags|=2,d.return=a,k.return=a,d.sibling=k,a.child=d,ns(a,s.child,null,c),d=a.child,d.memoizedState=zh(c),d.childLanes=Bh(s,x,c),a.memoizedState=Lh,a=Aa(null,d));else if(ii(a),vp(k)){if(x=k.nextSibling&&k.nextSibling.dataset,x)var B=x.dgst;x=B,d=Error(r(419)),d.stack="",d.digest=x,ga({value:d,source:null,stack:null}),a=Ih(s,a,c)}else if(ft||Qs(s,a,c,!1),x=(c&s.childLanes)!==0,ft||x){if(x=qe,x!==null&&(d=jy(x,c),d!==0&&d!==A.retryLane))throw A.retryLane=d,Ji(s,d),Qt(x,s,d),Dh;bp(k)||qc(),a=Ih(s,a,c)}else bp(k)?(a.flags|=192,a.child=s.child,a=null):(s=A.treeContext,Fe=Cn(k.nextSibling),Ct=a,Oe=!0,Xr=null,Tn=!1,s!==null&&R0(a,s),a=Uh(a,d.children),a.flags|=4096);return a}return g?(si(),k=d.fallback,g=a.mode,A=s.child,B=A.sibling,d=mr(A,{mode:"hidden",children:d.children}),d.subtreeFlags=A.subtreeFlags&65011712,B!==null?k=mr(B,k):(k=Wi(k,g,c,null),k.flags|=2),k.return=a,d.return=a,d.sibling=k,a.child=d,Aa(null,d),d=a.child,k=s.child.memoizedState,k===null?k=zh(c):(g=k.cachePool,g!==null?(A=ct._currentValue,g=g.parent!==A?{parent:A,pool:A}:g):g=z0(),k={baseLanes:k.baseLanes|c,cachePool:g}),d.memoizedState=k,d.childLanes=Bh(s,x,c),a.memoizedState=Lh,Aa(s.child,d)):(ii(a),c=s.child,s=c.sibling,c=mr(c,{mode:"visible",children:d.children}),c.return=a,c.sibling=null,s!==null&&(x=a.deletions,x===null?(a.deletions=[s],a.flags|=16):x.push(s)),a.child=c,a.memoizedState=null,c)}function Uh(s,a){return a=jc({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function jc(s,a){return s=sn(22,s,null,a),s.lanes=0,s}function Ih(s,a,c){return ns(a,s.child,null,c),s=Uh(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Wb(s,a,c){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),eh(s.return,a,c)}function Ph(s,a,c,d,g,y){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=d,x.tail=c,x.tailMode=g,x.treeForkCount=y)}function Yb(s,a,c){var d=a.pendingProps,g=d.revealOrder,y=d.tail;d=d.children;var x=at.current,k=(x&2)!==0;if(k?(x=x&1|2,a.flags|=128):x&=1,Z(at,x),At(s,a,d,c),d=Oe?ma:0,!k&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Wb(s,c,a);else if(s.tag===19)Wb(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)s=c.alternate,s!==null&&xc(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Ph(a,!1,g,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&xc(s)===null){a.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}Ph(a,!0,c,null,y,d);break;case"together":Ph(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function Sr(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),li|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(Qs(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,c=mr(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=mr(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function $h(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&pc(s)))}function N_(s,a,c){switch(a.tag){case 3:It(a,a.stateNode.containerInfo),ei(a,ct,s.memoizedState.cache),Yi();break;case 27:case 5:ea(a);break;case 4:It(a,a.stateNode.containerInfo);break;case 10:ei(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,dh(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(ii(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Jb(s,a,c):(ii(a),s=Sr(s,a,c),s!==null?s.sibling:null);ii(a);break;case 19:var g=(s.flags&128)!==0;if(d=(c&a.childLanes)!==0,d||(Qs(s,a,c,!1),d=(c&a.childLanes)!==0),g){if(d)return Yb(s,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Z(at,at.current),d)break;return null;case 22:return a.lanes=0,Hb(s,a,c,a.pendingProps);case 24:ei(a,ct,s.memoizedState.cache)}return Sr(s,a,c)}function Qb(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)ft=!0;else{if(!$h(s,c)&&(a.flags&128)===0)return ft=!1,N_(s,a,c);ft=(s.flags&131072)!==0}else ft=!1,Oe&&(a.flags&1048576)!==0&&O0(a,ma,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(s=es(a.elementType),a.type=s,typeof s=="function")Fd(s)?(d=is(s,d),a.tag=1,a=Fb(null,a,s,d,c)):(a.tag=0,a=jh(null,a,s,d,c));else{if(s!=null){var g=s.$$typeof;if(g===j){a.tag=11,a=Ib(null,a,s,d,c);break e}else if(g===U){a.tag=14,a=Pb(null,a,s,d,c);break e}}throw a=ye(s)||s,Error(r(306,a,""))}}return a;case 0:return jh(s,a,a.type,a.pendingProps,c);case 1:return d=a.type,g=is(d,a.pendingProps),Fb(s,a,d,g,c);case 3:e:{if(It(a,a.stateNode.containerInfo),s===null)throw Error(r(387));d=a.pendingProps;var y=a.memoizedState;g=y.element,ah(s,a),Ea(a,d,null,c);var x=a.memoizedState;if(d=x.cache,ei(a,ct,d),d!==y.cache&&th(a,[ct],c,!0),xa(),d=x.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Gb(s,a,d,c);break e}else if(d!==g){g=Sn(Error(r(424)),a),ga(g),a=Gb(s,a,d,c);break e}else for(s=a.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Fe=Cn(s.firstChild),Ct=a,Oe=!0,Xr=null,Tn=!0,c=H0(a,null,d,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Yi(),d===g){a=Sr(s,a,c);break e}At(s,a,d,c)}a=a.child}return a;case 26:return Dc(s,a),s===null?(c=lw(a.type,null,a.pendingProps,null))?a.memoizedState=c:Oe||(c=a.type,s=a.pendingProps,d=Yc(Ee.current).createElement(c),d[kt]=a,d[Kt]=s,Ot(d,c,s),vt(d),a.stateNode=d):a.memoizedState=lw(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return ea(a),s===null&&Oe&&(d=a.stateNode=sw(a.type,a.pendingProps,Ee.current),Ct=a,Tn=!0,g=Fe,hi(a.type)?(wp=g,Fe=Cn(d.firstChild)):Fe=g),At(s,a,a.pendingProps.children,c),Dc(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&Oe&&((g=d=Fe)&&(d=lA(d,a.type,a.pendingProps,Tn),d!==null?(a.stateNode=d,Ct=a,Fe=Cn(d.firstChild),Tn=!1,g=!0):g=!1),g||Zr(a)),ea(a),g=a.type,y=a.pendingProps,x=s!==null?s.memoizedProps:null,d=y.children,mp(g,y)?d=null:x!==null&&mp(g,x)&&(a.flags|=32),a.memoizedState!==null&&(g=ph(s,a,E_,null,null,c),qa._currentValue=g),Dc(s,a),At(s,a,d,c),a.child;case 6:return s===null&&Oe&&((s=c=Fe)&&(c=cA(c,a.pendingProps,Tn),c!==null?(a.stateNode=c,Ct=a,Fe=null,s=!0):s=!1),s||Zr(a)),null;case 13:return Jb(s,a,c);case 4:return It(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=ns(a,null,d,c):At(s,a,d,c),a.child;case 11:return Ib(s,a,a.type,a.pendingProps,c);case 7:return At(s,a,a.pendingProps,c),a.child;case 8:return At(s,a,a.pendingProps.children,c),a.child;case 12:return At(s,a,a.pendingProps.children,c),a.child;case 10:return d=a.pendingProps,ei(a,a.type,d.value),At(s,a,d.children,c),a.child;case 9:return g=a.type._context,d=a.pendingProps.children,Xi(a),g=_t(g),d=d(g),a.flags|=1,At(s,a,d,c),a.child;case 14:return Pb(s,a,a.type,a.pendingProps,c);case 15:return $b(s,a,a.type,a.pendingProps,c);case 19:return Yb(s,a,c);case 31:return M_(s,a,c);case 22:return Hb(s,a,c,a.pendingProps);case 24:return Xi(a),d=_t(ct),s===null?(g=ih(),g===null&&(g=qe,y=nh(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),a.memoizedState={parent:d,cache:g},oh(a),ei(a,ct,g)):((s.lanes&c)!==0&&(ah(s,a),Ea(a,null,null,c),xa()),g=s.memoizedState,y=a.memoizedState,g.parent!==d?(g={parent:d,cache:d},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),ei(a,ct,d)):(d=y.cache,ei(a,ct,d),d!==g.cache&&th(a,[ct],c,!0))),At(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function xr(s){s.flags|=4}function Hh(s,a,c,d,g){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(Tv())s.flags|=8192;else throw ts=bc,sh}else s.flags&=-16777217}function Xb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!hw(a))if(Tv())s.flags|=8192;else throw ts=bc,sh}function Lc(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?My():536870912,s.lanes|=a,co|=a)}function Oa(s,a){if(!Oe)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Ge(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,d=0;if(a)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=c,a}function D_(s,a,c){var d=a.pendingProps;switch(Yd(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(a),null;case 1:return Ge(a),null;case 3:return c=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),br(ct),ot(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Ys(a)?xr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Xd())),Ge(a),null;case 26:var g=a.type,y=a.memoizedState;return s===null?(xr(a),y!==null?(Ge(a),Xb(a,y)):(Ge(a),Hh(a,g,null,d,c))):y?y!==s.memoizedState?(xr(a),Ge(a),Xb(a,y)):(Ge(a),a.flags&=-16777217):(s=s.memoizedProps,s!==d&&xr(a),Ge(a),Hh(a,g,s,d,c)),null;case 27:if(Fl(a),c=Ee.current,g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&xr(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Ge(a),null}s=ne.current,Ys(a)?M0(a):(s=sw(g,d,c),a.stateNode=s,xr(a))}return Ge(a),null;case 5:if(Fl(a),g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&xr(a);else{if(!d){if(a.stateNode===null)throw Error(r(166));return Ge(a),null}if(y=ne.current,Ys(a))M0(a);else{var x=Yc(Ee.current);switch(y){case 1:y=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=x.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?x.createElement("select",{is:d.is}):x.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?x.createElement(g,{is:d.is}):x.createElement(g)}}y[kt]=a,y[Kt]=d;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)y.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=y;e:switch(Ot(y,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&xr(a)}}return Ge(a),Hh(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,c),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&xr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(r(166));if(s=Ee.current,Ys(a)){if(s=a.stateNode,c=a.memoizedProps,d=null,g=Ct,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}s[kt]=a,s=!!(s.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Jv(s.nodeValue,c)),s||Zr(a,!0)}else s=Yc(s).createTextNode(d),s[kt]=a,a.stateNode=s}return Ge(a),null;case 31:if(c=a.memoizedState,s===null||s.memoizedState!==null){if(d=Ys(a),c!==null){if(s===null){if(!d)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[kt]=a}else Yi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ge(a),s=!1}else c=Xd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return a.flags&256?(an(a),a):(an(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Ge(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Ys(a),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[kt]=a}else Yi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ge(a),g=!1}else g=Xd(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(an(a),a):(an(a),null)}return an(a),(a.flags&128)!==0?(a.lanes=c,a):(c=d!==null,s=s!==null&&s.memoizedState!==null,c&&(d=a.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)),c!==s&&c&&(a.child.flags|=8192),Lc(a,a.updateQueue),Ge(a),null);case 4:return ot(),s===null&&up(a.stateNode.containerInfo),Ge(a),null;case 10:return br(a.type),Ge(a),null;case 19:if(F(at),d=a.memoizedState,d===null)return Ge(a),null;if(g=(a.flags&128)!==0,y=d.rendering,y===null)if(g)Oa(d,!1);else{if(nt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=xc(s),y!==null){for(a.flags|=128,Oa(d,!1),s=y.updateQueue,a.updateQueue=s,Lc(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)C0(c,s),c=c.sibling;return Z(at,at.current&1|2),Oe&&gr(a,d.treeForkCount),a.child}s=s.sibling}d.tail!==null&&en()>Pc&&(a.flags|=128,g=!0,Oa(d,!1),a.lanes=4194304)}else{if(!g)if(s=xc(y),s!==null){if(a.flags|=128,g=!0,s=s.updateQueue,a.updateQueue=s,Lc(a,s),Oa(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Oe)return Ge(a),null}else 2*en()-d.renderingStartTime>Pc&&c!==536870912&&(a.flags|=128,g=!0,Oa(d,!1),a.lanes=4194304);d.isBackwards?(y.sibling=a.child,a.child=y):(s=d.last,s!==null?s.sibling=y:a.child=y,d.last=y)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=en(),s.sibling=null,c=at.current,Z(at,g?c&1|2:c&1),Oe&&gr(a,d.treeForkCount),s):(Ge(a),null);case 22:case 23:return an(a),fh(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(c&536870912)!==0&&(a.flags&128)===0&&(Ge(a),a.subtreeFlags&6&&(a.flags|=8192)):Ge(a),c=a.updateQueue,c!==null&&Lc(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==c&&(a.flags|=2048),s!==null&&F(Zi),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),br(ct),Ge(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function j_(s,a){switch(Yd(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return br(ct),ot(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Fl(a),null;case 31:if(a.memoizedState!==null){if(an(a),a.alternate===null)throw Error(r(340));Yi()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(an(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Yi()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return F(at),null;case 4:return ot(),null;case 10:return br(a.type),null;case 22:case 23:return an(a),fh(),s!==null&&F(Zi),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return br(ct),null;case 25:return null;default:return null}}function Zb(s,a){switch(Yd(a),a.tag){case 3:br(ct),ot();break;case 26:case 27:case 5:Fl(a);break;case 4:ot();break;case 31:a.memoizedState!==null&&an(a);break;case 13:an(a);break;case 19:F(at);break;case 10:br(a.type);break;case 22:case 23:an(a),fh(),s!==null&&F(Zi);break;case 24:br(ct)}}function Ra(s,a){try{var c=a.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&s)===s){d=void 0;var y=c.create,x=c.inst;d=y(),x.destroy=d}c=c.next}while(c!==g)}}catch(k){Be(a,a.return,k)}}function oi(s,a,c){try{var d=a.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&s)===s){var x=d.inst,k=x.destroy;if(k!==void 0){x.destroy=void 0,g=a;var A=c,B=k;try{B()}catch(q){Be(g,A,q)}}}d=d.next}while(d!==y)}}catch(q){Be(a,a.return,q)}}function ev(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{V0(a,c)}catch(d){Be(s,s.return,d)}}}function tv(s,a,c){c.props=is(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(d){Be(s,a,d)}}function Ma(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof c=="function"?s.refCleanup=c(d):c.current=d}}catch(g){Be(s,a,g)}}function Yn(s,a){var c=s.ref,d=s.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Be(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Be(s,a,g)}else c.current=null}function nv(s){var a=s.type,c=s.memoizedProps,d=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Be(s,s.return,g)}}function qh(s,a,c){try{var d=s.stateNode;nA(d,s.type,c,a),d[Kt]=a}catch(g){Be(s,s.return,g)}}function rv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&hi(s.type)||s.tag===4}function Vh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&hi(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Kh(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=hr));else if(d!==4&&(d===27&&hi(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(Kh(s,a,c),s=s.sibling;s!==null;)Kh(s,a,c),s=s.sibling}function zc(s,a,c){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(d!==4&&(d===27&&hi(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(zc(s,a,c),s=s.sibling;s!==null;)zc(s,a,c),s=s.sibling}function iv(s){var a=s.stateNode,c=s.memoizedProps;try{for(var d=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Ot(a,d,c),a[kt]=s,a[Kt]=c}catch(y){Be(s,s.return,y)}}var Er=!1,dt=!1,Fh=!1,sv=typeof WeakSet=="function"?WeakSet:Set,wt=null;function L_(s,a){if(s=s.containerInfo,hp=ru,s=y0(s),Id(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var x=0,k=-1,A=-1,B=0,q=0,K=s,I=null;t:for(;;){for(var H;K!==c||g!==0&&K.nodeType!==3||(k=x+g),K!==y||d!==0&&K.nodeType!==3||(A=x+d),K.nodeType===3&&(x+=K.nodeValue.length),(H=K.firstChild)!==null;)I=K,K=H;for(;;){if(K===s)break t;if(I===c&&++B===g&&(k=x),I===y&&++q===d&&(A=x),(H=K.nextSibling)!==null)break;K=I,I=K.parentNode}K=H}c=k===-1||A===-1?null:{start:k,end:A}}else c=null}c=c||{start:0,end:0}}else c=null;for(pp={focusedElem:s,selectionRange:c},ru=!1,wt=a;wt!==null;)if(a=wt,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,wt=s;else for(;wt!==null;){switch(a=wt,y=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)g=s[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,c=a,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var ee=is(c.type,g);s=d.getSnapshotBeforeUpdate(ee,y),d.__reactInternalSnapshotBeforeUpdate=s}catch(ce){Be(c,c.return,ce)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)yp(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":yp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,wt=s;break}wt=a.return}}function ov(s,a,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:kr(s,c),d&4&&Ra(5,c);break;case 1:if(kr(s,c),d&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(x){Be(c,c.return,x)}else{var g=is(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(x){Be(c,c.return,x)}}d&64&&ev(c),d&512&&Ma(c,c.return);break;case 3:if(kr(s,c),d&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{V0(s,a)}catch(x){Be(c,c.return,x)}}break;case 27:a===null&&d&4&&iv(c);case 26:case 5:kr(s,c),a===null&&d&4&&nv(c),d&512&&Ma(c,c.return);break;case 12:kr(s,c);break;case 31:kr(s,c),d&4&&cv(s,c);break;case 13:kr(s,c),d&4&&uv(s,c),d&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=V_.bind(null,c),uA(s,c))));break;case 22:if(d=c.memoizedState!==null||Er,!d){a=a!==null&&a.memoizedState!==null||dt,g=Er;var y=dt;Er=d,(dt=a)&&!y?Cr(s,c,(c.subtreeFlags&8772)!==0):kr(s,c),Er=g,dt=y}break;case 30:break;default:kr(s,c)}}function av(s){var a=s.alternate;a!==null&&(s.alternate=null,av(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&xd(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ye=null,Gt=!1;function Tr(s,a,c){for(c=c.child;c!==null;)lv(s,a,c),c=c.sibling}function lv(s,a,c){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ta,c)}catch{}switch(c.tag){case 26:dt||Yn(c,a),Tr(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:dt||Yn(c,a);var d=Ye,g=Gt;hi(c.type)&&(Ye=c.stateNode,Gt=!1),Tr(s,a,c),Pa(c.stateNode),Ye=d,Gt=g;break;case 5:dt||Yn(c,a);case 6:if(d=Ye,g=Gt,Ye=null,Tr(s,a,c),Ye=d,Gt=g,Ye!==null)if(Gt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(c.stateNode)}catch(y){Be(c,a,y)}else try{Ye.removeChild(c.stateNode)}catch(y){Be(c,a,y)}break;case 18:Ye!==null&&(Gt?(s=Ye,ew(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),bo(s)):ew(Ye,c.stateNode));break;case 4:d=Ye,g=Gt,Ye=c.stateNode.containerInfo,Gt=!0,Tr(s,a,c),Ye=d,Gt=g;break;case 0:case 11:case 14:case 15:oi(2,c,a),dt||oi(4,c,a),Tr(s,a,c);break;case 1:dt||(Yn(c,a),d=c.stateNode,typeof d.componentWillUnmount=="function"&&tv(c,a,d)),Tr(s,a,c);break;case 21:Tr(s,a,c);break;case 22:dt=(d=dt)||c.memoizedState!==null,Tr(s,a,c),dt=d;break;default:Tr(s,a,c)}}function cv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{bo(s)}catch(c){Be(a,a.return,c)}}}function uv(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{bo(s)}catch(c){Be(a,a.return,c)}}function z_(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new sv),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new sv),a;default:throw Error(r(435,s.tag))}}function Bc(s,a){var c=z_(s);a.forEach(function(d){if(!c.has(d)){c.add(d);var g=K_.bind(null,s,d);d.then(g,g)}})}function Jt(s,a){var c=a.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=s,x=a,k=x;e:for(;k!==null;){switch(k.tag){case 27:if(hi(k.type)){Ye=k.stateNode,Gt=!1;break e}break;case 5:Ye=k.stateNode,Gt=!1;break e;case 3:case 4:Ye=k.stateNode.containerInfo,Gt=!0;break e}k=k.return}if(Ye===null)throw Error(r(160));lv(y,x,g),Ye=null,Gt=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)fv(a,s),a=a.sibling}var zn=null;function fv(s,a){var c=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Jt(a,s),Wt(s),d&4&&(oi(3,s,s.return),Ra(3,s),oi(5,s,s.return));break;case 1:Jt(a,s),Wt(s),d&512&&(dt||c===null||Yn(c,c.return)),d&64&&Er&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=zn;if(Jt(a,s),Wt(s),d&512&&(dt||c===null||Yn(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=s.memoizedState,c===null)if(d===null)if(s.stateNode===null){e:{d=s.type,c=s.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[ia]||y[kt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Ot(y,d,c),y[kt]=s,vt(y),d=y;break e;case"link":var x=fw("link","href",g).get(d+(c.href||""));if(x){for(var k=0;k<x.length;k++)if(y=x[k],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){x.splice(k,1);break t}}y=g.createElement(d),Ot(y,d,c),g.head.appendChild(y);break;case"meta":if(x=fw("meta","content",g).get(d+(c.content||""))){for(k=0;k<x.length;k++)if(y=x[k],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){x.splice(k,1);break t}}y=g.createElement(d),Ot(y,d,c),g.head.appendChild(y);break;default:throw Error(r(468,d))}y[kt]=s,vt(y),d=y}s.stateNode=d}else dw(g,s.type,s.stateNode);else s.stateNode=uw(g,d,s.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?dw(g,s.type,s.stateNode):uw(g,d,s.memoizedProps)):d===null&&s.stateNode!==null&&qh(s,s.memoizedProps,c.memoizedProps)}break;case 27:Jt(a,s),Wt(s),d&512&&(dt||c===null||Yn(c,c.return)),c!==null&&d&4&&qh(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Jt(a,s),Wt(s),d&512&&(dt||c===null||Yn(c,c.return)),s.flags&32){g=s.stateNode;try{Ps(g,"")}catch(ee){Be(s,s.return,ee)}}d&4&&s.stateNode!=null&&(g=s.memoizedProps,qh(s,g,c!==null?c.memoizedProps:g)),d&1024&&(Fh=!0);break;case 6:if(Jt(a,s),Wt(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,c=s.stateNode;try{c.nodeValue=d}catch(ee){Be(s,s.return,ee)}}break;case 3:if(Zc=null,g=zn,zn=Qc(a.containerInfo),Jt(a,s),zn=g,Wt(s),d&4&&c!==null&&c.memoizedState.isDehydrated)try{bo(a.containerInfo)}catch(ee){Be(s,s.return,ee)}Fh&&(Fh=!1,dv(s));break;case 4:d=zn,zn=Qc(s.stateNode.containerInfo),Jt(a,s),Wt(s),zn=d;break;case 12:Jt(a,s),Wt(s);break;case 31:Jt(a,s),Wt(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Bc(s,d)));break;case 13:Jt(a,s),Wt(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ic=en()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Bc(s,d)));break;case 22:g=s.memoizedState!==null;var A=c!==null&&c.memoizedState!==null,B=Er,q=dt;if(Er=B||g,dt=q||A,Jt(a,s),dt=q,Er=B,Wt(s),d&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||A||Er||dt||ss(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){A=c=a;try{if(y=A.stateNode,g)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{k=A.stateNode;var K=A.memoizedProps.style,I=K!=null&&K.hasOwnProperty("display")?K.display:null;k.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(ee){Be(A,A.return,ee)}}}else if(a.tag===6){if(c===null){A=a;try{A.stateNode.nodeValue=g?"":A.memoizedProps}catch(ee){Be(A,A.return,ee)}}}else if(a.tag===18){if(c===null){A=a;try{var H=A.stateNode;g?tw(H,!0):tw(A.stateNode,!1)}catch(ee){Be(A,A.return,ee)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Bc(s,c))));break;case 19:Jt(a,s),Wt(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Bc(s,d)));break;case 30:break;case 21:break;default:Jt(a,s),Wt(s)}}function Wt(s){var a=s.flags;if(a&2){try{for(var c,d=s.return;d!==null;){if(rv(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,y=Vh(s);zc(s,y,g);break;case 5:var x=c.stateNode;c.flags&32&&(Ps(x,""),c.flags&=-33);var k=Vh(s);zc(s,k,x);break;case 3:case 4:var A=c.stateNode.containerInfo,B=Vh(s);Kh(s,B,A);break;default:throw Error(r(161))}}catch(q){Be(s,s.return,q)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function dv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;dv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function kr(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ov(s,a.alternate,a),a=a.sibling}function ss(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:oi(4,a,a.return),ss(a);break;case 1:Yn(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&tv(a,a.return,c),ss(a);break;case 27:Pa(a.stateNode);case 26:case 5:Yn(a,a.return),ss(a);break;case 22:a.memoizedState===null&&ss(a);break;case 30:ss(a);break;default:ss(a)}s=s.sibling}}function Cr(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,g=s,y=a,x=y.flags;switch(y.tag){case 0:case 11:case 15:Cr(g,y,c),Ra(4,y);break;case 1:if(Cr(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(B){Be(d,d.return,B)}if(d=y,g=d.updateQueue,g!==null){var k=d.stateNode;try{var A=g.shared.hiddenCallbacks;if(A!==null)for(g.shared.hiddenCallbacks=null,g=0;g<A.length;g++)q0(A[g],k)}catch(B){Be(d,d.return,B)}}c&&x&64&&ev(y),Ma(y,y.return);break;case 27:iv(y);case 26:case 5:Cr(g,y,c),c&&d===null&&x&4&&nv(y),Ma(y,y.return);break;case 12:Cr(g,y,c);break;case 31:Cr(g,y,c),c&&x&4&&cv(g,y);break;case 13:Cr(g,y,c),c&&x&4&&uv(g,y);break;case 22:y.memoizedState===null&&Cr(g,y,c),Ma(y,y.return);break;case 30:break;default:Cr(g,y,c)}a=a.sibling}}function Gh(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&ya(c))}function Jh(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ya(s))}function Bn(s,a,c,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)hv(s,a,c,d),a=a.sibling}function hv(s,a,c,d){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Bn(s,a,c,d),g&2048&&Ra(9,a);break;case 1:Bn(s,a,c,d);break;case 3:Bn(s,a,c,d),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ya(s)));break;case 12:if(g&2048){Bn(s,a,c,d),s=a.stateNode;try{var y=a.memoizedProps,x=y.id,k=y.onPostCommit;typeof k=="function"&&k(x,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(A){Be(a,a.return,A)}}else Bn(s,a,c,d);break;case 31:Bn(s,a,c,d);break;case 13:Bn(s,a,c,d);break;case 23:break;case 22:y=a.stateNode,x=a.alternate,a.memoizedState!==null?y._visibility&2?Bn(s,a,c,d):Na(s,a):y._visibility&2?Bn(s,a,c,d):(y._visibility|=2,oo(s,a,c,d,(a.subtreeFlags&10256)!==0||!1)),g&2048&&Gh(x,a);break;case 24:Bn(s,a,c,d),g&2048&&Jh(a.alternate,a);break;default:Bn(s,a,c,d)}}function oo(s,a,c,d,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=s,x=a,k=c,A=d,B=x.flags;switch(x.tag){case 0:case 11:case 15:oo(y,x,k,A,g),Ra(8,x);break;case 23:break;case 22:var q=x.stateNode;x.memoizedState!==null?q._visibility&2?oo(y,x,k,A,g):Na(y,x):(q._visibility|=2,oo(y,x,k,A,g)),g&&B&2048&&Gh(x.alternate,x);break;case 24:oo(y,x,k,A,g),g&&B&2048&&Jh(x.alternate,x);break;default:oo(y,x,k,A,g)}a=a.sibling}}function Na(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,d=a,g=d.flags;switch(d.tag){case 22:Na(c,d),g&2048&&Gh(d.alternate,d);break;case 24:Na(c,d),g&2048&&Jh(d.alternate,d);break;default:Na(c,d)}a=a.sibling}}var Da=8192;function ao(s,a,c){if(s.subtreeFlags&Da)for(s=s.child;s!==null;)pv(s,a,c),s=s.sibling}function pv(s,a,c){switch(s.tag){case 26:ao(s,a,c),s.flags&Da&&s.memoizedState!==null&&xA(c,zn,s.memoizedState,s.memoizedProps);break;case 5:ao(s,a,c);break;case 3:case 4:var d=zn;zn=Qc(s.stateNode.containerInfo),ao(s,a,c),zn=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=Da,Da=16777216,ao(s,a,c),Da=d):ao(s,a,c));break;default:ao(s,a,c)}}function mv(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function ja(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];wt=d,yv(d,s)}mv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gv(s),s=s.sibling}function gv(s){switch(s.tag){case 0:case 11:case 15:ja(s),s.flags&2048&&oi(9,s,s.return);break;case 3:ja(s);break;case 12:ja(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Uc(s)):ja(s);break;default:ja(s)}}function Uc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];wt=d,yv(d,s)}mv(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:oi(8,a,a.return),Uc(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Uc(a));break;default:Uc(a)}s=s.sibling}}function yv(s,a){for(;wt!==null;){var c=wt;switch(c.tag){case 0:case 11:case 15:oi(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ya(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,wt=d;else e:for(c=s;wt!==null;){d=wt;var g=d.sibling,y=d.return;if(av(d),d===c){wt=null;break e}if(g!==null){g.return=y,wt=g;break e}wt=y}}}var B_={getCacheForType:function(s){var a=_t(ct),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c},cacheSignal:function(){return _t(ct).controller.signal}},U_=typeof WeakMap=="function"?WeakMap:Map,Ne=0,qe=null,Te=null,_e=0,ze=0,ln=null,ai=!1,lo=!1,Wh=!1,_r=0,nt=0,li=0,as=0,Yh=0,cn=0,co=0,La=null,Yt=null,Qh=!1,Ic=0,bv=0,Pc=1/0,$c=null,ci=null,yt=0,ui=null,uo=null,Ar=0,Xh=0,Zh=null,vv=null,za=0,ep=null;function un(){return(Ne&2)!==0&&_e!==0?_e&-_e:P.T!==null?op():Ly()}function wv(){if(cn===0)if((_e&536870912)===0||Oe){var s=Wl;Wl<<=1,(Wl&3932160)===0&&(Wl=262144),cn=s}else cn=536870912;return s=on.current,s!==null&&(s.flags|=32),cn}function Qt(s,a,c){(s===qe&&(ze===2||ze===9)||s.cancelPendingCommit!==null)&&(fo(s,0),fi(s,_e,cn,!1)),ra(s,c),((Ne&2)===0||s!==qe)&&(s===qe&&((Ne&2)===0&&(as|=c),nt===4&&fi(s,_e,cn,!1)),Qn(s))}function Sv(s,a,c){if((Ne&6)!==0)throw Error(r(327));var d=!c&&(a&127)===0&&(a&s.expiredLanes)===0||na(s,a),g=d?$_(s,a):np(s,a,!0),y=d;do{if(g===0){lo&&!d&&fi(s,a,0,!1);break}else{if(c=s.current.alternate,y&&!I_(c)){g=np(s,a,!1),y=!1;continue}if(g===2){if(y=a,s.errorRecoveryDisabledLanes&y)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var k=s;g=La;var A=k.current.memoizedState.isDehydrated;if(A&&(fo(k,x).flags|=256),x=np(k,x,!1),x!==2){if(Wh&&!A){k.errorRecoveryDisabledLanes|=y,as|=y,g=4;break e}y=Yt,Yt=g,y!==null&&(Yt===null?Yt=y:Yt.push.apply(Yt,y))}g=x}if(y=!1,g!==2)continue}}if(g===1){fo(s,0),fi(s,a,0,!0);break}e:{switch(d=s,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:fi(d,a,cn,!ai);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=Ic+300-en(),10<g)){if(fi(d,a,cn,!ai),Ql(d,0,!0)!==0)break e;Ar=a,d.timeoutHandle=Xv(xv.bind(null,d,c,Yt,$c,Qh,a,cn,as,co,ai,y,"Throttled",-0,0),g);break e}xv(d,c,Yt,$c,Qh,a,cn,as,co,ai,y,null,-0,0)}}break}while(!0);Qn(s)}function xv(s,a,c,d,g,y,x,k,A,B,q,K,I,H){if(s.timeoutHandle=-1,K=a.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hr},pv(a,y,K);var ee=(y&62914560)===y?Ic-en():(y&4194048)===y?bv-en():0;if(ee=EA(K,ee),ee!==null){Ar=y,s.cancelPendingCommit=ee(Rv.bind(null,s,a,y,c,d,g,x,k,A,q,K,null,I,H)),fi(s,y,x,!B);return}}Rv(s,a,y,c,d,g,x,k,A)}function I_(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!rn(y(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function fi(s,a,c,d){a&=~Yh,a&=~as,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var g=a;0<g;){var y=31-nn(g),x=1<<y;d[y]=-1,g&=~x}c!==0&&Ny(s,c,a)}function Hc(){return(Ne&6)===0?(Ba(0),!1):!0}function tp(){if(Te!==null){if(ze===0)var s=Te.return;else s=Te,yr=Qi=null,yh(s),to=null,va=0,s=Te;for(;s!==null;)Zb(s.alternate,s),s=s.return;Te=null}}function fo(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,sA(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Ar=0,tp(),qe=s,Te=c=mr(s.current,null),_e=a,ze=0,ln=null,ai=!1,lo=na(s,a),Wh=!1,co=cn=Yh=as=li=nt=0,Yt=La=null,Qh=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var g=31-nn(d),y=1<<g;a|=s[g],d&=~y}return _r=a,cc(),c}function Ev(s,a){ge=null,P.H=_a,a===eo||a===yc?(a=I0(),ze=3):a===sh?(a=I0(),ze=4):ze=a===Dh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ln=a,Te===null&&(nt=1,Mc(s,Sn(a,s.current)))}function Tv(){var s=on.current;return s===null?!0:(_e&4194048)===_e?kn===null:(_e&62914560)===_e||(_e&536870912)!==0?s===kn:!1}function kv(){var s=P.H;return P.H=_a,s===null?_a:s}function Cv(){var s=P.A;return P.A=B_,s}function qc(){nt=4,ai||(_e&4194048)!==_e&&on.current!==null||(lo=!0),(li&134217727)===0&&(as&134217727)===0||qe===null||fi(qe,_e,cn,!1)}function np(s,a,c){var d=Ne;Ne|=2;var g=kv(),y=Cv();(qe!==s||_e!==a)&&($c=null,fo(s,a)),a=!1;var x=nt;e:do try{if(ze!==0&&Te!==null){var k=Te,A=ln;switch(ze){case 8:tp(),x=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(a=!0);var B=ze;if(ze=0,ln=null,ho(s,k,A,B),c&&lo){x=0;break e}break;default:B=ze,ze=0,ln=null,ho(s,k,A,B)}}P_(),x=nt;break}catch(q){Ev(s,q)}while(!0);return a&&s.shellSuspendCounter++,yr=Qi=null,Ne=d,P.H=g,P.A=y,Te===null&&(qe=null,_e=0,cc()),x}function P_(){for(;Te!==null;)_v(Te)}function $_(s,a){var c=Ne;Ne|=2;var d=kv(),g=Cv();qe!==s||_e!==a?($c=null,Pc=en()+500,fo(s,a)):lo=na(s,a);e:do try{if(ze!==0&&Te!==null){a=Te;var y=ln;t:switch(ze){case 1:ze=0,ln=null,ho(s,a,y,1);break;case 2:case 9:if(B0(y)){ze=0,ln=null,Av(a);break}a=function(){ze!==2&&ze!==9||qe!==s||(ze=7),Qn(s)},y.then(a,a);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:B0(y)?(ze=0,ln=null,Av(a)):(ze=0,ln=null,ho(s,a,y,7));break;case 5:var x=null;switch(Te.tag){case 26:x=Te.memoizedState;case 5:case 27:var k=Te;if(x?hw(x):k.stateNode.complete){ze=0,ln=null;var A=k.sibling;if(A!==null)Te=A;else{var B=k.return;B!==null?(Te=B,Vc(B)):Te=null}break t}}ze=0,ln=null,ho(s,a,y,5);break;case 6:ze=0,ln=null,ho(s,a,y,6);break;case 8:tp(),nt=6;break e;default:throw Error(r(462))}}H_();break}catch(q){Ev(s,q)}while(!0);return yr=Qi=null,P.H=d,P.A=g,Ne=c,Te!==null?0:(qe=null,_e=0,cc(),nt)}function H_(){for(;Te!==null&&!fC();)_v(Te)}function _v(s){var a=Qb(s.alternate,s,_r);s.memoizedProps=s.pendingProps,a===null?Vc(s):Te=a}function Av(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=Kb(c,a,a.pendingProps,a.type,void 0,_e);break;case 11:a=Kb(c,a,a.pendingProps,a.type.render,a.ref,_e);break;case 5:yh(a);default:Zb(c,a),a=Te=C0(a,_r),a=Qb(c,a,_r)}s.memoizedProps=s.pendingProps,a===null?Vc(s):Te=a}function ho(s,a,c,d){yr=Qi=null,yh(a),to=null,va=0;var g=a.return;try{if(R_(s,g,a,c,_e)){nt=1,Mc(s,Sn(c,s.current)),Te=null;return}}catch(y){if(g!==null)throw Te=g,y;nt=1,Mc(s,Sn(c,s.current)),Te=null;return}a.flags&32768?(Oe||d===1?s=!0:lo||(_e&536870912)!==0?s=!1:(ai=s=!0,(d===2||d===9||d===3||d===6)&&(d=on.current,d!==null&&d.tag===13&&(d.flags|=16384))),Ov(a,s)):Vc(a)}function Vc(s){var a=s;do{if((a.flags&32768)!==0){Ov(a,ai);return}s=a.return;var c=D_(a.alternate,a,_r);if(c!==null){Te=c;return}if(a=a.sibling,a!==null){Te=a;return}Te=a=s}while(a!==null);nt===0&&(nt=5)}function Ov(s,a){do{var c=j_(s.alternate,s);if(c!==null){c.flags&=32767,Te=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){Te=s;return}Te=s=c}while(s!==null);nt=6,Te=null}function Rv(s,a,c,d,g,y,x,k,A){s.cancelPendingCommit=null;do Kc();while(yt!==0);if((Ne&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=Vd,SC(s,c,y,x,k,A),s===qe&&(Te=qe=null,_e=0),uo=a,ui=s,Ar=c,Xh=y,Zh=g,vv=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,F_(Gl,function(){return Lv(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,g=J.p,J.p=2,x=Ne,Ne|=4;try{L_(s,a,c)}finally{Ne=x,J.p=g,P.T=d}}yt=1,Mv(),Nv(),Dv()}}function Mv(){if(yt===1){yt=0;var s=ui,a=uo,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var d=J.p;J.p=2;var g=Ne;Ne|=4;try{fv(a,s);var y=pp,x=y0(s.containerInfo),k=y.focusedElem,A=y.selectionRange;if(x!==k&&k&&k.ownerDocument&&g0(k.ownerDocument.documentElement,k)){if(A!==null&&Id(k)){var B=A.start,q=A.end;if(q===void 0&&(q=B),"selectionStart"in k)k.selectionStart=B,k.selectionEnd=Math.min(q,k.value.length);else{var K=k.ownerDocument||document,I=K&&K.defaultView||window;if(I.getSelection){var H=I.getSelection(),ee=k.textContent.length,ce=Math.min(A.start,ee),He=A.end===void 0?ce:Math.min(A.end,ee);!H.extend&&ce>He&&(x=He,He=ce,ce=x);var D=m0(k,ce),R=m0(k,He);if(D&&R&&(H.rangeCount!==1||H.anchorNode!==D.node||H.anchorOffset!==D.offset||H.focusNode!==R.node||H.focusOffset!==R.offset)){var z=K.createRange();z.setStart(D.node,D.offset),H.removeAllRanges(),ce>He?(H.addRange(z),H.extend(R.node,R.offset)):(z.setEnd(R.node,R.offset),H.addRange(z))}}}}for(K=[],H=k;H=H.parentNode;)H.nodeType===1&&K.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<K.length;k++){var V=K[k];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}ru=!!hp,pp=hp=null}finally{Ne=g,J.p=d,P.T=c}}s.current=a,yt=2}}function Nv(){if(yt===2){yt=0;var s=ui,a=uo,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var d=J.p;J.p=2;var g=Ne;Ne|=4;try{ov(s,a.alternate,a)}finally{Ne=g,J.p=d,P.T=c}}yt=3}}function Dv(){if(yt===4||yt===3){yt=0,dC();var s=ui,a=uo,c=Ar,d=vv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?yt=5:(yt=0,uo=ui=null,jv(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(ci=null),wd(c),a=a.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ta,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=P.T,g=J.p,J.p=2,P.T=null;try{for(var y=s.onRecoverableError,x=0;x<d.length;x++){var k=d[x];y(k.value,{componentStack:k.stack})}}finally{P.T=a,J.p=g}}(Ar&3)!==0&&Kc(),Qn(s),g=s.pendingLanes,(c&261930)!==0&&(g&42)!==0?s===ep?za++:(za=0,ep=s):za=0,Ba(0)}}function jv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,ya(a)))}function Kc(){return Mv(),Nv(),Dv(),Lv()}function Lv(){if(yt!==5)return!1;var s=ui,a=Xh;Xh=0;var c=wd(Ar),d=P.T,g=J.p;try{J.p=32>c?32:c,P.T=null,c=Zh,Zh=null;var y=ui,x=Ar;if(yt=0,uo=ui=null,Ar=0,(Ne&6)!==0)throw Error(r(331));var k=Ne;if(Ne|=4,gv(y.current),hv(y,y.current,x,c),Ne=k,Ba(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ta,y)}catch{}return!0}finally{J.p=g,P.T=d,jv(s,a)}}function zv(s,a,c){a=Sn(c,a),a=Nh(s.stateNode,a,2),s=ri(s,a,2),s!==null&&(ra(s,2),Qn(s))}function Be(s,a,c){if(s.tag===3)zv(s,s,c);else for(;a!==null;){if(a.tag===3){zv(a,s,c);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ci===null||!ci.has(d))){s=Sn(c,s),c=Bb(2),d=ri(a,c,2),d!==null&&(Ub(c,d,a,s),ra(d,2),Qn(d));break}}a=a.return}}function rp(s,a,c){var d=s.pingCache;if(d===null){d=s.pingCache=new U_;var g=new Set;d.set(a,g)}else g=d.get(a),g===void 0&&(g=new Set,d.set(a,g));g.has(c)||(Wh=!0,g.add(c),s=q_.bind(null,s,a,c),a.then(s,s))}function q_(s,a,c){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,qe===s&&(_e&c)===c&&(nt===4||nt===3&&(_e&62914560)===_e&&300>en()-Ic?(Ne&2)===0&&fo(s,0):Yh|=c,co===_e&&(co=0)),Qn(s)}function Bv(s,a){a===0&&(a=My()),s=Ji(s,a),s!==null&&(ra(s,a),Qn(s))}function V_(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),Bv(s,c)}function K_(s,a){var c=0;switch(s.tag){case 31:case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(a),Bv(s,c)}function F_(s,a){return gd(s,a)}var Fc=null,po=null,ip=!1,Gc=!1,sp=!1,di=0;function Qn(s){s!==po&&s.next===null&&(po===null?Fc=po=s:po=po.next=s),Gc=!0,ip||(ip=!0,J_())}function Ba(s,a){if(!sp&&Gc){sp=!0;do for(var c=!1,d=Fc;d!==null;){if(s!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var x=d.suspendedLanes,k=d.pingedLanes;y=(1<<31-nn(42|s)+1)-1,y&=g&~(x&~k),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,$v(d,y))}else y=_e,y=Ql(d,d===qe?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||na(d,y)||(c=!0,$v(d,y));d=d.next}while(c);sp=!1}}function G_(){Uv()}function Uv(){Gc=ip=!1;var s=0;di!==0&&iA()&&(s=di);for(var a=en(),c=null,d=Fc;d!==null;){var g=d.next,y=Iv(d,a);y===0?(d.next=null,c===null?Fc=g:c.next=g,g===null&&(po=c)):(c=d,(s!==0||(y&3)!==0)&&(Gc=!0)),d=g}yt!==0&&yt!==5||Ba(s),di!==0&&(di=0)}function Iv(s,a){for(var c=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var x=31-nn(y),k=1<<x,A=g[x];A===-1?((k&c)===0||(k&d)!==0)&&(g[x]=wC(k,a)):A<=a&&(s.expiredLanes|=k),y&=~k}if(a=qe,c=_e,c=Ql(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,c===0||s===a&&(ze===2||ze===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&yd(d),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||na(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(d!==null&&yd(d),wd(c)){case 2:case 8:c=Oy;break;case 32:c=Gl;break;case 268435456:c=Ry;break;default:c=Gl}return d=Pv.bind(null,s),c=gd(c,d),s.callbackPriority=a,s.callbackNode=c,a}return d!==null&&d!==null&&yd(d),s.callbackPriority=2,s.callbackNode=null,2}function Pv(s,a){if(yt!==0&&yt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Kc()&&s.callbackNode!==c)return null;var d=_e;return d=Ql(s,s===qe?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(Sv(s,d,a),Iv(s,en()),s.callbackNode!=null&&s.callbackNode===c?Pv.bind(null,s):null)}function $v(s,a){if(Kc())return null;Sv(s,a,!0)}function J_(){oA(function(){(Ne&6)!==0?gd(Ay,G_):Uv()})}function op(){if(di===0){var s=Xs;s===0&&(s=Jl,Jl<<=1,(Jl&261888)===0&&(Jl=256)),di=s}return di}function Hv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:tc(""+s)}function qv(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function W_(s,a,c,d,g){if(a==="submit"&&c&&c.stateNode===g){var y=Hv((g[Kt]||null).action),x=d.submitter;x&&(a=(a=x[Kt]||null)?Hv(a.formAction):x.getAttribute("formAction"),a!==null&&(y=a,x=null));var k=new sc("action","action",null,d,g);s.push({event:k,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(di!==0){var A=x?qv(g,x):new FormData(g);Ch(c,{pending:!0,data:A,method:g.method,action:y},null,A)}}else typeof y=="function"&&(k.preventDefault(),A=x?qv(g,x):new FormData(g),Ch(c,{pending:!0,data:A,method:g.method,action:y},y,A))},currentTarget:g}]})}}for(var ap=0;ap<qd.length;ap++){var lp=qd[ap],Y_=lp.toLowerCase(),Q_=lp[0].toUpperCase()+lp.slice(1);Ln(Y_,"on"+Q_)}Ln(w0,"onAnimationEnd"),Ln(S0,"onAnimationIteration"),Ln(x0,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(h_,"onTransitionRun"),Ln(p_,"onTransitionStart"),Ln(m_,"onTransitionCancel"),Ln(E0,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ua));function Vv(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var d=s[c],g=d.event;d=d.listeners;e:{var y=void 0;if(a)for(var x=d.length-1;0<=x;x--){var k=d[x],A=k.instance,B=k.currentTarget;if(k=k.listener,A!==y&&g.isPropagationStopped())break e;y=k,g.currentTarget=B;try{y(g)}catch(q){lc(q)}g.currentTarget=null,y=A}else for(x=0;x<d.length;x++){if(k=d[x],A=k.instance,B=k.currentTarget,k=k.listener,A!==y&&g.isPropagationStopped())break e;y=k,g.currentTarget=B;try{y(g)}catch(q){lc(q)}g.currentTarget=null,y=A}}}}function ke(s,a){var c=a[Sd];c===void 0&&(c=a[Sd]=new Set);var d=s+"__bubble";c.has(d)||(Kv(a,s,2,!1),c.add(d))}function cp(s,a,c){var d=0;a&&(d|=4),Kv(c,s,d,a)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function up(s){if(!s[Jc]){s[Jc]=!0,Uy.forEach(function(c){c!=="selectionchange"&&(X_.has(c)||cp(c,!1,s),cp(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Jc]||(a[Jc]=!0,cp("selectionchange",!1,a))}}function Kv(s,a,c,d){switch(ww(a)){case 2:var g=CA;break;case 8:g=_A;break;default:g=kp}c=g.bind(null,a,c,s),g=void 0,!Rd||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(a,c,{capture:!0,passive:g}):s.addEventListener(a,c,!0):g!==void 0?s.addEventListener(a,c,{passive:g}):s.addEventListener(a,c,!1)}function fp(s,a,c,d,g){var y=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var k=d.stateNode.containerInfo;if(k===g)break;if(x===4)for(x=d.return;x!==null;){var A=x.tag;if((A===3||A===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;k!==null;){if(x=Ls(k),x===null)return;if(A=x.tag,A===5||A===6||A===26||A===27){d=y=x;continue e}k=k.parentNode}}d=d.return}Yy(function(){var B=y,q=Ad(c),K=[];e:{var I=T0.get(s);if(I!==void 0){var H=sc,ee=s;switch(s){case"keypress":if(rc(c)===0)break e;case"keydown":case"keyup":H=KC;break;case"focusin":ee="focus",H=jd;break;case"focusout":ee="blur",H=jd;break;case"beforeblur":case"afterblur":H=jd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=DC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=JC;break;case w0:case S0:case x0:H=zC;break;case E0:H=YC;break;case"scroll":case"scrollend":H=MC;break;case"wheel":H=XC;break;case"copy":case"cut":case"paste":H=UC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=t0;break;case"toggle":case"beforetoggle":H=e_}var ce=(a&4)!==0,He=!ce&&(s==="scroll"||s==="scrollend"),D=ce?I!==null?I+"Capture":null:I;ce=[];for(var R=B,z;R!==null;){var V=R;if(z=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||z===null||D===null||(V=oa(R,D),V!=null&&ce.push(Ia(R,V,z))),He)break;R=R.return}0<ce.length&&(I=new H(I,ee,null,c,q),K.push({event:I,listeners:ce}))}}if((a&7)===0){e:{if(I=s==="mouseover"||s==="pointerover",H=s==="mouseout"||s==="pointerout",I&&c!==_d&&(ee=c.relatedTarget||c.fromElement)&&(Ls(ee)||ee[js]))break e;if((H||I)&&(I=q.window===q?q:(I=q.ownerDocument)?I.defaultView||I.parentWindow:window,H?(ee=c.relatedTarget||c.toElement,H=B,ee=ee?Ls(ee):null,ee!==null&&(He=o(ee),ce=ee.tag,ee!==He||ce!==5&&ce!==27&&ce!==6)&&(ee=null)):(H=null,ee=B),H!==ee)){if(ce=Zy,V="onMouseLeave",D="onMouseEnter",R="mouse",(s==="pointerout"||s==="pointerover")&&(ce=t0,V="onPointerLeave",D="onPointerEnter",R="pointer"),He=H==null?I:sa(H),z=ee==null?I:sa(ee),I=new ce(V,R+"leave",H,c,q),I.target=He,I.relatedTarget=z,V=null,Ls(q)===B&&(ce=new ce(D,R+"enter",ee,c,q),ce.target=z,ce.relatedTarget=He,V=ce),He=V,H&&ee)t:{for(ce=Z_,D=H,R=ee,z=0,V=D;V;V=ce(V))z++;V=0;for(var ae=R;ae;ae=ce(ae))V++;for(;0<z-V;)D=ce(D),z--;for(;0<V-z;)R=ce(R),V--;for(;z--;){if(D===R||R!==null&&D===R.alternate){ce=D;break t}D=ce(D),R=ce(R)}ce=null}else ce=null;H!==null&&Fv(K,I,H,ce,!1),ee!==null&&He!==null&&Fv(K,He,ee,ce,!0)}}e:{if(I=B?sa(B):window,H=I.nodeName&&I.nodeName.toLowerCase(),H==="select"||H==="input"&&I.type==="file")var Re=c0;else if(a0(I))if(u0)Re=u_;else{Re=l_;var ie=a_}else H=I.nodeName,!H||H.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?B&&Cd(B.elementType)&&(Re=c0):Re=c_;if(Re&&(Re=Re(s,B))){l0(K,Re,c,q);break e}ie&&ie(s,I,B),s==="focusout"&&B&&I.type==="number"&&B.memoizedProps.value!=null&&kd(I,"number",I.value)}switch(ie=B?sa(B):window,s){case"focusin":(a0(ie)||ie.contentEditable==="true")&&(Vs=ie,Pd=B,pa=null);break;case"focusout":pa=Pd=Vs=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,b0(K,c,q);break;case"selectionchange":if(d_)break;case"keydown":case"keyup":b0(K,c,q)}var be;if(zd)e:{switch(s){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else qs?s0(s,c)&&(Ae="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Ae="onCompositionStart");Ae&&(n0&&c.locale!=="ko"&&(qs||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&qs&&(be=Qy()):(Yr=q,Md="value"in Yr?Yr.value:Yr.textContent,qs=!0)),ie=Wc(B,Ae),0<ie.length&&(Ae=new e0(Ae,s,null,c,q),K.push({event:Ae,listeners:ie}),be?Ae.data=be:(be=o0(c),be!==null&&(Ae.data=be)))),(be=n_?r_(s,c):i_(s,c))&&(Ae=Wc(B,"onBeforeInput"),0<Ae.length&&(ie=new e0("onBeforeInput","beforeinput",null,c,q),K.push({event:ie,listeners:Ae}),ie.data=be)),W_(K,s,B,c,q)}Vv(K,a)})}function Ia(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Wc(s,a){for(var c=a+"Capture",d=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=oa(s,c),g!=null&&d.unshift(Ia(s,g,y)),g=oa(s,a),g!=null&&d.push(Ia(s,g,y))),s.tag===3)return d;s=s.return}return[]}function Z_(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Fv(s,a,c,d,g){for(var y=a._reactName,x=[];c!==null&&c!==d;){var k=c,A=k.alternate,B=k.stateNode;if(k=k.tag,A!==null&&A===d)break;k!==5&&k!==26&&k!==27||B===null||(A=B,g?(B=oa(c,y),B!=null&&x.unshift(Ia(c,B,A))):g||(B=oa(c,y),B!=null&&x.push(Ia(c,B,A)))),c=c.return}x.length!==0&&s.push({event:a,listeners:x})}var eA=/\r\n?/g,tA=/\u0000|\uFFFD/g;function Gv(s){return(typeof s=="string"?s:""+s).replace(eA,`
`).replace(tA,"")}function Jv(s,a){return a=Gv(a),Gv(s)===a}function $e(s,a,c,d,g,y){switch(c){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Ps(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Ps(s,""+d);break;case"className":Zl(s,"class",d);break;case"tabIndex":Zl(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Zl(s,c,d);break;case"style":Jy(s,d,y);break;case"data":if(a!=="object"){Zl(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(c);break}d=tc(""+d),s.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&$e(s,a,"name",g.name,g,null),$e(s,a,"formEncType",g.formEncType,g,null),$e(s,a,"formMethod",g.formMethod,g,null),$e(s,a,"formTarget",g.formTarget,g,null)):($e(s,a,"encType",g.encType,g,null),$e(s,a,"method",g.method,g,null),$e(s,a,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(c);break}d=tc(""+d),s.setAttribute(c,d);break;case"onClick":d!=null&&(s.onclick=hr);break;case"onScroll":d!=null&&ke("scroll",s);break;case"onScrollEnd":d!=null&&ke("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}c=tc(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,""+d):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":d===!0?s.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(c,d):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(c,d):s.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(c):s.setAttribute(c,d);break;case"popover":ke("beforetoggle",s),ke("toggle",s),Xl(s,"popover",d);break;case"xlinkActuate":dr(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":dr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":dr(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":dr(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":dr(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":dr(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":dr(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":dr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":dr(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Xl(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=OC.get(c)||c,Xl(s,c,d))}}function dp(s,a,c,d,g,y){switch(c){case"style":Jy(s,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof d=="string"?Ps(s,d):(typeof d=="number"||typeof d=="bigint")&&Ps(s,""+d);break;case"onScroll":d!=null&&ke("scroll",s);break;case"onScrollEnd":d!=null&&ke("scrollend",s);break;case"onClick":d!=null&&(s.onclick=hr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Iy.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),y=s[Kt]||null,y=y!=null?y[c]:null,typeof y=="function"&&s.removeEventListener(a,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,d,g);break e}c in s?s[c]=d:d===!0?s.setAttribute(c,""):Xl(s,c,d)}}}function Ot(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",s),ke("load",s);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var x=c[y];if(x!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:$e(s,a,y,x,c,null)}}g&&$e(s,a,"srcSet",c.srcSet,c,null),d&&$e(s,a,"src",c.src,c,null);return;case"input":ke("invalid",s);var k=y=x=g=null,A=null,B=null;for(d in c)if(c.hasOwnProperty(d)){var q=c[d];if(q!=null)switch(d){case"name":g=q;break;case"type":x=q;break;case"checked":A=q;break;case"defaultChecked":B=q;break;case"value":y=q;break;case"defaultValue":k=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,a));break;default:$e(s,a,d,q,c,null)}}Vy(s,y,k,A,B,x,g,!1);return;case"select":ke("invalid",s),d=x=y=null;for(g in c)if(c.hasOwnProperty(g)&&(k=c[g],k!=null))switch(g){case"value":y=k;break;case"defaultValue":x=k;break;case"multiple":d=k;default:$e(s,a,g,k,c,null)}a=y,c=x,s.multiple=!!d,a!=null?Is(s,!!d,a,!1):c!=null&&Is(s,!!d,c,!0);return;case"textarea":ke("invalid",s),y=g=d=null;for(x in c)if(c.hasOwnProperty(x)&&(k=c[x],k!=null))switch(x){case"value":d=k;break;case"defaultValue":g=k;break;case"children":y=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(91));break;default:$e(s,a,x,k,c,null)}Fy(s,d,g,y);return;case"option":for(A in c)c.hasOwnProperty(A)&&(d=c[A],d!=null)&&(A==="selected"?s.selected=d&&typeof d!="function"&&typeof d!="symbol":$e(s,a,A,d,c,null));return;case"dialog":ke("beforetoggle",s),ke("toggle",s),ke("cancel",s),ke("close",s);break;case"iframe":case"object":ke("load",s);break;case"video":case"audio":for(d=0;d<Ua.length;d++)ke(Ua[d],s);break;case"image":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"embed":case"source":case"link":ke("error",s),ke("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in c)if(c.hasOwnProperty(B)&&(d=c[B],d!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:$e(s,a,B,d,c,null)}return;default:if(Cd(a)){for(q in c)c.hasOwnProperty(q)&&(d=c[q],d!==void 0&&dp(s,a,q,d,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(d=c[k],d!=null&&$e(s,a,k,d,c,null))}function nA(s,a,c,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,x=null,k=null,A=null,B=null,q=null;for(H in c){var K=c[H];if(c.hasOwnProperty(H)&&K!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":A=K;default:d.hasOwnProperty(H)||$e(s,a,H,null,d,K)}}for(var I in d){var H=d[I];if(K=c[I],d.hasOwnProperty(I)&&(H!=null||K!=null))switch(I){case"type":y=H;break;case"name":g=H;break;case"checked":B=H;break;case"defaultChecked":q=H;break;case"value":x=H;break;case"defaultValue":k=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,a));break;default:H!==K&&$e(s,a,I,H,d,K)}}Td(s,x,k,A,B,q,y,g);return;case"select":H=x=k=I=null;for(y in c)if(A=c[y],c.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":H=A;default:d.hasOwnProperty(y)||$e(s,a,y,null,d,A)}for(g in d)if(y=d[g],A=c[g],d.hasOwnProperty(g)&&(y!=null||A!=null))switch(g){case"value":I=y;break;case"defaultValue":k=y;break;case"multiple":x=y;default:y!==A&&$e(s,a,g,y,d,A)}a=k,c=x,d=H,I!=null?Is(s,!!c,I,!1):!!d!=!!c&&(a!=null?Is(s,!!c,a,!0):Is(s,!!c,c?[]:"",!1));return;case"textarea":H=I=null;for(k in c)if(g=c[k],c.hasOwnProperty(k)&&g!=null&&!d.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:$e(s,a,k,null,d,g)}for(x in d)if(g=d[x],y=c[x],d.hasOwnProperty(x)&&(g!=null||y!=null))switch(x){case"value":I=g;break;case"defaultValue":H=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&$e(s,a,x,g,d,y)}Ky(s,I,H);return;case"option":for(var ee in c)I=c[ee],c.hasOwnProperty(ee)&&I!=null&&!d.hasOwnProperty(ee)&&(ee==="selected"?s.selected=!1:$e(s,a,ee,null,d,I));for(A in d)I=d[A],H=c[A],d.hasOwnProperty(A)&&I!==H&&(I!=null||H!=null)&&(A==="selected"?s.selected=I&&typeof I!="function"&&typeof I!="symbol":$e(s,a,A,I,d,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in c)I=c[ce],c.hasOwnProperty(ce)&&I!=null&&!d.hasOwnProperty(ce)&&$e(s,a,ce,null,d,I);for(B in d)if(I=d[B],H=c[B],d.hasOwnProperty(B)&&I!==H&&(I!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,a));break;default:$e(s,a,B,I,d,H)}return;default:if(Cd(a)){for(var He in c)I=c[He],c.hasOwnProperty(He)&&I!==void 0&&!d.hasOwnProperty(He)&&dp(s,a,He,void 0,d,I);for(q in d)I=d[q],H=c[q],!d.hasOwnProperty(q)||I===H||I===void 0&&H===void 0||dp(s,a,q,I,d,H);return}}for(var D in c)I=c[D],c.hasOwnProperty(D)&&I!=null&&!d.hasOwnProperty(D)&&$e(s,a,D,null,d,I);for(K in d)I=d[K],H=c[K],!d.hasOwnProperty(K)||I===H||I==null&&H==null||$e(s,a,K,I,d,H)}function Wv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rA(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],y=g.transferSize,x=g.initiatorType,k=g.duration;if(y&&k&&Wv(x)){for(x=0,k=g.responseEnd,d+=1;d<c.length;d++){var A=c[d],B=A.startTime;if(B>k)break;var q=A.transferSize,K=A.initiatorType;q&&Wv(K)&&(A=A.responseEnd,x+=q*(A<k?1:(k-B)/(A-B)))}if(--d,a+=8*(y+x)/(g.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var hp=null,pp=null;function Yc(s){return s.nodeType===9?s:s.ownerDocument}function Yv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qv(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function mp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var gp=null;function iA(){var s=window.event;return s&&s.type==="popstate"?s===gp?!1:(gp=s,!0):(gp=null,!1)}var Xv=typeof setTimeout=="function"?setTimeout:void 0,sA=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,oA=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(s){return Zv.resolve(null).then(s).catch(aA)}:Xv;function aA(s){setTimeout(function(){throw s})}function hi(s){return s==="head"}function ew(s,a){var c=a,d=0;do{var g=c.nextSibling;if(s.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){s.removeChild(g),bo(a);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Pa(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Pa(c);for(var y=c.firstChild;y;){var x=y.nextSibling,k=y.nodeName;y[ia]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=x}}else c==="body"&&Pa(s.ownerDocument.body);c=g}while(c);bo(a)}function tw(s,a){var c=s;s=0;do{var d=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=d}while(c)}function yp(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":yp(c),xd(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function lA(s,a,c,d){for(;s.nodeType===1;){var g=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[ia])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Cn(s.nextSibling),s===null)break}return null}function cA(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Cn(s.nextSibling),s===null))return null;return s}function nw(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Cn(s.nextSibling),s===null))return null;return s}function bp(s){return s.data==="$?"||s.data==="$~"}function vp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function uA(s,a){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||c.readyState!=="loading")a();else{var d=function(){a(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Cn(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var wp=null;function rw(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(a===0)return Cn(s.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}s=s.nextSibling}return null}function iw(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return s;a--}else c!=="/$"&&c!=="/&"||a++}s=s.previousSibling}return null}function sw(s,a,c){switch(a=Yc(c),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Pa(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);xd(s)}var _n=new Map,ow=new Set;function Qc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Or=J.d;J.d={f:fA,r:dA,D:hA,C:pA,L:mA,m:gA,X:bA,S:yA,M:vA};function fA(){var s=Or.f(),a=Hc();return s||a}function dA(s){var a=zs(s);a!==null&&a.tag===5&&a.type==="form"?Eb(a):Or.r(s)}var mo=typeof document>"u"?null:document;function aw(s,a,c){var d=mo;if(d&&typeof a=="string"&&a){var g=vn(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),ow.has(g)||(ow.add(g),s={rel:s,crossOrigin:c,href:a},d.querySelector(g)===null&&(a=d.createElement("link"),Ot(a,"link",s),vt(a),d.head.appendChild(a)))}}function hA(s){Or.D(s),aw("dns-prefetch",s,null)}function pA(s,a){Or.C(s,a),aw("preconnect",s,a)}function mA(s,a,c){Or.L(s,a,c);var d=mo;if(d&&s&&a){var g='link[rel="preload"][as="'+vn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+vn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+vn(c.imageSizes)+'"]')):g+='[href="'+vn(s)+'"]';var y=g;switch(a){case"style":y=go(s);break;case"script":y=yo(s)}_n.has(y)||(s=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),_n.set(y,s),d.querySelector(g)!==null||a==="style"&&d.querySelector($a(y))||a==="script"&&d.querySelector(Ha(y))||(a=d.createElement("link"),Ot(a,"link",s),vt(a),d.head.appendChild(a)))}}function gA(s,a){Or.m(s,a);var c=mo;if(c&&s){var d=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+vn(d)+'"][href="'+vn(s)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=yo(s)}if(!_n.has(y)&&(s=m({rel:"modulepreload",href:s},a),_n.set(y,s),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Ha(y)))return}d=c.createElement("link"),Ot(d,"link",s),vt(d),c.head.appendChild(d)}}}function yA(s,a,c){Or.S(s,a,c);var d=mo;if(d&&s){var g=Bs(d).hoistableStyles,y=go(s);a=a||"default";var x=g.get(y);if(!x){var k={loading:0,preload:null};if(x=d.querySelector($a(y)))k.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":a},c),(c=_n.get(y))&&Sp(s,c);var A=x=d.createElement("link");vt(A),Ot(A,"link",s),A._p=new Promise(function(B,q){A.onload=B,A.onerror=q}),A.addEventListener("load",function(){k.loading|=1}),A.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Xc(x,a,d)}x={type:"stylesheet",instance:x,count:1,state:k},g.set(y,x)}}}function bA(s,a){Or.X(s,a);var c=mo;if(c&&s){var d=Bs(c).hoistableScripts,g=yo(s),y=d.get(g);y||(y=c.querySelector(Ha(g)),y||(s=m({src:s,async:!0},a),(a=_n.get(g))&&xp(s,a),y=c.createElement("script"),vt(y),Ot(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function vA(s,a){Or.M(s,a);var c=mo;if(c&&s){var d=Bs(c).hoistableScripts,g=yo(s),y=d.get(g);y||(y=c.querySelector(Ha(g)),y||(s=m({src:s,async:!0,type:"module"},a),(a=_n.get(g))&&xp(s,a),y=c.createElement("script"),vt(y),Ot(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function lw(s,a,c,d){var g=(g=Ee.current)?Qc(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=go(c.href),c=Bs(g).hoistableStyles,d=c.get(a),d||(d={type:"style",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=go(c.href);var y=Bs(g).hoistableStyles,x=y.get(s);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,x),(y=g.querySelector($a(s)))&&!y._p&&(x.instance=y,x.state.loading=5),_n.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},_n.set(s,c),y||wA(g,s,c,x.state))),a&&d===null)throw Error(r(528,""));return x}if(a&&d!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=yo(c),c=Bs(g).hoistableScripts,d=c.get(a),d||(d={type:"script",instance:null,count:0,state:null},c.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function go(s){return'href="'+vn(s)+'"'}function $a(s){return'link[rel="stylesheet"]['+s+"]"}function cw(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function wA(s,a,c,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Ot(a,"link",c),vt(a),s.head.appendChild(a))}function yo(s){return'[src="'+vn(s)+'"]'}function Ha(s){return"script[async]"+s}function uw(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+vn(c.href)+'"]');if(d)return a.instance=d,vt(d),d;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),vt(d),Ot(d,"style",g),Xc(d,c.precedence,s),a.instance=d;case"stylesheet":g=go(c.href);var y=s.querySelector($a(g));if(y)return a.state.loading|=4,a.instance=y,vt(y),y;d=cw(c),(g=_n.get(g))&&Sp(d,g),y=(s.ownerDocument||s).createElement("link"),vt(y);var x=y;return x._p=new Promise(function(k,A){x.onload=k,x.onerror=A}),Ot(y,"link",d),a.state.loading|=4,Xc(y,c.precedence,s),a.instance=y;case"script":return y=yo(c.src),(g=s.querySelector(Ha(y)))?(a.instance=g,vt(g),g):(d=c,(g=_n.get(y))&&(d=m({},c),xp(d,g)),s=s.ownerDocument||s,g=s.createElement("script"),vt(g),Ot(g,"link",d),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Xc(d,c.precedence,s));return a.instance}function Xc(s,a,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,x=0;x<d.length;x++){var k=d[x];if(k.dataset.precedence===a)y=k;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function Sp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function xp(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Zc=null;function fw(s,a,c){if(Zc===null){var d=new Map,g=Zc=new Map;g.set(c,d)}else g=Zc,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(s))return d;for(d.set(s,null),c=c.getElementsByTagName(s),g=0;g<c.length;g++){var y=c[g];if(!(y[ia]||y[kt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(a)||"";x=s+x;var k=d.get(x);k?k.push(y):d.set(x,[y])}}return d}function dw(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function SA(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(s=a.disabled,typeof a.precedence=="string"&&s==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function hw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function xA(s,a,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=go(d.href),y=a.querySelector($a(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=eu.bind(s),a.then(s,s)),c.state.loading|=4,c.instance=y,vt(y);return}y=a.ownerDocument||a,d=cw(d),(g=_n.get(g))&&Sp(d,g),y=y.createElement("link"),vt(y);var x=y;x._p=new Promise(function(k,A){x.onload=k,x.onerror=A}),Ot(y,"link",d),c.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=eu.bind(s),a.addEventListener("load",c),a.addEventListener("error",c))}}var Ep=0;function EA(s,a){return s.stylesheets&&s.count===0&&nu(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var d=setTimeout(function(){if(s.stylesheets&&nu(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+a);0<s.imgBytes&&Ep===0&&(Ep=62500*rA());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&nu(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>Ep?50:800)+a);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function eu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nu(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var tu=null;function nu(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,tu=new Map,a.forEach(TA,s),tu=null,eu.call(s))}function TA(s,a){if(!(a.state.loading&4)){var c=tu.get(s);if(c)var d=c.get(null);else{c=new Map,tu.set(s,c);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var x=g[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(c.set(x.dataset.precedence,x),d=x)}d&&c.set(null,d)}g=a.instance,x=g.getAttribute("data-precedence"),y=c.get(x)||d,y===d&&c.set(null,g),c.set(x,g),this.count++,d=eu.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var qa={$$typeof:_,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function kA(s,a,c,d,g,y,x,k,A){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.hiddenUpdates=bd(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function pw(s,a,c,d,g,y,x,k,A,B,q,K){return s=new kA(s,a,c,x,A,B,q,K,k),a=1,y===!0&&(a|=24),y=sn(3,null,null,a),s.current=y,y.stateNode=s,a=nh(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:a},oh(y),s}function mw(s){return s?(s=Gs,s):Gs}function gw(s,a,c,d,g,y){g=mw(g),d.context===null?d.context=g:d.pendingContext=g,d=ni(a),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=ri(s,d,a),c!==null&&(Qt(c,s,a),Sa(c,s,a))}function yw(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Tp(s,a){yw(s,a),(s=s.alternate)&&yw(s,a)}function bw(s){if(s.tag===13||s.tag===31){var a=Ji(s,67108864);a!==null&&Qt(a,s,67108864),Tp(s,67108864)}}function vw(s){if(s.tag===13||s.tag===31){var a=un();a=vd(a);var c=Ji(s,a);c!==null&&Qt(c,s,a),Tp(s,a)}}var ru=!0;function CA(s,a,c,d){var g=P.T;P.T=null;var y=J.p;try{J.p=2,kp(s,a,c,d)}finally{J.p=y,P.T=g}}function _A(s,a,c,d){var g=P.T;P.T=null;var y=J.p;try{J.p=8,kp(s,a,c,d)}finally{J.p=y,P.T=g}}function kp(s,a,c,d){if(ru){var g=Cp(d);if(g===null)fp(s,a,d,iu,c),Sw(s,d);else if(OA(g,s,a,c,d))d.stopPropagation();else if(Sw(s,d),a&4&&-1<AA.indexOf(s)){for(;g!==null;){var y=zs(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=qi(y.pendingLanes);if(x!==0){var k=y;for(k.pendingLanes|=2,k.entangledLanes|=2;x;){var A=1<<31-nn(x);k.entanglements[1]|=A,x&=~A}Qn(y),(Ne&6)===0&&(Pc=en()+500,Ba(0))}}break;case 31:case 13:k=Ji(y,2),k!==null&&Qt(k,y,2),Hc(),Tp(y,2)}if(y=Cp(d),y===null&&fp(s,a,d,iu,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else fp(s,a,d,null,c)}}function Cp(s){return s=Ad(s),_p(s)}var iu=null;function _p(s){if(iu=null,s=Ls(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=l(a),s!==null)return s;s=null}else if(c===31){if(s=u(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return iu=s,null}function ww(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hC()){case Ay:return 2;case Oy:return 8;case Gl:case pC:return 32;case Ry:return 268435456;default:return 32}default:return 32}}var Ap=!1,pi=null,mi=null,gi=null,Va=new Map,Ka=new Map,yi=[],AA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sw(s,a){switch(s){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Va.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(a.pointerId)}}function Fa(s,a,c,d,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},a!==null&&(a=zs(a),a!==null&&bw(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function OA(s,a,c,d,g){switch(a){case"focusin":return pi=Fa(pi,s,a,c,d,g),!0;case"dragenter":return mi=Fa(mi,s,a,c,d,g),!0;case"mouseover":return gi=Fa(gi,s,a,c,d,g),!0;case"pointerover":var y=g.pointerId;return Va.set(y,Fa(Va.get(y)||null,s,a,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,Ka.set(y,Fa(Ka.get(y)||null,s,a,c,d,g)),!0}return!1}function xw(s){var a=Ls(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){s.blockedOn=a,zy(s.priority,function(){vw(c)});return}}else if(a===31){if(a=u(c),a!==null){s.blockedOn=a,zy(s.priority,function(){vw(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function su(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Cp(s.nativeEvent);if(c===null){c=s.nativeEvent;var d=new c.constructor(c.type,c);_d=d,c.target.dispatchEvent(d),_d=null}else return a=zs(c),a!==null&&bw(a),s.blockedOn=c,!1;a.shift()}return!0}function Ew(s,a,c){su(s)&&c.delete(a)}function RA(){Ap=!1,pi!==null&&su(pi)&&(pi=null),mi!==null&&su(mi)&&(mi=null),gi!==null&&su(gi)&&(gi=null),Va.forEach(Ew),Ka.forEach(Ew)}function ou(s,a){s.blockedOn===a&&(s.blockedOn=null,Ap||(Ap=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,RA)))}var au=null;function Tw(s){au!==s&&(au=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){au===s&&(au=null);for(var a=0;a<s.length;a+=3){var c=s[a],d=s[a+1],g=s[a+2];if(typeof d!="function"){if(_p(d||c)===null)continue;break}var y=zs(c);y!==null&&(s.splice(a,3),a-=3,Ch(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function bo(s){function a(A){return ou(A,s)}pi!==null&&ou(pi,s),mi!==null&&ou(mi,s),gi!==null&&ou(gi,s),Va.forEach(a),Ka.forEach(a);for(var c=0;c<yi.length;c++){var d=yi[c];d.blockedOn===s&&(d.blockedOn=null)}for(;0<yi.length&&(c=yi[0],c.blockedOn===null);)xw(c),c.blockedOn===null&&yi.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],x=g[Kt]||null;if(typeof y=="function")x||Tw(c);else if(x){var k=null;if(y&&y.hasAttribute("formAction")){if(g=y,x=y[Kt]||null)k=x.formAction;else if(_p(g)!==null)continue}else k=x.action;typeof k=="function"?c[d+1]=k:(c.splice(d,3),d-=3),Tw(c)}}}function kw(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(x){return g=x})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Op(s){this._internalRoot=s}lu.prototype.render=Op.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,d=un();gw(c,d,s,a,null,null)},lu.prototype.unmount=Op.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;gw(s.current,2,null,s,null,null),Hc(),a[js]=null}};function lu(s){this._internalRoot=s}lu.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ly();s={blockedOn:null,target:s,priority:a};for(var c=0;c<yi.length&&a!==0&&a<yi[c].priority;c++);yi.splice(c,0,s),c===0&&xw(s)}};var Cw=e.version;if(Cw!=="19.2.4")throw Error(r(527,Cw,"19.2.4"));J.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var MA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{ta=cu.inject(MA),tn=cu}catch{}}return Ja.createRoot=function(s,a){if(!i(s))throw Error(r(299));var c=!1,d="",g=Db,y=jb,x=Lb;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=pw(s,1,!1,null,null,c,d,null,g,y,x,kw),s[js]=a.current,up(s),new Op(a)},Ja.hydrateRoot=function(s,a,c){if(!i(s))throw Error(r(299));var d=!1,g="",y=Db,x=jb,k=Lb,A=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(A=c.formState)),a=pw(s,1,!0,a,c??null,d,g,A,y,x,k,kw),a.context=mw(null),c=a.current,d=un(),d=vd(d),g=ni(d),g.callback=null,ri(c,g,d),c=d,a.current.lanes=c,ra(a,c),Qn(a),s[js]=a.current,up(s),new lu(a)},Ja.version="19.2.4",Ja}var zw;function PA(){if(zw)return Np.exports;zw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Np.exports=IA(),Np.exports}var $A=PA();const HA=yg($A);var Bw="popstate";function qA(t={}){function e(r,i){let{pathname:o,search:l,hash:u}=r.location;return Tm("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bl(i)}return KA(e,n,null,t)}function Qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VA(){return Math.random().toString(36).substring(2,10)}function Uw(t,e){return{usr:t.state,key:t.key,idx:e}}function Tm(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jo(e):e,state:n,key:e&&e.key||r||VA()}}function bl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function KA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,u="POP",f=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let E=p(),T=E==null?null:E-h;h=E,f&&f({action:u,location:S.location,delta:T})}function b(E,T){u="PUSH";let C=Tm(S.location,E,T);h=p()+1;let _=Uw(C,h),j=S.createHref(C);try{l.pushState(_,"",j)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(j)}o&&f&&f({action:u,location:S.location,delta:1})}function v(E,T){u="REPLACE";let C=Tm(S.location,E,T);h=p();let _=Uw(C,h),j=S.createHref(C);l.replaceState(_,"",j),o&&f&&f({action:u,location:S.location,delta:0})}function w(E){return FA(E)}let S={get action(){return u},get location(){return t(i,l)},listen(E){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(Bw,m),f=E,()=>{i.removeEventListener(Bw,m),f=null}},createHref(E){return e(i,E)},createURL:w,encodeLocation(E){let T=w(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:v,go(E){return l.go(E)}};return S}function FA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Qe(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:bl(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function u1(t,e,n="/"){return GA(t,e,n,!1)}function GA(t,e,n,r){let i=typeof e=="string"?Jo(e):e,o=qr(i.pathname||"/",n);if(o==null)return null;let l=f1(t);JA(l);let u=null;for(let f=0;u==null&&f<l.length;++f){let h=sO(o);u=rO(l[f],h,r)}return u}function f1(t,e=[],n=[],r="",i=!1){let o=(l,u,f=i,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&f)return;Qe(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=Pr([r,p.relativePath]),b=n.concat(p);l.children&&l.children.length>0&&(Qe(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),f1(l.children,e,b,m,f)),!(l.path==null&&!l.index)&&e.push({path:m,score:tO(m,l.index),routesMeta:b})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let f of d1(l.path))o(l,u,!0,f)}),e}function d1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=d1(r.join("/")),u=[];return u.push(...l.map(f=>f===""?o:[o,f].join("/"))),i&&u.push(...l),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function JA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var WA=/^:[\w-]+$/,YA=3,QA=2,XA=1,ZA=10,eO=-2,Iw=t=>t==="*";function tO(t,e){let n=t.split("/"),r=n.length;return n.some(Iw)&&(r+=eO),e&&(r+=QA),n.filter(i=>!Iw(i)).reduce((i,o)=>i+(WA.test(o)?YA:o===""?XA:ZA),r)}function nO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rO(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",l=[];for(let u=0;u<r.length;++u){let f=r[u],h=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=$u({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},p),b=f.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=$u({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Pr([o,m.pathname]),pathnameBase:cO(Pr([o,m.pathnameBase])),route:b}),m.pathnameBase!=="/"&&(o=Pr([o,m.pathnameBase]))}return l}function $u(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},b)=>{if(p==="*"){let w=u[b]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[b];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function iO(t,e=!1,n=!0){Vn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,f)=>(r.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function qr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var oO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function aO(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Jo(t):t,o;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?o=Pw(n.substring(1),"/"):o=Pw(n,e)):o=e,{pathname:o,search:uO(r),hash:fO(i)}}function Pw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zp(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bg(t){let e=lO(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function vg(t,e,n,r=!1){let i;typeof t=="string"?i=Jo(t):(i={...t},Qe(!i.pathname||!i.pathname.includes("?"),zp("?","pathname","search",i)),Qe(!i.pathname||!i.pathname.includes("#"),zp("#","pathname","hash",i)),Qe(!i.search||!i.search.includes("#"),zp("#","search","hash",i)));let o=t===""||i.pathname==="",l=o?"/":i.pathname,u;if(l==null)u=n;else{let m=e.length-1;if(!r&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),m-=1;i.pathname=b.join("/")}u=m>=0?e[m]:"/"}let f=aO(i,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||p)&&(f.pathname+="/"),f}var Pr=t=>t.join("/").replace(/\/\/+/g,"/"),cO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,dO=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function hO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function pO(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var h1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function p1(t,e){let n=t;if(typeof n!="string"||!oO.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(h1)try{let o=new URL(window.location.href),l=n.startsWith("//")?new URL(o.protocol+n):new URL(n),u=qr(l.pathname,e);l.origin===o.origin&&u!=null?n=u+l.search+l.hash:i=!0}catch{Vn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var m1=["POST","PUT","PATCH","DELETE"];new Set(m1);var mO=["GET",...m1];new Set(mO);var Wo=N.createContext(null);Wo.displayName="DataRouter";var If=N.createContext(null);If.displayName="DataRouterState";var gO=N.createContext(!1),g1=N.createContext({isTransitioning:!1});g1.displayName="ViewTransition";var yO=N.createContext(new Map);yO.displayName="Fetchers";var bO=N.createContext(null);bO.displayName="Await";var gn=N.createContext(null);gn.displayName="Navigation";var Ul=N.createContext(null);Ul.displayName="Location";var Gn=N.createContext({outlet:null,matches:[],isDataRoute:!1});Gn.displayName="Route";var wg=N.createContext(null);wg.displayName="RouteError";var y1="REACT_ROUTER_ERROR",vO="REDIRECT",wO="ROUTE_ERROR_RESPONSE";function SO(t){if(t.startsWith(`${y1}:${vO}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function xO(t){if(t.startsWith(`${y1}:${wO}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new dO(e.status,e.statusText,e.data)}catch{}}function EO(t,{relative:e}={}){Qe(Yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=N.useContext(gn),{hash:i,pathname:o,search:l}=Il(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Pr([n,o])),r.createHref({pathname:u,search:l,hash:i})}function Yo(){return N.useContext(Ul)!=null}function fr(){return Qe(Yo(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ul).location}var b1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v1(t){N.useContext(gn).static||N.useLayoutEffect(t)}function Sg(){let{isDataRoute:t}=N.useContext(Gn);return t?UO():TO()}function TO(){Qe(Yo(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Wo),{basename:e,navigator:n}=N.useContext(gn),{matches:r}=N.useContext(Gn),{pathname:i}=fr(),o=JSON.stringify(bg(r)),l=N.useRef(!1);return v1(()=>{l.current=!0}),N.useCallback((f,h={})=>{if(Vn(l.current,b1),!l.current)return;if(typeof f=="number"){n.go(f);return}let p=vg(f,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Pr([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,o,i,t])}var kO=N.createContext(null);function CO(t){let e=N.useContext(Gn).outlet;return N.useMemo(()=>e&&N.createElement(kO.Provider,{value:t},e),[e,t])}function Il(t,{relative:e}={}){let{matches:n}=N.useContext(Gn),{pathname:r}=fr(),i=JSON.stringify(bg(n));return N.useMemo(()=>vg(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function _O(t,e){return w1(t,e)}function w1(t,e,n,r,i){Qe(Yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(gn),{matches:l}=N.useContext(Gn),u=l[l.length-1],f=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let C=m&&m.path||"";x1(h,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let b=fr(),v;if(e){let C=typeof e=="string"?Jo(e):e;Qe(p==="/"||C.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=b;let w=v.pathname||"/",S=w;if(p!=="/"){let C=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=u1(t,{pathname:S});Vn(m||E!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Vn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=NO(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},f,C.params),pathname:Pr([p,o.encodeLocation?o.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?p:Pr([p,o.encodeLocation?o.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,n,r,i);return e&&T?N.createElement(Ul.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},T):T}function AO(){let t=BO(),e=hO(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,l)}var OO=N.createElement(AO,null),S1=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=xO(t.digest);n&&(t=n)}let e=t!==void 0?N.createElement(Gn.Provider,{value:this.props.routeContext},N.createElement(wg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?N.createElement(RO,{error:t},e):e}};S1.contextType=gO;var Bp=new WeakMap;function RO({children:t,error:e}){let{basename:n}=N.useContext(gn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=SO(e.digest);if(r){let i=Bp.get(e);if(i)throw i;let o=p1(r.location,n);if(h1&&!Bp.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Bp.set(e,l),l}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function MO({routeContext:t,match:e,children:n}){let r=N.useContext(Wo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Gn.Provider,{value:t},n)}function NO(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n?.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);Qe(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,f=-1;if(n)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:b,errors:v}=n,w=m.route.loader&&!b.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let h=n&&r?(p,m)=>{r(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:pO(n.matches),errorInfo:m})}:void 0;return o.reduceRight((p,m,b)=>{let v,w=!1,S=null,E=null;n&&(v=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||OO,u&&(f<0&&b===0?(x1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,E=null):f===b&&(w=!0,E=m.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,b+1)),C=()=>{let _;return v?_=S:w?_=E:m.route.Component?_=N.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=p,N.createElement(MO,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||b===0)?N.createElement(S1,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:C(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:h}):C()},null)}function xg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DO(t){let e=N.useContext(Wo);return Qe(e,xg(t)),e}function jO(t){let e=N.useContext(If);return Qe(e,xg(t)),e}function LO(t){let e=N.useContext(Gn);return Qe(e,xg(t)),e}function Eg(t){let e=LO(t),n=e.matches[e.matches.length-1];return Qe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function zO(){return Eg("useRouteId")}function BO(){let t=N.useContext(wg),e=jO("useRouteError"),n=Eg("useRouteError");return t!==void 0?t:e.errors?.[n]}function UO(){let{router:t}=DO("useNavigate"),e=Eg("useNavigate"),n=N.useRef(!1);return v1(()=>{n.current=!0}),N.useCallback(async(i,o={})=>{Vn(n.current,b1),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var $w={};function x1(t,e,n){!e&&!$w[t]&&($w[t]=!0,Vn(!1,n))}N.memo(IO);function IO({routes:t,future:e,state:n,onError:r}){return w1(t,void 0,n,r,e)}function Pf({to:t,replace:e,state:n,relative:r}){Qe(Yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(gn);Vn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=N.useContext(Gn),{pathname:l}=fr(),u=Sg(),f=vg(t,bg(o),l,r==="path"),h=JSON.stringify(f);return N.useEffect(()=>{u(JSON.parse(h),{replace:e,state:n,relative:r})},[u,h,r,e,n]),null}function PO(t){return CO(t.context)}function Xn(t){Qe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $O({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:l}){Qe(!Yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:u,navigator:i,static:o,unstable_useTransitions:l,future:{}}),[u,i,o,l]);typeof n=="string"&&(n=Jo(n));let{pathname:h="/",search:p="",hash:m="",state:b=null,key:v="default"}=n,w=N.useMemo(()=>{let S=qr(h,u);return S==null?null:{location:{pathname:S,search:p,hash:m,state:b,key:v},navigationType:r}},[u,h,p,m,b,v,r]);return Vn(w!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:N.createElement(gn.Provider,{value:f},N.createElement(Ul.Provider,{children:e,value:w}))}function HO({children:t,location:e}){return _O(km(t),e)}function km(t,e=[]){let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let o=[...e,i];if(r.type===N.Fragment){n.push.apply(n,km(r.props.children,o));return}Qe(r.type===Xn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qe(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=km(r.props.children,o)),n.push(l)}),n}var Du="get",ju="application/x-www-form-urlencoded";function $f(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function qO(t){return $f(t)&&t.tagName.toLowerCase()==="button"}function VO(t){return $f(t)&&t.tagName.toLowerCase()==="form"}function KO(t){return $f(t)&&t.tagName.toLowerCase()==="input"}function FO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GO(t,e){return t.button===0&&(!e||e==="_self")&&!FO(t)}var uu=null;function JO(){if(uu===null)try{new FormData(document.createElement("form"),0),uu=!1}catch{uu=!0}return uu}var WO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Up(t){return t!=null&&!WO.has(t)?(Vn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ju}"`),null):t}function YO(t,e){let n,r,i,o,l;if(VO(t)){let u=t.getAttribute("action");r=u?qr(u,e):null,n=t.getAttribute("method")||Du,i=Up(t.getAttribute("enctype"))||ju,o=new FormData(t)}else if(qO(t)||KO(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||u.getAttribute("action");if(r=f?qr(f,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Du,i=Up(t.getAttribute("formenctype"))||Up(u.getAttribute("enctype"))||ju,o=new FormData(u,t),!JO()){let{name:h,type:p,value:m}=t;if(p==="image"){let b=h?`${h}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else h&&o.append(h,m)}}else{if($f(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Du,r=null,i=ju,l=t}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QO(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&qr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function XO(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function eR(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await XO(o,n);return l.links?l.links():[]}return[]}));return iR(r.flat(1).filter(ZO).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Hw(t,e,n,r,i,o){let l=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,u=(f,h)=>n[h].pathname!==f.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,h)=>l(f,h)||u(f,h)):o==="data"?e.filter((f,h)=>{let p=r.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(l(f,h)||u(f,h))return!0;if(f.route.shouldRevalidate){let m=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function tR(t,e,{includeHydrateFallback:n}={}){return nR(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function nR(t){return[...new Set(t)]}function rR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function iR(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(rR(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function E1(){let t=N.useContext(Wo);return Tg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function sR(){let t=N.useContext(If);return Tg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var kg=N.createContext(void 0);kg.displayName="FrameworkContext";function T1(){let t=N.useContext(kg);return Tg(t,"You must render this element inside a <HydratedRouter> element"),t}function oR(t,e){let n=N.useContext(kg),[r,i]=N.useState(!1),[o,l]=N.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,b=N.useRef(null);N.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let S=T=>{T.forEach(C=>{l(C.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return b.current&&E.observe(b.current),()=>{E.disconnect()}}},[t]),N.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let v=()=>{i(!0)},w=()=>{i(!1),l(!1)};return n?t!=="intent"?[o,b,{}]:[o,b,{onFocus:Wa(u,v),onBlur:Wa(f,w),onMouseEnter:Wa(h,v),onMouseLeave:Wa(p,w),onTouchStart:Wa(m,v)}]:[!1,b,{}]}function Wa(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function aR({page:t,...e}){let{router:n}=E1(),r=N.useMemo(()=>u1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?N.createElement(cR,{page:t,matches:r,...e}):null}function lR(t){let{manifest:e,routeModules:n}=T1(),[r,i]=N.useState([]);return N.useEffect(()=>{let o=!1;return eR(t,e,n).then(l=>{o||i(l)}),()=>{o=!0}},[t,e,n]),r}function cR({page:t,matches:e,...n}){let r=fr(),{future:i,manifest:o,routeModules:l}=T1(),{basename:u}=E1(),{loaderData:f,matches:h}=sR(),p=N.useMemo(()=>Hw(t,e,h,o,r,"data"),[t,e,h,o,r]),m=N.useMemo(()=>Hw(t,e,h,o,r,"assets"),[t,e,h,o,r]),b=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,E=!1;if(e.forEach(C=>{let _=o.routes[C.route.id];!_||!_.hasLoader||(!p.some(j=>j.route.id===C.route.id)&&C.route.id in f&&l[C.route.id]?.shouldRevalidate||_.hasClientLoader?E=!0:S.add(C.route.id))}),S.size===0)return[];let T=QO(t,u,i.unstable_trailingSlashAwareDataRequests,"data");return E&&S.size>0&&T.searchParams.set("_routes",e.filter(C=>S.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[u,i.unstable_trailingSlashAwareDataRequests,f,r,o,p,e,t,l]),v=N.useMemo(()=>tR(m,o),[m,o]),w=lR(m);return N.createElement(N.Fragment,null,b.map(S=>N.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>N.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),w.map(({key:S,link:E})=>N.createElement("link",{key:S,nonce:n.nonce,...E,crossOrigin:E.crossOrigin??n.crossOrigin})))}function uR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var fR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fR&&(window.__reactRouterVersion="7.13.0")}catch{}function dR({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=N.useRef();i.current==null&&(i.current=qA({window:r,v5Compat:!0}));let o=i.current,[l,u]=N.useState({action:o.action,location:o.location}),f=N.useCallback(h=>{n===!1?u(h):N.startTransition(()=>u(h))},[n]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.createElement($O,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:n})}var k1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C1=N.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:u,target:f,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:b,...v},w){let{basename:S,unstable_useTransitions:E}=N.useContext(gn),T=typeof h=="string"&&k1.test(h),C=p1(h,S);h=C.to;let _=EO(h,{relative:i}),[j,L,$]=oR(r,v),U=gR(h,{replace:l,state:u,target:f,preventScrollReset:p,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:b,unstable_useTransitions:E});function Y(re){e&&e(re),re.defaultPrevented||U(re)}let X=N.createElement("a",{...v,...$,href:C.absoluteURL||_,onClick:C.isExternal||o?e:Y,ref:uR(w,L),target:f,"data-discover":!T&&n==="render"?"true":void 0});return j&&!T?N.createElement(N.Fragment,null,X,N.createElement(aR,{page:_})):X});C1.displayName="Link";var hR=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:u,children:f,...h},p){let m=Il(l,{relative:h.relative}),b=fr(),v=N.useContext(If),{navigator:w,basename:S}=N.useContext(gn),E=v!=null&&SR(m)&&u===!0,T=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,C=b.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(C=C.toLowerCase(),_=_?_.toLowerCase():null,T=T.toLowerCase()),_&&S&&(_=qr(_,S)||_);const j=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let L=C===T||!i&&C.startsWith(T)&&C.charAt(j)==="/",$=_!=null&&(_===T||!i&&_.startsWith(T)&&_.charAt(T.length)==="/"),U={isActive:L,isPending:$,isTransitioning:E},Y=L?e:void 0,X;typeof r=="function"?X=r(U):X=[r,L?"active":null,$?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let re=typeof o=="function"?o(U):o;return N.createElement(C1,{...h,"aria-current":Y,className:X,ref:p,style:re,to:l,viewTransition:u},typeof f=="function"?f(U):f)});hR.displayName="NavLink";var pR=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:l=Du,action:u,onSubmit:f,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:b,...v},w)=>{let{unstable_useTransitions:S}=N.useContext(gn),E=vR(),T=wR(u,{relative:h}),C=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&k1.test(u),j=L=>{if(f&&f(L),L.defaultPrevented)return;L.preventDefault();let $=L.nativeEvent.submitter,U=$?.getAttribute("formmethod")||l,Y=()=>E($||L.currentTarget,{fetcherKey:e,method:U,navigate:n,replace:i,state:o,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:b});S&&n!==!1?N.startTransition(()=>Y()):Y()};return N.createElement("form",{ref:w,method:C,action:T,onSubmit:r?f:j,...v,"data-discover":!_&&t==="render"?"true":void 0})});pR.displayName="Form";function mR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _1(t){let e=N.useContext(Wo);return Qe(e,mR(t)),e}function gR(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:f}={}){let h=Sg(),p=fr(),m=Il(t,{relative:o});return N.useCallback(b=>{if(GO(b,e)){b.preventDefault();let v=n!==void 0?n:bl(p)===bl(m),w=()=>h(t,{replace:v,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:u});f?N.startTransition(()=>w()):w()}},[p,h,m,n,r,e,t,i,o,l,u,f])}var yR=0,bR=()=>`__${String(++yR)}__`;function vR(){let{router:t}=_1("useSubmit"),{basename:e}=N.useContext(gn),n=zO(),r=t.fetch,i=t.navigate;return N.useCallback(async(o,l={})=>{let{action:u,method:f,encType:h,formData:p,body:m}=YO(o,e);if(l.navigate===!1){let b=l.fetcherKey||bR();await r(b,n,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await i(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,n])}function wR(t,{relative:e}={}){let{basename:n}=N.useContext(gn),r=N.useContext(Gn);Qe(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Il(t||".",{relative:e})},l=fr();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),f=u.getAll("index");if(f.some(p=>p==="")){u.delete("index"),f.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Pr([n,o.pathname])),bl(o)}function SR(t,{relative:e}={}){let n=N.useContext(g1);Qe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=_1("useViewTransitionState"),i=Il(t,{relative:e});if(!n.isTransitioning)return!1;let o=qr(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=qr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $u(i.pathname,l)!=null||$u(i.pathname,o)!=null}var Cg=c1();const xR=yg(Cg);function Hf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ER(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(p){try{h(r.next(p))}catch(m){l(m)}}function f(p){try{h(r.throw(p))}catch(m){l(m)}}function h(p){p.done?o(p.value):i(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})}const TR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _g extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class kR extends _g{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qw extends _g{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Vw extends _g{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Cm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Cm||(Cm={}));class CR{constructor(e,{headers:n={},customFetch:r,region:i=Cm.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=TR(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ER(this,arguments,void 0,function*(n,r={}){var i;let o,l;try{const{headers:u,method:f,body:h,signal:p,timeout:m}=r;let b={},{region:v}=r;v||(v=this.region);const w=new URL(`${this.url}/${n}`);v&&v!=="any"&&(b["x-region"]=v,w.searchParams.set("forceFunctionRegion",v));let S;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",S=h):typeof h=="string"?(b["Content-Type"]="text/plain",S=h):typeof FormData<"u"&&h instanceof FormData?S=h:(b["Content-Type"]="application/json",S=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?S=JSON.stringify(h):S=h;let E=p;m&&(l=new AbortController,o=setTimeout(()=>l.abort(),m),p?(E=l.signal,p.addEventListener("abort",()=>l.abort())):E=l.signal);const T=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),u),body:S,signal:E}).catch(L=>{throw new kR(L)}),C=T.headers.get("x-relay-error");if(C&&C==="true")throw new qw(T);if(!T.ok)throw new Vw(T);let _=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),j;return _==="application/json"?j=yield T.json():_==="application/octet-stream"||_==="application/pdf"?j=yield T.blob():_==="text/event-stream"?j=T:_==="multipart/form-data"?j=yield T.formData():j=yield T.text(),{data:j,error:null,response:T}}catch(u){return{data:null,error:u,response:u instanceof Vw||u instanceof qw?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var _R=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},AR=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,u=null,f=null,h=o.status,p=o.statusText;if(o.ok){var m,b;if(n.method!=="HEAD"){var v;const T=await o.text();T===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((v=n.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?u=T:u=JSON.parse(T))}const S=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),E=(b=o.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");S&&E&&E.length>1&&(f=parseInt(E[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var w;const S=await o.text();try{l=JSON.parse(S),Array.isArray(l)&&o.status===404&&(u=[],l=null,h=200,p="OK")}catch{o.status===404&&S===""?(h=204,p="No Content"):l={message:S}}if(l&&n.isMaybeSingle&&(!(l==null||(w=l.details)===null||w===void 0)&&w.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&n.shouldThrowOnError)throw new _R(l)}return{error:l,data:u,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(i=i.catch(o=>{var l;let u="";const f=o?.cause;if(f){var h,p,m,b;const w=(h=f?.message)!==null&&h!==void 0?h:"",S=(p=f?.code)!==null&&p!==void 0?p:"";u=`${(m=o?.name)!==null&&m!==void 0?m:"FetchError"}: ${o?.message}`,u+=`

Caused by: ${(b=f?.name)!==null&&b!==void 0?b:"Error"}: ${w}`,S&&(u+=` (${S})`),f?.stack&&(u+=`
${f.stack}`)}else{var v;u=(v=o?.stack)!==null&&v!==void 0?v:""}return{error:{message:`${(l=o?.name)!==null&&l!==void 0?l:"FetchError"}: ${o?.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},OR=class extends AR{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const u=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${f}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Kw=new RegExp("[,()]");var _o=class extends OR{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Kw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Kw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},RR=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join(""),{url:u,headers:f}=this.cloneRequestState();return u.searchParams.set("select",l),r&&f.append("Prefer",`count=${r}`),new _o({method:i,url:u,headers:f,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(u.length>0){const f=[...new Set(u)].map(h=>`"${h}"`);o.searchParams.set("columns",f.join(","))}}return new _o({method:i,url:o,headers:l,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const l="POST",{url:u,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),r&&f.append("Prefer",`count=${r}`),i||f.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);u.searchParams.set("columns",p.join(","))}}return new _o({method:l,url:u,headers:f,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new _o({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new _o({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},MR=class A1{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new RR(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new A1(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var l;let u;const f=new URL(`${this.url}/rpc/${e}`);let h;const p=v=>v!==null&&typeof v=="object"&&(!Array.isArray(v)||v.some(p)),m=r&&Object.values(n).some(p);m?(u="POST",h=n):r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{f.searchParams.append(v,w)})):(u="POST",h=n);const b=new Headers(this.headers);return m?b.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&b.set("Prefer",`count=${o}`),new _o({method:u,url:f,headers:b,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class NR{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const DR="2.93.3",jR=`realtime-js/${DR}`,LR="1.0.0",O1="2.0.0",Fw=O1,_m=1e4,zR=1e3,BR=100;var Si;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Si||(Si={}));var bt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(bt||(bt={}));var Pn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pn||(Pn={}));var Am;(function(t){t.websocket="websocket"})(Am||(Am={}));var ds;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ds||(ds={}));class UR{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var i,o;const l=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",f=(o=e.join_ref)!==null&&o!==void 0?o:"",h=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+l.length+h.length+m.length,v=new ArrayBuffer(this.HEADER_LENGTH+b);let w=new DataView(v),S=0;w.setUint8(S++,this.KINDS.userBroadcastPush),w.setUint8(S++,f.length),w.setUint8(S++,u.length),w.setUint8(S++,l.length),w.setUint8(S++,h.length),w.setUint8(S++,m.length),w.setUint8(S++,n),Array.from(f,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(u,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(l,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(h,T=>w.setUint8(S++,T.charCodeAt(0))),Array.from(m,T=>w.setUint8(S++,T.charCodeAt(0)));var E=new Uint8Array(v.byteLength+r.byteLength);return E.set(new Uint8Array(v),0),E.set(new Uint8Array(r),v.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,l,u,f]=r;return n({join_ref:i,ref:o,topic:l,event:u,payload:f})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,i)}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let f=this.HEADER_LENGTH+4;const h=r.decode(e.slice(f,f+i));f=f+i;const p=r.decode(e.slice(f,f+o));f=f+o;const m=r.decode(e.slice(f,f+l));f=f+l;const b=e.slice(f,e.byteLength),v=u===this.JSON_ENCODING?JSON.parse(r.decode(b)):b,w={type:this.BROADCAST_EVENT,event:p,payload:v};return l>0&&(w.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class R1{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ke||(Ke={}));const Gw=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=IR(l,t,e,i),o),{}):{}},IR=(t,e,n,r)=>{const i=e.find(u=>u.name===t),o=i?.type,l=n[t];return o&&!r.includes(o)?M1(o,l):Om(l)},M1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return qR(e,n)}switch(t){case Ke.bool:return PR(e);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return $R(e);case Ke.json:case Ke.jsonb:return HR(e);case Ke.timestamp:return VR(e);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return Om(e);default:return Om(e)}},Om=t=>t,PR=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$R=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},HR=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},qR=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>M1(e,u))}return t},VR=t=>typeof t=="string"?t.replace(" ","T"):t,N1=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ip{constructor(e,n,r={},i=_m){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Jw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Jw||(Jw={}));class ol{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ol.syncState(this.state,i,o,l),this.pendingDiffs.forEach(f=>{this.state=ol.syncDiff(this.state,f,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ol.syncDiff(this.state,i,o,l),u())}),this.onJoin((i,o,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:l})}),this.onLeave((i,o,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),l=this.transformState(n),u={},f={};return this.map(o,(h,p)=>{l[h]||(f[h]=p)}),this.map(l,(h,p)=>{const m=o[h];if(m){const b=p.map(E=>E.presence_ref),v=m.map(E=>E.presence_ref),w=p.filter(E=>v.indexOf(E.presence_ref)<0),S=m.filter(E=>b.indexOf(E.presence_ref)<0);w.length>0&&(u[h]=w),S.length>0&&(f[h]=S)}else u[h]=p}),this.syncDiff(o,{joins:u,leaves:f},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,f)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),p.length>0){const m=e[u].map(v=>v.presence_ref),b=p.filter(v=>m.indexOf(v.presence_ref)<0);e[u].unshift(...b)}r(u,p,f)}),this.map(l,(u,f)=>{let h=e[u];if(!h)return;const p=f.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),e[u]=h,i(u,h,f),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ww;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ww||(Ww={}));var al;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(al||(al={}));var Lr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Lr||(Lr={}));class Do{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ip(this,Pn.join,this.params,this.timeout),this.rejoinTimer=new R1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pn.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new ol(this),this.broadcastEndpointURL=N1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==bt.closed){const{config:{broadcast:l,presence:u,private:f}}=this.params,h=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[al.PRESENCE]&&this.bindings[al.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,m={},b={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:f};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e?.(Lr.CHANNEL_ERROR,v)),this._onClose(()=>e?.(Lr.CLOSED)),this.updateJoinPayload(Object.assign({config:b},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){e?.(Lr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,E=(w=S?.length)!==null&&w!==void 0?w:0,T=[];for(let C=0;C<E;C++){const _=S[C],{filter:{event:j,schema:L,table:$,filter:U}}=_,Y=v&&v[C];if(Y&&Y.event===j&&Do.isFilterValueEqual(Y.schema,L)&&Do.isFilterValueEqual(Y.table,$)&&Do.isFilterValueEqual(Y.filter,U))T.push(Object.assign(Object.assign({},_),{id:Y.id}));else{this.unsubscribe(),this.state=bt.errored,e?.(Lr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Lr.SUBSCRIBED);return}}).receive("error",v=>{this.state=bt.errored,e?.(Lr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e?.(Lr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===bt.joined&&e===al.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const h=await u.json();f=h.error||h.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,f;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Ip(this,Pn.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ip(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>BR){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const l=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:p}=Pn;if(r&&[u,f,h,p].indexOf(l)>=0&&r!==this._joinRef())return;let b=this._onMessage(l,n,r);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var w,S,E;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((E=(S=v.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===l}).map(v=>v.callback(b,r)):(o=this.bindings[l])===null||o===void 0||o.filter(v=>{var w,S,E,T,C,_;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const j=v.id,L=(w=v.filter)===null||w===void 0?void 0:w.event;return j&&((S=n.ids)===null||S===void 0?void 0:S.includes(j))&&(L==="*"||L?.toLocaleLowerCase()===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const j=(C=(T=v?.filter)===null||T===void 0?void 0:T.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return j==="*"||j===((_=n?.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof b=="object"&&"ids"in b){const w=b.data,{schema:S,table:E,commit_timestamp:T,type:C,errors:_}=w;b=Object.assign(Object.assign({},{schema:S,table:E,commit_timestamp:T,eventType:C,new:{},old:{},errors:_}),this._getPayloadRecords(w))}v.callback(b,r)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Do.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pn.close,{},e)}_onError(e){this._on(Pn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Gw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Gw(e.columns,e.old_record)),n}}const Pp=()=>{},fu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},KR=[1e3,2e3,5e3,1e4],FR=1e4,GR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JR{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_m,this.transport=null,this.heartbeatIntervalMs=fu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pp,this.ref=0,this.reconnectTimer=null,this.vsn=Fw,this.logger=Pp,this.conn=null,this.sendBuffer=[],this.serializer=new UR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Am.websocket}`,this.httpEndpoint=N1(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=NR.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Si.connecting:return ds.Connecting;case Si.open:return ds.Open;case Si.closing:return ds.Closing;default:return ds.Closed}}isConnected(){return this.connectionState()===ds.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Do(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,l=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(zR,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},fu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:l}=n,u=l?`(${l})`:"",f=o.status||"";this.log("receive",`${f} ${r} ${i} ${u}`.trim(),o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(i,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Si.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Si.open||this.conn.readyState===Si.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([GR],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:jR};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Pn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new R1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,l,u,f,h,p,m,b,v;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:_m,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:fu.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:Pp,this.vsn=(f=e?.vsn)!==null&&f!==void 0?f:Fw,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(w=>KR[w-1]||FR),this.vsn){case LR:this.encode=(p=e?.encode)!==null&&p!==void 0?p:((w,S)=>S(JSON.stringify(w))),this.decode=(m=e?.decode)!==null&&m!==void 0?m:((w,S)=>S(JSON.parse(w)));break;case O1:this.encode=(b=e?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(v=e?.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var vl=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function WR(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function YR(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function QR(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:l}){const u=WR(t.baseUrl,r,i),f=await YR(t.auth),h=await e(u,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...f,...l},body:o?JSON.stringify(o):void 0}),p=await h.text(),m=(h.headers.get("content-type")||"").includes("application/json"),b=m&&p?JSON.parse(p):p;if(!h.ok){const v=m?b:void 0,w=v?.error;throw new vl(w?.message??`Request failed with status ${h.status}`,{status:h.status,icebergType:w?.type,icebergCode:w?.code,details:v})}return{status:h.status,headers:h.headers,data:b}}}}function du(t){return t.join("")}var XR=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:du(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${du(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${du(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${du(t.namespace)}`}),!0}catch(e){if(e instanceof vl&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof vl&&n.status===409)return;throw n}}};function vo(t){return t.join("")}var ZR=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof vl&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof vl&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},eM=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=QR({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new XR(this.client,e),this.tableOps=new ZR(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},qf=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Vf(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var hu=class extends qf{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},D1=class extends qf{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const tM=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),nM=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Rm=t=>{if(Array.isArray(t))return t.map(n=>Rm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Rm(r)}),e},rM=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function wl(t){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(t)}function iM(t,e){if(wl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sM(t){var e=iM(t,"string");return wl(e)=="symbol"?e:e+""}function oM(t,e,n){return(e=sM(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yw(Object(n),!0).forEach(function(r){oM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Qw=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},aM=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const i=t,o=i.status||500;if(typeof i.json=="function")i.json().then(l=>{const u=l?.statusCode||l?.code||o+"";e(new hu(Qw(l),o,u,r))}).catch(()=>{if(r==="vectors"){const l=o+"";e(new hu(i.statusText||`HTTP ${o} error`,o,l,r))}else{const l=o+"";e(new hu(i.statusText||`HTTP ${o} error`,o,l,r))}});else{const l=o+"";e(new hu(i.statusText||`HTTP ${o} error`,o,l,r))}}else e(new D1(Qw(t),t,r))},lM=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!r?fe(fe({},i),n):(nM(r)?(i.headers=fe({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),fe(fe({},i),n))};async function Ya(t,e,n,r,i,o,l){return new Promise((u,f)=>{t(n,lM(e,r,i,o)).then(h=>{if(!h.ok)throw h;if(r?.noResolveJson)return h;if(l==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>u(h)).catch(h=>aM(h,f,r,l))})}function j1(t="storage"){return{get:async(e,n,r,i)=>Ya(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,o)=>Ya(e,"POST",n,i,o,r,t),put:async(e,n,r,i,o)=>Ya(e,"PUT",n,i,o,r,t),head:async(e,n,r,i)=>Ya(e,"HEAD",n,fe(fe({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,o)=>Ya(e,"DELETE",n,i,o,r,t)}}const cM=j1("storage"),{get:Sl,post:In,put:Mm,head:uM,remove:Ag}=cM,dn=j1("vectors");var Qo=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=tM(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vf(n))return{data:null,error:n};throw n}}},fM=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Vf(e))return{data:null,error:e};throw e}}};let L1;L1=Symbol.toStringTag;var dM=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[L1]="BlobDownloadBuilder",this.promise=null}asStream(){return new fM(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Vf(e))return{data:null,error:e};throw e}}};const hM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var pM=class extends Qo{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let o;const l=fe(fe({},Xw),r);let u=fe(fe({},i.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const f=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),f&&o.append("metadata",i.encodeMetadata(f)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),f&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(f))):(o=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,f&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r?.headers&&(u=fe(fe({},u),r.headers));const h=i._removeEmptyFolders(e),p=i._getFinalPath(h),m=await(t=="PUT"?Mm:In)(i.fetch,`${i.url}/object/${p}`,o,fe({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{path:h,id:m.Id,fullPath:m.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),l=i._getFinalPath(o),u=new URL(i.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",e),i.handleOperation(async()=>{let f;const h=fe({upsert:Xw.upsert},r),p=fe(fe({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",h.cacheControl)):(f=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:o,fullPath:(await Mm(i.fetch,u.toString(),f,{headers:p})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=fe({},n.headers);e?.upsert&&(i["x-upsert"]="true");const o=await In(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(n.url+o.url),u=l.searchParams.get("token");if(!u)throw new qf("No token returned by API");return{signedUrl:l.toString(),path:t,token:u}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await In(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await In(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),o=await In(r.fetch,`${r.url}/object/sign/${i}`,fe({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await In(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(l=>fe(fe({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null}))})}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),l=()=>Sl(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new dM(l,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Rm(await Sl(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await uM(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Vf(r)&&r instanceof D1){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Ag(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=fe(fe(fe({},hM),e),{},{prefix:t||""});return await In(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=fe({},t);return await In(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const mM="2.93.3",Pl={"X-Client-Info":`storage-js/${mM}`};var gM=class extends Qo{constructor(t,e={},n,r){const i=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const o=i.href.replace(/\/$/,""),l=fe(fe({},Pl),e);super(o,l,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Sl(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Sl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await In(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Mm(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await In(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Ag(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},yM=class extends Qo{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Pl),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await In(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Sl(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Ag(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!rM(t))throw new qf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new eM({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const l=i[o];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(i,u),error:null}}catch(f){if(r)throw f;return{data:null,error:f}}}}})}},bM=class extends Qo{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Pl),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await dn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await dn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},vM=class extends Qo{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Pl),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},wM=class extends Qo{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=fe(fe({},Pl),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await dn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},SM=class extends wM{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new xM(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},xM=class extends bM{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new EM(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},EM=class extends vM{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,fe(fe({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},TM=class extends gM{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new pM(this.url,this.headers,t,this.fetch)}get vectors(){return new SM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new yM(this.url+"/iceberg",this.headers,this.fetch)}};const z1="2.93.3",Ao=30*1e3,Nm=3,$p=Nm*Ao,kM="http://localhost:9999",CM="supabase.auth.token",_M={"X-Client-Info":`gotrue-js/${z1}`},Dm="X-Supabase-Api-Version",B1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OM=600*1e3;class xl extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function se(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class RM extends xl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function MM(t){return se(t)&&t.name==="AuthApiError"}class hs extends xl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Vr extends xl{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class fn extends Vr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Hp(t){return se(t)&&t.name==="AuthSessionMissingError"}class wo extends Vr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pu extends Vr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mu extends Vr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function NM(t){return se(t)&&t.name==="AuthImplicitGrantRedirectError"}class Zw extends Vr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class DM extends Vr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class jm extends Vr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function qp(t){return se(t)&&t.name==="AuthRetryableFetchError"}class eS extends Vr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Lm extends Vr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tS=` 	
\r=`.split(""),jM=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tS.length;e+=1)t[tS[e].charCodeAt(0)]=-2;for(let e=0;e<Hu.length;e+=1)t[Hu[e].charCodeAt(0)]=e;return t})();function nS(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Hu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Hu[r]),e.queuedBits-=6}}function U1(t,e,n){const r=jM[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function rS(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=l=>{BM(l,r,n)};for(let l=0;l<t.length;l+=1)U1(t.charCodeAt(l),i,o);return e.join("")}function LM(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function zM(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}LM(r,e)}}function BM(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Lo(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)U1(t.charCodeAt(i),n,r);return new Uint8Array(e)}function UM(t){const e=[];return zM(t,n=>e.push(n)),new Uint8Array(e)}function ms(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>nS(i,n,r)),nS(null,n,r),e.join("")}function IM(t){return Math.round(Date.now()/1e3)+t}function PM(){return Symbol("auth-callback")}const Mt=()=>typeof window<"u"&&typeof document<"u",ls={tested:!1,writable:!1},I1=()=>{if(!Mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ls.tested)return ls.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ls.tested=!0,ls.writable=!0}catch{ls.tested=!0,ls.writable=!1}return ls.writable};function $M(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const P1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Oo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},cs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Rt=async(t,e)=>{await t.removeItem(e)};class Kf{constructor(){this.promise=new Kf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Kf.promiseConstructor=Promise;function gu(t){const e=t.split(".");if(e.length!==3)throw new Lm("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!AM.test(e[r]))throw new Lm("JWT not in base64url format");return{header:JSON.parse(rS(e[0])),payload:JSON.parse(rS(e[1])),signature:Lo(e[2]),raw:{header:e[0],payload:e[1]}}}async function qM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function VM(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){i(l);return}}})()})}function KM(t){return("0"+t.toString(16)).substr(-2)}function FM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,KM).join("")}async function GM(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function JM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await GM(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function So(t,e,n=!1){const r=FM();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Oo(t,`${e}-code-verifier`,i);const o=await JM(r);return[o,r===o?"plain":"s256"]}const WM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YM(t){const e=t.headers.get(Dm);if(!e||!e.match(WM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function QM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function XM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xo(t){if(!ZM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vp(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function eN(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function iS(t){return JSON.parse(JSON.stringify(t))}const fs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),tN=[502,503,504];async function sS(t){var e;if(!HM(t))throw new jm(fs(t),0);if(tN.includes(t.status))throw new jm(fs(t),t.status);let n;try{n=await t.json()}catch(o){throw new hs(fs(o),o)}let r;const i=YM(t);if(i&&i.getTime()>=B1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new eS(fs(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new fn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new eS(fs(n),t.status,n.weak_password.reasons);throw new RM(fs(n),t.status||500,r)}const nN=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ue(t,e,n,r){var i;const o=Object.assign({},r?.headers);o[Dm]||(o[Dm]=B1["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",f=await rN(t,e,n+u,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(f):{data:Object.assign({},f),error:null}}async function rN(t,e,n,r,i,o){const l=nN(e,r,i,o);let u;try{u=await t(n,Object.assign({},l))}catch(f){throw console.error(f),new jm(fs(f),0)}if(u.ok||await sS(u),r?.noResolveJson)return u;try{return await u.json()}catch(f){await sS(f)}}function Un(t){var e;let n=null;oN(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=IM(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function oS(t){const e=Un(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ki(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function iN(t){return{data:t,error:null}}function sN(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,l=Hf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},f=Object.assign({},l);return{data:{properties:u,user:f},error:null}}function aS(t){return t}function oN(t){return t.access_token&&t.refresh_token&&t.expires_in}const Kp=["global","local","others"];class aN{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=P1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Kp[0]){if(Kp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kp.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ki})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Hf(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:sN,redirectTo:n?.redirectTo})}catch(n){if(se(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ki})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:aS});if(p.error)throw p.error;const m=await p.json(),b=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);h[`${E}Page`]=S}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(se(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){xo(e);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ki})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){xo(e);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ki})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){xo(e);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ki})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){xo(e.userId);try{const{data:n,error:r}=await ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(se(n))return{data:null,error:n};throw n}}async _deleteFactor(e){xo(e.userId),xo(e.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,l,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:aS});if(p.error)throw p.error;const m=await p.json(),b=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return v.length>0&&(v.forEach(w=>{const S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);h[`${E}Page`]=S}),h.total=parseInt(b)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(se(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(se(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(se(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(se(n))return{data:null,error:n};throw n}}}function lS(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Eo={debug:!!(globalThis&&I1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lN extends $1{}async function cN(t,e,n){Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new lN(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Eo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function uN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function H1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function fN(t){return parseInt(t,16)}function dN(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function hN(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:f,resources:h,scheme:p,uri:m,version:b}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=H1(t.address),w=p?`${p}://${r}`:r,S=t.statement?`${t.statement}
`:"",E=`${w} wants you to sign in with your Ethereum account:
${v}

${S}`;let T=`URI: ${m}
Version: ${b}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),f&&(T+=`
Request ID: ${f}`),h){let C=`
Resources:`;for(const _ of h){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);C+=`
- ${_}`}T+=C}return`${E}
${T}`}class ht extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class qu extends ht{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function pN({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ht({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(q1(l)){if(o.rp.id!==l)return new ht({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function mN({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ht({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(q1(r)){if(n.rpId!==r)return new ht({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class gN{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const yN=new gN;function bN(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Hf(t,["challenge","user","excludeCredentials"]),o=Lo(e).buffer,l=Object.assign(Object.assign({},n),{id:Lo(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const h=r[f];u.excludeCredentials[f]=Object.assign(Object.assign({},h),{id:Lo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function vN(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Hf(t,["challenge","allowCredentials"]),i=Lo(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Lo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function wN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ms(new Uint8Array(t.response.attestationObject)),clientDataJSON:ms(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function SN(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ms(new Uint8Array(i.authenticatorData)),clientDataJSON:ms(new Uint8Array(i.clientDataJSON)),signature:ms(new Uint8Array(i.signature)),userHandle:i.userHandle?ms(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function q1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function cS(){var t,e;return!!(Mt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function xN(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qu("Browser returned unexpected credential type",e)}:{data:null,error:new qu("Empty credential response",e)}}catch(e){return{data:null,error:pN({error:e,options:t})}}}async function EN(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qu("Browser returned unexpected credential type",e)}:{data:null,error:new qu("Empty credential response",e)}}catch(e){return{data:null,error:mN({error:e,options:t})}}}const TN={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kN={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Vu(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const l=i[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(e(l)){const u=r[o];e(u)?r[o]=Vu(u,l):r[o]=Vu(l)}else r[o]=l}return r}function CN(t,e){return Vu(TN,t,e||{})}function _N(t,e){return Vu(kN,t,e||{})}class AN{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){var l;try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:f};const h=i??yN.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;if(!p.name){const m=r;if(m)p.name=`${p.id}:${m}`;else{const v=(await this.client.getUser()).data.user,w=((l=v?.user_metadata)===null||l===void 0?void 0:l.name)||v?.email||v?.id||"User";p.name=`${p.id}:${w}`}}p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=CN(u.webauthn.credential_options.publicKey,o?.create),{data:m,error:b}=await xN({publicKey:p,signal:h});return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:b}}case"request":{const p=_N(u.webauthn.credential_options.publicKey,o?.request),{data:m,error:b}=await EN(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:h}));return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:b}}}}catch(u){return se(u)?{data:null,error:u}:{data:null,error:new hs("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new xl("rpId is required for WebAuthn authentication")};try{if(!cS())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!l)return{data:null,error:u};const{webauthn:f}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:r,credential_response:f.credential_response}})}catch(l){return se(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new xl("rpId is required for WebAuthn registration")};try{if(!cS())return{data:null,error:new hs("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:u};const{data:f,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return f?this._verify({factorId:l.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:r,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:h}}catch(l){return se(l)?{data:null,error:l}:{data:null,error:new hs("Unexpected error in register",l)}}}}uN();const ON={url:kM,storageKey:CM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_M,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function uS(t,e,n){return await n()}const To={};class El{get jwks(){var e,n;return(n=(e=To[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){To[this.storageKey]=Object.assign(Object.assign({},To[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=To[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){To[this.storageKey]=Object.assign(Object.assign({},To[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},ON),e);if(this.storageKey=o.storageKey,this.instanceID=(n=El.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,El.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Mt()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new aN({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=P1(o.fetch),this.lock=o.lock||uS,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Mt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=cN:this.lock=uS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new AN(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:I1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=lS(this.memoryStorage)),Mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${z1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Mt()&&(n=$M(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Mt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),NM(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return se(n)?this._returnResult({error:n}):this._returnResult({error:new hs("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Un}),{data:l,error:u}=o;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:p,password:m,options:b}=e;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await So(this.storage,this.storageKey)),o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:p,password:m,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:v,code_challenge_method:w},xform:Un})}else if("phone"in e){const{phone:p,password:m,options:b}=e;o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=b?.data)!==null&&r!==void 0?r:{},channel:(i=b?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Un})}else throw new pu("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return await Rt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(o){if(await Rt(this.storage,`${this.storageKey}-code-verifier`),se(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:oS})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:oS})}else throw new pu("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new wo;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(se(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,l,u,f,h,p,m,b;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:S,wallet:E,statement:T,options:C}=e;let _;if(Mt())if(typeof E=="object")_=E;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")_=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=E}const j=new URL((n=C?.url)!==null&&n!==void 0?n:window.location.href),L=await _.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!L||L.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=H1(L[0]);let U=(r=C?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!U){const X=await _.request({method:"eth_chainId"});U=fN(X)}const Y={domain:j.host,address:$,statement:T,uri:j.href,version:"1",chainId:U,nonce:(i=C?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(o=C?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=C?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=C?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(h=C?.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=C?.signInWithEthereum)===null||p===void 0?void 0:p.resources};v=hN(Y),w=await _.request({method:"personal_sign",params:[dN(v),$]})}try{const{data:S,error:E}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:w},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Un});if(E)throw E;if(!S||!S.session||!S.user){const T=new wo;return this._returnResult({data:{user:null,session:null},error:T})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:E})}catch(S){if(se(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var n,r,i,o,l,u,f,h,p,m,b,v;let w,S;if("message"in e)w=e.message,S=e.signature;else{const{chain:E,wallet:T,statement:C,options:_}=e;let j;if(Mt())if(typeof T=="object")j=T;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))j=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=T}const L=new URL((n=_?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const $=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_?.signInWithSolana),{version:"1",domain:L.host,uri:L.href}),C?{statement:C}:null));let U;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")U=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)U=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)w=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),S=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${L.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${L.href}`,`Issued At: ${(i=(r=_?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=_?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((l=_?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((u=_?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((f=_?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((h=_?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((m=(p=_?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",..._.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const $=await j.signMessage(new TextEncoder().encode(w),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=$}}try{const{data:E,error:T}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:ms(S)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Un});if(T)throw T;if(!E||!E.session||!E.user){const C=new wo;return this._returnResult({data:{user:null,session:null},error:C})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:T})}catch(E){if(se(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await cs(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new DM;const{data:o,error:l}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Un});if(await Rt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const u=new wo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:l})}catch(o){if(await Rt(this.storage,`${this.storageKey}-code-verifier`),se(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:l}=e,u=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Un}),{data:f,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f||!f.session||!f.user){const p=new wo;return this._returnResult({data:{user:null,session:null},error:p})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:h})}catch(n){if(se(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,l;try{if("email"in e){const{email:u,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await So(this.storage,this.storageKey));const{error:m}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:p}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=f?.data)!==null&&i!==void 0?i:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(l=f?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new pu("You must provide either an email or phone number.")}catch(u){if(await Rt(this.storage,`${this.storageKey}-code-verifier`),se(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Un});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const f=l.session,h=l.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:h,session:f},error:null})}catch(i){if(se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,l;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await So(this.storage,this.storageKey));const h=await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:iN});return!((o=h.data)===null||o===void 0)&&o.url&&Mt()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await Rt(this.storage,`${this.storageKey}-code-verifier`),se(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new fn;const{error:i}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(se(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:l}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:l,error:u}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new pu("You must provide either an email or phone number and a type")}catch(n){if(se(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await cs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<$p:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await cs(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=Vp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=eN(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ki}):await this._useSession(async n=>{var r,i,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fn}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:ki})})}catch(n){if(se(n))return Hp(n)&&(await this._removeSession(),await Rt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new fn;const l=i.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await So(this.storage,this.storageKey));const{data:h,error:p}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:l.access_token,xform:ki});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Rt(this.storage,`${this.storageKey}-code-verifier`),se(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fn;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:l}=gu(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(se(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new fn;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(se(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Mt())throw new mu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Zw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zw("No code detected.");const{data:C,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:l,expires_in:u,expires_at:f,token_type:h}=e;if(!o||!u||!l||!h)throw new mu("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let b=p+m;f&&(b=parseInt(f));const v=b-p;v*1e3<=Ao&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const w=b-m;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,b,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,b,p);const{data:S,error:E}=await this._getUser(o);if(E)throw E;const T={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:m,expires_at:b,refresh_token:l,token_type:h,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(se(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await cs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o&&!Hp(o))return this._returnResult({error:o});const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(MM(u)&&(u.status===404||u.status===401||u.status===403)||Hp(u)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Rt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=PM(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await So(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Rt(this.storage,`${this.storageKey}-code-verifier`),se(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var l,u,f,h,p;const{data:m,error:b}=o;if(b)throw b;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",v,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return Mt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(se(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:l,provider:u,token:f,access_token:h,nonce:p}=e,m=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:f,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Un}),{data:b,error:v}=m;return v?this._returnResult({data:{user:null,session:null},error:v}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new wo}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:v}))}catch(i){if(await Rt(this.storage,`${this.storageKey}-code-verifier`),se(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)throw l;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await VM(async i=>(i>0&&await qM(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Un})),(i,o)=>{const l=200*Math.pow(2,i);return o&&qp(o)&&Date.now()+l-r<Ao})}catch(r){if(this._debug(n,"error",r),se(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Mt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await cs(this.storage,this.storageKey);if(i&&this.userStorage){let l=await cs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Oo(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:Vp()}else if(i&&!i.user&&!i.user){const l=await cs(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await Rt(this.storage,this.storageKey+"-user"),await Oo(this.storage,this.storageKey,i)):i.user=Vp()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$p;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${$p}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),qp(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Kf;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new fn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),se(o)){const l={data:null,error:o};return qp(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(f){o.push(f)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Rt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Oo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=iS(i);await Oo(this.storage,this.storageKey,o)}else{const i=iS(n);await Oo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Rt(this.storage,this.storageKey),await Rt(this.storage,this.storageKey+"-code-verifier"),await Rt(this.storage,this.storageKey+"-user"),this.userStorage&&await Rt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ao);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ao);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ao}ms, refresh threshold is ${Nm} ticks`),i<=Nm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof $1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await So(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r?.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:h}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&f.type==="totp"&&(!((i=f?.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?wN(e.webauthn.credential_response):SN(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:bN(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:vN(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,o;if(e)try{const{payload:v}=gu(e);let w=null;v.aal&&(w=v.aal);let S=w;const{data:{user:E},error:T}=await this.getUser(e);if(T)return this._returnResult({data:null,error:T});((r=(n=E?.factors)===null||n===void 0?void 0:n.filter(j=>j.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(S="aal2");const _=v.amr||[];return{data:{currentLevel:w,nextLevel:S,currentAuthenticationMethods:_},error:null}}catch(v){if(se(v))return this._returnResult({data:null,error:v});throw v}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=gu(l.access_token);let h=null;f.aal&&(h=f.aal);let p=h;((o=(i=l.user.factors)===null||i===void 0?void 0:i.filter(v=>v.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(p="aal2");const b=f.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new fn})})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new fn});const l=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Mt()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new fn});const l=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&Mt()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new fn})})}catch(e){if(se(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new fn})})}catch(n){if(se(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+OM>i)return r;const{data:o,error:l}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:w}=await this.getSession();if(w||!v.session)return this._returnResult({data:null,error:w});r=v.session.access_token}const{header:i,payload:o,signature:l,raw:{header:u,payload:f}}=gu(r);n?.allowExpired||QM(o.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!h){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:o,header:i,signature:l},error:null}}const p=XM(i.alg),m=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,l,UM(`${u}.${f}`)))throw new Lm("Invalid JWT signature");return{data:{claims:o,header:i,signature:l},error:null}}catch(r){if(se(r))return this._returnResult({data:null,error:r});throw r}}}El.nextInstanceID={};const RN=El,MN="2.93.3";let el="";typeof Deno<"u"?el="deno":typeof document<"u"?el="web":typeof navigator<"u"&&navigator.product==="ReactNative"?el="react-native":el="node";const NN={"X-Client-Info":`supabase-js-${el}/${MN}`},DN={headers:NN},jN={schema:"public"},LN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zN={};function Tl(t){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tl(t)}function BN(t,e){if(Tl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UN(t){var e=BN(t,"string");return Tl(e)=="symbol"?e:e+""}function IN(t,e,n){return(e=UN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fS(Object(n),!0).forEach(function(r){IN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const PN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$N=()=>Headers,HN=(t,e,n)=>{const r=PN(n),i=$N();return async(o,l)=>{var u;const f=(u=await e())!==null&&u!==void 0?u:t;let h=new i(l?.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(o,it(it({},l),{},{headers:h}))}};function qN(t){return t.endsWith("/")?t:t+"/"}function VN(t,e){var n,r;const{db:i,auth:o,realtime:l,global:u}=t,{db:f,auth:h,realtime:p,global:m}=e,b={db:it(it({},f),i),auth:it(it({},h),o),realtime:it(it({},p),l),storage:{},global:it(it(it({},m),u),{},{headers:it(it({},(n=m?.headers)!==null&&n!==void 0?n:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}function KN(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var FN=class extends RN{constructor(t){super(t)}},GN=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=KN(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:jN,realtime:zN,auth:it(it({},LN),{},{storageKey:l}),global:DN},f=VN(n??{},u);if(this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=f.auth)!==null&&h!==void 0?h:{},this.headers,f.global.fetch)}this.fetch=HN(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(it({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new MR(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new TM(this.storageUrl.href,this.headers,this.fetch,n?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new CR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:l,lock:u,debug:f,throwOnError:h},p,m){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new FN({url:this.authUrl.href,headers:it(it({},b),p),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:l,lock:u,debug:f,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new JR(this.realtimeUrl.href,it(it({},t),{},{params:it(it({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const JN=(t,e,n)=>new GN(t,e,n);function WN(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}WN()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ie=JN("https://aaiovfryjlcdijdyknik.supabase.co","sb_publishable_cFHXexx3iNPEOWSFZ0IAxQ_h6MuktWT"),dS=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"http://localhost:5173":"https://socratic-tech.github.io/GrowingMinds";function or({className:t="",children:e,...n}){return O.jsx("button",{...n,className:"px-4 py-2 lg:py-3 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-500 focus-visible:ring-offset-2 min-h-[40px] flex items-center justify-center "+t,children:e})}const V1=N.createContext();function YN({children:t}){const[e,n]=N.useState(null);function r(i){n({id:Date.now(),...i}),setTimeout(()=>n(null),3e3)}return O.jsxs(V1.Provider,{value:{toast:e,showToast:r},children:[t,e&&O.jsx(QN,{toast:e})]})}function Os(){return N.useContext(V1)}function QN({toast:t}){return O.jsxs("div",{role:"status","aria-live":"polite",className:`fixed bottom-6 left-1/2 -translate-x-1/2 bg-teal-800 text-white px-6 py-3 
                 rounded-xl shadow-xl animate-fadeIn text-sm lg:text-base`,children:[O.jsx("p",{className:"font-semibold",children:t.title}),t.description&&O.jsx("p",{className:"text-xs lg:text-sm opacity-90",children:t.description})]})}function XN(){const{showToast:t}=Os(),[e,n]=N.useState("login"),[r,i]=N.useState(""),[o,l]=N.useState("");async function u(p){p.preventDefault();let m=e==="login"?await Ie.auth.signInWithPassword({email:r,password:o}):await Ie.auth.signUp({email:r,password:o});m.error&&t({title:"Authentication failed",description:m.error.message,type:"error"})}async function f(){if(!r){t({title:"Enter an email address first",type:"error"});return}const{error:p}=await Ie.auth.signInWithOtp({email:r,options:{emailRedirectTo:dS}});t(p?{title:"Magic link error",description:p.message,type:"error"}:{title:"Magic link sent!",description:"Check your inbox to continue.",type:"success"})}async function h(){const{error:p}=await Ie.auth.signInWithOAuth({provider:"google",options:{redirectTo:dS}});p&&t({title:"Google login error",description:p.message,type:"error"})}return O.jsx("div",{className:`min-h-screen flex flex-col items-center justify-center 
                    bg-gradient-to-br from-teal-800 to-teal-900 p-6`,children:O.jsxs("div",{className:`
        w-full max-w-sm bg-white rounded-3xl lg:rounded-2xl shadow-xl 
        p-8 space-y-6 animate-fadeIn
      `,children:[O.jsxs("div",{className:"text-center space-y-2",children:[O.jsx("div",{"aria-hidden":"true",className:"text-5xl",children:""}),O.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-teal-800 tracking-tight",children:"Growing Minds"}),O.jsx("p",{className:"text-xs lg:text-sm text-gray-500 uppercase font-medium",children:"Educator Portal"})]}),O.jsx(or,{"aria-label":"Sign in with Google",onClick:h,className:`w-full bg-red-500 hover:bg-red-600 text-white 
                     rounded-xl lg:rounded-lg shadow-md min-h-[44px]`,children:"Sign in with Google"}),O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{className:"flex-1 h-px bg-gray-200"}),O.jsx("span",{className:"text-xs lg:text-sm text-gray-400",children:"OR"}),O.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),O.jsxs("form",{onSubmit:u,className:"space-y-4",children:[O.jsx("label",{className:"sr-only",htmlFor:"email",children:"Email Address"}),O.jsx("input",{id:"email",type:"email",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl 
                       shadow-inner text-sm lg:text-base focus-visible:ring-2 
                       focus-visible:ring-teal-700`,placeholder:"Email address",value:r,onChange:p=>i(p.target.value)}),O.jsx("label",{className:"sr-only",htmlFor:"password",children:"Password"}),O.jsx("input",{id:"password",type:"password",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl 
                       shadow-inner text-sm lg:text-base focus-visible:ring-2 
                       focus-visible:ring-teal-700`,placeholder:"Password",value:o,onChange:p=>l(p.target.value)}),O.jsx(or,{"aria-label":e==="login"?"Sign in":"Create account",className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4 
                       rounded-xl shadow-lg font-semibold text-sm lg:text-base`,children:e==="login"?"Sign In":"Create Account"})]}),O.jsx("button",{"aria-label":"Send a magic login link",onClick:f,className:"w-full text-teal-700 underline text-xs lg:text-sm hover:text-teal-900",children:"Send me a magic login link"}),O.jsx("button",{"aria-label":"Toggle auth mode",onClick:()=>n(e==="login"?"signup":"login"),className:"block text-center text-xs lg:text-sm text-gray-500 hover:text-gray-700",children:e==="login"?"New educator? Create an account":"Already have an account? Sign in"})]})})}function ZN({email:t,isNew:e}){return O.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center p-8 text-center 
                 bg-gradient-to-br from-teal-800 to-teal-900 text-white animate-fadeIn`,children:[O.jsx("div",{"aria-hidden":"true",className:`w-20 h-20 lg:w-24 lg:h-24 bg-white/10 text-white rounded-full 
                   flex items-center justify-center text-4xl lg:text-5xl 
                   mb-6 shadow-xl backdrop-blur-sm border border-white/20`,children:""}),O.jsx("h1",{className:"text-2xl lg:text-3xl font-bold tracking-tight mb-3",children:e?"Setting Up Your Account":"Awaiting Approval"}),O.jsxs("p",{className:"text-sm lg:text-base text-teal-100 leading-relaxed max-w-xs mb-8",children:["Hi ",O.jsx("span",{className:"font-semibold",children:t.split("@")[0]}),"  your account ",e?"is being created":"is awaiting educator verification",". You'll be notified as soon as an admin approves your access."]}),O.jsx("button",{"aria-label":"Sign out",onClick:()=>Ie.auth.signOut(),className:`text-white/90 underline text-xs lg:text-sm tracking-wider 
                   hover:text-white transition`,children:"Sign Out"})]})}const K1=N.createContext();function eD({children:t}){const[e,n]=N.useState(null),[r,i]=N.useState(null),[o,l]=N.useState(!0),u=async f=>{const{data:h}=await Ie.from("profiles").select("*").eq("id",f.id).single();n(f),i(h||null),l(!1)};return N.useEffect(()=>{(async()=>{try{await Ie.auth.getSessionFromUrl({storeSession:!0})}catch{}const{data:{session:p}}=await Ie.auth.getSession();p?.user?await u(p.user):l(!1)})();const{data:{subscription:h}}=Ie.auth.onAuthStateChange(async(p,m)=>{m?.user?u(m.user):(n(null),i(null),l(!1))});return()=>h.unsubscribe()},[]),O.jsx(K1.Provider,{value:{user:e,profile:r,loading:o},children:t})}function Rs(){return N.useContext(K1)}var Fp={exports:{}},Gp={};var hS;function tD(){if(hS)return Gp;hS=1;var t=Bl();function e(m,b){return m===b&&(m!==0||1/m===1/b)||m!==m&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function u(m,b){var v=b(),w=r({inst:{value:v,getSnapshot:b}}),S=w[0].inst,E=w[1];return o(function(){S.value=v,S.getSnapshot=b,f(S)&&E({inst:S})},[m,v,b]),i(function(){return f(S)&&E({inst:S}),m(function(){f(S)&&E({inst:S})})},[m]),l(v),v}function f(m){var b=m.getSnapshot;m=m.value;try{var v=b();return!n(m,v)}catch{return!0}}function h(m,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Gp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Gp}var pS;function F1(){return pS||(pS=1,Fp.exports=tD()),Fp.exports}var G1=F1();function Nt(t){this.content=t}Nt.prototype={constructor:Nt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),o=r.content.slice();return i==-1?o.push(n||t,e):(o[i+1]=e,n&&(o[i]=n)),new Nt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Nt(n)},addToStart:function(t,e){return new Nt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Nt(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),o=r.find(t);return i.splice(o==-1?i.length:o,0,e,n),new Nt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Nt.from(t),t.size?new Nt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Nt.from(t),t.size?new Nt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Nt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Nt.from=function(t){if(t instanceof Nt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Nt(e)};function J1(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),o=e.child(r);if(i==o){n+=i.nodeSize;continue}if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let l=0;i.text[l]==o.text[l];l++)n++;return n}if(i.content.size||o.content.size){let l=J1(i.content,o.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function W1(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(i==0||o==0)return i==o?null:{a:n,b:r};let l=t.child(--i),u=e.child(--o),f=l.nodeSize;if(l==u){n-=f,r-=f;continue}if(!l.sameMarkup(u))return{a:n,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,n--,r--;return{a:n,b:r}}if(l.content.size||u.content.size){let h=W1(l.content,u.content,n-1,r-1);if(h)return h}n-=f,r-=f}}class G{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,o){for(let l=0,u=0;u<n;l++){let f=this.content[l],h=u+f.nodeSize;if(h>e&&r(f,i+u,o||null,l)!==!1&&f.content.size){let p=u+1;f.nodesBetween(Math.max(0,e-p),Math.min(f.content.size,n-p),r,i+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let o="",l=!0;return this.nodesBetween(e,n,(u,f)=>{let h=u.isText?u.text.slice(Math.max(e,f)-f,n-f):u.isLeaf?i?typeof i=="function"?i(u):i:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new G(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let o=0,l=0;l<n;o++){let u=this.content[o],f=l+u.nodeSize;f>e&&((l<e||f>n)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,n-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,n-l-1))),r.push(u),i+=u.nodeSize),l=f}return new G(r,i)}cutByIndex(e,n){return e==n?G.empty:e==0&&n==this.content.length?this:new G(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new G(i,o)}addToStart(e){return new G([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new G(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return J1(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return W1(this,e,n,r)}findIndex(e){if(e==0)return yu(0,e);if(e==this.size)return yu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=e)return o==e?yu(n+1,o):yu(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return G.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new G(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return G.empty;let n,r=0;for(let i=0;i<e.length;i++){let o=e[i];r+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(n||(n=e.slice(0,i)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new G(n||e,r)}static from(e){if(!e)return G.empty;if(e instanceof G)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new G([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}G.empty=new G([],0);const Jp={index:0,offset:0};function yu(t,e){return Jp.index=t,Jp.offset=e,Jp}function Ku(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ku(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ku(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ve=class zm{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ku(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return zm.none;if(e instanceof zm)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Ve.none=[];class Fu extends Error{}class Q{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Q1(this.content,e+this.openStart,n);return r&&new Q(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Q(Y1(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Q.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Q(G.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)i++;return new Q(e,r,i)}}Q.empty=new Q(G.empty,0,0);function Y1(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:l,offset:u}=t.findIndex(n);if(i==e||o.isText){if(u!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(Y1(o.content,e-i-1,n-i-1)))}function Q1(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),l=t.maybeChild(i);if(o==e||l.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let u=Q1(l.content,e-o-1,n,l);return u&&t.replaceChild(i,l.copy(u))}function nD(t,e,n){if(n.openStart>t.depth)throw new Fu("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Fu("Inconsistent open depths");return X1(t,e,n,0)}function X1(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let l=X1(t,e,n,r+1);return o.copy(o.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,u=l.content;return ws(l,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=rD(n,t);return ws(o,eE(t,l,u,e,r))}else return ws(o,Gu(t,e,r))}function Z1(t,e){if(!e.type.compatibleContent(t.type))throw new Fu("Cannot join "+e.type.name+" onto "+t.type.name)}function Bm(t,e,n){let r=t.node(n);return Z1(r,e.node(n)),r}function vs(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ll(t,e,n,r){let i=(e||t).node(n),o=0,l=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(vs(t.nodeAfter,r),o++));for(let u=o;u<l;u++)vs(i.child(u),r);e&&e.depth==n&&e.textOffset&&vs(e.nodeBefore,r)}function ws(t,e){return t.type.checkContent(e),t.copy(e)}function eE(t,e,n,r,i){let o=t.depth>i&&Bm(t,e,i+1),l=r.depth>i&&Bm(n,r,i+1),u=[];return ll(null,t,i,u),o&&l&&e.index(i)==n.index(i)?(Z1(o,l),vs(ws(o,eE(t,e,n,r,i+1)),u)):(o&&vs(ws(o,Gu(t,e,i+1)),u),ll(e,n,i,u),l&&vs(ws(l,Gu(n,r,i+1)),u)),ll(r,null,i,u),new G(u)}function Gu(t,e,n){let r=[];if(ll(null,t,n,r),t.depth>n){let i=Bm(t,e,n+1);vs(ws(i,Gu(t,e,n+1)),r)}return ll(e,null,n,r),new G(r)}function rD(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(G.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class kl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)i+=r.child(o).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ve.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let u=r;r=i,i=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!i||!o[l].isInSet(i.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Ju(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,o=n;for(let l=e;;){let{index:u,offset:f}=l.content.findIndex(o),h=o-f;if(r.push(l,u,i+f),!h||(l=l.child(u),l.isText))break;o=h-1,i+=f+1}return new kl(n,r,o)}static resolveCached(e,n){let r=mS.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==n)return l}else mS.set(e,r=new iD);let i=r.elts[r.i]=kl.resolve(e,n);return r.i=(r.i+1)%sD,i}}class iD{constructor(){this.elts=[],this.i=0}}const sD=12,mS=new WeakMap;class Ju{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const oD=Object.create(null);let Mi=class Um{constructor(e,n,r,i=Ve.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||G.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ku(this.attrs,n||e.defaultAttrs||oD)&&Ve.sameSet(this.marks,r||Ve.none)}copy(e=null){return e==this.content?this:new Um(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Um(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Q.empty;let i=this.resolve(e),o=this.resolve(n),l=r?0:i.sharedDepth(n),u=i.start(l),h=i.node(l).content.cut(i.pos-u,o.pos-u);return new Q(h,i.depth-l,o.depth-l)}replace(e,n,r){return nD(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return kl.resolveCached(this,e)}resolveNoCache(e){return kl.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),tE(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=G.empty,i=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,o),u=l&&l.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let f=i;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ve.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ve.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=G.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};Mi.prototype.text=void 0;class Wu extends Mi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):tE(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Wu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Wu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function tE(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ts{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new aD(e,n);if(r.next==null)return Ts.empty;let i=nE(r);r.next&&r.err("Unexpected trailing text");let o=pD(hD(i));return mD(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let o=n;i&&o<r;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function o(l,u){let f=l.matchFragment(e,r);if(f&&(!n||f.validEnd))return G.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(m)==-1){i.push(m);let b=o(m,u.concat(p));if(b)return b}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(e)){let l=[];for(let u=i;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:f}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!i.type||f.validEnd)&&(r.push({match:u.contentMatch,type:u,via:i}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Ts.empty=new Ts(!0);class aD{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function nE(t){let e=[];do e.push(lD(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function lD(t){let e=[];do e.push(cD(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function cD(t){let e=dD(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=uD(t,e);else break;return e}function gS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function uD(t,e){let n=gS(t),r=n;return t.eat(",")&&(t.next!="}"?r=gS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function fD(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let l=n[o];l.isInGroup(e)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function dD(t){if(t.eat("(")){let e=nE(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=fD(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function hD(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(l,u,f){let h={term:f,to:u};return e[l].push(h),h}function i(l,u){l.forEach(f=>f.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((f,h)=>f.concat(o(h,u)),[]);if(l.type=="seq")for(let f=0;;f++){let h=o(l.exprs[f],u);if(f==l.exprs.length-1)return h;i(h,u=n())}else if(l.type=="star"){let f=n();return r(u,f),i(o(l.expr,f),f),[r(f)]}else if(l.type=="plus"){let f=n();return i(o(l.expr,u),f),i(o(l.expr,f),f),[r(f)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let f=u;for(let h=0;h<l.min;h++){let p=n();i(o(l.expr,f),p),f=p}if(l.max==-1)i(o(l.expr,f),f);else for(let h=l.min;h<l.max;h++){let p=n();r(f,p),i(o(l.expr,f),p),f=p}return[r(f)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function rE(t,e){return e-t}function yS(t,e){let n=[];return r(e),n.sort(rE);function r(i){let o=t[i];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(i);for(let l=0;l<o.length;l++){let{term:u,to:f}=o[l];!u&&n.indexOf(f)==-1&&r(f)}}}function pD(t){let e=Object.create(null);return n(yS(t,0));function n(r){let i=[];r.forEach(l=>{t[l].forEach(({term:u,to:f})=>{if(!u)return;let h;for(let p=0;p<i.length;p++)i[p][0]==u&&(h=i[p][1]);yS(t,f).forEach(p=>{h||i.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new Ts(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let u=i[l][1].sort(rE);o.next.push({type:i[l][0],next:e[u.join(",")]||n(u)})}return o}}function mD(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],o=!i.validEnd,l=[];for(let u=0;u<i.next.length;u++){let{type:f,next:h}=i.next[u];l.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function iE(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function sE(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let o=t[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function oE(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let o=t[i];o.validate&&o.validate(e[i])}}function aE(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new yD(t,r,e[r]);return n}let bS=class lE{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=aE(e,r.attrs),this.defaultAttrs=iE(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ts.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:sE(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Mi(this,this.computeAttrs(e),G.from(n),Ve.setFrom(r))}createChecked(e=null,n,r){return n=G.from(n),this.checkContent(n),new Mi(this,this.computeAttrs(e),n,Ve.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=G.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),o=i&&i.fillBefore(G.empty,!0);return o?new Mi(this,e,n.append(o),Ve.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){oE(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ve.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,l)=>r[o]=new lE(o,n,l));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function gD(t,e,n){let r=n.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class yD{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?gD(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ff{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=aE(e,i.attrs),this.excluded=null;let o=iE(this.attrs);this.instance=o?new Ve(this,o):null}create(e=null){return!e&&this.instance?this.instance:new Ve(this,sE(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((o,l)=>r[o]=new Ff(o,i++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){oE(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class cE{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Nt.from(e.nodes),n.marks=Nt.from(e.marks||{}),this.nodes=bS.compile(this.spec.nodes,this),this.marks=Ff.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Ts.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?vS(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:vS(this,l.split(" "))}this.nodeFromJSON=i=>Mi.fromJSON(this,i),this.markFromJSON=i=>Ve.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof bS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Wu(r,r.defaultAttrs,e,Ve.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function vS(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],l=o;if(o)n.push(o);else for(let u in t.marks){let f=t.marks[u];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=f)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function bD(t){return t.tag!=null}function vD(t){return t.style!=null}class Ni{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(bD(i))this.tags.push(i);else if(vD(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=e.nodes[i.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new SS(this,n,!1);return r.addAll(e,Ve.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new SS(this,n,!0);return r.addAll(e,Ve.none,n.from,n.to),Q.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(xD(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,n,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=n))){if(l.getAttrs){let f=l.getAttrs(n);if(f===!1)continue;l.attrs=f||void 0}return l}}}static schemaRules(e){let n=[];function r(i){let o=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let u=n[l];if((u.priority==null?50:u.priority)<o)break}n.splice(l,0,i)}for(let i in e.marks){let o=e.marks[i].spec.parseDOM;o&&o.forEach(l=>{r(l=xS(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let o=e.nodes[i].spec.parseDOM;o&&o.forEach(l=>{r(l=xS(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ni(e,Ni.schemaRules(e)))}}const uE={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wD={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},fE={ol:!0,ul:!0},Cl=1,Im=2,cl=4;function wS(t,e,n){return e!=null?(e?Cl:0)|(e==="full"?Im:0):t&&t.whitespace=="pre"?Cl|Im:n&~cl}class bu{constructor(e,n,r,i,o,l){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=Ve.none,this.match=o||(l&cl?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(G.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Cl)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let n=G.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(G.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!uE.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class SS{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,o,l=wS(null,n.preserveWhitespace,0)|(r?cl:0);i?o=new bu(i.type,i.attrs,Ve.none,!0,n.topMatch||i.type.contentMatch,l):r?o=new bu(null,null,Ve.none,!0,null,l):o=new bu(e.schema.topNodeType,null,Ve.none,!0,null,l),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,o=i.options&Im?"full":this.localPreserveWS||(i.options&Cl)>0,{schema:l}=this.parser;if(o==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let f=0;f<u.length;f++)f&&this.insertNode(l.linebreakReplacement.create(),n,!0),u[f]&&this.insertNode(l.text(u[f]),n,!/\S/.test(u[f]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=i.content[i.content.length-1],f=e.previousSibling;(!u||f&&f.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;fE.hasOwnProperty(l)&&this.parser.normalizeLists&&SD(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(f?f.ignore:wD.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,p=this.needsBlock;if(uE.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=f&&f.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,n);h&&this.addElementByRule(e,f,h,f.consuming===!1?u:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let f=this.parser.matchStyle(o,l,this,u);if(!f)break;if(f.ignore)return null;if(f.clearMark?n=n.filter(h=>!f.clearMark(h)):n=n.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)u=f;else break}}return n}addElementByRule(e,n,r,i){let o,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(l,n.attrs||null,r,n.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[n.mark];r=r.concat(f.create(n.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof n.contentElement=="string"?f=e.querySelector(n.contentElement):typeof n.contentElement=="function"?f=n.contentElement(e):n.contentElement&&(f=n.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}o&&this.sync(u)&&this.open--}addAll(e,n,r,i){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=i==null?null:e.childNodes[i];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,n);this.findAtPoint(e,o)}findPlace(e,n,r){let i,o;for(let l=this.open,u=0;l>=0;l--){let f=this.nodes[l],h=f.findWrapping(e);if(h&&(!i||i.length>h.length+u)&&(i=h,o=f,!h.length))break;if(f.solid){if(r)break;u+=2}}if(!i)return null;this.sync(o);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=Ve.none;for(let u of i.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):ES(u.type,e.type))&&(l=u.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,n,r,i){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,i)),o}enterInner(e,n,r,i=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=wS(e,o,l.options);l.options&cl&&l.content.length==0&&(u|=cl);let f=Ve.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):ES(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new bu(e,n,f,i,null,u)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Cl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),l=(u,f)=>{for(;u>=0;u--){let h=n[u];if(h==""){if(u==n.length-1||u==0)continue;for(;f>=o;f--)if(l(u-1,f))return!0;return!1}else{let p=f>0||f==0&&i?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;f--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function SD(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&fE.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function xD(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function xS(t){let e={};for(let n in t)e[n]=t[n];return e}function ES(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],l=u=>{o.push(u);for(let f=0;f<u.edgeCount;f++){let{type:h,next:p}=u.edge(f);if(h==e||o.indexOf(p)<0&&l(p))return!0}};if(l(i.contentMatch))return!0}}class Ms{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Wp(n).createDocumentFragment());let i=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,f=0;for(;u<o.length&&f<l.marks.length;){let h=l.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,f++}for(;u<o.length;)i=o.pop()[1];for(;f<l.marks.length;){let h=l.marks[f++],p=this.serializeMark(h,l.isInline,n);p&&(o.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Lu(Wp(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Lu(Wp(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Lu(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ms(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=TS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return TS(e.marks)}}function TS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Wp(t){return t.document||window.document}const kS=new WeakMap;function ED(t){let e=kS.get(t);return e===void 0&&kS.set(t,e=TD(t)),e}function TD(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Lu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=ED(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let u,f=n?t.createElementNS(n,i):t.createElement(i),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let b=m.indexOf(" ");b>0?f.setAttributeNS(m.slice(0,b),m.slice(b+1),h[m]):m=="style"&&f.style?f.style.cssText=h[m]:f.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let b=e[m];if(b===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:v,contentDOM:w}=Lu(t,b,n,r);if(f.appendChild(v),w){if(u)throw new RangeError("Multiple content holes");u=w}}}return{dom:f,contentDOM:u}}const dE=65535,hE=Math.pow(2,16);function kD(t,e){return t+e*hE}function CS(t){return t&dE}function CD(t){return(t-(t&dE))/hE}const pE=1,mE=2,zu=4,gE=8;class Pm{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&gE)>0}get deletedBefore(){return(this.delInfo&(pE|zu))>0}get deletedAfter(){return(this.delInfo&(mE|zu))>0}get deletedAcross(){return(this.delInfo&zu)>0}}class hn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&hn.empty)return hn.empty}recover(e){let n=0,r=CS(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+CD(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?i:0);if(f>e)break;let h=this.ranges[u+o],p=this.ranges[u+l],m=f+h;if(e<=m){let b=h?e==f?-1:e==m?1:n:n,v=f+i+(b<0?0:p);if(r)return v;let w=e==(n<0?f:m)?null:kD(u/3,e-f),S=e==f?mE:e==m?pE:zu;return(n<0?e!=f:e!=m)&&(S|=gE),new Pm(v,S,w)}i+=p-h}return r?e+i:new Pm(e+i,0,null)}touches(e,n){let r=0,i=CS(n),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let f=this.ranges[u]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[u+o],p=f+h;if(e<=p&&u==i*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let l=this.ranges[i],u=l-(this.inverted?o:0),f=l+(this.inverted?0:o),h=this.ranges[i+n],p=this.ranges[i+r];e(u,u+h,f,f+p),o+=p-h}}invert(){return new hn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?hn.empty:new hn(e<0?[0,-e,0]:[0,0,e])}}hn.empty=new hn([]);class _l{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new _l(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new _l;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,n);if(u.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,e=this._maps[f].recover(u.recover);continue}}i|=u.delInfo,e=u.pos}return r?e:new Pm(e,i,null)}}const Yp=Object.create(null);class Ut{getMap(){return hn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Yp[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Yp)throw new RangeError("Duplicate use of step JSON ID "+e);return Yp[e]=n,n.prototype.jsonID=e,n}}class pt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new pt(e,null)}static fail(e){return new pt(null,e)}static fromReplace(e,n,r,i){try{return pt.ok(e.replace(n,r,i))}catch(o){if(o instanceof Fu)return pt.fail(o.message);throw o}}}function Og(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let o=t.child(i);o.content.size&&(o=o.copy(Og(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return G.fromArray(r)}class Ai extends Ut{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new Q(Og(n.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return pt.fromReplace(e,this.from,this.to,o)}invert(){return new Hn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ai(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ai&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ai(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ai(n.from,n.to,e.markFromJSON(n.mark))}}Ut.jsonID("addMark",Ai);class Hn extends Ut{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Q(Og(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return pt.fromReplace(e,this.from,this.to,r)}invert(){return new Ai(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Hn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Hn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Hn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Hn(n.from,n.to,e.markFromJSON(n.mark))}}Ut.jsonID("removeMark",Hn);class Oi extends Ut{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return pt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return pt.fromReplace(e,this.pos,this.pos+1,new Q(G.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Oi(this.pos,n.marks[i]);return new Oi(this.pos,this.mark)}}return new ks(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Oi(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Oi(n.pos,e.markFromJSON(n.mark))}}Ut.jsonID("addNodeMark",Oi);class ks extends Ut{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return pt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return pt.fromReplace(e,this.pos,this.pos+1,new Q(G.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Oi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ks(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ks(n.pos,e.markFromJSON(n.mark))}}Ut.jsonID("removeNodeMark",ks);class St extends Ut{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&$m(e,this.from,this.to)?pt.fail("Structure replace would overwrite content"):pt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new hn([this.from,this.to-this.from,this.slice.size])}invert(e){return new St(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new St(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof St)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Q.empty:new Q(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new St(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Q.empty:new Q(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new St(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new St(n.from,n.to,Q.fromJSON(e,n.slice),!!n.structure)}}Ut.jsonID("replace",St);class Et extends Ut{constructor(e,n,r,i,o,l,u=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&($m(e,this.from,this.gapFrom)||$m(e,this.gapTo,this.to)))return pt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return pt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?pt.fromReplace(e,this.from,this.to,r):pt.fail("Content does not fit in gap")}getMap(){return new hn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Et(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||o>r.pos?null:new Et(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Et(n.from,n.to,n.gapFrom,n.gapTo,Q.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ut.jsonID("replaceAround",Et);function $m(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function _D(t,e,n,r){let i=[],o=[],l,u;t.doc.nodesBetween(e,n,(f,h,p)=>{if(!f.isInline)return;let m=f.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let b=Math.max(h,e),v=Math.min(h+f.nodeSize,n),w=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(w)||(l&&l.to==b&&l.mark.eq(m[S])?l.to=v:i.push(l=new Hn(b,v,m[S])));u&&u.to==b?u.to=v:o.push(u=new Ai(b,v,r))}}),i.forEach(f=>t.step(f)),o.forEach(f=>t.step(f))}function AD(t,e,n,r){let i=[],o=0;t.doc.nodesBetween(e,n,(l,u)=>{if(!l.isInline)return;o++;let f=null;if(r instanceof Ff){let h=l.marks,p;for(;p=r.isInSet(h);)(f||(f=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(f=[r]):f=l.marks;if(f&&f.length){let h=Math.min(u+l.nodeSize,n);for(let p=0;p<f.length;p++){let m=f[p],b;for(let v=0;v<i.length;v++){let w=i[v];w.step==o-1&&m.eq(i[v].style)&&(b=w)}b?(b.to=h,b.step=o):i.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),i.forEach(l=>t.step(new Hn(l.from,l.to,l.style)))}function Rg(t,e,n,r=n.contentMatch,i=!0){let o=t.doc.nodeAt(e),l=[],u=e+1;for(let f=0;f<o.childCount;f++){let h=o.child(f),p=u+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new St(u,p,Q.empty));else{r=m;for(let b=0;b<h.marks.length;b++)n.allowsMarkType(h.marks[b].type)||t.step(new Hn(u,p,h.marks[b]));if(i&&h.isText&&n.whitespace!="pre"){let b,v=/\r?\n|\r/g,w;for(;b=v.exec(h.text);)w||(w=new Q(G.from(n.schema.text(" ",n.allowedMarks(h.marks))),0,0)),l.push(new St(u+b.index,u+b.index+b[0].length,w))}}u=p}if(!r.validEnd){let f=r.fillBefore(G.empty,!0);t.replace(u,u,new Q(f,0,0))}for(let f=l.length-1;f>=0;f--)t.step(l[f])}function OD(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Xo(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,o=0;;--r){let l=t.$from.node(r),u=t.$from.index(r)+i,f=t.$to.indexAfter(r)-o;if(r<t.depth&&l.canReplace(u,f,n))return r;if(r==0||l.type.spec.isolating||!OD(l,u,f))break;u&&(i=1),f<l.childCount&&(o=1)}return null}function RD(t,e,n){let{$from:r,$to:i,depth:o}=e,l=r.before(o+1),u=i.after(o+1),f=l,h=u,p=G.empty,m=0;for(let w=o,S=!1;w>n;w--)S||r.index(w)>0?(S=!0,p=G.from(r.node(w).copy(p)),m++):f--;let b=G.empty,v=0;for(let w=o,S=!1;w>n;w--)S||i.after(w+1)<i.end(w)?(S=!0,b=G.from(i.node(w).copy(b)),v++):h++;t.step(new Et(f,h,l,u,new Q(p.append(b),m,v),p.size-m,!0))}function Mg(t,e,n=null,r=t){let i=MD(t,e),o=i&&ND(r,e);return o?i.map(_S).concat({type:e,attrs:n}).concat(o.map(_S)):null}function _S(t){return{type:t,attrs:null}}function MD(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return n.canReplaceWith(r,i,l)?o:null}function ND(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let f=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;f&&h<i;h++)f=f.matchType(n.child(h).type);return!f||!f.validEnd?null:l}function DD(t,e,n){let r=G.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let u=n[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=G.from(n[l].type.create(n[l].attrs,r))}let i=e.start,o=e.end;t.step(new Et(i,o,i,o,new Q(r,0,0),n.length,!0))}function jD(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(l,u)=>{let f=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,f)&&LD(t.doc,t.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?h=!1:!v&&w&&(h=!0)}h===!1&&bE(t,l,u,o),Rg(t,t.mapping.slice(o).map(u,1),r,void 0,h===null);let p=t.mapping.slice(o),m=p.map(u,1),b=p.map(u+l.nodeSize,1);return t.step(new Et(m,b,m+1,b-1,new Q(G.from(r.create(f,null,l.marks)),0,0),1,!0)),h===!0&&yE(t,l,u,o),!1}})}function yE(t,e,n,r){e.forEach((i,o)=>{if(i.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(i.text);){let f=t.mapping.slice(r).map(n+1+o+l.index);t.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function bE(t,e,n,r){e.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+o);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function LD(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function zD(t,e,n,r,i){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(r,null,i||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Et(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Q(G.from(l),0,0),1,!0))}function $r(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,l=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=n-2;h>o;h--,p--){let m=i.node(h),b=i.index(h);if(m.type.spec.isolating)return!1;let v=m.content.cutByIndex(b,m.childCount),w=r&&r[p+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let S=r&&r[p]||m;if(!m.canReplace(b+1,m.childCount)||!S.type.validContent(v))return!1}let u=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(u,u,f?f.type:i.node(o+1).type)}function BD(t,e,n=1,r){let i=t.doc.resolve(e),o=G.empty,l=G.empty;for(let u=i.depth,f=i.depth-n,h=n-1;u>f;u--,h--){o=G.from(i.node(u).copy(o));let p=r&&r[h];l=G.from(p?p.type.create(p.attrs,l):i.node(u).copy(l))}t.step(new St(e,e,new Q(o.append(l),n,n),!0))}function Ii(t,e){let n=t.resolve(e),r=n.index();return vE(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function UD(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let o=e.child(i),l=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function vE(t,e){return!!(t&&e&&!t.isLeaf&&UD(t,e))}function Gf(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let o,l,u=r.index(i);if(i==r.depth?(o=r.nodeBefore,l=r.nodeAfter):n>0?(o=r.node(i+1),u++,l=r.node(i).maybeChild(u)):(o=r.node(i).maybeChild(u-1),l=r.node(i+1)),o&&!o.isTextblock&&vE(o,l)&&r.node(i).canReplace(u,u+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function ID(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,o=t.doc.resolve(e-n),l=o.node().type;if(i&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(i);p&&!m?r=!1:!p&&m&&(r=!0)}let u=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);bE(t,p.node(),p.before(),u)}l.inlineContent&&Rg(t,e+n-1,l,o.node().contentMatchAt(o.index()),r==null);let f=t.mapping.slice(u),h=f.map(e-n);if(t.step(new St(h,f.map(e+n,-1),Q.empty,!0)),r===!0){let p=t.doc.resolve(h);yE(t,p.node(),p.before(),t.steps.length)}return t}function PD(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,n))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function wE(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,f=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(o==1)p=h.canReplace(f,f,i);else{let m=h.contentMatchAt(f).findWrapping(i.firstChild.type);p=m&&h.canReplaceWith(f,f,m[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function Jf(t,e,n=e,r=Q.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),o=t.resolve(n);return SE(i,o,r)?new St(e,n,r):new $D(i,o,r).fit()}function SE(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class $D{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=G.empty;for(let i=0;i<=e.depth;i++){let o=e.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=G.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let o=this.placed,l=r.depth,u=i.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let f=new Q(o,l,u);return e>-1?new Et(r.pos,e,this.$to.pos,this.$to.end(),f,n):f.size||r.pos!=this.$to.pos?new St(r.pos,i.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=Qp(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let l=i.firstChild;for(let u=this.depth;u>=0;u--){let{type:f,match:h}=this.frontier[u],p,m=null;if(n==1&&(l?h.matchType(l.type)||(m=h.fillBefore(G.from(l),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:m};if(n==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Qp(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Q(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Qp(e,n);if(i.childCount<=1&&n>0){let o=e.size-n<=n+i.size;this.unplaced=new Q(tl(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Q(tl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let S=0;S<o.length;S++)this.openFrontierNode(o[S]);let l=this.unplaced,u=r?r.content:l.content,f=l.openStart-e,h=0,p=[],{match:m,type:b}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)p.push(i.child(S));m=m.matchFragment(i)}let v=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let S=u.child(h),E=m.matchType(S.type);if(!E)break;h++,(h>1||f==0||S.content.size)&&(m=E,p.push(xE(S.mark(b.allowedMarks(S.marks)),h==1?f:0,h==u.childCount?v:-1)))}let w=h==u.childCount;w||(v=-1),this.placed=nl(this.placed,n,G.from(p)),this.frontier[n].match=m,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,E=u;S<v;S++){let T=E.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),E=T.content}this.unplaced=w?e==0?Q.empty:new Q(tl(l.content,e-1,1),e-1,v<0?l.openEnd:e-1):new Q(tl(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Xp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=Xp(e,n,i,r,o);if(l){for(let u=n-1;u>=0;u--){let{match:f,type:h}=this.frontier[u],p=Xp(e,u,h,f,!0);if(!p||p.childCount)continue e}return{depth:n,fit:l,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=nl(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,o)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=nl(this.placed,this.depth,G.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(G.empty,!0);n.childCount&&(this.placed=nl(this.placed,this.frontier.length,n))}}function tl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(tl(t.firstChild.content,e-1,n)))}function nl(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(nl(t.lastChild.content,e-1,n)))}function Qp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function xE(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,xE(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(G.empty,!0)))),t.copy(r)}function Xp(t,e,n,r,i){let o=t.node(e),l=i?t.indexAfter(e):t.index(e);if(l==o.childCount&&!n.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!HD(n,o.content,l)?u:null}function HD(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function qD(t){return t.spec.defining||t.spec.definingForContent}function VD(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),o=t.doc.resolve(n);if(SE(i,o,r))return t.step(new St(e,n,r));let l=TE(i,o);l[l.length-1]==0&&l.pop();let u=-(i.depth+1);l.unshift(u);for(let b=i.depth,v=i.pos-1;b>0;b--,v--){let w=i.node(b).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(b)>-1?u=b:i.before(b)==v&&l.splice(1,0,-b)}let f=l.indexOf(u),h=[],p=r.openStart;for(let b=r.content,v=0;;v++){let w=b.firstChild;if(h.push(w),v==r.openStart)break;b=w.content}for(let b=p-1;b>=0;b--){let v=h[b],w=qD(v.type);if(w&&!v.sameMarkup(i.node(Math.abs(u)-1)))p=b;else if(w||!v.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let v=(b+p+1)%(r.openStart+1),w=h[v];if(w)for(let S=0;S<l.length;S++){let E=l[(S+f)%l.length],T=!0;E<0&&(T=!1,E=-E);let C=i.node(E-1),_=i.index(E-1);if(C.canReplaceWith(_,_,w.type,w.marks))return t.replace(i.before(E),T?o.after(E):n,new Q(EE(r.content,0,r.openStart,v),v,r.openEnd))}}let m=t.steps.length;for(let b=l.length-1;b>=0&&(t.replace(e,n,r),!(t.steps.length>m));b--){let v=l[b];v<0||(e=i.before(v),n=o.after(v))}}function EE(t,e,n,r,i){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(EE(o.content,e+1,n,r,o)))}if(e>r){let o=i.contentMatchAt(0),l=o.fillBefore(t).append(t);t=l.append(o.matchFragment(l).fillBefore(G.empty,!0))}return t}function KD(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=PD(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Q(G.from(r),0,0))}function FD(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=TE(r,i);for(let l=0;l<o.length;l++){let u=o[l],f=l==o.length-1;if(f&&u==0||r.node(u).type.contentMatch.validEnd)return t.delete(r.start(u),i.end(u));if(u>0&&(f||r.node(u-1).canReplace(r.index(u-1),i.indexAfter(u-1))))return t.delete(r.before(u),i.after(u))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&i.end(l)-n!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function TE(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}class zo extends Ut{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return pt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return pt.fromReplace(e,this.pos,this.pos+1,new Q(G.from(i),0,n.isLeaf?0:1))}getMap(){return hn.empty}invert(e){return new zo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new zo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new zo(n.pos,n.attr,n.value)}}Ut.jsonID("attr",zo);class Al extends Ut{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return pt.ok(r)}getMap(){return hn.empty}invert(e){return new Al(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Al(n.attr,n.value)}}Ut.jsonID("docAttr",Al);let Io=class extends Error{};Io=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Io.prototype=Object.create(Error.prototype);Io.prototype.constructor=Io;Io.prototype.name="TransformError";class kE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new _l}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Io(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((o,l,u,f)=>{e=Math.min(e,u),n=Math.max(n,f)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Q.empty){let i=Jf(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Q(G.from(r),0,0))}delete(e,n){return this.replace(e,n,Q.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return VD(this,e,n,r),this}replaceRangeWith(e,n,r){return KD(this,e,n,r),this}deleteRange(e,n){return FD(this,e,n),this}lift(e,n){return RD(this,e,n),this}join(e,n=1){return ID(this,e,n),this}wrap(e,n){return DD(this,e,n),this}setBlockType(e,n=e,r,i=null){return jD(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return zD(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new zo(e,n,r)),this}setDocAttribute(e,n){return this.step(new Al(e,n)),this}addNodeMark(e,n){return this.step(new Oi(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ve)n.isInSet(r.marks)&&this.step(new ks(e,n));else{let i=r.marks,o,l=[];for(;o=n.isInSet(i);)l.push(new ks(e,o)),i=o.removeFromSet(i);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,n=1,r){return BD(this,e,n,r),this}addMark(e,n,r){return _D(this,e,n,r),this}removeMark(e,n,r){return AD(this,e,n,r),this}clearIncompatible(e,n,r){return Rg(this,e,n,r),this}}const Zp=Object.create(null);class de{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new CE(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Q.empty){let r=n.content.lastChild,i=null;for(let u=0;u<n.openEnd;u++)i=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:f,$to:h}=l[u],p=e.mapping.slice(o);e.replaceRange(p.map(f.pos),p.map(h.pos),u?Q.empty:n),u==0&&RS(e,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:l,$to:u}=i[o],f=e.mapping.slice(r),h=f.map(l.pos),p=f.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,n),RS(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new he(e):Ro(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let o=e.depth-1;o>=0;o--){let l=n<0?Ro(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ro(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new pn(e.node(0))}static atStart(e){return Ro(e,e,0,0,1)||new pn(e)}static atEnd(e){return Ro(e,e,e.content.size,e.childCount,-1)||new pn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Zp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Zp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Zp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return he.between(this.$anchor,this.$head).getBookmark()}}de.prototype.visible=!0;class CE{constructor(e,n){this.$from=e,this.$to=n}}let AS=!1;function OS(t){!AS&&!t.parent.inlineContent&&(AS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class he extends de{constructor(e,n=e){OS(e),OS(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return de.near(r);let i=e.resolve(n.map(this.anchor));return new he(i.parent.inlineContent?i:r,r)}replace(e,n=Q.empty){if(super.replace(e,n),n==Q.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof he&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Wf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new he(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let o=de.findFrom(n,r,!0)||de.findFrom(n,-r,!0);if(o)n=o.$head;else return de.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(de.findFrom(e,-r,!0)||de.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new he(e,n)}}de.jsonID("text",he);class Wf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Wf(e.map(this.anchor),e.map(this.head))}resolve(e){return he.between(e.resolve(this.anchor),e.resolve(this.head))}}class le extends de{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),o=e.resolve(i);return r?de.near(o):new le(o)}content(){return new Q(G.from(this.node),0,0)}eq(e){return e instanceof le&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ng(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new le(e.resolve(n.anchor))}static create(e,n){return new le(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}le.prototype.visible=!1;de.jsonID("node",le);class Ng{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Wf(r,r):new Ng(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&le.isSelectable(r)?new le(n):de.near(n)}}class pn extends de{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Q.empty){if(n==Q.empty){e.delete(0,e.doc.content.size);let r=de.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new pn(e)}map(e){return new pn(e)}eq(e){return e instanceof pn}getBookmark(){return GD}}de.jsonID("all",pn);const GD={map(){return this},resolve(t){return new pn(t)}};function Ro(t,e,n,r,i,o=!1){if(e.inlineContent)return he.create(t,n);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let u=e.child(l);if(u.isAtom){if(!o&&le.isSelectable(u))return le.create(t,n-(i<0?u.nodeSize:0))}else{let f=Ro(t,u,n+i,i<0?u.childCount:0,i,o);if(f)return f}n+=u.nodeSize*i}return null}function RS(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof St||i instanceof Et))return;let o=t.mapping.maps[r],l;o.forEach((u,f,h,p)=>{l==null&&(l=p)}),t.setSelection(de.near(t.doc.resolve(l),n))}const MS=1,vu=2,NS=4;class JD extends kE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|MS)&~vu,this.storedMarks=null,this}get selectionSet(){return(this.updated&MS)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=vu,this}ensureMarks(e){return Ve.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&vu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~vu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ve.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(n);o=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(de.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=NS,this}get scrolledIntoView(){return(this.updated&NS)>0}}function DS(t,e){return!e||!t?t:t.bind(e)}class rl{constructor(e,n,r){this.name=e,this.init=DS(n.init,r),this.apply=DS(n.apply,r)}}const WD=[new rl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new rl("selection",{init(t,e){return t.selection||de.atStart(e.doc)},apply(t){return t.selection}}),new rl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new rl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class em{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=WD.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new rl(r.key,r.spec.state,r))})}}class jo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let f=i?i[l].n:0,h=i?i[l].state:this,p=f<n.length&&u.spec.appendTransaction.call(u,f?n.slice(f):n,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let m=0;m<this.config.plugins.length;m++)i.push(m<l?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),o=!0}i&&(i[l]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new jo(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new JD(this)}static create(e){let n=new em(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new jo(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new em(this.schema,e.plugins),r=n.fields,i=new jo(n);for(let o=0;o<r.length;o++){let l=r[o].name;i[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],o=i.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new em(e.schema,e.plugins),o=new jo(i);return i.fields.forEach(l=>{if(l.name=="doc")o.doc=Mi.fromJSON(e.schema,n.doc);else if(l.name=="selection")o.selection=de.fromJSON(o.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let f=r[u],h=f.spec.state;if(f.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){o[l.name]=h.fromJSON.call(f,e,n[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function _E(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=_E(i,e,{})),n[r]=i}return n}class We{constructor(e){this.spec=e,this.props={},e.props&&_E(e.props,this,this.props),this.key=e.key?e.key.key:AE("plugin")}getState(e){return e[this.key]}}const tm=Object.create(null);function AE(t){return t in tm?t+"$"+ ++tm[t]:(tm[t]=0,t+"$")}class Xe{constructor(e="key"){this.key=AE(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Dg=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function OE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const RE=(t,e,n)=>{let r=OE(t,n);if(!r)return!1;let i=jg(r);if(!i){let l=r.blockRange(),u=l&&Xo(l);return u==null?!1:(e&&e(t.tr.lift(l,u).scrollIntoView()),!0)}let o=i.nodeBefore;if(IE(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Po(o,"end")||le.isSelectable(o)))for(let l=r.depth;;l--){let u=Jf(t.doc,r.before(l),r.after(l),Q.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=t.tr.step(u);f.setSelection(Po(o,"end")?de.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):le.create(f.doc,i.pos-o.nodeSize)),e(f.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},YD=(t,e,n)=>{let r=OE(t,n);if(!r)return!1;let i=jg(r);return i?ME(t,i,e):!1},QD=(t,e,n)=>{let r=DE(t,n);if(!r)return!1;let i=Lg(r);return i?ME(t,i,e):!1};function ME(t,e,n){let r=e.nodeBefore,i=r,o=e.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let l=e.nodeAfter,u=l,f=e.pos+1;for(;!u.isTextblock;f++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=Jf(t.doc,o,f,Q.empty);if(!h||h.from!=o||h instanceof St&&h.slice.size>=f-o)return!1;if(n){let p=t.tr.step(h);p.setSelection(he.create(p.doc,o)),n(p.scrollIntoView())}return!0}function Po(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const NE=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=jg(r)}let l=o&&o.nodeBefore;return!l||!le.isSelectable(l)?!1:(e&&e(t.tr.setSelection(le.create(t.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function jg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function DE(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const jE=(t,e,n)=>{let r=DE(t,n);if(!r)return!1;let i=Lg(r);if(!i)return!1;let o=i.nodeAfter;if(IE(t,i,e,1))return!0;if(r.parent.content.size==0&&(Po(o,"start")||le.isSelectable(o))){let l=Jf(t.doc,r.before(),r.after(),Q.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=t.tr.step(l);u.setSelection(Po(o,"start")?de.findFrom(u.doc.resolve(u.mapping.map(i.pos)),1):le.create(u.doc,u.mapping.map(i.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},LE=(t,e,n)=>{let{$head:r,empty:i}=t.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Lg(r)}let l=o&&o.nodeAfter;return!l||!le.isSelectable(l)?!1:(e&&e(t.tr.setSelection(le.create(t.doc,o.pos)).scrollIntoView()),!0)};function Lg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const XD=(t,e)=>{let n=t.selection,r=n instanceof le,i;if(r){if(n.node.isTextblock||!Ii(t.doc,n.from))return!1;i=n.from}else if(i=Gf(t.doc,n.from,-1),i==null)return!1;if(e){let o=t.tr.join(i);r&&o.setSelection(le.create(o.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},ZD=(t,e)=>{let n=t.selection,r;if(n instanceof le){if(n.node.isTextblock||!Ii(t.doc,n.to))return!1;r=n.to}else if(r=Gf(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},e2=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&Xo(i);return o==null?!1:(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},zE=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function zg(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const t2=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),l=zg(i.contentMatchAt(o));if(!l||!i.canReplaceWith(o,o,l))return!1;if(e){let u=n.after(),f=t.tr.replaceWith(u,u,l.createAndFill());f.setSelection(de.near(f.doc.resolve(u),1)),e(f.scrollIntoView())}return!0},BE=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof pn||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=zg(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,u=t.tr.insert(l,o.createAndFill());u.setSelection(he.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},UE=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if($r(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Xo(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function n2(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof le&&e.selection.node.isBlock)return!r.parentOffset||!$r(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,f=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){f=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),u=zg(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),o.unshift(f&&u?{type:u}:null),l=v;break}else{if(v==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof he||e.selection instanceof pn)&&p.deleteSelection();let m=p.mapping.map(r.pos),b=$r(p.doc,m,o.length,o);if(b||(o[0]=u?{type:u}:null,b=$r(p.doc,m,o.length,o)),!b)return!1;if(p.split(m,o.length,o),!f&&h&&r.node(l).type!=u){let v=p.mapping.map(r.before(l)),w=p.doc.resolve(v);u&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return n&&n(p.scrollIntoView()),!0}}const r2=n2(),i2=(t,e)=>{let{$from:n,to:r}=t.selection,i,o=n.sharedDepth(r);return o==0?!1:(i=n.before(o),e&&e(t.tr.setSelection(le.create(t.doc,i))),!0)};function s2(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(i.isTextblock||Ii(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function IE(t,e,n,r){let i=e.nodeBefore,o=e.nodeAfter,l,u,f=i.type.spec.isolating||o.type.spec.isolating;if(!f&&s2(t,e,n))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(n){let v=e.pos+o.nodeSize,w=G.empty;for(let T=l.length-1;T>=0;T--)w=G.from(l[T].create(null,w));w=G.from(i.copy(w));let S=t.tr.step(new Et(e.pos-1,v,e.pos,v,new Q(w,1,0),l.length,!0)),E=S.doc.resolve(v+2*l.length);E.nodeAfter&&E.nodeAfter.type==i.type&&Ii(S.doc,E.pos)&&S.join(E.pos),n(S.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&f?null:de.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),b=m&&Xo(m);if(b!=null&&b>=e.depth)return n&&n(t.tr.lift(m,b).scrollIntoView()),!0;if(h&&Po(o,"start",!0)&&Po(i,"end")){let v=i,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let S=o,E=1;for(;!S.isTextblock;S=S.firstChild)E++;if(v.canReplace(v.childCount,v.childCount,S.content)){if(n){let T=G.empty;for(let _=w.length-1;_>=0;_--)T=G.from(w[_].copy(T));let C=t.tr.step(new Et(e.pos-w.length,e.pos+o.nodeSize,e.pos+E,e.pos+o.nodeSize-E,new Q(T,w.length,0),0,!0));n(C.scrollIntoView())}return!0}}return!1}function PE(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(n&&n(e.tr.setSelection(he.create(e.doc,t<0?i.start(o):i.end(o)))),!0):!1}}const o2=PE(-1),a2=PE(1);function l2(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),u=l&&Mg(l,t,e);return u?(r&&r(n.tr.wrap(l,u).scrollIntoView()),!0):!1}}function jS(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];n.doc.nodesBetween(l,u,(f,h)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(t,e)))if(f.type==t)i=!0;else{let p=n.doc.resolve(h),m=p.index();i=p.parent.canReplaceWith(m,m+1,t)}})}if(!i)return!1;if(r){let o=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:f}}=n.selection.ranges[l];o.setBlockType(u,f,t,e)}r(o.scrollIntoView())}return!0}}function Bg(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Bg(Dg,RE,NE);Bg(Dg,jE,LE);Bg(zE,BE,UE,r2);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function c2(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o);if(!l)return!1;let u=r?n.tr:null;return u2(u,l,t,e)?(r&&r(u.scrollIntoView()),!0):!1}}function u2(t,e,n,r=null){let i=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=l.resolve(e.start-2);o=new Ju(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new Ju(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let u=Mg(o,n,r,e);return u?(t&&f2(t,e,u,i,n),!0):!1}function f2(t,e,n,r,i){let o=G.empty;for(let p=n.length-1;p>=0;p--)o=G.from(n[p].type.create(n[p].attrs,o));t.step(new Et(e.start-(r?2:0),e.end,e.start,e.end,new Q(o,0,0),n.length,!0));let l=0;for(let p=0;p<n.length;p++)n[p].type==i&&(l=p+1);let u=n.length-l,f=e.start+n.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,b=!0;p<m;p++,b=!1)!b&&$r(t.doc,f,u)&&(t.split(f,u),f+=2*u),f+=h.child(p).nodeSize;return t}function d2(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?h2(e,n,t,o):p2(e,n,o):!0:!1}}function h2(t,e,n,r){let i=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new Et(o-1,l,o,l,new Q(G.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Ju(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const u=Xo(r);if(u==null)return!1;i.lift(r,u);let f=i.doc.resolve(i.mapping.map(o,-1)-1);return Ii(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),e(i.scrollIntoView()),!0}function p2(t,e,n){let r=t.tr,i=n.parent;for(let v=n.end,w=n.endIndex-1,S=n.startIndex;w>S;w--)v-=i.child(w).nodeSize,r.delete(v-1,v+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,f=n.endIndex==i.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(f?G.empty:G.from(i))))return!1;let m=o.pos,b=m+l.nodeSize;return r.step(new Et(m-(u?1:0),b+(f?1:0),m+1,b-1,new Q((u?G.empty:G.from(i.copy(G.empty))).append(f?G.empty:G.from(i.copy(G.empty))),u?0:1,f?0:1),u?0:1)),e(r.scrollIntoView()),!0}function m2(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==t);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,f=u.child(l-1);if(f.type!=t)return!1;if(n){let h=f.lastChild&&f.lastChild.type==u.type,p=G.from(h?t.create():null),m=new Q(G.from(t.create(null,G.from(u.type.create(null,p)))),h?3:1,0),b=o.start,v=o.end;n(e.tr.step(new Et(b-(h?3:1),v,b,v,m,1,!0)).scrollIntoView())}return!0}}const Dt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},$o=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Hm=null;const zr=function(t,e,n){let r=Hm||(Hm=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},g2=function(){Hm=null},Cs=function(t,e,n,r){return n&&(LS(t,e,n,r,-1)||LS(t,e,n,r,1))},y2=/^(img|br|input|textarea|hr)$/i;function LS(t,e,n,r,i){for(var o;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Mn(t))){let l=t.parentNode;if(!l||l.nodeType!=1||$l(t)||y2.test(t.nodeName)||t.contentEditable=="false")return!1;e=Dt(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=i;else return!1;else t=l,e=i<0?Mn(t):0}else return!1}}function Mn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function b2(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Mn(t)}else if(t.parentNode&&!$l(t))e=Dt(t),t=t.parentNode;else return null}}function v2(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!$l(t))e=Dt(t)+1,t=t.parentNode;else return null}}function w2(t,e,n){for(let r=e==0,i=e==Mn(t);r||i;){if(t==n)return!0;let o=Dt(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,i=i&&o==Mn(t)}}function $l(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Yf=function(t){return t.focusNode&&Cs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ps(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function S2(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function x2(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Mn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Mn(r.startContainer),r.startOffset)}}}const ar=typeof navigator<"u"?navigator:null,zS=typeof document<"u"?document:null,Pi=ar&&ar.userAgent||"",qm=/Edge\/(\d+)/.exec(Pi),$E=/MSIE \d/.exec(Pi),Vm=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Pi),Zt=!!($E||Vm||qm),Di=$E?document.documentMode:Vm?+Vm[1]:qm?+qm[1]:0,Nn=!Zt&&/gecko\/(\d+)/i.test(Pi);Nn&&+(/Firefox\/(\d+)/.exec(Pi)||[0,0])[1];const Km=!Zt&&/Chrome\/(\d+)/.exec(Pi),xt=!!Km,HE=Km?+Km[1]:0,Lt=!Zt&&!!ar&&/Apple Computer/.test(ar.vendor),Ho=Lt&&(/Mobile\/\w+/.test(Pi)||!!ar&&ar.maxTouchPoints>2),Rn=Ho||(ar?/Mac/.test(ar.platform):!1),qE=ar?/Win/.test(ar.platform):!1,Ur=/Android \d/.test(Pi),Hl=!!zS&&"webkitFontSmoothing"in zS.documentElement.style,E2=Hl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function T2(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Rr(t,e){return typeof t=="number"?t:t[e]}function k2(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function BS(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=$o(l);continue}let u=l,f=u==o.body,h=f?T2(o):k2(u),p=0,m=0;if(e.top<h.top+Rr(r,"top")?m=-(h.top-e.top+Rr(i,"top")):e.bottom>h.bottom-Rr(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+Rr(i,"top")-h.top:e.bottom-h.bottom+Rr(i,"bottom")),e.left<h.left+Rr(r,"left")?p=-(h.left-e.left+Rr(i,"left")):e.right>h.right-Rr(r,"right")&&(p=e.right-h.right+Rr(i,"right")),p||m)if(f)o.defaultView.scrollBy(p,m);else{let v=u.scrollLeft,w=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let S=u.scrollLeft-v,E=u.scrollTop-w;e={left:e.left-S,top:e.top-E,right:e.right-S,bottom:e.bottom-E}}let b=f?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(b))break;l=b=="absolute"?l.offsetParent:$o(l)}}function C2(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let o=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=t.root.elementFromPoint(o,l);if(!u||u==t.dom||!t.dom.contains(u))continue;let f=u.getBoundingClientRect();if(f.top>=n-20){r=u,i=f.top;break}}return{refDOM:r,refTop:i,stack:VE(t.dom)}}function VE(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=$o(r));return e}function _2({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;KE(n,r==0?0:r-e)}function KE(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let ko=null;function A2(t){if(t.setActive)return t.setActive();if(ko)return t.focus(ko);let e=VE(t);t.focus(ko==null?{get preventScroll(){return ko={preventScroll:!0},!0}}:void 0),ko||(ko=!1,KE(e,0))}function FE(t,e){let n,r=2e8,i,o=0,l=e.top,u=e.top,f,h;for(let p=t.firstChild,m=0;p;p=p.nextSibling,m++){let b;if(p.nodeType==1)b=p.getClientRects();else if(p.nodeType==3)b=zr(p).getClientRects();else continue;for(let v=0;v<b.length;v++){let w=b[v];if(w.top<=l&&w.bottom>=u){l=Math.max(w.bottom,l),u=Math.min(w.top,u);let S=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(S<r){n=p,r=S,i=S&&n.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&S&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!f&&w.left<=e.left&&w.right>=e.left&&(f=p,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!n&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!n&&f&&(n=f,i=h,r=0),n&&n.nodeType==3?O2(n,i):!n||r&&n.nodeType==1?{node:t,offset:o}:FE(n,i)}function O2(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let l=wi(r,1);if(l.top!=l.bottom&&Ug(e,l)){i={node:t,offset:o+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Ug(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function R2(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function M2(t,e,n){let{node:r,offset:i}=FE(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function N2(t,e,n,r){let i=-1;for(let o=e,l=!1;o!=t.dom;){let u=t.docView.nearestDesc(o,!0),f;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((f=u.dom.getBoundingClientRect()).width||f.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&f.left>r.left||f.top>r.top?i=u.posBefore:(!l&&f.right<r.left||f.bottom<r.top)&&(i=u.posAfter),l=!0),!u.contentDOM&&i<0&&!u.node.isText))return(u.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function GE(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let l=t.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let f=0;f<u.length;f++){let h=u[f];if(Ug(e,h))return GE(l,e,h)}}if((o=(o+1)%r)==i)break}return t}function D2(t,e){let n=t.dom.ownerDocument,r,i=0,o=x2(n,e.left,e.top);o&&({node:r,offset:i}=o);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),u;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=t.dom.getBoundingClientRect();if(!Ug(e,h)||(l=GE(t.dom,e,h),!l))return null}if(Lt)for(let h=l;r&&h;h=$o(h))h.draggable&&(r=void 0);if(l=R2(l,e),r){if(Nn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&i++}let h;Hl&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(u=N2(t,r,i,e))}u==null&&(u=M2(t,l,e));let f=t.docView.nearestDesc(l,!0);return{pos:u,inside:f?f.posAtStart-f.border:-1}}function US(t){return t.top<t.bottom||t.left<t.right}function wi(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(US(r))return r}return Array.prototype.find.call(n,US)||t.getBoundingClientRect()}const j2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function JE(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),l=Hl||Nn;if(r.nodeType==3)if(l&&(j2.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let f=wi(zr(r,i,i),n);if(Nn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=wi(zr(r,i-1,i-1),-1);if(h.top==f.top){let p=wi(zr(r,i,i+1),-1);if(p.top!=f.top)return Qa(p,p.left<h.left)}}return f}else{let f=i,h=i,p=n<0?1:-1;return n<0&&!i?(h++,p=-1):n>=0&&i==r.nodeValue.length?(f--,p=1):n<0?f--:h++,Qa(wi(zr(r,f,h),p),p<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&i&&(n<0||i==Mn(r))){let f=r.childNodes[i-1];if(f.nodeType==1)return nm(f.getBoundingClientRect(),!1)}if(o==null&&i<Mn(r)){let f=r.childNodes[i];if(f.nodeType==1)return nm(f.getBoundingClientRect(),!0)}return nm(r.getBoundingClientRect(),n>=0)}if(o==null&&i&&(n<0||i==Mn(r))){let f=r.childNodes[i-1],h=f.nodeType==3?zr(f,Mn(f)-(l?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(h)return Qa(wi(h,1),!1)}if(o==null&&i<Mn(r)){let f=r.childNodes[i];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let h=f?f.nodeType==3?zr(f,0,l?0:1):f.nodeType==1?f:null:null;if(h)return Qa(wi(h,-1),!0)}return Qa(wi(r.nodeType==3?zr(r):r,-n),n>=0)}function Qa(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function nm(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function WE(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function L2(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return WE(t,e,()=>{let{node:o}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let u=t.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=JE(t,i.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=zr(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const z2=/[\u0590-\u08ac]/;function B2(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,l=i==r.parent.content.size,u=t.domSelection();return u?!z2.test(r.parent.textContent)||!u.modify?n=="left"||n=="backward"?o:l:WE(t,e,()=>{let{focusNode:f,focusOffset:h,anchorNode:p,anchorOffset:m}=t.domSelectionRange(),b=u.caretBidiLevel;u.modify("move",n,"character");let v=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:w,focusOffset:S}=t.domSelectionRange(),E=w&&!v.contains(w.nodeType==1?w:w.parentNode)||f==w&&h==S;try{u.collapse(p,m),f&&(f!=p||h!=m)&&u.extend&&u.extend(f,h)}catch{}return b!=null&&(u.caretBidiLevel=b),E}):r.pos==r.start()||r.pos==r.end()}let IS=null,PS=null,$S=!1;function U2(t,e,n){return IS==e&&PS==n?$S:(IS=e,PS=n,$S=n=="up"||n=="down"?L2(t,e,n):B2(t,e,n))}const Dn=0,HS=1,gs=2,lr=3;class ql{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Dn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Dt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),l;if(o&&(!n||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],o=r+i.size;if(r==e&&o!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let u=i.children[l];if(u.size){i=u;break}}return i}if(e<o)return i.descAt(e-r-i.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof QE){i=e-o;break}o=u}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof YE&&o.side>=0;r--);if(n<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&n&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Dt(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Dt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let l=r,u=0;;u++){let f=this.children[u],h=l+f.size;if(i==-1&&e<=h){let p=l+f.border;if(e>=p&&n<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,n,p);e=l;for(let m=u;m>0;m--){let b=this.children[m-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){i=Dt(b.dom)+1;break}e-=b.size}i==-1&&(i=0)}if(i>-1&&(h>n||u==this.children.length-1)){n=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Dt(m.dom);break}n+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let o=Math.min(e,n),l=Math.max(e,n);for(let v=0,w=0;v<this.children.length;v++){let S=this.children[v],E=w+S.size;if(o>w&&l<E)return S.setSelection(e-w-S.border,n-w-S.border,r,i);w=E}let u=this.domFromPos(e,e?-1:1),f=n==e?u:this.domFromPos(n,n?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Nn||Lt)&&e==n){let{node:v,offset:w}=u;if(v.nodeType==3){if(m=!!(w&&v.nodeValue[w-1]==`
`),m&&w==v.nodeValue.length)for(let S=v,E;S;S=S.parentNode){if(E=S.nextSibling){E.nodeName=="BR"&&(u=f={node:E.parentNode,offset:Dt(E)+1});break}let T=S.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let S=v.childNodes[w-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Nn&&p.focusNode&&p.focusNode!=f.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(i=!0)}if(!(i||m&&Lt)&&Cs(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Cs(f.node,f.offset,p.focusNode,p.focusOffset))return;let b=!1;if((h.extend||e==n)&&!(m&&Nn)){h.collapse(u.node,u.offset);try{e!=n&&h.extend(f.node,f.offset),b=!0}catch{}}if(!b){if(e>n){let w=u;u=f,f=w}let v=document.createRange();v.setEnd(f.node,f.offset),v.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],l=r+o.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let u=r+o.border,f=l-o.border;if(e>=u&&n<=f){this.dirty=e==r||n==l?gs:HS,e==u&&n==f&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=lr:o.markDirty(e-u,n-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?gs:lr}r=l}this.dirty=gs}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?gs:HS;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class YE extends ql{constructor(e,n,r,i){let o,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Dn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class I2 extends ql{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class _s extends ql{constructor(e,n,r,i,o){super(e,[],r,i),this.mark=n,this.spec=o}static create(e,n,r,i){let o=i.nodeViews[n.type.name],l=o&&o(n,i,r);return(!l||!l.dom)&&(l=Ms.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new _s(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&lr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=lr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Dn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Dn}}slice(e,n,r){let i=_s.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;n<l&&(o=Gm(o,n,l,r)),e>0&&(o=Gm(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ji extends ql{constructor(e,n,r,i,o,l,u,f,h){super(e,[],o,l),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=u}static create(e,n,r,i,o,l){let u=o.nodeViews[n.type.name],f,h=u&&u(n,o,()=>{if(!f)return l;if(f.parent)return f.parent.posBeforeChild(f)},r,i),p=h&&h.dom,m=h&&h.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Ms.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let b=p;return p=eT(p,r,n),h?f=new P2(e,n,r,i,p,m||null,b,h,o,l+1):n.isText?new Qf(e,n,r,i,p,b,o):new ji(e,n,r,i,p,m||null,b,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>G.empty)}return e}matchesNode(e,n,r){return this.dirty==Dn&&e.eq(this.node)&&Yu(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,o=e.composing?this.localCompositionInfo(e,n):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,f=new H2(this,l&&l.node,e);K2(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,e,p):h.type.side>=0&&!m&&f.syncToMarks(p==this.node.childCount?Ve.none:this.node.child(p).marks,r,e,p),f.placeWidget(h,e,i)},(h,p,m,b)=>{f.syncToMarks(h.marks,r,e,b);let v;f.findNodeMatch(h,p,m,b)||u&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(v=f.findIndexWithChild(o.node))>-1&&f.updateNodeAt(h,p,m,v,e)||f.updateNextNode(h,p,m,e,b,i)||f.addNode(h,p,m,e,i),i+=h.nodeSize}),f.syncToMarks([],r,e,0),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==gs)&&(l&&this.protectLocalComposition(e,l),XE(this.contentDOM,this.children,e),Ho&&F2(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof he)||r<n||i>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=G2(this.node.content,l,r-n,i-n);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new I2(this,o,n,i);e.input.compositionNodes.push(l),this.children=Gm(this.children,r,r+i.length,e,l)}update(e,n,r,i){return this.dirty==lr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Dn}updateOuterDeco(e){if(Yu(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ZE(this.dom,this.nodeDOM,Fm(this.outerDeco,this.node,n),Fm(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function qS(t,e,n,r,i){eT(r,e,t);let o=new ji(void 0,t,e,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Qf extends ji{constructor(e,n,r,i,o,l,u){super(e,n,r,i,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==lr||this.dirty!=Dn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Dn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Dn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),o=document.createTextNode(i.text);return new Qf(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=lr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class QE extends ql{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Dn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class P2 extends ji{constructor(e,n,r,i,o,l,u,f,h,p){super(e,n,r,i,o,l,u,h,p),this.spec=f}update(e,n,r,i){if(this.dirty==lr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,i),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function XE(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==t){for(;u!=r;)r=VS(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(u,r);if(l instanceof _s){let f=r?r.previousSibling:t.lastChild;XE(l.contentDOM,l.children,n),r=f?f.nextSibling:t.firstChild}}for(;r;)r=VS(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ul=function(t){t&&(this.nodeName=t)};ul.prototype=Object.create(null);const ys=[new ul];function Fm(t,e,n){if(t.length==0)return ys;let r=n?ys[0]:new ul,i=[r];for(let o=0;o<t.length;o++){let l=t[o].type.attrs;if(l){l.nodeName&&i.push(r=new ul(l.nodeName));for(let u in l){let f=l[u];f!=null&&(n&&i.length==1&&i.push(r=new ul(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+f:u=="style"?r.style=(r.style?r.style+";":"")+f:u!="nodeName"&&(r[u]=f))}}}return i}function ZE(t,e,n,r){if(n==ys&&r==ys)return e;let i=e;for(let o=0;o<r.length;o++){let l=r[o],u=n[o];if(o){let f;u&&u.nodeName==l.nodeName&&i!=t&&(f=i.parentNode)&&f.nodeName.toLowerCase()==l.nodeName||(f=document.createElement(l.nodeName),f.pmIsDeco=!0,f.appendChild(i),u=ys[0]),i=f}$2(i,u||ys[0],l)}return i}function $2(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.add(i[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function eT(t,e,n){return ZE(t,t,ys,Fm(e,n,t.nodeType!=1))}function Yu(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function VS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class H2{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=q2(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let o=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;o<u&&(o==l-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<l;)this.destroyRest(),this.top.dirty=Dn,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let f=-1,h=this.top.children.length;i<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let p=this.index;p<h;p++){let m=this.top.children[p];if(m.matchesMark(e[l])&&!this.isLocked(m.dom)){f=p;break}}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let p=_s.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,i){let o=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,f=Math.min(this.top.children.length,u+5);u<f;u++){let h=this.top.children[u];if(h.matchesNode(e,n,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,i,o){let l=this.top.children[i];return l.dirty==lr&&l.dom==l.contentDOM&&(l.dirty=gs),l.update(e,n,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,o,l){for(let u=this.index;u<this.top.children.length;u++){let f=this.top.children[u];if(f instanceof ji){let h=this.preMatch.matched.get(f);if(h!=null&&h!=o)return!1;let p=f.dom,m,b=this.isLocked(p)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=lr&&Yu(n,f.outerDeco));if(!b&&f.update(e,n,r,i))return this.destroyBetween(this.index,u),f.dom!=p&&(this.changed=!0),this.index++,!0;if(!b&&(m=this.recreateWrapper(f,e,n,r,i,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=gs,m.updateChildren(i,l+1),m.dirty=Dn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,o,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Yu(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let u=ji.create(this.top,n,r,i,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let f of u.children)f.parent=u}return e.destroy(),u}addNode(e,n,r,i,o){let l=ji.create(this.top,e,n,r,i,o);l.contentDOM&&l.updateChildren(i,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new YE(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof _s;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Qf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Lt||xt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new QE(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function q2(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,l=[];e:for(;i>0;){let u;for(;;)if(r){let h=n.children[r-1];if(h instanceof _s)n=h,r=h.children.length;else{u=h,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let f=u.node;if(f){if(f!=t.child(i-1))break;--i,o.set(u,i),l.push(u)}}return{index:i,matched:o,matches:l.reverse()}}function V2(t,e){return t.type.side-e.type.side}function K2(t,e,n,r){let i=e.locals(t),o=0;if(i.length==0){for(let h=0;h<t.childCount;h++){let p=t.child(h);r(p,i,e.forChild(o,p),h),o+=p.nodeSize}return}let l=0,u=[],f=null;for(let h=0;;){let p,m;for(;l<i.length&&i[l].to==o;){let E=i[l++];E.widget&&(p?(m||(m=[p])).push(E):p=E)}if(p)if(m){m.sort(V2);for(let E=0;E<m.length;E++)n(m[E],h,!!f)}else n(p,h,!!f);let b,v;if(f)v=-1,b=f,f=null;else if(h<t.childCount)v=h,b=t.child(h++);else break;for(let E=0;E<u.length;E++)u[E].to<=o&&u.splice(E--,1);for(;l<i.length&&i[l].from<=o&&i[l].to>o;)u.push(i[l++]);let w=o+b.nodeSize;if(b.isText){let E=w;l<i.length&&i[l].from<E&&(E=i[l].from);for(let T=0;T<u.length;T++)u[T].to<E&&(E=u[T].to);E<w&&(f=b.cut(E-o),b=b.cut(0,E-o),w=E,v=-1)}else for(;l<i.length&&i[l].to<w;)l++;let S=b.isInline&&!b.isLeaf?u.filter(E=>!E.inline):u.slice();r(b,S,e.forChild(o,b),v),o=w}}function F2(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function G2(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let l=t.child(i++),u=o;if(o+=l.nodeSize,!l.isText)continue;let f=l.text;for(;i<t.childCount;){let h=t.child(i++);if(o+=h.nodeSize,!h.isText)break;f+=h.text}if(o>=n){if(o>=r&&f.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?f.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=n)return u+h;if(n==r&&f.length>=r+e.length-u&&f.slice(r-u,r-u+e.length)==e)return r}}return-1}function Gm(t,e,n,r,i){let o=[];for(let l=0,u=0;l<t.length;l++){let f=t[l],h=u,p=u+=f.size;h>=n||p<=e?o.push(f):(h<e&&o.push(f.slice(0,e-h,r)),i&&(o.push(i),i=void 0),p>n&&o.push(f.slice(n-h,f.size,r)))}return o}function Ig(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),o=i&&i.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let u=r.resolve(l),f,h;if(Yf(n)){for(f=l;i&&!i.node;)i=i.parent;let m=i.node;if(i&&m.isAtom&&le.isSelectable(m)&&i.parent&&!(m.isInline&&w2(n.focusNode,n.focusOffset,i.dom))){let b=i.posBefore;h=new le(l==b?u:r.resolve(b))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,b=l;for(let v=0;v<n.rangeCount;v++){let w=n.getRangeAt(v);m=Math.min(m,t.docView.posFromDOM(w.startContainer,w.startOffset,1)),b=Math.max(b,t.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[f,l]=b==t.state.selection.anchor?[b,m]:[m,b],u=r.resolve(l)}else f=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(f<0)return null}let p=r.resolve(f);if(!h){let m=e=="pointer"||t.state.selection.head<u.pos&&!o?1:-1;h=Pg(t,p,u,m)}return h}function tT(t){return t.editable?t.hasFocus():rT(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Hr(t,e=!1){let n=t.state.selection;if(nT(t,n),!!tT(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&xt){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Cs(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)W2(t);else{let{anchor:r,head:i}=n,o,l;KS&&!(n instanceof he)&&(n.$from.parent.inlineContent||(o=FS(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=FS(t,n.to))),t.docView.setSelection(r,i,t,e),KS&&(o&&GS(o),l&&GS(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&J2(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const KS=Lt||xt&&HE<63;function FS(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Lt&&i&&i.contentEditable=="false")return rm(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return rm(i);if(o)return rm(o)}}function rm(t){return t.contentEditable="true",Lt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function GS(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function J2(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!tT(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function W2(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Dt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Zt&&Di<=11&&(n.disabled=!0,n.disabled=!1)}function nT(t,e){if(e instanceof le){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(JS(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else JS(t)}function JS(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Pg(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||he.between(e,n,r)}function WS(t){return t.editable&&!t.hasFocus()?!1:rT(t)}function rT(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Y2(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Cs(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Jm(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return o&&de.findFrom(o,e)}function xi(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function YS(t,e,n){let r=t.state.selection;if(r instanceof he)if(n.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+o.nodeSize*(e<0?-1:1));return xi(t,new he(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Jm(t.state,e);return i&&i instanceof le?xi(t,i):!1}else if(!(Rn&&n.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(l=t.docView.descAt(u))&&!l.contentDOM?le.isSelectable(o)?xi(t,new le(e<0?t.state.doc.resolve(i.pos-o.nodeSize):i)):Hl?xi(t,new he(t.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof le&&r.node.isInline)return xi(t,new he(e>0?r.$to:r.$from));{let i=Jm(t.state,e);return i?xi(t,i):!1}}}function Qu(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function fl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Co(t,e){return e<0?Q2(t):X2(t)}function Q2(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,l=!1;for(Nn&&n.nodeType==1&&r<Qu(n)&&fl(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let u=n.childNodes[r-1];if(fl(u,-1))i=n,o=--r;else if(u.nodeType==3)n=u,r=n.nodeValue.length;else break}}else{if(iT(n))break;{let u=n.previousSibling;for(;u&&fl(u,-1);)i=n.parentNode,o=Dt(u),u=u.previousSibling;if(u)n=u,r=Qu(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?Wm(t,n,r):i&&Wm(t,i,o)}function X2(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Qu(n),o,l;for(;;)if(r<i){if(n.nodeType!=1)break;let u=n.childNodes[r];if(fl(u,1))o=n,l=++r;else break}else{if(iT(n))break;{let u=n.nextSibling;for(;u&&fl(u,1);)o=u.parentNode,l=Dt(u)+1,u=u.nextSibling;if(u)n=u,r=0,i=Qu(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}o&&Wm(t,o,l)}function iT(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Z2(t,e){for(;t&&e==t.childNodes.length&&!$l(t);)e=Dt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function ej(t,e){for(;t&&!e&&!$l(t);)e=Dt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Wm(t,e,n){if(e.nodeType!=3){let o,l;(l=Z2(e,n))?(e=l,n=0):(o=ej(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Yf(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Hr(t)},50)}function QS(t,e){let n=t.state.doc.resolve(e);if(!(xt||qE)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left<i.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(o.left-i.left)>1)return o.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function XS(t,e,n){let r=t.state.selection;if(r instanceof he&&!r.empty||n.indexOf("s")>-1||Rn&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=Jm(t.state,e);if(l&&l instanceof le)return xi(t,l)}if(!i.parent.inlineContent){let l=e<0?i:o,u=r instanceof pn?de.near(l,e):de.findFrom(l,e);return u?xi(t,u):!1}return!1}function ZS(t,e){if(!(t.state.selection instanceof he))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let l=t.state.tr;return e<0?l.delete(n.pos-o.nodeSize,n.pos):l.delete(n.pos,n.pos+o.nodeSize),t.dispatch(l),!0}return!1}function ex(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function tj(t){if(!Lt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;ex(t,r,"true"),setTimeout(()=>ex(t,r,"false"),20)}return!1}function nj(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function rj(t,e){let n=e.keyCode,r=nj(e);if(n==8||Rn&&n==72&&r=="c")return ZS(t,-1)||Co(t,-1);if(n==46&&!e.shiftKey||Rn&&n==68&&r=="c")return ZS(t,1)||Co(t,1);if(n==13||n==27)return!0;if(n==37||Rn&&n==66&&r=="c"){let i=n==37?QS(t,t.state.selection.from)=="ltr"?-1:1:-1;return YS(t,i,r)||Co(t,i)}else if(n==39||Rn&&n==70&&r=="c"){let i=n==39?QS(t,t.state.selection.from)=="ltr"?1:-1:1;return YS(t,i,r)||Co(t,i)}else{if(n==38||Rn&&n==80&&r=="c")return XS(t,-1,r)||Co(t,-1);if(n==40||Rn&&n==78&&r=="c")return tj(t)||XS(t,1,r)||Co(t,1);if(r==(Rn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function $g(t,e){t.someProp("transformCopied",v=>{e=v(e,t)});let n=[],{content:r,openStart:i,openEnd:o}=e;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let v=r.firstChild;n.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let l=t.someProp("clipboardSerializer")||Ms.fromSchema(t.state.schema),u=uT(),f=u.createElement("div");f.appendChild(l.serializeFragment(r,{document:u}));let h=f.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=cT[h.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let w=u.createElement(p[v]);for(;f.firstChild;)w.appendChild(f.firstChild);f.appendChild(w),m++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${o}${m?` -${m}`:""} ${JSON.stringify(n)}`);let b=t.someProp("clipboardTextSerializer",v=>v(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:b,slice:e}}function sT(t,e,n,r,i){let o=i.parent.type.spec.code,l,u;if(!n&&!e)return null;let f=!!e&&(r||o||!n);if(f){if(t.someProp("transformPastedText",b=>{e=b(e,o||r,t)}),o)return u=new Q(G.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",b=>{u=b(u,t,!0)}),u;let m=t.someProp("clipboardTextParser",b=>b(e,i,r,t));if(m)u=m;else{let b=i.marks(),{schema:v}=t.state,w=Ms.fromSchema(v);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let E=l.appendChild(document.createElement("p"));S&&E.appendChild(w.serializeNode(v.text(S,b)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),l=aj(n),Hl&&lj(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let b=l.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;l=b}if(u||(u=(t.someProp("clipboardParser")||t.someProp("domParser")||Ni.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(f||p),context:i,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!ij.test(b.parentNode.nodeName)?{ignore:!0}:null}})),p)u=cj(tx(u,+p[1],+p[2]),p[4]);else if(u=Q.maxOpen(sj(u.content,i),!0),u.openStart||u.openEnd){let m=0,b=0;for(let v=u.content.firstChild;m<u.openStart&&!v.type.spec.isolating;m++,v=v.firstChild);for(let v=u.content.lastChild;b<u.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);u=tx(u,m,b)}return t.someProp("transformPasted",m=>{u=m(u,t,f)}),u}const ij=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function sj(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),o,l=[];if(t.forEach(u=>{if(!l)return;let f=i.findWrapping(u.type),h;if(!f)return l=null;if(h=l.length&&o.length&&aT(f,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=lT(l[l.length-1],o.length));let p=oT(u,f);l.push(p),i=i.matchType(p.type),o=f}}),l)return G.from(l)}return t}function oT(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,G.from(t));return t}function aT(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let o=aT(t,e,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(G.from(oT(n,t,i+1))))}}function lT(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,lT(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(G.empty,!0);return t.copy(n.append(r))}function Ym(t,e,n,r,i,o){let l=e<0?t.firstChild:t.lastChild,u=l.content;return t.childCount>1&&(o=0),i<r-1&&(u=Ym(u,e,n,r,i+1,o)),i>=n&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=i).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(G.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(u))}function tx(t,e,n){return e<t.openStart&&(t=new Q(Ym(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Q(Ym(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const cT={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let nx=null;function uT(){return nx||(nx=document.implementation.createHTMLDocument("title"))}let im=null;function oj(t){let e=window.trustedTypes;return e?(im||(im=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),im.createHTML(t)):t}function aj(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=uT().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&cT[r[1].toLowerCase()])&&(t=i.map(o=>"<"+o+">").join("")+t+i.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=oj(t),i)for(let o=0;o<i.length;o++)n=n.querySelector(i[o])||n;return n}function lj(t){let e=t.querySelectorAll(xt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function cj(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:o,openEnd:l}=t;for(let u=r.length-2;u>=0;u-=2){let f=n.nodes[r[u]];if(!f||f.hasRequiredAttrs())break;i=G.from(f.create(r[u+1],i)),o++,l++}return new Q(i,o,l)}const qt={},Vt={},uj={touchstart:!0,touchmove:!0};class fj{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function dj(t){for(let e in qt){let n=qt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{pj(t,r)&&!Hg(t,r)&&(t.editable||!(r.type in Vt))&&n(t,r)},uj[e]?{passive:!0}:void 0)}Lt&&t.dom.addEventListener("input",()=>null),Qm(t)}function Ri(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function hj(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Qm(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Hg(t,r))})}function Hg(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function pj(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function mj(t,e){!Hg(t,e)&&qt[e.type]&&(t.editable||!(e.type in Vt))&&qt[e.type](t,e)}Vt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!dT(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ur&&xt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ho&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,ps(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||rj(t,n)?n.preventDefault():Ri(t,"key")};Vt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Vt.keypress=(t,e)=>{let n=e;if(dT(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Rn&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof he)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,o))&&t.dispatch(o()),n.preventDefault()}};function Xf(t){return{left:t.clientX,top:t.clientY}}function gj(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function qg(t,e,n,r,i){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(t.someProp(e,u=>l>o.depth?u(t,n,o.nodeAfter,o.before(l),i,!0):u(t,n,o.node(l),o.before(l),i,!1)))return!0;return!1}function Bo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function yj(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&le.isSelectable(r)?(Bo(t,new le(n)),!0):!1}function bj(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof le&&(r=n.node);let o=t.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(le.isSelectable(u)){r&&n.$from.depth>0&&l>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?i=o.before(n.$from.depth):i=o.before(l);break}}return i!=null?(Bo(t,le.create(t.state.doc,i)),!0):!1}function vj(t,e,n,r,i){return qg(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(i?bj(t,n):yj(t,n))}function wj(t,e,n,r){return qg(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Sj(t,e,n,r){return qg(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||xj(t,n,r)}function xj(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Bo(t,he.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let o=i.depth+1;o>0;o--){let l=o>i.depth?i.nodeAfter:i.node(o),u=i.before(o);if(l.inlineContent)Bo(t,he.create(r,u+1,u+1+l.content.size));else if(le.isSelectable(l))Bo(t,le.create(r,u));else continue;return!0}}function Vg(t){return Xu(t)}const fT=Rn?"metaKey":"ctrlKey";qt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Vg(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&gj(n,t.input.lastClick)&&!n[fT]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let l=t.posAtCoords(Xf(n));l&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Ej(t,l,n,!!r)):(o=="doubleClick"?wj:Sj)(t,l.pos,l.inside,n)?n.preventDefault():Ri(t,"pointer"))};class Ej{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fT],this.allowDefault=r.shiftKey;let o,l;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),l=n.inside;else{let p=e.state.doc.resolve(n.pos);o=p.parent,l=p.depth?p.before():0}const u=i?null:r.target,f=u?e.docView.nearestDesc(u,!0):null;this.target=f&&f.nodeDOM.nodeType==1?f.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof le&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Nn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ri(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Hr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Xf(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ri(this.view,"pointer"):vj(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Lt&&this.mightDrag&&!this.mightDrag.node.isAtom||xt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Bo(this.view,de.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Ri(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ri(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}qt.touchstart=t=>{t.input.lastTouch=Date.now(),Vg(t),Ri(t,"pointer")};qt.touchmove=t=>{t.input.lastTouch=Date.now(),Ri(t,"pointer")};qt.contextmenu=t=>Vg(t);function dT(t,e){return t.composing?!0:Lt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Tj=Ur?5e3:-1;Vt.compositionstart=Vt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof he&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||xt&&qE&&kj(t)))t.markCursor=t.state.storedMarks||n.marks(),Xu(t,!0),t.markCursor=null;else if(Xu(t,!e.selection.empty),Nn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let l=o<0?i.lastChild:i.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=t.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else i=l,o=-1}}t.input.composing=!0}hT(t,Tj)};function kj(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Vt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,hT(t,20))};function hT(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Xu(t),e))}function pT(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=_j());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Cj(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=b2(e.focusNode,e.focusOffset),r=v2(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function _j(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Xu(t,e=!1){if(!(Ur&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),pT(t),e||t.docView&&t.docView.dirty){let n=Ig(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Aj(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ol=Zt&&Di<15||Ho&&E2<604;qt.copy=Vt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let o=Ol?null:n.clipboardData,l=r.content(),{dom:u,text:f}=$g(t,l);o?(n.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",f)):Aj(t,u),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Oj(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Rj(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Rl(t,r.value,null,i,e):Rl(t,r.textContent,r.innerHTML,i,e)},50)}function Rl(t,e,n,r,i){let o=sT(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",f=>f(t,i,o||Q.empty)))return!0;if(!o)return!1;let l=Oj(o),u=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(o);return t.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function mT(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Vt.paste=(t,e)=>{let n=e;if(t.composing&&!Ur)return;let r=Ol?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Rl(t,mT(r),r.getData("text/html"),i,n)?n.preventDefault():Rj(t,n)};class gT{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Mj=Rn?"altKey":"ctrlKey";function yT(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Mj]}qt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,o=i.empty?null:t.posAtCoords(Xf(n)),l;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof le?i.to-1:i.to))){if(r&&r.mightDrag)l=le.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(l=le.create(t.state.doc,m.posBefore))}}let u=(l||t.state.selection).content(),{dom:f,text:h,slice:p}=$g(t,u);(!n.dataTransfer.files.length||!xt||HE>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ol?"Text":"text/html",f.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ol||n.dataTransfer.setData("text/plain",h),t.dragging=new gT(p,yT(t,n),l)};qt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Vt.dragover=Vt.dragenter=(t,e)=>e.preventDefault();Vt.drop=(t,e)=>{try{Nj(t,e,t.dragging)}finally{t.dragging=null}};function Nj(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Xf(e));if(!r)return;let i=t.state.doc.resolve(r.pos),o=n&&n.slice;o?t.someProp("transformPasted",v=>{o=v(o,t,!1)}):o=sT(t,mT(e.dataTransfer),Ol?null:e.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&yT(t,e));if(t.someProp("handleDrop",v=>v(t,e,o||Q.empty,l))){e.preventDefault();return}if(!o)return;e.preventDefault();let u=o?wE(t.state.doc,i.pos,o):i.pos;u==null&&(u=i.pos);let f=t.state.tr;if(l){let{node:v}=n;v?v.replace(f):f.deleteSelection()}let h=f.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=f.doc;if(p?f.replaceRangeWith(h,h,o.content.firstChild):f.replaceRange(h,h,o),f.doc.eq(m))return;let b=f.doc.resolve(h);if(p&&le.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))f.setSelection(new le(b));else{let v=f.mapping.map(u);f.mapping.maps[f.mapping.maps.length-1].forEach((w,S,E,T)=>v=T),f.setSelection(Pg(t,b,f.doc.resolve(v)))}t.focus(),t.dispatch(f.setMeta("uiEvent","drop"))}qt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Hr(t)},20))};qt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};qt.beforeinput=(t,e)=>{if(xt&&Ur&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,ps(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Vt)qt[t]=Vt[t];function Ml(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Zu{constructor(e,n){this.toDOM=e,this.spec=n||Ss,this.side=this.spec.side||0}map(e,n,r,i){let{pos:o,deleted:l}=e.mapResult(n.from+i,this.side<0?-1:1);return l?null:new Ht(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Zu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ml(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Li{constructor(e,n){this.attrs=e,this.spec=n||Ss}map(e,n,r,i){let o=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new Ht(o,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Li&&Ml(this.attrs,e.attrs)&&Ml(this.spec,e.spec)}static is(e){return e.type instanceof Li}destroy(){}}class Kg{constructor(e,n){this.attrs=e,this.spec=n||Ss}map(e,n,r,i){let o=e.mapResult(n.from+i,1);if(o.deleted)return null;let l=e.mapResult(n.to+i,-1);return l.deleted||l.pos<=o.pos?null:new Ht(o.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),o;return i==n.from&&!(o=e.child(r)).isText&&i+o.nodeSize==n.to}eq(e){return this==e||e instanceof Kg&&Ml(this.attrs,e.attrs)&&Ml(this.spec,e.spec)}destroy(){}}class Ht{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Ht(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Ht(e,e,new Zu(n,r))}static inline(e,n,r,i){return new Ht(e,n,new Li(r,i))}static node(e,n,r,i){return new Ht(e,n,new Kg(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Li}get widget(){return this.type instanceof Zu}}const Mo=[],Ss={};class Ze{constructor(e,n){this.local=e.length?e:Mo,this.children=n.length?n:Mo}static create(e,n){return n.length?ef(n,e,0,Ss):Bt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=n&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+i,u.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,n-u,r,i+u,o)}}map(e,n,r){return this==Bt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ss)}mapInner(e,n,r,i,o){let l;for(let u=0;u<this.local.length;u++){let f=this.local[u].map(e,r,i);f&&f.type.valid(n,f)?(l||(l=[])).push(f):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?Dj(this.children,l||[],e,n,r,i,o):l?new Ze(l.sort(xs),Mo):Bt}add(e,n){return n.length?this==Bt?Ze.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,o=0;e.forEach((u,f)=>{let h=f+r,p;if(p=vT(n,u,h)){for(i||(i=this.children.slice());o<i.length&&i[o]<f;)o+=3;i[o]==f?i[o+2]=i[o+2].addInner(u,p,h+1):i.splice(o,0,f,f+u.nodeSize,ef(p,u,h+1,Ss)),o+=3}});let l=bT(o?wT(n):n,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new Ze(l.length?this.local.concat(l).sort(xs):this.local,i||this.children)}remove(e){return e.length==0||this==Bt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+n,f=r[o+1]+n;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<f&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=Bt?r[o+2]=h:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<i.length;u++)i[u].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(u--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ze(i,r):Bt}forChild(e,n){if(this==Bt)return this;if(n.isLeaf)return Ze.empty;let r,i;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+n.content.size;for(let u=0;u<this.local.length;u++){let f=this.local[u];if(f.from<l&&f.to>o&&f.type instanceof Li){let h=Math.max(o,f.from)-o,p=Math.min(l,f.to)-o;h<p&&(i||(i=[])).push(f.copy(h,p))}}if(i){let u=new Ze(i.sort(xs),Mo);return r?new Ci([u,r]):u}return r||Bt}eq(e){if(this==e)return!0;if(!(e instanceof Ze)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Fg(this.localsInner(e))}localsInner(e){if(this==Bt)return Mo;if(e.inlineContent||!this.local.some(Li.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Li||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ze.empty=new Ze([],[]);Ze.removeOverlap=Fg;const Bt=Ze.empty;class Ci{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ss));return Ci.from(r)}forChild(e,n){if(n.isLeaf)return Ze.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,n);o!=Bt&&(o instanceof Ci?r=r.concat(o.members):r.push(o))}return Ci.from(r)}eq(e){if(!(e instanceof Ci)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let l=0;l<o.length;l++)n.push(o[l])}}return n?Fg(r?n:n.sort(xs)):Mo}static from(e){switch(e.length){case 0:return Bt;case 1:return e[0];default:return new Ci(e.every(n=>n instanceof Ze)?e:e.reduce((n,r)=>n.concat(r instanceof Ze?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Dj(t,e,n,r,i,o,l){let u=t.slice();for(let h=0,p=o;h<n.maps.length;h++){let m=0;n.maps[h].forEach((b,v,w,S)=>{let E=S-w-(v-b);for(let T=0;T<u.length;T+=3){let C=u[T+1];if(C<0||b>C+p-m)continue;let _=u[T]+p-m;v>=_?u[T+1]=b<=_?-2:-1:b>=p&&E&&(u[T]+=E,u[T+1]+=E)}m+=E}),p=n.maps[h].map(p,-1)}let f=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){f=!0,u[h+1]=-1;continue}let p=n.map(t[h]+o),m=p-i;if(m<0||m>=r.content.size){f=!0;continue}let b=n.map(t[h+1]+o,-1),v=b-i,{index:w,offset:S}=r.content.findIndex(m),E=r.maybeChild(w);if(E&&S==m&&S+E.nodeSize==v){let T=u[h+2].mapInner(n,E,p+1,t[h]+o+1,l);T!=Bt?(u[h]=m,u[h+1]=v,u[h+2]=T):(u[h+1]=-2,f=!0)}else f=!0}if(f){let h=jj(u,t,e,n,i,o,l),p=ef(h,r,0,l);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,b=0;m<p.children.length;m+=3){let v=p.children[m];for(;b<u.length&&u[b]<v;)b+=3;u.splice(b,0,p.children[m],p.children[m+1],p.children[m+2])}}return new Ze(e.sort(xs),u)}function bT(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Ht(i.from+e,i.to+e,i.type))}return n}function jj(t,e,n,r,i,o,l){function u(f,h){for(let p=0;p<f.local.length;p++){let m=f.local[p].map(r,i,h);m?n.push(m):l.onRemove&&l.onRemove(f.local[p].spec)}for(let p=0;p<f.children.length;p+=3)u(f.children[p+2],f.children[p]+h+1)}for(let f=0;f<t.length;f+=3)t[f+1]==-1&&u(t[f+2],e[f]+o+1);return n}function vT(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o=0,l;o<t.length;o++)(l=t[o])&&l.from>n&&l.to<r&&((i||(i=[])).push(l),t[o]=null);return i}function wT(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function ef(t,e,n,r){let i=[],o=!1;e.forEach((u,f)=>{let h=vT(t,u,f+n);if(h){o=!0;let p=ef(h,u,n+f+1,r);p!=Bt&&i.push(f,f+u.nodeSize,p)}});let l=bT(o?wT(t):t,-n).sort(xs);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||i.length?new Ze(l,i):Bt}function xs(t,e){return t.from-e.from||t.to-e.to}function Fg(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),rx(e,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),rx(e,i,r.copy(o.from,r.to)));break}}}return e}function rx(t,e,n){for(;e<t.length&&xs(n,t[e])>0;)e++;t.splice(e,0,n)}function sm(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Bt&&e.push(r)}),t.cursorWrapper&&e.push(Ze.create(t.state.doc,[t.cursorWrapper.deco])),Ci.from(e)}const Lj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},zj=Zt&&Di<=11;class Bj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Uj{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Bj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Zt&&Di<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Lt&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),zj&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Lj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(WS(this.view)){if(this.suppressingSelectionUpdates)return Hr(this.view);if(Zt&&Di<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Cs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=$o(o))n.add(o);for(let o=e.anchorNode;o;o=$o(o))if(n.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&WS(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,f=[];if(e.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],f);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(Nn&&f.length){let p=f.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,b]=p;m.parentNode&&m.parentNode.parentNode==b.parentNode?b.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let b of p){let v=b.parentNode;v&&v.nodeName=="LI"&&(!m||$j(e,m)!=v)&&b.remove()}}}else if((xt||Lt)&&f.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of f)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}let h=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Yf(r)&&(h=Ig(e))&&h.eq(de.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Hr(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,l),Ij(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,Hj(e,f)),this.handleDOMChange(o,l,u,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Hr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,o=e.nextSibling;if(Zt&&Di<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:b}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(i=m),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(o=b)}let l=i&&i.parentNode==e.target?Dt(i)+1:0,u=r.localPosFromDOM(e.target,l,-1),f=o&&o.parentNode==e.target?Dt(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,f,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ix=new WeakMap,sx=!1;function Ij(t){if(!ix.has(t)&&(ix.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Nn,sx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),sx=!0}}function ox(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return Cs(l.node,l.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function Pj(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ox(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ox(t,n):null}function $j(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Hj(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let o of e)if(((n=o.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=o.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let u=l;for(;;){let f=u.firstChild;if(!f||f.nodeType!=1||f.contentEditable=="false"||/^(BR|IMG)$/.test(f.nodeName))break;u=f}u.insertBefore(o,u.firstChild),r==o&&t.domSelection().collapse(o,i)}else o.parentNode.removeChild(o)}}function qj(t,e,n){let{node:r,fromOffset:i,toOffset:o,from:l,to:u}=t.docView.parseRange(e,n),f=t.domSelectionRange(),h,p=f.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],Yf(f)||h.push({node:f.focusNode,offset:f.focusOffset})),xt&&t.input.lastKeyCode===8)for(let E=o;E>i;E--){let T=r.childNodes[E-1],C=T.pmViewDesc;if(T.nodeName=="BR"&&!C){o=E;break}if(!C||C.size)break}let m=t.state.doc,b=t.someProp("domParser")||Ni.fromSchema(t.state.schema),v=m.resolve(l),w=null,S=b.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:Vj,context:v});if(h&&h[0].pos!=null){let E=h[0].pos,T=h[1]&&h[1].pos;T==null&&(T=E),w={anchor:E+l,head:T+l}}return{doc:S,sel:w,from:l,to:u}}function Vj(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Lt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Lt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Kj=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Fj(t,e,n,r,i){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let U=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,Y=Ig(t,U);if(Y&&!t.state.selection.eq(Y)){if(xt&&Ur&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",re=>re(t,ps(13,"Enter"))))return;let X=t.state.tr.setSelection(Y);U=="pointer"?X.setMeta("pointer",!0):U=="key"&&X.scrollIntoView(),o&&X.setMeta("composition",o),t.dispatch(X)}return}let l=t.state.doc.resolve(e),u=l.sharedDepth(n);e=l.before(u+1),n=t.state.doc.resolve(n).after(u+1);let f=t.state.selection,h=qj(t,e,n),p=t.state.doc,m=p.slice(h.from,h.to),b,v;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(b=t.state.selection.to,v="end"):(b=t.state.selection.from,v="start"),t.input.lastKeyCode=null;let w=Wj(m.content,h.doc.content,h.from,b,v);if(w&&t.input.domChangeCount++,(Ho&&t.input.lastIOSEnter>Date.now()-225||Ur)&&i.some(U=>U.nodeType==1&&!Kj.test(U.nodeName))&&(!w||w.endA>=w.endB)&&t.someProp("handleKeyDown",U=>U(t,ps(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!w)if(r&&f instanceof he&&!f.empty&&f.$head.sameParent(f.$anchor)&&!t.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let U=ax(t,t.state.doc,h.sel);if(U&&!U.eq(t.state.selection)){let Y=t.state.tr.setSelection(U);o&&Y.setMeta("composition",o),t.dispatch(Y)}}return}t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof he&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),Zt&&Di<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)==" "&&(w.start--,w.endA--,w.endB--);let S=h.doc.resolveNoCache(w.start-h.from),E=h.doc.resolveNoCache(w.endB-h.from),T=p.resolve(w.start),C=S.sameParent(E)&&S.parent.inlineContent&&T.end()>=w.endA;if((Ho&&t.input.lastIOSEnter>Date.now()-225&&(!C||i.some(U=>U.nodeName=="DIV"||U.nodeName=="P"))||!C&&S.pos<h.doc.content.size&&(!S.sameParent(E)||!S.parent.inlineContent)&&S.pos<E.pos&&!/\S/.test(h.doc.textBetween(S.pos,E.pos,"","")))&&t.someProp("handleKeyDown",U=>U(t,ps(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>w.start&&Jj(p,w.start,w.endA,S,E)&&t.someProp("handleKeyDown",U=>U(t,ps(8,"Backspace")))){Ur&&xt&&t.domObserver.suppressSelectionUpdates();return}xt&&w.endB==w.start&&(t.input.lastChromeDelete=Date.now()),Ur&&!C&&S.start()!=E.start()&&E.parentOffset==0&&S.depth==E.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,E=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{t.someProp("handleKeyDown",function(U){return U(t,ps(13,"Enter"))})},20));let _=w.start,j=w.endA,L=U=>{let Y=U||t.state.tr.replace(_,j,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let X=ax(t,Y.doc,h.sel);X&&!(xt&&t.composing&&X.empty&&(w.start!=w.endB||t.input.lastChromeDelete<Date.now()-100)&&(X.head==_||X.head==Y.mapping.map(j)-1)||Zt&&X.empty&&X.head==_)&&Y.setSelection(X)}return o&&Y.setMeta("composition",o),Y.scrollIntoView()},$;if(C)if(S.pos==E.pos){Zt&&Di<=11&&S.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Hr(t),20));let U=L(t.state.tr.delete(_,j)),Y=p.resolve(w.start).marksAcross(p.resolve(w.endA));Y&&U.ensureMarks(Y),t.dispatch(U)}else if(w.endA==w.endB&&($=Gj(S.parent.content.cut(S.parentOffset,E.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start())))){let U=L(t.state.tr);$.type=="add"?U.addMark(_,j,$.mark):U.removeMark(_,j,$.mark),t.dispatch(U)}else if(S.parent.child(S.index()).isText&&S.index()==E.index()-(E.textOffset?0:1)){let U=S.parent.textBetween(S.parentOffset,E.parentOffset),Y=()=>L(t.state.tr.insertText(U,_,j));t.someProp("handleTextInput",X=>X(t,_,j,U,Y))||t.dispatch(Y())}else t.dispatch(L());else t.dispatch(L())}function ax(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Pg(t,e.resolve(n.anchor),e.resolve(n.head))}function Gj(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,o=r,l,u,f;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(i.length==1&&o.length==0)u=i[0],l="add",f=p=>p.mark(u.addToSet(p.marks));else if(i.length==0&&o.length==1)u=o[0],l="remove",f=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(f(e.child(p)));if(G.from(h).eq(t))return{mark:u,type:l}}function Jj(t,e,n,r,i){if(n-e<=i.pos-r.pos||om(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&n==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=t.resolve(om(o,!0,!0));return!l.parent.isTextblock||l.pos>n||om(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function om(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function Wj(t,e,n,r,i){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:l,b:u}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let f=Math.max(0,o-Math.min(l,u));r-=l+f-o}if(l<o&&t.size<e.size){let f=r<=o&&r>=l?o-r:0;o-=f,o&&o<e.size&&lx(e.textBetween(o-1,o+1))&&(o+=f?1:-1),u=o+(u-l),l=o}else if(u<o){let f=r<=o&&r>=u?o-r:0;o-=f,o&&o<t.size&&lx(t.textBetween(o-1,o+1))&&(o+=f?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function lx(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class ST{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new fj,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(hx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=fx(this),ux(this),this.nodeViews=dx(this),this.docView=qS(this.state.doc,cx(this),sm(this),this.dom,this),this.domObserver=new Uj(this,(r,i,o,l)=>Fj(this,r,i,o,l)),this.domObserver.start(),dj(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Qm(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(hx),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(pT(this),l=!0),this.state=e;let u=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let v=dx(this);Qj(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&Qm(this),this.editable=fx(this),ux(this);let f=sm(this),h=cx(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,f);(m||!e.selection.eq(i.selection))&&(l=!0);let b=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&C2(this);if(l){this.domObserver.stop();let v=m&&(Zt||xt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Yj(i.selection,e.selection);if(m){let w=xt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Cj(this)),(o||!this.docView.update(e.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=qS(e.doc,h,f,this.dom,this)),w&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Y2(this))?Hr(this,v):(nT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():b&&_2(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof le){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&BS(this,n.getBoundingClientRect(),e)}else BS(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new gT(e.slice,e.move,i<0?void 0:le.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(i=n?n(u):u))return i}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(i=n?n(u):u))return i}}hasFocus(){if(Zt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&A2(this.dom),Hr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return D2(this,e)}coordsAtPos(e,n=1){return JE(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return U2(this,n||this.state,e)}pasteHTML(e,n){return Rl(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Rl(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return $g(this,e)}destroy(){this.docView&&(hj(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],sm(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,g2())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return mj(this,e)}domSelectionRange(){let e=this.domSelection();return e?Lt&&this.root.nodeType===11&&S2(this.dom.ownerDocument)==this.dom&&Pj(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}ST.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function cx(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Ht.node(0,t.state.doc.content.size,e)]}function ux(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Ht.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function fx(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Yj(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function dx(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Qj(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function hx(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var zi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},tf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Xj=typeof navigator<"u"&&/Mac/.test(navigator.platform),Zj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var jt=0;jt<10;jt++)zi[48+jt]=zi[96+jt]=String(jt);for(var jt=1;jt<=24;jt++)zi[jt+111]="F"+jt;for(var jt=65;jt<=90;jt++)zi[jt]=String.fromCharCode(jt+32),tf[jt]=String.fromCharCode(jt);for(var am in zi)tf.hasOwnProperty(am)||(tf[am]=zi[am]);function eL(t){var e=Xj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Zj&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?tf:zi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const tL=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),nL=typeof navigator<"u"&&/Win/.test(navigator.platform);function rL(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,o,l;for(let u=0;u<e.length-1;u++){let f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))tL?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function iL(t){let e=Object.create(null);for(let n in t)e[rL(n)]=t[n];return e}function lm(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function sL(t){return new We({props:{handleKeyDown:Gg(t)}})}function Gg(t){let e=iL(t);return function(n,r){let i=eL(r),o,l=e[lm(i,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let u=e[lm(i,r,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(nL&&r.ctrlKey&&r.altKey)&&(o=zi[r.keyCode])&&o!=i){let u=e[lm(o,r)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var oL=Object.defineProperty,Jg=(t,e)=>{for(var n in e)oL(t,n,{get:e[n],enumerable:!0})};function Zf(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}var ed=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...h)=>{const p=u(...h)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l=[],u=!!t,f=t||i.tr,h=()=>(!u&&e&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(f),l.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,b])=>[m,(...w)=>{const S=this.buildProps(f,e),E=b(...w)(S);return l.push(E),p}])),run:h};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([u,f])=>[u,(...h)=>f(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,l={tr:t,editor:r,view:o,state:Zf({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([u,f])=>[u,(...h)=>f(...h)(l)]))}};return l}},xT={};Jg(xT,{blur:()=>aL,clearContent:()=>lL,clearNodes:()=>cL,command:()=>uL,createParagraphNear:()=>fL,cut:()=>dL,deleteCurrentNode:()=>hL,deleteNode:()=>pL,deleteRange:()=>mL,deleteSelection:()=>gL,enter:()=>yL,exitCode:()=>bL,extendMarkRange:()=>vL,first:()=>wL,focus:()=>xL,forEach:()=>EL,insertContent:()=>TL,insertContentAt:()=>_L,joinBackward:()=>RL,joinDown:()=>OL,joinForward:()=>ML,joinItemBackward:()=>NL,joinItemForward:()=>DL,joinTextblockBackward:()=>jL,joinTextblockForward:()=>LL,joinUp:()=>AL,keyboardShortcut:()=>BL,lift:()=>UL,liftEmptyBlock:()=>IL,liftListItem:()=>PL,newlineInCode:()=>$L,resetAttributes:()=>HL,scrollIntoView:()=>qL,selectAll:()=>VL,selectNodeBackward:()=>KL,selectNodeForward:()=>FL,selectParentNode:()=>GL,selectTextblockEnd:()=>JL,selectTextblockStart:()=>WL,setContent:()=>YL,setMark:()=>mz,setMeta:()=>gz,setNode:()=>yz,setNodeSelection:()=>bz,setTextDirection:()=>vz,setTextSelection:()=>wz,sinkListItem:()=>Sz,splitBlock:()=>xz,splitListItem:()=>Ez,toggleList:()=>Tz,toggleMark:()=>kz,toggleNode:()=>Cz,toggleWrap:()=>_z,undoInputRule:()=>Az,unsetAllMarks:()=>Oz,unsetMark:()=>Rz,unsetTextDirection:()=>Mz,updateAttributes:()=>Nz,wrapIn:()=>Dz,wrapInList:()=>jz});var aL=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),lL=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),cL=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:o,$to:l})=>{t.doc.nodesBetween(o.pos,l.pos,(u,f)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(f)),b=h.resolve(p.map(f+u.nodeSize)),v=m.blockRange(b);if(!v)return;const w=Xo(v);if(u.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(v.start,S)}(w||w===0)&&e.lift(v,w)})}),!0},uL=t=>e=>t(e),fL=()=>({state:t,dispatch:e})=>BE(t,e),dL=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,o=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new he(r.doc.resolve(Math.max(l-1,0)))),!0},hL=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(e){const u=i.before(o),f=i.after(o);t.delete(u,f).scrollIntoView()}return!0}return!1};function mt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var pL=t=>({tr:e,state:n,dispatch:r})=>{const i=mt(t,n.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===i){if(r){const f=o.before(l),h=o.after(l);e.delete(f,h).scrollIntoView()}return!0}return!1},mL=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},gL=()=>({state:t,dispatch:e})=>Dg(t,e),yL=()=>({commands:t})=>t.keyboardShortcut("Enter"),bL=()=>({state:t,dispatch:e})=>t2(t,e);function Wg(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function nf(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Wg(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function ET(t,e,n={}){return t.find(r=>r.type===e&&nf(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function px(t,e,n={}){return!!ET(t,e,n)}function Yg(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!ET([...i.node.marks],e,n)))return;let l=i.index,u=t.start()+i.offset,f=l+1,h=u+i.node.nodeSize;for(;l>0&&px([...t.parent.child(l-1).marks],e,n);)l-=1,u-=t.parent.child(l).nodeSize;for(;f<t.parent.childCount&&px([...t.parent.child(f).marks],e,n);)h+=t.parent.child(f).nodeSize,f+=1;return{from:u,to:h}}function Kr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var vL=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const o=Kr(t,r.schema),{doc:l,selection:u}=n,{$from:f,from:h,to:p}=u;if(i){const m=Yg(f,o,e);if(m&&m.from<=h&&m.to>=p){const b=he.create(l,m.from,m.to);n.setSelection(b)}}return!0},wL=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Qg(t){return t instanceof he}function Ir(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function TT(t,e=null){if(!e)return null;const n=de.atStart(t),r=de.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,o=r.to;return e==="all"?he.create(t,Ir(0,i,o),Ir(t.content.size,i,o)):he.create(t,Ir(e,i,o),Ir(e,i,o))}function mx(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function rf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function SL(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var xL=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(rf()||mx())&&r.dom.focus(),SL()&&!rf()&&!mx()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(o&&t===null&&!Qg(n.state.selection))return l(),!0;const u=TT(i.doc,t)||n.state.selection,f=n.state.selection.eq(u);return o&&(f||i.setSelection(u),f&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},EL=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),TL=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),kT=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&kT(r)}return t};function wu(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return kT(n)}function Nl(t,e,n){if(t instanceof Mi||t instanceof G)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return G.fromArray(t.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Nl("",e,n)}if(i){if(n.errorOnInvalidContent){let l=!1,u="";const f=new cE({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(n.slice?Ni.fromSchema(f).parseSlice(wu(t),n.parseOptions):Ni.fromSchema(f).parse(wu(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=Ni.fromSchema(e);return n.slice?o.parseSlice(wu(t),n.parseOptions).content:o.parse(wu(t),n.parseOptions)}return Nl("",e,n)}function kL(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof St||i instanceof Et))return;const o=t.mapping.maps[r];let l=0;o.forEach((u,f,h,p)=>{l===0&&(l=p)}),t.setSelection(de.near(t.doc.resolve(l),n))}var CL=t=>!("type"in t),_L=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{var l;if(i){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const f=E=>{o.emit("contentError",{editor:o,error:E,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Nl(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(E){f(E)}try{u=Nl(e,o.schema,{parseOptions:h,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:o.options.enableContentCheck})}catch(E){return f(E),!1}let{from:p,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},b=!0,v=!0;if((CL(u)?u:[u]).forEach(E=>{E.check(),b=b?E.isText&&E.marks.length===0:!1,v=v?E.isBlock:!1}),p===m&&v){const{parent:E}=r.doc.resolve(p);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(p-=1,m+=1)}let S;if(b){if(Array.isArray(e))S=e.map(E=>E.text||"").join("");else if(e instanceof G){let E="";e.forEach(T=>{T.text&&(E+=T.text)}),S=E}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else{S=u;const E=r.doc.resolve(p),T=E.node(),C=E.parentOffset===0,_=T.isText||T.isTextblock,j=T.content.size>0;C&&_&&j&&(p=Math.max(0,p-1)),r.replaceWith(p,m,S)}n.updateSelection&&kL(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},AL=()=>({state:t,dispatch:e})=>XD(t,e),OL=()=>({state:t,dispatch:e})=>ZD(t,e),RL=()=>({state:t,dispatch:e})=>RE(t,e),ML=()=>({state:t,dispatch:e})=>jE(t,e),NL=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Gf(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},DL=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Gf(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},jL=()=>({state:t,dispatch:e})=>YD(t,e),LL=()=>({state:t,dispatch:e})=>QD(t,e);function CT(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function zL(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,o,l;for(let u=0;u<e.length-1;u+=1){const f=e[u];if(/^(cmd|meta|m)$/i.test(f))l=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))rf()||CT()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var BL=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=zL(t).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{n.someProp("handleKeyDown",h=>h(n,u))});return f?.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function Bi(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,l=e?mt(e,t.schema):null,u=[];t.doc.nodesBetween(r,i,(m,b)=>{if(m.isText)return;const v=Math.max(r,b),w=Math.min(i,b+m.nodeSize);u.push({node:m,from:v,to:w})});const f=i-r,h=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>nf(m.node.attrs,n,{strict:!1}));return o?!!h.length:h.reduce((m,b)=>m+b.to-b.from,0)>=f}var UL=(t,e={})=>({state:n,dispatch:r})=>{const i=mt(t,n.schema);return Bi(n,i,e)?e2(n,r):!1},IL=()=>({state:t,dispatch:e})=>UE(t,e),PL=t=>({state:e,dispatch:n})=>{const r=mt(t,e.schema);return d2(r)(e,n)},$L=()=>({state:t,dispatch:e})=>zE(t,e);function td(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function gx(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var HL=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const u=td(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(o=mt(t,r.schema)),u==="mark"&&(l=Kr(t,r.schema));let f=!1;return n.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,m)=>{o&&o===p.type&&(f=!0,i&&n.setNodeMarkup(m,void 0,gx(p.attrs,e))),l&&p.marks.length&&p.marks.forEach(b=>{l===b.type&&(f=!0,i&&n.addMark(m,m+p.nodeSize,l.create(gx(b.attrs,e))))})})}),f},qL=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),VL=()=>({tr:t,dispatch:e})=>{if(e){const n=new pn(t.doc);t.setSelection(n)}return!0},KL=()=>({state:t,dispatch:e})=>NE(t,e),FL=()=>({state:t,dispatch:e})=>LE(t,e),GL=()=>({state:t,dispatch:e})=>i2(t,e),JL=()=>({state:t,dispatch:e})=>a2(t,e),WL=()=>({state:t,dispatch:e})=>o2(t,e);function Xm(t,e,n={},r={}){return Nl(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var YL=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:l,commands:u})=>{const{doc:f}=o;if(r.preserveWhitespace!=="full"){const h=Xm(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return l&&o.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!n),!0}return l&&o.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:f.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function _T(t,e){const n=Kr(e,t.schema),{from:r,to:i,empty:o}=t.selection,l=[];o?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,f=>{l.push(...f.marks)});const u=l.find(f=>f.type.name===n.name);return u?{...u.attrs}:{}}function AT(t,e){const n=new kE(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function QL(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function XL(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,o)=>{n(i)&&r.push({node:i,pos:o})}),r}function ZL(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function nd(t){return e=>ZL(e.$from,t)}function oe(t,e,n){return t.config[e]===void 0&&t.parent?oe(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?oe(t.parent,e,n):null}):t.config[e]}function Xg(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=oe(e,"addExtensions",n);return r?[e,...Xg(r())]:e}).flat(10)}function Zg(t,e){const n=Ms.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function OT(t){return typeof t=="function"}function Ue(t,e=void 0,...n){return OT(t)?e?t.bind(e)(...n):t(...n):t}function ez(t={}){return Object.keys(t).length===0&&t.constructor===Object}function qo(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function RT(t){const e=[],{nodeExtensions:n,markExtensions:r}=qo(t),i=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:i},f=oe(l,"addGlobalAttributes",u);if(!f)return;f().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([b,v])=>{e.push({type:m,name:b,attribute:{...o,...v}})})})})}),i.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},f=oe(l,"addAttributes",u);if(!f)return;const h=f();Object.entries(h).forEach(([p,m])=>{const b={...o,...m};typeof b?.default=="function"&&(b.default=b.default()),b?.isRequired&&b?.default===void 0&&delete b.default,e.push({type:l.name,name:p,attribute:b})})}),e}function gt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const u=o?String(o).split(" "):[],f=r[i]?r[i].split(" "):[],h=u.filter(p=>!f.includes(p));r[i]=[...f,...h].join(" ")}else if(i==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],f=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;f.forEach(p=>{const[m,b]=p.split(":").map(v=>v.trim());h.set(m,b)}),u.forEach(p=>{const[m,b]=p.split(":").map(v=>v.trim());h.set(m,b)}),r[i]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[i]=o}),r},{})}function Dl(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>gt(n,r),{})}function tz(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function yx(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(n):tz(n.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...i}}}}function bx(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&ez(n)?!1:n!=null))}function vx(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function nz(t,e){var n;const r=RT(t),{nodeExtensions:i,markExtensions:o}=qo(t),l=(n=i.find(h=>oe(h,"topNode")))==null?void 0:n.name,u=Object.fromEntries(i.map(h=>{const p=r.filter(T=>T.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},b=t.reduce((T,C)=>{const _=oe(C,"extendNodeSchema",m);return{...T,..._?_(h):{}}},{}),v=bx({...b,content:Ue(oe(h,"content",m)),marks:Ue(oe(h,"marks",m)),group:Ue(oe(h,"group",m)),inline:Ue(oe(h,"inline",m)),atom:Ue(oe(h,"atom",m)),selectable:Ue(oe(h,"selectable",m)),draggable:Ue(oe(h,"draggable",m)),code:Ue(oe(h,"code",m)),whitespace:Ue(oe(h,"whitespace",m)),linebreakReplacement:Ue(oe(h,"linebreakReplacement",m)),defining:Ue(oe(h,"defining",m)),isolating:Ue(oe(h,"isolating",m)),attrs:Object.fromEntries(p.map(vx))}),w=Ue(oe(h,"parseHTML",m));w&&(v.parseDOM=w.map(T=>yx(T,p)));const S=oe(h,"renderHTML",m);S&&(v.toDOM=T=>S({node:T,HTMLAttributes:Dl(T,p)}));const E=oe(h,"renderText",m);return E&&(v.toText=E),[h.name,v]})),f=Object.fromEntries(o.map(h=>{const p=r.filter(E=>E.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},b=t.reduce((E,T)=>{const C=oe(T,"extendMarkSchema",m);return{...E,...C?C(h):{}}},{}),v=bx({...b,inclusive:Ue(oe(h,"inclusive",m)),excludes:Ue(oe(h,"excludes",m)),group:Ue(oe(h,"group",m)),spanning:Ue(oe(h,"spanning",m)),code:Ue(oe(h,"code",m)),attrs:Object.fromEntries(p.map(vx))}),w=Ue(oe(h,"parseHTML",m));w&&(v.parseDOM=w.map(E=>yx(E,p)));const S=oe(h,"renderHTML",m);return S&&(v.toDOM=E=>S({mark:E,HTMLAttributes:Dl(E,p)})),[h.name,v]}));return new cE({topNode:l,nodes:u,marks:f})}function rz(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function sf(t){return t.sort((n,r)=>{const i=oe(n,"priority")||100,o=oe(r,"priority")||100;return i>o?-1:i<o?1:0})}function MT(t){const e=sf(Xg(t)),n=rz(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function NT(t,e,n){const{from:r,to:i}=e,{blockSeparator:o=`

`,textSerializers:l={}}=n||{};let u="";return t.nodesBetween(r,i,(f,h,p,m)=>{var b;f.isBlock&&h>r&&(u+=o);const v=l?.[f.type.name];if(v)return p&&(u+=v({node:f,pos:h,parent:p,index:m,range:e})),!1;f.isText&&(u+=(b=f?.text)==null?void 0:b.slice(Math.max(r,h)-h,i-h))}),u}function DT(t,e){const n={from:0,to:t.content.size};return NT(t,n,e)}function ey(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function iz(t,e){const n=mt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function jT(t,e){const n=td(typeof e=="string"?e:e.name,t.schema);return n==="node"?iz(t,e):n==="mark"?_T(t,e):{}}function sz(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function oz(t){const e=sz(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,l)=>l!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function LT(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,o)=>{const l=[];if(i.ranges.length)i.forEach((u,f)=>{l.push({from:u,to:f})});else{const{from:u,to:f}=n[o];if(u===void 0||f===void 0)return;l.push({from:u,to:f})}l.forEach(({from:u,to:f})=>{const h=e.slice(o).map(u,-1),p=e.slice(o).map(f),m=e.invert().map(h,-1),b=e.invert().map(p);r.push({oldRange:{from:m,to:b},newRange:{from:h,to:p}})})}),oz(r)}function ty(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const o=n.resolve(t),l=Yg(o,i.type);l&&r.push({mark:i,...l})}):n.nodesBetween(t,e,(i,o)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(l=>({from:o,to:o+i.nodeSize,mark:l})))}),r}var az=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let o=r,l=null;for(;o>0&&l===null;){const u=i.node(o);u?.type.name===e?l=u:o-=1}return[l,o]};function Su(t,e){return e.nodes[t]||e.marks[t]||null}function Bu(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(o=>o.type===e&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var lz=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,o,l,u)=>{var f,h;const p=((h=(f=i.type.spec).toText)==null?void 0:h.call(f,{node:i,pos:o,parent:l,index:u}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-o))}),n};function Zm(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Kr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>nf(m.attrs,n,{strict:!1}));let l=0;const u=[];if(i.forEach(({$from:m,$to:b})=>{const v=m.pos,w=b.pos;t.doc.nodesBetween(v,w,(S,E)=>{if(!S.isText&&!S.marks.length)return;const T=Math.max(v,E),C=Math.min(w,E+S.nodeSize),_=C-T;l+=_,u.push(...S.marks.map(j=>({mark:j,from:T,to:C})))})}),l===0)return!1;const f=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>nf(m.mark.attrs,n,{strict:!1})).reduce((m,b)=>m+b.to-b.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,b)=>m+b.to-b.from,0);return(f>0?f+h:f)>=l}function cz(t,e,n={}){if(!e)return Bi(t,null,n)||Zm(t,null,n);const r=td(e,t.schema);return r==="node"?Bi(t,e,n):r==="mark"?Zm(t,e,n):!1}var uz=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const o=nd(u=>u.type.name===e)(t.selection);if(!o)return!1;const l=t.doc.resolve(o.pos+1);return i.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},fz=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function wx(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Sx(t,e){const{nodeExtensions:n}=qo(e),r=n.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Ue(oe(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function rd(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(o=>{i!==!1&&(rd(o,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function zT(t){return t instanceof le}var BT=class UT{constructor(e){this.position=e}static fromJSON(e){return new UT(e.position)}toJSON(){return{position:this.position}}};function dz(t,e){const n=e.mapping.mapResult(t.position);return{position:new BT(n.pos),mapResult:n}}function hz(t){return new BT(t)}function IT(t,e,n){const i=t.state.doc.content.size,o=Ir(e,0,i),l=Ir(n,0,i),u=t.coordsAtPos(o),f=t.coordsAtPos(l,-1),h=Math.min(u.top,f.top),p=Math.max(u.bottom,f.bottom),m=Math.min(u.left,f.left),b=Math.max(u.right,f.right),v=b-m,w=p-h,T={top:h,bottom:p,left:m,right:b,width:v,height:w,x:m,y:h};return{...T,toJSON:()=>T}}function pz(t,e,n){var r;const{selection:i}=e;let o=null;if(Qg(i)&&(o=i.$cursor),o){const u=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(h=>h.type.excludes(n)))}const{ranges:l}=i;return l.some(({$from:u,$to:f})=>{let h=u.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(u.pos,f.pos,(p,m,b)=>{if(h)return!1;if(p.isInline){const v=!b||b.type.allowsMarkType(n),w=!!n.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(n));h=v&&w}return!h}),h})}var mz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:l,ranges:u}=o,f=Kr(t,r.schema);if(i)if(l){const h=_T(r,f);n.addStoredMark(f.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(b,v)=>{const w=Math.max(v,p),S=Math.min(v+b.nodeSize,m);b.marks.find(T=>T.type===f)?b.marks.forEach(T=>{f===T.type&&n.addMark(w,S,f.create({...T.attrs,...e}))}):n.addMark(w,S,f.create(e))})});return pz(r,n,f)},gz=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),yz=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=mt(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:u})=>jS(o,{...l,...e})(n)?!0:u.clearNodes()).command(({state:u})=>jS(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},bz=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Ir(t,0,r.content.size),o=le.create(r,i);e.setSelection(o)}return!0},vz=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=r;let l,u;return typeof e=="number"?(l=e,u=e):e&&"from"in e&&"to"in e?(l=e.from,u=e.to):(l=o.from,u=o.to),i&&n.doc.nodesBetween(l,u,(f,h)=>{f.isText||n.setNodeMarkup(h,void 0,{...f.attrs,dir:t})}),!0},wz=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:o}=typeof t=="number"?{from:t,to:t}:t,l=he.atStart(r).from,u=he.atEnd(r).to,f=Ir(i,l,u),h=Ir(o,l,u),p=he.create(r,f,h);e.setSelection(p)}return!0},Sz=t=>({state:e,dispatch:n})=>{const r=mt(t,e.schema);return m2(r)(e,n)};function xx(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var xz=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:o,doc:l}=e,{$from:u,$to:f}=o,h=i.extensionManager.attributes,p=Bu(h,u.node().type.name,u.node().attrs);if(o instanceof le&&o.node.isBlock)return!u.parentOffset||!$r(l,u.pos)?!1:(r&&(t&&xx(n,i.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=f.parentOffset===f.parent.content.size,b=u.depth===0?void 0:QL(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=m&&b?[{type:b,attrs:p}]:void 0,w=$r(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!w&&$r(e.doc,e.mapping.map(u.pos),1,b?[{type:b}]:void 0)&&(w=!0,v=b?[{type:b,attrs:p}]:void 0),r){if(w&&(o instanceof he&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),b&&!m&&!u.parentOffset&&u.parent.type!==b)){const S=e.mapping.map(u.before()),E=e.doc.resolve(S);u.node(-1).canReplaceWith(E.index(),E.index()+1,b)&&e.setNodeMarkup(e.mapping.map(u.before()),b)}t&&xx(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return w},Ez=(t,e={})=>({tr:n,state:r,dispatch:i,editor:o})=>{var l;const u=mt(t,r.schema),{$from:f,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||f.depth<2||!f.sameParent(h))return!1;const m=f.node(-1);if(m.type!==u)return!1;const b=o.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==u||f.index(-2)!==f.node(-2).childCount-1)return!1;if(i){let T=G.empty;const C=f.index(-1)?1:f.index(-2)?2:3;for(let Y=f.depth-C;Y>=f.depth-3;Y-=1)T=G.from(f.node(Y).copy(T));const _=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,j={...Bu(b,f.node().type.name,f.node().attrs),...e},L=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(j))||void 0;T=T.append(G.from(u.createAndFill(null,L)||void 0));const $=f.before(f.depth-(C-1));n.replace($,f.after(-_),new Q(T,4-C,0));let U=-1;n.doc.nodesBetween($,n.doc.content.size,(Y,X)=>{if(U>-1)return!1;Y.isTextblock&&Y.content.size===0&&(U=X+1)}),U>-1&&n.setSelection(he.near(n.doc.resolve(U))),n.scrollIntoView()}return!0}const v=h.pos===f.end()?m.contentMatchAt(0).defaultType:null,w={...Bu(b,m.type.name,m.attrs),...e},S={...Bu(b,f.node().type.name,f.node().attrs),...e};n.delete(f.pos,h.pos);const E=v?[{type:u,attrs:w},{type:v,attrs:S}]:[{type:u,attrs:w}];if(!$r(n.doc,f.pos,2))return!1;if(i){const{selection:T,storedMarks:C}=r,{splittableMarks:_}=o.extensionManager,j=C||T.$to.parentOffset&&T.$from.marks();if(n.split(f.pos,2,E).scrollIntoView(),!j||!i)return!0;const L=j.filter($=>_.includes($.type.name));n.ensureMarks(L)}return!0},cm=(t,e)=>{const n=nd(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Ii(t.doc,n.pos)&&t.join(n.pos),!0},um=(t,e)=>{const n=nd(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Ii(t.doc,r)&&t.join(r),!0},Tz=(t,e,n,r={})=>({editor:i,tr:o,state:l,dispatch:u,chain:f,commands:h,can:p})=>{const{extensions:m,splittableMarks:b}=i.extensionManager,v=mt(t,l.schema),w=mt(e,l.schema),{selection:S,storedMarks:E}=l,{$from:T,$to:C}=S,_=T.blockRange(C),j=E||S.$to.parentOffset&&S.$from.marks();if(!_)return!1;const L=nd($=>Sx($.type.name,m))(S);if(_.depth>=1&&L&&_.depth-L.depth<=1){if(L.node.type===v)return h.liftListItem(w);if(Sx(L.node.type.name,m)&&v.validContent(L.node.content)&&u)return f().command(()=>(o.setNodeMarkup(L.pos,v),!0)).command(()=>cm(o,v)).command(()=>um(o,v)).run()}return!n||!j||!u?f().command(()=>p().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>cm(o,v)).command(()=>um(o,v)).run():f().command(()=>{const $=p().wrapInList(v,r),U=j.filter(Y=>b.includes(Y.type.name));return o.ensureMarks(U),$?!0:h.clearNodes()}).wrapInList(v,r).command(()=>cm(o,v)).command(()=>um(o,v)).run()},kz=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,l=Kr(t,r.schema);return Zm(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:o}):i.setMark(l,e)},Cz=(t,e,n={})=>({state:r,commands:i})=>{const o=mt(t,r.schema),l=mt(e,r.schema),u=Bi(r,o,n);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),u?i.setNode(l,f):i.setNode(o,{...f,...n})},_z=(t,e={})=>({state:n,commands:r})=>{const i=mt(t,n.schema);return Bi(n,i,e)?r.lift(i):r.wrapIn(i,e)},Az=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const l=t.tr,u=o.transform;for(let f=u.steps.length-1;f>=0;f-=1)l.step(u.steps[f].invert(u.docs[f]));if(o.text){const f=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,t.schema.text(o.text,f))}else l.delete(o.from,o.to)}return!0}}return!1},Oz=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},Rz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=n,f=Kr(t,r.schema),{$from:h,empty:p,ranges:m}=u;if(!i)return!0;if(p&&l){let{from:b,to:v}=u;const w=(o=h.marks().find(E=>E.type===f))==null?void 0:o.attrs,S=Yg(h,f,w);S&&(b=S.from,v=S.to),n.removeMark(b,v,f)}else m.forEach(b=>{n.removeMark(b.$from.pos,b.$to.pos,f)});return n.removeStoredMark(f),!0},Mz=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let o,l;return typeof t=="number"?(o=t,l=t):t&&"from"in t&&"to"in t?(o=t.from,l=t.to):(o=i.from,l=i.to),r&&e.doc.nodesBetween(o,l,(u,f)=>{if(u.isText)return;const h={...u.attrs};delete h.dir,e.setNodeMarkup(f,void 0,h)}),!0},Nz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,l=null;const u=td(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(o=mt(t,r.schema)),u==="mark"&&(l=Kr(t,r.schema));let f=!1;return n.selection.ranges.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;let b,v,w,S;n.selection.empty?r.doc.nodesBetween(p,m,(E,T)=>{o&&o===E.type&&(f=!0,w=Math.max(T,p),S=Math.min(T+E.nodeSize,m),b=T,v=E)}):r.doc.nodesBetween(p,m,(E,T)=>{T<p&&o&&o===E.type&&(f=!0,w=Math.max(T,p),S=Math.min(T+E.nodeSize,m),b=T,v=E),T>=p&&T<=m&&(o&&o===E.type&&(f=!0,i&&n.setNodeMarkup(T,void 0,{...E.attrs,...e})),l&&E.marks.length&&E.marks.forEach(C=>{if(l===C.type&&(f=!0,i)){const _=Math.max(T,p),j=Math.min(T+E.nodeSize,m);n.addMark(_,j,l.create({...C.attrs,...e}))}}))}),v&&(b!==void 0&&i&&n.setNodeMarkup(b,void 0,{...v.attrs,...e}),l&&v.marks.length&&v.marks.forEach(E=>{l===E.type&&i&&n.addMark(w,S,l.create({...E.attrs,...e}))}))}),f},Dz=(t,e={})=>({state:n,dispatch:r})=>{const i=mt(t,n.schema);return l2(i,e)(n,r)},jz=(t,e={})=>({state:n,dispatch:r})=>{const i=mt(t,n.schema);return c2(i,e)(n,r)},Lz=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},id=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},zz=(t,e)=>{if(Wg(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function xu(t){var e;const{editor:n,from:r,to:i,text:o,rules:l,plugin:u}=t,{view:f}=n;if(f.composing)return!1;const h=f.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(b=>b.type.spec.code))return!1;let p=!1;const m=lz(h)+o;return l.forEach(b=>{if(p)return;const v=zz(m,b.find);if(!v)return;const w=f.state.tr,S=Zf({state:f.state,transaction:w}),E={from:r-(v[0].length-o.length),to:i},{commands:T,chain:C,can:_}=new ed({editor:n,state:S});b.handler({state:S,range:E,match:v,commands:T,chain:C,can:_})===null||!w.steps.length||(b.undoable&&w.setMeta(u,{transform:w,from:r,to:i,text:o}),f.dispatch(w),p=!0)}),p}function Bz(t){const{editor:e,rules:n}=t,r=new We({state:{init(){return null},apply(i,o,l){const u=i.getMeta(r);if(u)return u;const f=i.getMeta("applyInputRules");return f&&setTimeout(()=>{let{text:p}=f;typeof p=="string"?p=p:p=Zg(G.from(p),l.schema);const{from:m}=f,b=m+p.length;xu({editor:e,from:m,to:b,text:p,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,l,u){return xu({editor:e,from:o,to:l,text:u,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&xu({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?xu({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Uz(t){return Object.prototype.toString.call(t).slice(8,-1)}function Eu(t){return Uz(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function PT(t,e){const n={...t};return Eu(t)&&Eu(e)&&Object.keys(e).forEach(r=>{Eu(e[r])&&Eu(t[r])?n[r]=PT(t[r],e[r]):n[r]=e[r]}),n}var ny=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ue(oe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ue(oe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>PT(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Ns=class $T extends ny{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new $T(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(h=>h?.type.name===n.name))return!1;const f=l.find(h=>h?.type.name===n.name);return f&&r.removeStoredMark(f),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Iz(t){return typeof t=="number"}var Pz=class{constructor(t){this.find=t.find,this.handler=t.handler}},$z=(t,e,n)=>{if(Wg(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=t,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function Hz(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:l,dropEvent:u}=t,{commands:f,chain:h,can:p}=new ed({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,i,(v,w)=>{var S,E,T,C,_;if((E=(S=v.type)==null?void 0:S.spec)!=null&&E.code||!(v.isText||v.isTextblock||v.isInline))return;const j=(_=(C=(T=v.content)==null?void 0:T.size)!=null?C:v.nodeSize)!=null?_:0,L=Math.max(r,w),$=Math.min(i,w+j);if(L>=$)return;const U=v.isText?v.text||"":v.textBetween(L-w,$-w,void 0,"");$z(U,o.find,l).forEach(X=>{if(X.index===void 0)return;const re=L+X.index+1,Ce=re+X[0].length,we={from:n.tr.mapping.map(re),to:n.tr.mapping.map(Ce)},je=o.handler({state:n,range:we,match:X,commands:f,chain:h,can:p,pasteEvent:l,dropEvent:u});m.push(je)})}),m.every(v=>v!==null)}var Tu=null,qz=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function Vz(t){const{editor:e,rules:n}=t;let r=null,i=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const f=({state:p,from:m,to:b,rule:v,pasteEvt:w})=>{const S=p.tr,E=Zf({state:p,transaction:S});if(!(!Hz({editor:e,state:E,from:Math.max(m-1,0),to:b.b-1,rule:v,pasteEvent:w,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(p=>new We({view(m){const b=w=>{var S;r=(S=m.dom.parentElement)!=null&&S.contains(w.target)?m.dom.parentElement:null,r&&(Tu=e)},v=()=>{Tu&&(Tu=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(m,b)=>{if(o=r===m.dom.parentElement,u=b,!o){const v=Tu;v?.isEditable&&setTimeout(()=>{const w=v.state.selection;w&&v.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,b)=>{var v;const w=(v=b.clipboardData)==null?void 0:v.getData("text/html");return l=b,i=!!w?.includes("data-pm-slice"),!1}}},appendTransaction:(m,b,v)=>{const w=m[0],S=w.getMeta("uiEvent")==="paste"&&!i,E=w.getMeta("uiEvent")==="drop"&&!o,T=w.getMeta("applyPasteRules"),C=!!T;if(!S&&!E&&!C)return;if(C){let{text:L}=T;typeof L=="string"?L=L:L=Zg(G.from(L),v.schema);const{from:$}=T,U=$+L.length,Y=qz(L);return f({rule:p,state:v,from:$,to:{b:U},pasteEvt:Y})}const _=b.doc.content.findDiffStart(v.doc.content),j=b.doc.content.findDiffEnd(v.doc.content);if(!(!Iz(_)||!j||_===j.b))return f({rule:p,state:v,from:_,to:j,pasteEvt:l})}}))}var sd=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=MT(t),this.schema=nz(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Su(e.name,this.schema)},r=oe(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return sf([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Su(r.name,this.schema)},o=[],l=oe(r,"addKeyboardShortcuts",i);let u={};if(r.type==="mark"&&oe(r,"exitable",i)&&(u.ArrowRight=()=>Ns.handleExit({editor:t,mark:r})),l){const b=Object.fromEntries(Object.entries(l()).map(([v,w])=>[v,()=>w({editor:t})]));u={...u,...b}}const f=sL(u);o.push(f);const h=oe(r,"addInputRules",i);if(wx(r,t.options.enableInputRules)&&h){const b=h();if(b&&b.length){const v=Bz({editor:t,rules:b}),w=Array.isArray(v)?v:[v];o.push(...w)}}const p=oe(r,"addPasteRules",i);if(wx(r,t.options.enablePasteRules)&&p){const b=p();if(b&&b.length){const v=Vz({editor:t,rules:b});o.push(...v)}}const m=oe(r,"addProseMirrorPlugins",i);if(m){const b=m();o.push(...b)}return o})}get attributes(){return RT(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=qo(this.extensions);return Object.fromEntries(e.filter(n=>!!oe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(f=>f.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:mt(n.name,this.schema)},o=oe(n,"addNodeView",i);if(!o)return[];const l=o();if(!l)return[];const u=(f,h,p,m,b)=>{const v=Dl(f,r);return l({node:f,view:h,getPos:p,decorations:m,innerDecorations:b,editor:t,extension:n,HTMLAttributes:v})};return[n.name,u]}))}dispatchTransaction(t){const{editor:e}=this;return sf([...this.extensions].reverse()).reduceRight((r,i)=>{const o={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Su(i.name,this.schema)},l=oe(i,"dispatchTransaction",o);return l?u=>{l.call(o,{transaction:u,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=qo(this.extensions);return Object.fromEntries(e.filter(n=>!!oe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Kr(n.name,this.schema)},o=oe(n,"addMarkView",i);if(!o)return[];const l=(u,f,h)=>{const p=Dl(u,r);return o()({mark:u,view:f,inline:h,editor:t,extension:n,HTMLAttributes:p,updateAttributes:m=>{i3(u,t,m)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Su(e.name,this.schema)};e.type==="mark"&&((n=Ue(oe(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=oe(e,"onBeforeCreate",r),o=oe(e,"onCreate",r),l=oe(e,"onUpdate",r),u=oe(e,"onSelectionUpdate",r),f=oe(e,"onTransaction",r),h=oe(e,"onFocus",r),p=oe(e,"onBlur",r),m=oe(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),f&&this.editor.on("transaction",f),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};sd.resolve=MT;sd.sort=sf;sd.flatten=Xg;var Kz={};Jg(Kz,{ClipboardTextSerializer:()=>qT,Commands:()=>VT,Delete:()=>KT,Drop:()=>FT,Editable:()=>GT,FocusEvents:()=>WT,Keymap:()=>YT,Paste:()=>QT,Tabindex:()=>XT,TextDirection:()=>ZT,focusEventsPluginKey:()=>JT});var et=class HT extends ny{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new HT(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},qT=et.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new We({key:new Xe("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,l=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),f=ey(n);return NT(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),VT=et.create({name:"commands",addCommands(){return{...xT}}}),KT=et.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const o=()=>{var l,u,f,h;if((h=(f=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:f.call(u,t))!=null?h:t.getMeta("y-sync$"))return;const p=AT(t.before,[t,...e]);LT(p).forEach(v=>{p.mapping.mapResult(v.oldRange.from).deletedAfter&&p.mapping.mapResult(v.oldRange.to).deletedBefore&&p.before.nodesBetween(v.oldRange.from,v.oldRange.to,(w,S)=>{const E=S+w.nodeSize-2,T=v.oldRange.from<=S&&E<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:w,from:S,to:E,newFrom:p.mapping.map(S),newTo:p.mapping.map(E),deletedRange:v.oldRange,newRange:v.newRange,partial:!T,editor:this.editor,transaction:t,combinedTransform:p})})});const b=p.mapping;p.steps.forEach((v,w)=>{var S,E;if(v instanceof Hn){const T=b.slice(w).map(v.from,-1),C=b.slice(w).map(v.to),_=b.invert().map(T,-1),j=b.invert().map(C),L=(S=p.doc.nodeAt(T-1))==null?void 0:S.marks.some(U=>U.eq(v.mark)),$=(E=p.doc.nodeAt(C))==null?void 0:E.marks.some(U=>U.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:_,to:j},newRange:{from:T,to:C},partial:!!($||L),editor:this.editor,transaction:t,combinedTransform:p})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),FT=et.create({name:"drop",addProseMirrorPlugins(){return[new We({key:new Xe("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),GT=et.create({name:"editable",addProseMirrorPlugins(){return[new We({key:new Xe("editable"),props:{editable:()=>this.editor.options.editable}})]}}),JT=new Xe("focusEvents"),WT=et.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new We({key:JT,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),YT=et.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:f,doc:h}=u,{empty:p,$anchor:m}=f,{pos:b,parent:v}=m,w=m.parent.isTextblock&&b>0?u.doc.resolve(b-1):m,S=w.parent.type.spec.isolating,E=m.pos-m.parentOffset,T=S&&w.parent.childCount===1?E===m.pos:de.atStart(h).from===b;return!p||!v.type.isTextblock||v.textContent.length||!T||T&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return rf()||CT()?o:i},addProseMirrorPlugins(){return[new We({key:new Xe("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(S=>S.getMeta("composition")))return;const r=t.some(S=>S.docChanged)&&!e.doc.eq(n.doc),i=t.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:l,to:u}=e.selection,f=de.atStart(e.doc).from,h=de.atEnd(e.doc).to;if(o||!(l===f&&u===h)||!rd(n.doc))return;const b=n.tr,v=Zf({state:n,transaction:b}),{commands:w}=new ed({editor:this.editor,state:v});if(w.clearNodes(),!!b.steps.length)return b}})]}}),QT=et.create({name:"paste",addProseMirrorPlugins(){return[new We({key:new Xe("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),XT=et.create({name:"tabindex",addProseMirrorPlugins(){return[new We({key:new Xe("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),ZT=et.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=qo(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new We({key:new Xe("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),Fz=class il{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new il(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new il(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new il(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,l=n.isInline,u=this.pos+r+(o?0:1);if(u<0||u>this.resolvedPos.doc.nodeSize-2)return;const f=this.resolvedPos.doc.resolve(u);if(!i&&!l&&f.depth<=this.depth)return;const h=new il(f,this.editor,i,i||l?n:null);i&&(h.actualDepth=this.depth+1),e.push(h)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const o=i.node.attrs,l=Object.keys(n);for(let u=0;u<l.length;u+=1){const f=l[u];if(o[f]!==n[f])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(n);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&o.every(f=>n[f]===l.node.attrs[f])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},Gz=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Jz(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var Wz=class extends Lz{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:dz,createMappablePosition:hz},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=TT(e,this.options.autofocus);this.editorState=jo.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Jz(Gz,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=OT(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;n=n.filter(l=>!l.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[GT,qT.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),VT,WT,YT,XT,FT,QT,KT,ZT.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new sd(r,this)}createCommandManager(){this.commandManager=new ed({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Xm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Xm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new ST(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=l?.getMeta("focus"),f=l?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),f&&this.emit("blur",{editor:this,event:f.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(h=>h.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return jT(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return cz(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Zg(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return DT(this.state.doc,{blockSeparator:e,textSerializers:{...ey(this.schema),...n}})}get isEmpty(){return rd(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Fz(e,this)}get $doc(){return this.$pos(0)}};function Vo(t){return new id({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ue(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const f=u.search(/\S/),h=n.from+u.indexOf(l),p=h+l.length;if(ty(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(S=>S===t.type&&S!==v.mark.type)).filter(v=>v.to>h).length)return null;p<n.to&&o.delete(p,n.to),h>n.from&&o.delete(n.from+f,h);const b=n.from+f+l.length;o.addMark(n.from+f,b,t.type.create(i||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function Yz(t){return new id({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ue(t.getAttributes,void 0,r)||{},{tr:o}=e,l=n.from;let u=n.to;const f=t.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,u,f)}else if(r[0]){const h=t.type.isInline?l:l-1;o.insert(h,t.type.create(i)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()},undoable:t.undoable})}function eg(t){return new id({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=Ue(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Ko(t){return new id({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=Ue(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),f=l.doc.resolve(n.from).blockRange(),h=f&&Mg(f,t.type,o);if(!h)return null;if(l.wrap(f,h),t.keepMarks&&t.editor){const{selection:m,storedMarks:b}=e,{splittableMarks:v}=t.editor.extensionManager,w=b||m.$to.parentOffset&&m.$from.marks();if(w){const S=w.filter(E=>v.includes(E.type.name));l.ensureMarks(S)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(m,o).run()}const p=l.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&Ii(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&l.join(n.from-1)},undoable:t.undoable})}function Qz(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof le){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let i=r.depth;for(;i>=0;){const o=r.index(i);if(r.node(i).contentMatchAt(o).matchType(e))return!0;i-=1}return!1}var Xz={};Jg(Xz,{createAtomBlockMarkdownSpec:()=>Zz,createBlockMarkdownSpec:()=>e3,createInlineMarkdownSpec:()=>r3,parseAttributes:()=>ry,parseIndentedBlocks:()=>tg,renderNestedMarkdownContent:()=>sy,serializeAttributes:()=>iy});function ry(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,h=>(n.push(h),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const h=i.map(p=>p.trim().slice(1));e.class=h.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,h,p])=>{var m;const b=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),v=n[b];v&&(e[h]=v.slice(1,-1))});const f=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return f&&f.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function iy(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function Zz(t){const{nodeName:e,name:n,parseAttributes:r=ry,serializeAttributes:i=iy,defaultAttributes:o={},requiredAttributes:l=[],allowedAttributes:u}=t,f=n||e,h=p=>{if(!u)return p;const m={};return u.forEach(b=>{b in p&&(m[b]=p[b])}),m};return{parseMarkdown:(p,m)=>{const b={...o,...p.attributes};return m.createNode(e,b,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const b=new RegExp(`^:::${f}(?:\\s|$)`,"m"),v=(m=p.match(b))==null?void 0:m.index;return v!==void 0?v:-1},tokenize(p,m,b){const v=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),w=p.match(v);if(!w)return;const S=w[1]||"",E=r(S);if(!l.find(C=>!(C in E)))return{type:e,raw:w[0],attributes:E}}},renderMarkdown:p=>{const m=h(p.attrs||{}),b=i(m),v=b?` {${b}}`:"";return`:::${f}${v} :::`}}}function e3(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=ry,serializeAttributes:o=iy,defaultAttributes:l={},content:u="block",allowedAttributes:f}=t,h=n||e,p=m=>{if(!f)return m;const b={};return f.forEach(v=>{v in m&&(b[v]=m[v])}),b};return{parseMarkdown:(m,b)=>{let v;if(r){const S=r(m);v=typeof S=="string"?[{type:"text",text:S}]:S}else u==="block"?v=b.parseChildren(m.tokens||[]):v=b.parseInline(m.tokens||[]);const w={...l,...m.attributes};return b.createNode(e,w,v)},markdownTokenizer:{name:e,level:"block",start(m){var b;const v=new RegExp(`^:::${h}`,"m"),w=(b=m.match(v))==null?void 0:b.index;return w!==void 0?w:-1},tokenize(m,b,v){var w;const S=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=m.match(S);if(!E)return;const[T,C=""]=E,_=i(C);let j=1;const L=T.length;let $="";const U=/^:::([\w-]*)(\s.*)?/gm,Y=m.slice(L);for(U.lastIndex=0;;){const X=U.exec(Y);if(X===null)break;const re=X.index,Ce=X[1];if(!((w=X[2])!=null&&w.endsWith(":::"))){if(Ce)j+=1;else if(j-=1,j===0){const we=Y.slice(0,re);$=we.trim();const je=m.slice(0,L+re+X[0].length);let ye=[];if($)if(u==="block")for(ye=v.blockTokens(we),ye.forEach(Se=>{Se.text&&(!Se.tokens||Se.tokens.length===0)&&(Se.tokens=v.inlineTokens(Se.text))});ye.length>0;){const Se=ye[ye.length-1];if(Se.type==="paragraph"&&(!Se.text||Se.text.trim()===""))ye.pop();else break}else ye=v.inlineTokens($);return{type:e,raw:je,attributes:_,content:$,tokens:ye}}}}}},renderMarkdown:(m,b)=>{const v=p(m.attrs||{}),w=o(v),S=w?` {${w}}`:"",E=b.renderChildren(m.content||[],`

`);return`:::${h}${S}

${E}

:::`}}}function t3(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,o,l]=r;e[i]=o||l,r=n.exec(t)}return e}function n3(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function r3(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=t3,serializeAttributes:o=n3,defaultAttributes:l={},selfClosing:u=!1,allowedAttributes:f}=t,h=n||e,p=b=>{if(!f)return b;const v={};return f.forEach(w=>{const S=typeof w=="string"?w:w.name,E=typeof w=="string"?void 0:w.skipIfDefault;if(S in b){const T=b[S];if(E!==void 0&&T===E)return;v[S]=T}}),v},m=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(b,v)=>{const w={...l,...b.attributes};if(u)return v.createNode(e,w);const S=r?r(b):b.content||"";return S?v.createNode(e,w,[v.createTextNode(S)]):v.createNode(e,w,[])},markdownTokenizer:{name:e,level:"inline",start(b){const v=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),w=b.match(v),S=w?.index;return S!==void 0?S:-1},tokenize(b,v,w){const S=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),E=b.match(S);if(!E)return;let T="",C="";if(u){const[,j]=E;C=j}else{const[,j,L]=E;C=j,T=L||""}const _=i(C.trim());return{type:e,raw:E[0],content:T.trim(),attributes:_}}},renderMarkdown:b=>{let v="";r?v=r(b):b.content&&b.content.length>0&&(v=b.content.filter(T=>T.type==="text").map(T=>T.text).join(""));const w=p(b.attrs||{}),S=o(w),E=S?` ${S}`:"";return u?`[${h}${E}]`:`[${h}${E}]${v}[/${h}]`}}}function tg(t,e,n){var r,i,o,l;const u=t.split(`
`),f=[];let h="",p=0;const m=e.baseIndentSize||2;for(;p<u.length;){const b=u[p],v=b.match(e.itemPattern);if(!v){if(f.length>0)break;if(b.trim()===""){p+=1,h=`${h}${b}
`;continue}else return}const w=e.extractItemData(v),{indentLevel:S,mainContent:E}=w;h=`${h}${b}
`;const T=[E];for(p+=1;p<u.length;){const L=u[p];if(L.trim()===""){const U=u.slice(p+1).findIndex(re=>re.trim()!=="");if(U===-1)break;if((((i=(r=u[p+1+U].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>S){T.push(L),h=`${h}${L}
`,p+=1;continue}else break}if((((l=(o=L.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:l.length)||0)>S)T.push(L),h=`${h}${L}
`,p+=1;else break}let C;const _=T.slice(1);if(_.length>0){const L=_.map($=>$.slice(S+m)).join(`
`);L.trim()&&(e.customNestedParser?C=e.customNestedParser(L):C=n.blockTokens(L))}const j=e.createToken(w,C);f.push(j)}if(f.length!==0)return{items:f,raw:h}}function sy(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[o,...l]=t.content,u=e.renderChildren([o]),f=[`${i}${u}`];return l&&l.length>0&&l.forEach(h=>{const p=e.renderChildren([h]);if(p){const m=p.split(`
`).map(b=>b?e.indent(b):"").join(`
`);f.push(m)}}),f.join(`
`)}function i3(t,e,n={}){const{state:r}=e,{doc:i,tr:o}=r,l=t;i.descendants((u,f)=>{const h=o.mapping.map(f),p=o.mapping.map(f)+u.nodeSize;let m=null;if(u.marks.forEach(v=>{if(v!==l)return!1;m=v}),!m)return;let b=!1;if(Object.keys(n).forEach(v=>{n[v]!==m.attrs[v]&&(b=!0)}),b){const v=t.type.create({...t.attrs,...n});o.removeMark(h,p,t.type),o.addMark(h,p,v)}}),o.docChanged&&e.view.dispatch(o)}var yn=class ek extends ny{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new ek(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function As(t){return new Pz({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=Ue(t.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],f=r[0];let h=n.to;if(u){const p=f.search(/\S/),m=n.from+f.indexOf(u),b=m+u.length;if(ty(n.from,n.to,e.doc).filter(w=>w.mark.type.excluded.find(E=>E===t.type&&E!==w.mark.type)).filter(w=>w.to>m).length)return null;b<n.to&&l.delete(b,n.to),m>n.from&&l.delete(n.from+p,m),h=n.from+p+u.length,l.addMark(n.from+p,h,t.type.create(o||{})),l.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:s3,getOwnPropertySymbols:o3}=Object,{hasOwnProperty:a3}=Object.prototype;function fm(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function ku(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,l=o.get(n),u=o.get(r);if(l&&u)return l===r&&u===n;o.set(n,r),o.set(r,n);const f=t(n,r,i);return o.delete(n),o.delete(r),f}}function l3(t){return t?.[Symbol.toStringTag]}function Ex(t){return s3(t).concat(o3(t))}const c3=Object.hasOwn||((t,e)=>a3.call(t,e));function Ds(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const u3="__v",f3="__o",d3="_owner",{getOwnPropertyDescriptor:Tx,keys:kx}=Object;function h3(t,e){return t.byteLength===e.byteLength&&of(new Uint8Array(t),new Uint8Array(e))}function p3(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function m3(t,e){return t.byteLength===e.byteLength&&of(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function g3(t,e){return Ds(t.getTime(),e.getTime())}function y3(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function b3(t,e){return t===e}function Cx(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let l,u,f=0;for(;(l=o.next())&&!l.done;){const h=e.entries();let p=!1,m=0;for(;(u=h.next())&&!u.done;){if(i[m]){m++;continue}const b=l.value,v=u.value;if(n.equals(b[0],v[0],f,m,t,e,n)&&n.equals(b[1],v[1],b[0],v[0],t,e,n)){p=i[m]=!0;break}m++}if(!p)return!1;f++}return!0}const v3=Ds;function w3(t,e,n){const r=kx(t);let i=r.length;if(kx(e).length!==i)return!1;for(;i-- >0;)if(!tk(t,e,n,r[i]))return!1;return!0}function Xa(t,e,n){const r=Ex(t);let i=r.length;if(Ex(e).length!==i)return!1;let o,l,u;for(;i-- >0;)if(o=r[i],!tk(t,e,n,o)||(l=Tx(t,o),u=Tx(e,o),(l||u)&&(!l||!u||l.configurable!==u.configurable||l.enumerable!==u.enumerable||l.writable!==u.writable)))return!1;return!0}function S3(t,e){return Ds(t.valueOf(),e.valueOf())}function x3(t,e){return t.source===e.source&&t.flags===e.flags}function _x(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let l,u;for(;(l=o.next())&&!l.done;){const f=e.values();let h=!1,p=0;for(;(u=f.next())&&!u.done;){if(!i[p]&&n.equals(l.value,u.value,l.value,u.value,t,e,n)){h=i[p]=!0;break}p++}if(!h)return!1}return!0}function of(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function E3(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function tk(t,e,n,r){return(r===d3||r===f3||r===u3)&&(t.$$typeof||e.$$typeof)?!0:c3(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const T3="[object ArrayBuffer]",k3="[object Arguments]",C3="[object Boolean]",_3="[object DataView]",A3="[object Date]",O3="[object Error]",R3="[object Map]",M3="[object Number]",N3="[object Object]",D3="[object RegExp]",j3="[object Set]",L3="[object String]",z3={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},B3="[object URL]",U3=Object.prototype.toString;function I3({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:l,areNumbersEqual:u,areObjectsEqual:f,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:b,areUrlsEqual:v,unknownTagComparators:w}){return function(E,T,C){if(E===T)return!0;if(E==null||T==null)return!1;const _=typeof E;if(_!==typeof T)return!1;if(_!=="object")return _==="number"?u(E,T,C):_==="function"?o(E,T,C):!1;const j=E.constructor;if(j!==T.constructor)return!1;if(j===Object)return f(E,T,C);if(Array.isArray(E))return e(E,T,C);if(j===Date)return r(E,T,C);if(j===RegExp)return p(E,T,C);if(j===Map)return l(E,T,C);if(j===Set)return m(E,T,C);const L=U3.call(E);if(L===A3)return r(E,T,C);if(L===D3)return p(E,T,C);if(L===R3)return l(E,T,C);if(L===j3)return m(E,T,C);if(L===N3)return typeof E.then!="function"&&typeof T.then!="function"&&f(E,T,C);if(L===B3)return v(E,T,C);if(L===O3)return i(E,T,C);if(L===k3)return f(E,T,C);if(z3[L])return b(E,T,C);if(L===T3)return t(E,T,C);if(L===_3)return n(E,T,C);if(L===C3||L===M3||L===L3)return h(E,T,C);if(w){let $=w[L];if(!$){const U=l3(E);U&&($=w[U])}if($)return $(E,T,C)}return!1}}function P3({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:h3,areArraysEqual:n?Xa:p3,areDataViewsEqual:m3,areDatesEqual:g3,areErrorsEqual:y3,areFunctionsEqual:b3,areMapsEqual:n?fm(Cx,Xa):Cx,areNumbersEqual:v3,areObjectsEqual:n?Xa:w3,arePrimitiveWrappersEqual:S3,areRegExpsEqual:x3,areSetsEqual:n?fm(_x,Xa):_x,areTypedArraysEqual:n?fm(of,Xa):of,areUrlsEqual:E3,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=ku(r.areArraysEqual),o=ku(r.areMapsEqual),l=ku(r.areObjectsEqual),u=ku(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:u})}return r}function $3(t){return function(e,n,r,i,o,l,u){return t(e,n,u)}}function H3({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(u,f){const{cache:h=t?new WeakMap:void 0,meta:p}=n();return e(u,f,{cache:h,equals:r,meta:p,strict:i})};if(t)return function(u,f){return e(u,f,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(u,f){return e(u,f,o)}}const q3=$i();$i({strict:!0});$i({circular:!0});$i({circular:!0,strict:!0});$i({createInternalComparator:()=>Ds});$i({strict:!0,createInternalComparator:()=>Ds});$i({circular:!0,createInternalComparator:()=>Ds});$i({circular:!0,createInternalComparator:()=>Ds,strict:!0});function $i(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=P3(t),l=I3(o),u=n?n(l):$3(l);return H3({circular:e,comparator:l,createState:r,equals:u,strict:i})}var dm={exports:{}},hm={};var Ax;function V3(){if(Ax)return hm;Ax=1;var t=Bl(),e=F1();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,u=t.useMemo,f=t.useDebugValue;return hm.useSyncExternalStoreWithSelector=function(h,p,m,b,v){var w=o(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=u(function(){function T($){if(!C){if(C=!0,_=$,$=b($),v!==void 0&&S.hasValue){var U=S.value;if(v(U,$))return j=U}return j=$}if(U=j,r(_,$))return U;var Y=b($);return v!==void 0&&v(U,Y)?(_=$,U):(_=$,j=Y)}var C=!1,_,j,L=m===void 0?null:m;return[function(){return T(p())},L===null?void 0:function(){return T(L())}]},[p,m,b,v]);var E=i(h,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=E},[E]),f(E),E},hm}var Ox;function K3(){return Ox||(Ox=1,dm.exports=V3()),dm.exports}var F3=K3();const nk=["top","right","bottom","left"],Rx=["start","end"],Mx=nk.reduce((t,e)=>t.concat(e,e+"-"+Rx[0],e+"-"+Rx[1]),[]),cr=Math.min,$t=Math.max,af=Math.round,rr=t=>({x:t,y:t}),G3={left:"right",right:"left",bottom:"top",top:"bottom"},J3={start:"end",end:"start"};function ng(t,e,n){return $t(t,cr(e,n))}function Fr(t,e){return typeof t=="function"?t(e):t}function jn(t){return t.split("-")[0]}function qn(t){return t.split("-")[1]}function rk(t){return t==="x"?"y":"x"}function oy(t){return t==="y"?"height":"width"}const W3=new Set(["top","bottom"]);function nr(t){return W3.has(jn(t))?"y":"x"}function ay(t){return rk(nr(t))}function ik(t,e,n){n===void 0&&(n=!1);const r=qn(t),i=ay(t),o=oy(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=cf(l)),[l,cf(l)]}function Y3(t){const e=cf(t);return[lf(t),e,lf(e)]}function lf(t){return t.replace(/start|end/g,e=>J3[e])}const Nx=["left","right"],Dx=["right","left"],Q3=["top","bottom"],X3=["bottom","top"];function Z3(t,e,n){switch(t){case"top":case"bottom":return n?e?Dx:Nx:e?Nx:Dx;case"left":case"right":return e?Q3:X3;default:return[]}}function eB(t,e,n,r){const i=qn(t);let o=Z3(jn(t),n==="start",r);return i&&(o=o.map(l=>l+"-"+i),e&&(o=o.concat(o.map(lf)))),o}function cf(t){return t.replace(/left|right|bottom|top/g,e=>G3[e])}function tB(t){return{top:0,right:0,bottom:0,left:0,...t}}function ly(t){return typeof t!="number"?tB(t):{top:t,right:t,bottom:t,left:t}}function Fo(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function jx(t,e,n){let{reference:r,floating:i}=t;const o=nr(e),l=ay(e),u=oy(l),f=jn(e),h=o==="y",p=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,b=r[u]/2-i[u]/2;let v;switch(f){case"top":v={x:p,y:r.y-i.height};break;case"bottom":v={x:p,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:m};break;case"left":v={x:r.x-i.width,y:m};break;default:v={x:r.x,y:r.y}}switch(qn(e)){case"start":v[l]-=b*(n&&h?-1:1);break;case"end":v[l]+=b*(n&&h?-1:1);break}return v}async function nB(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:l,elements:u,strategy:f}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:b=!1,padding:v=0}=Fr(e,t),w=ly(v),E=u[b?m==="floating"?"reference":"floating":m],T=Fo(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(E)))==null||n?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:f})),C=m==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),j=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},L=Fo(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:_,strategy:f}):C);return{top:(T.top-L.top+w.top)/j.y,bottom:(L.bottom-T.bottom+w.bottom)/j.y,left:(T.left-L.left+w.left)/j.x,right:(L.right-T.right+w.right)/j.x}}const rB=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,u=o.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:m}=jx(h,r,f),b=r,v={},w=0;for(let E=0;E<u.length;E++){var S;const{name:T,fn:C}=u[E],{x:_,y:j,data:L,reset:$}=await C({x:p,y:m,initialPlacement:r,placement:b,strategy:i,middlewareData:v,rects:h,platform:{...l,detectOverflow:(S=l.detectOverflow)!=null?S:nB},elements:{reference:t,floating:e}});p=_??p,m=j??m,v={...v,[T]:{...v[T],...L}},$&&w<=50&&(w++,typeof $=="object"&&($.placement&&(b=$.placement),$.rects&&(h=$.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):$.rects),{x:p,y:m}=jx(h,b,f)),E=-1)}return{x:p,y:m,placement:b,strategy:i,middlewareData:v}},iB=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:l,elements:u,middlewareData:f}=e,{element:h,padding:p=0}=Fr(t,e)||{};if(h==null)return{};const m=ly(p),b={x:n,y:r},v=ay(i),w=oy(v),S=await l.getDimensions(h),E=v==="y",T=E?"top":"left",C=E?"bottom":"right",_=E?"clientHeight":"clientWidth",j=o.reference[w]+o.reference[v]-b[v]-o.floating[w],L=b[v]-o.reference[v],$=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let U=$?$[_]:0;(!U||!await(l.isElement==null?void 0:l.isElement($)))&&(U=u.floating[_]||o.floating[w]);const Y=j/2-L/2,X=U/2-S[w]/2-1,re=cr(m[T],X),Ce=cr(m[C],X),we=re,je=U-S[w]-Ce,ye=U/2-S[w]/2+Y,Se=ng(we,ye,je),P=!f.arrow&&qn(i)!=null&&ye!==Se&&o.reference[w]/2-(ye<we?re:Ce)-S[w]/2<0,J=P?ye<we?ye-we:ye-je:0;return{[v]:b[v]+J,data:{[v]:Se,centerOffset:ye-Se-J,...P&&{alignmentOffset:J}},reset:P}}});function sB(t,e,n){return(t?[...n.filter(i=>qn(i)===t),...n.filter(i=>qn(i)!==t)]:n.filter(i=>jn(i)===i)).filter(i=>t?qn(i)===t||(e?lf(i)!==i:!1):!0)}const oB=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,r,i;const{rects:o,middlewareData:l,placement:u,platform:f,elements:h}=e,{crossAxis:p=!1,alignment:m,allowedPlacements:b=Mx,autoAlignment:v=!0,...w}=Fr(t,e),S=m!==void 0||b===Mx?sB(m||null,v,b):b,E=await f.detectOverflow(e,w),T=((n=l.autoPlacement)==null?void 0:n.index)||0,C=S[T];if(C==null)return{};const _=ik(C,o,await(f.isRTL==null?void 0:f.isRTL(h.floating)));if(u!==C)return{reset:{placement:S[0]}};const j=[E[jn(C)],E[_[0]],E[_[1]]],L=[...((r=l.autoPlacement)==null?void 0:r.overflows)||[],{placement:C,overflows:j}],$=S[T+1];if($)return{data:{index:T+1,overflows:L},reset:{placement:$}};const U=L.map(re=>{const Ce=qn(re.placement);return[re.placement,Ce&&p?re.overflows.slice(0,2).reduce((we,je)=>we+je,0):re.overflows[0],re.overflows]}).sort((re,Ce)=>re[1]-Ce[1]),X=((i=U.filter(re=>re[2].slice(0,qn(re[0])?2:3).every(Ce=>Ce<=0))[0])==null?void 0:i[0])||U[0][0];return X!==u?{data:{index:T+1,overflows:L},reset:{placement:X}}:{}}}},aB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:l,initialPlacement:u,platform:f,elements:h}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:b,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,...E}=Fr(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const T=jn(i),C=nr(u),_=jn(u)===u,j=await(f.isRTL==null?void 0:f.isRTL(h.floating)),L=b||(_||!S?[cf(u)]:Y3(u)),$=w!=="none";!b&&$&&L.push(...eB(u,S,w,j));const U=[u,...L],Y=await f.detectOverflow(e,E),X=[];let re=((r=o.flip)==null?void 0:r.overflows)||[];if(p&&X.push(Y[T]),m){const ye=ik(i,l,j);X.push(Y[ye[0]],Y[ye[1]])}if(re=[...re,{placement:i,overflows:X}],!X.every(ye=>ye<=0)){var Ce,we;const ye=(((Ce=o.flip)==null?void 0:Ce.index)||0)+1,Se=U[ye];if(Se&&(!(m==="alignment"?C!==nr(Se):!1)||re.every(te=>nr(te.placement)===C?te.overflows[0]>0:!0)))return{data:{index:ye,overflows:re},reset:{placement:Se}};let P=(we=re.filter(J=>J.overflows[0]<=0).sort((J,te)=>J.overflows[1]-te.overflows[1])[0])==null?void 0:we.placement;if(!P)switch(v){case"bestFit":{var je;const J=(je=re.filter(te=>{if($){const xe=nr(te.placement);return xe===C||xe==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(xe=>xe>0).reduce((xe,Le)=>xe+Le,0)]).sort((te,xe)=>te[1]-xe[1])[0])==null?void 0:je[0];J&&(P=J);break}case"initialPlacement":P=u;break}if(i!==P)return{reset:{placement:P}}}return{}}}};function Lx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function zx(t){return nk.some(e=>t[e]>=0)}const lB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:r}=e,{strategy:i="referenceHidden",...o}=Fr(t,e);switch(i){case"referenceHidden":{const l=await r.detectOverflow(e,{...o,elementContext:"reference"}),u=Lx(l,n.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:zx(u)}}}case"escaped":{const l=await r.detectOverflow(e,{...o,altBoundary:!0}),u=Lx(l,n.floating);return{data:{escapedOffsets:u,escaped:zx(u)}}}default:return{}}}}};function sk(t){const e=cr(...t.map(o=>o.left)),n=cr(...t.map(o=>o.top)),r=$t(...t.map(o=>o.right)),i=$t(...t.map(o=>o.bottom));return{x:e,y:n,width:r-e,height:i-n}}function cB(t){const e=t.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<e.length;i++){const o=e[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>Fo(sk(i)))}const uB=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:i,platform:o,strategy:l}=e,{padding:u=2,x:f,y:h}=Fr(t,e),p=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),m=cB(p),b=Fo(sk(p)),v=ly(u);function w(){if(m.length===2&&m[0].left>m[1].right&&f!=null&&h!=null)return m.find(E=>f>E.left-v.left&&f<E.right+v.right&&h>E.top-v.top&&h<E.bottom+v.bottom)||b;if(m.length>=2){if(nr(n)==="y"){const re=m[0],Ce=m[m.length-1],we=jn(n)==="top",je=re.top,ye=Ce.bottom,Se=we?re.left:Ce.left,P=we?re.right:Ce.right,J=P-Se,te=ye-je;return{top:je,bottom:ye,left:Se,right:P,width:J,height:te,x:Se,y:je}}const E=jn(n)==="left",T=$t(...m.map(re=>re.right)),C=cr(...m.map(re=>re.left)),_=m.filter(re=>E?re.left===C:re.right===T),j=_[0].top,L=_[_.length-1].bottom,$=C,U=T,Y=U-$,X=L-j;return{top:j,bottom:L,left:$,right:U,width:Y,height:X,x:$,y:j}}return b}const S=await o.getElementRects({reference:{getBoundingClientRect:w},floating:r.floating,strategy:l});return i.reference.x!==S.reference.x||i.reference.y!==S.reference.y||i.reference.width!==S.reference.width||i.reference.height!==S.reference.height?{reset:{rects:S}}:{}}}},fB=new Set(["left","top"]);async function dB(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=jn(n),u=qn(n),f=nr(n)==="y",h=fB.has(l)?-1:1,p=o&&f?-1:1,m=Fr(e,t);let{mainAxis:b,crossAxis:v,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof w=="number"&&(v=u==="end"?w*-1:w),f?{x:v*p,y:b*h}:{x:b*h,y:v*p}}const hB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:l,middlewareData:u}=e,f=await dB(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:o+f.y,data:{...f,placement:l}}}}},pB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i,platform:o}=e,{mainAxis:l=!0,crossAxis:u=!1,limiter:f={fn:T=>{let{x:C,y:_}=T;return{x:C,y:_}}},...h}=Fr(t,e),p={x:n,y:r},m=await o.detectOverflow(e,h),b=nr(jn(i)),v=rk(b);let w=p[v],S=p[b];if(l){const T=v==="y"?"top":"left",C=v==="y"?"bottom":"right",_=w+m[T],j=w-m[C];w=ng(_,w,j)}if(u){const T=b==="y"?"top":"left",C=b==="y"?"bottom":"right",_=S+m[T],j=S-m[C];S=ng(_,S,j)}const E=f.fn({...e,[v]:w,[b]:S});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[v]:l,[b]:u}}}}}},mB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:l,elements:u}=e,{apply:f=()=>{},...h}=Fr(t,e),p=await l.detectOverflow(e,h),m=jn(i),b=qn(i),v=nr(i)==="y",{width:w,height:S}=o.floating;let E,T;m==="top"||m==="bottom"?(E=m,T=b===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(T=m,E=b==="end"?"top":"bottom");const C=S-p.top-p.bottom,_=w-p.left-p.right,j=cr(S-p[E],C),L=cr(w-p[T],_),$=!e.middlewareData.shift;let U=j,Y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(Y=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(U=C),$&&!b){const re=$t(p.left,0),Ce=$t(p.right,0),we=$t(p.top,0),je=$t(p.bottom,0);v?Y=w-2*(re!==0||Ce!==0?re+Ce:$t(p.left,p.right)):U=S-2*(we!==0||je!==0?we+je:$t(p.top,p.bottom))}await f({...e,availableWidth:Y,availableHeight:U});const X=await l.getDimensions(u.floating);return w!==X.width||S!==X.height?{reset:{rects:!0}}:{}}}};function od(){return typeof window<"u"}function Zo(t){return ok(t)?(t.nodeName||"").toLowerCase():"#document"}function mn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Gr(t){var e;return(e=(ok(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ok(t){return od()?t instanceof Node||t instanceof mn(t).Node:!1}function Kn(t){return od()?t instanceof Element||t instanceof mn(t).Element:!1}function ur(t){return od()?t instanceof HTMLElement||t instanceof mn(t).HTMLElement:!1}function Bx(t){return!od()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof mn(t).ShadowRoot}const gB=new Set(["inline","contents"]);function Vl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Fn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!gB.has(i)}const yB=new Set(["table","td","th"]);function bB(t){return yB.has(Zo(t))}const vB=[":popover-open",":modal"];function ad(t){return vB.some(e=>{try{return t.matches(e)}catch{return!1}})}const wB=["transform","translate","scale","rotate","perspective"],SB=["transform","translate","scale","rotate","perspective","filter"],xB=["paint","layout","strict","content"];function cy(t){const e=uy(),n=Kn(t)?Fn(t):t;return wB.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||SB.some(r=>(n.willChange||"").includes(r))||xB.some(r=>(n.contain||"").includes(r))}function EB(t){let e=Ui(t);for(;ur(e)&&!Go(e);){if(cy(e))return e;if(ad(e))return null;e=Ui(e)}return null}function uy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TB=new Set(["html","body","#document"]);function Go(t){return TB.has(Zo(t))}function Fn(t){return mn(t).getComputedStyle(t)}function ld(t){return Kn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ui(t){if(Zo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Bx(t)&&t.host||Gr(t);return Bx(e)?e.host:e}function ak(t){const e=Ui(t);return Go(e)?t.ownerDocument?t.ownerDocument.body:t.body:ur(e)&&Vl(e)?e:ak(e)}function lk(t,e,n){var r;e===void 0&&(e=[]);const i=ak(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),l=mn(i);return o?(rg(l),e.concat(l,l.visualViewport||[],Vl(i)?i:[],[])):e.concat(i,lk(i,[]))}function rg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ck(t){const e=Fn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ur(t),o=i?t.offsetWidth:n,l=i?t.offsetHeight:r,u=af(n)!==o||af(r)!==l;return u&&(n=o,r=l),{width:n,height:r,$:u}}function uk(t){return Kn(t)?t:t.contextElement}function Uo(t){const e=uk(t);if(!ur(e))return rr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=ck(e);let l=(o?af(n.width):n.width)/r,u=(o?af(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const kB=rr(0);function fk(t){const e=mn(t);return!uy()||!e.visualViewport?kB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==mn(t)?!1:e}function jl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=uk(t);let l=rr(1);e&&(r?Kn(r)&&(l=Uo(r)):l=Uo(t));const u=CB(o,n,r)?fk(o):rr(0);let f=(i.left+u.x)/l.x,h=(i.top+u.y)/l.y,p=i.width/l.x,m=i.height/l.y;if(o){const b=mn(o),v=r&&Kn(r)?mn(r):r;let w=b,S=rg(w);for(;S&&r&&v!==w;){const E=Uo(S),T=S.getBoundingClientRect(),C=Fn(S),_=T.left+(S.clientLeft+parseFloat(C.paddingLeft))*E.x,j=T.top+(S.clientTop+parseFloat(C.paddingTop))*E.y;f*=E.x,h*=E.y,p*=E.x,m*=E.y,f+=_,h+=j,w=mn(S),S=rg(w)}}return Fo({width:p,height:m,x:f,y:h})}function cd(t,e){const n=ld(t).scrollLeft;return e?e.left+n:jl(Gr(t)).left+n}function dk(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-cd(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function _B(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",l=Gr(r),u=e?ad(e.floating):!1;if(r===l||u&&o)return n;let f={scrollLeft:0,scrollTop:0},h=rr(1);const p=rr(0),m=ur(r);if((m||!m&&!o)&&((Zo(r)!=="body"||Vl(l))&&(f=ld(r)),ur(r))){const v=jl(r);h=Uo(r),p.x=v.x+r.clientLeft,p.y=v.y+r.clientTop}const b=l&&!m&&!o?dk(l,f):rr(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-f.scrollLeft*h.x+p.x+b.x,y:n.y*h.y-f.scrollTop*h.y+p.y+b.y}}function AB(t){return Array.from(t.getClientRects())}function OB(t){const e=Gr(t),n=ld(t),r=t.ownerDocument.body,i=$t(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=$t(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+cd(t);const u=-n.scrollTop;return Fn(r).direction==="rtl"&&(l+=$t(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:u}}const Ux=25;function RB(t,e){const n=mn(t),r=Gr(t),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,u=0,f=0;if(i){o=i.width,l=i.height;const p=uy();(!p||p&&e==="fixed")&&(u=i.offsetLeft,f=i.offsetTop)}const h=cd(r);if(h<=0){const p=r.ownerDocument,m=p.body,b=getComputedStyle(m),v=p.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,w=Math.abs(r.clientWidth-m.clientWidth-v);w<=Ux&&(o-=w)}else h<=Ux&&(o+=h);return{width:o,height:l,x:u,y:f}}const MB=new Set(["absolute","fixed"]);function NB(t,e){const n=jl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=ur(t)?Uo(t):rr(1),l=t.clientWidth*o.x,u=t.clientHeight*o.y,f=i*o.x,h=r*o.y;return{width:l,height:u,x:f,y:h}}function Ix(t,e,n){let r;if(e==="viewport")r=RB(t,n);else if(e==="document")r=OB(Gr(t));else if(Kn(e))r=NB(e,n);else{const i=fk(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Fo(r)}function hk(t,e){const n=Ui(t);return n===e||!Kn(n)||Go(n)?!1:Fn(n).position==="fixed"||hk(n,e)}function DB(t,e){const n=e.get(t);if(n)return n;let r=lk(t,[]).filter(u=>Kn(u)&&Zo(u)!=="body"),i=null;const o=Fn(t).position==="fixed";let l=o?Ui(t):t;for(;Kn(l)&&!Go(l);){const u=Fn(l),f=cy(l);!f&&u.position==="fixed"&&(i=null),(o?!f&&!i:!f&&u.position==="static"&&!!i&&MB.has(i.position)||Vl(l)&&!f&&hk(t,l))?r=r.filter(p=>p!==l):i=u,l=Ui(l)}return e.set(t,r),r}function jB(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const l=[...n==="clippingAncestors"?ad(e)?[]:DB(e,this._c):[].concat(n),r],u=l[0],f=l.reduce((h,p)=>{const m=Ix(e,p,i);return h.top=$t(m.top,h.top),h.right=cr(m.right,h.right),h.bottom=cr(m.bottom,h.bottom),h.left=$t(m.left,h.left),h},Ix(e,u,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function LB(t){const{width:e,height:n}=ck(t);return{width:e,height:n}}function zB(t,e,n){const r=ur(e),i=Gr(e),o=n==="fixed",l=jl(t,!0,o,e);let u={scrollLeft:0,scrollTop:0};const f=rr(0);function h(){f.x=cd(i)}if(r||!r&&!o)if((Zo(e)!=="body"||Vl(i))&&(u=ld(e)),r){const v=jl(e,!0,o,e);f.x=v.x+e.clientLeft,f.y=v.y+e.clientTop}else i&&h();o&&!r&&i&&h();const p=i&&!r&&!o?dk(i,u):rr(0),m=l.left+u.scrollLeft-f.x-p.x,b=l.top+u.scrollTop-f.y-p.y;return{x:m,y:b,width:l.width,height:l.height}}function pm(t){return Fn(t).position==="static"}function Px(t,e){if(!ur(t)||Fn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Gr(t)===n&&(n=n.ownerDocument.body),n}function pk(t,e){const n=mn(t);if(ad(t))return n;if(!ur(t)){let i=Ui(t);for(;i&&!Go(i);){if(Kn(i)&&!pm(i))return i;i=Ui(i)}return n}let r=Px(t,e);for(;r&&bB(r)&&pm(r);)r=Px(r,e);return r&&Go(r)&&pm(r)&&!cy(r)?n:r||EB(t)||n}const BB=async function(t){const e=this.getOffsetParent||pk,n=this.getDimensions,r=await n(t.floating);return{reference:zB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function UB(t){return Fn(t).direction==="rtl"}const IB={convertOffsetParentRelativeRectToViewportRelativeRect:_B,getDocumentElement:Gr,getClippingRect:jB,getOffsetParent:pk,getElementRects:BB,getClientRects:AB,getDimensions:LB,getScale:Uo,isElement:Kn,isRTL:UB},mk=hB,gk=oB,yk=pB,bk=aB,vk=mB,wk=lB,Sk=iB,xk=uB,Ek=(t,e,n)=>{const r=new Map,i={platform:IB,...n},o={...i.platform,_c:r};return rB(t,e,{...i,platform:o})};let ig,sg;if(typeof WeakMap<"u"){let t=new WeakMap;ig=e=>t.get(e),sg=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;ig=r=>{for(let i=0;i<t.length;i+=2)if(t[i]==r)return t[i+1]},sg=(r,i)=>(n==10&&(n=0),t[n++]=r,t[n++]=i)}var Br=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,i=e/this.width|0;let o=r+1,l=i+1;for(let u=1;o<this.width&&this.map[e+u]==n;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==n;u++)l++;return{left:r,top:i,right:o,bottom:l}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:i,top:o,bottom:l}=this.findCell(t);return e=="horiz"?(n<0?r==0:i==this.width)?null:this.map[o*this.width+(n<0?r-1:i)]:(n<0?o==0:l==this.height)?null:this.map[r+this.width*(n<0?o-1:l)]}rectBetween(t,e){const{left:n,right:r,top:i,bottom:o}=this.findCell(t),{left:l,right:u,top:f,bottom:h}=this.findCell(e);return{left:Math.min(n,l),top:Math.min(i,f),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let i=t.left;i<t.right;i++){const o=r*this.width+i,l=this.map[o];n[l]||(n[l]=!0,!(i==t.left&&i&&this.map[o-1]==l||r==t.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(t,e,n){for(let r=0,i=0;;r++){const o=i+n.child(r).nodeSize;if(r==t){let l=e+t*this.width;const u=(t+1)*this.width;for(;l<u&&this.map[l]<i;)l++;return l==u?o-1:this.map[l]}i=o}}static get(t){return ig(t)||sg(t,PB(t))}};function PB(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=$B(t),n=t.childCount,r=[];let i=0,o=null;const l=[];for(let h=0,p=e*n;h<p;h++)r[h]=0;for(let h=0,p=0;h<n;h++){const m=t.child(h);p++;for(let w=0;;w++){for(;i<r.length&&r[i]!=0;)i++;if(w==m.childCount)break;const S=m.child(w),{colspan:E,rowspan:T,colwidth:C}=S.attrs;for(let _=0;_<T;_++){if(_+h>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:T-_});break}const j=i+_*e;for(let L=0;L<E;L++){r[j+L]==0?r[j+L]=p:(o||(o=[])).push({type:"collision",row:h,pos:p,n:E-L});const $=C&&C[L];if($){const U=(j+L)%e*2,Y=l[U];Y==null||Y!=$&&l[U+1]==1?(l[U]=$,l[U+1]=1):Y==$&&l[U+1]++}}}i+=E,p+=S.nodeSize}const b=(h+1)*e;let v=0;for(;i<b;)r[i++]==0&&v++;v&&(o||(o=[])).push({type:"missing",row:h,n:v}),p++}(e===0||n===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new Br(e,n,r,o);let f=!1;for(let h=0;!f&&h<l.length;h+=2)l[h]!=null&&l[h+1]<n&&(f=!0);return f&&HB(u,l,t),u}function $B(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const i=t.child(r);let o=0;if(n)for(let l=0;l<r;l++){const u=t.child(l);for(let f=0;f<u.childCount;f++){const h=u.child(f);l+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let l=0;l<i.childCount;l++){const u=i.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(n=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function HB(t,e,n){t.problems||(t.problems=[]);const r={};for(let i=0;i<t.map.length;i++){const o=t.map[i];if(r[o])continue;r[o]=!0;const l=n.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const f=l.attrs;for(let h=0;h<f.colspan;h++){const p=e[(i+h)%t.width*2];p!=null&&(!f.colwidth||f.colwidth[h]!=p)&&((u||(u=qB(f)))[h]=p)}u&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function qB(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function fy(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}}return e}new Xe("selectingCells");function VB(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Tk(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function KB(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=VB(e.$head)||FB(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function FB(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function $x(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function kk(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Ck(t,e,n){const r=t.node(-1),i=Br.get(r),o=t.start(-1),l=i.nextCell(t.pos-o,e,n);return l==null?null:t.node(0).resolve(o+l)}function Hx(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(i=>i>0)||(r.colwidth=null)),r}var ir=class Dr extends de{constructor(e,n=e){const r=e.node(-1),i=Br.get(r),o=e.start(-1),l=i.rectBetween(e.pos-o,n.pos-o),u=e.node(0),f=i.cellsInRect(l).filter(p=>p!=n.pos-o);f.unshift(n.pos-o);const h=f.map(p=>{const m=r.nodeAt(p);if(!m)throw new RangeError(`No cell with offset ${p} found`);const b=o+p+1;return new CE(u.resolve(b),u.resolve(b+m.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),i=e.resolve(n.map(this.$headCell.pos));if($x(r)&&$x(i)&&kk(r,i)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?Dr.rowSelection(r,i):o&&this.isColSelection()?Dr.colSelection(r,i):new Dr(r,i)}return he.between(r,i)}content(){const e=this.$anchorCell.node(-1),n=Br.get(e),r=this.$anchorCell.start(-1),i=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let f=i.top;f<i.bottom;f++){const h=[];for(let p=f*n.width+i.left,m=i.left;m<i.right;m++,p++){const b=n.map[p];if(o[b])continue;o[b]=!0;const v=n.findCell(b);let w=e.nodeAt(b);if(!w)throw new RangeError(`No cell with offset ${b} found`);const S=i.left-v.left,E=v.right-i.right;if(S>0||E>0){let T=w.attrs;if(S>0&&(T=Hx(T,0,S)),E>0&&(T=Hx(T,T.colspan-E,E)),v.left<i.left){if(w=w.type.createAndFill(T),!w)throw new RangeError(`Could not create cell with attrs ${JSON.stringify(T)}`)}else w=w.type.create(T,w.content)}if(v.top<i.top||v.bottom>i.bottom){const T={...w.attrs,rowspan:Math.min(v.bottom,i.bottom)-Math.max(v.top,i.top)};v.top<i.top?w=w.type.createAndFill(T):w=w.type.create(T,w.content)}h.push(w)}l.push(e.child(f).copy(G.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new Q(G.from(u),1,1)}replace(e,n=Q.empty){const r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){const{$from:u,$to:f}=i[l],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(f.pos),l?Q.empty:n)}const o=de.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,n){this.replace(e,new Q(G.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Br.get(n),i=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let l=0;l<o.length;l++)e(n.nodeAt(o[l]),i+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,i=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),i=Br.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(n.pos-o),f=e.node(0);return l.top<=u.top?(l.top>0&&(e=f.resolve(o+i.map[l.left])),u.bottom<i.height&&(n=f.resolve(o+i.map[i.width*(i.height-1)+u.right-1]))):(u.top>0&&(n=f.resolve(o+i.map[u.left])),l.bottom<i.height&&(e=f.resolve(o+i.map[i.width*(i.height-1)+l.right-1]))),new Dr(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Br.get(e),r=this.$anchorCell.start(-1),i=n.colCount(this.$anchorCell.pos-r),o=n.colCount(this.$headCell.pos-r);if(Math.min(i,o)>0)return!1;const l=i+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==n.width}eq(e){return e instanceof Dr&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),i=Br.get(r),o=e.start(-1),l=i.findCell(e.pos-o),u=i.findCell(n.pos-o),f=e.node(0);return l.left<=u.left?(l.left>0&&(e=f.resolve(o+i.map[l.top*i.width])),u.right<i.width&&(n=f.resolve(o+i.map[i.width*(u.top+1)-1]))):(u.left>0&&(n=f.resolve(o+i.map[u.top*i.width])),l.right<i.width&&(e=f.resolve(o+i.map[i.width*(l.top+1)-1]))),new Dr(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Dr(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Dr(e.resolve(n),e.resolve(r))}getBookmark(){return new GB(this.$anchorCell.pos,this.$headCell.pos)}};ir.prototype.visible=!1;de.jsonID("cell",ir);var GB=class _k{constructor(e,n){this.anchor=e,this.head=n}map(e){return new _k(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&kk(n,r)?new ir(n,r):de.near(r,1)}};new Xe("fix-tables");function Ak(t){const e=t.selection,n=KB(t),r=n.node(-1),i=n.start(-1),o=Br.get(r);return{...e instanceof ir?o.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):o.findCell(n.pos-i),tableStart:i,map:o,table:r}}function JB(t){return function(e,n){if(!Tk(e))return!1;if(n){const r=fy(e.schema),i=Ak(e),o=e.tr,l=i.map.cellsInRect(t=="column"?{left:i.left,top:0,right:i.right,bottom:i.map.height}:t=="row"?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),u=l.map(f=>i.table.nodeAt(f));for(let f=0;f<l.length;f++)u[f].type==r.header_cell&&o.setNodeMarkup(i.tableStart+l[f],r.cell,u[f].attrs);if(o.steps.length===0)for(let f=0;f<l.length;f++)o.setNodeMarkup(i.tableStart+l[f],r.header_cell,u[f].attrs);n(o)}return!0}}function qx(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let i=0;i<r.length;i++){const o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function dy(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?JB(t):function(n,r){if(!Tk(n))return!1;if(r){const i=fy(n.schema),o=Ak(n),l=n.tr,u=qx("row",o,i),f=qx("column",o,i),h=(t==="column"?u:t==="row"&&f)?1:0,p=t=="column"?{left:0,top:h,right:1,bottom:o.map.height}:t=="row"?{left:h,top:0,right:o.map.width,bottom:1}:o,m=t=="column"?f?i.cell:i.header_cell:t=="row"?u?i.cell:i.header_cell:i.cell;o.map.cellsInRect(p).forEach(b=>{const v=b+o.tableStart,w=l.doc.nodeAt(v);w&&l.setNodeMarkup(v,m,w.attrs)}),r(l)}return!0}}dy("row",{useDeprecatedLogic:!0});dy("column",{useDeprecatedLogic:!0});dy("cell",{useDeprecatedLogic:!0});function Cu(t,e){const n=t.selection;if(!(n instanceof ir))return!1;if(e){const r=t.tr,i=fy(t.schema).cell.createAndFill().content;n.forEachCell((o,l)=>{o.content.eq(i)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new Q(i,0,0))}),r.docChanged&&e(r)}return!0}Gg({ArrowLeft:_u("horiz",-1),ArrowRight:_u("horiz",1),ArrowUp:_u("vert",-1),ArrowDown:_u("vert",1),"Shift-ArrowLeft":Au("horiz",-1),"Shift-ArrowRight":Au("horiz",1),"Shift-ArrowUp":Au("vert",-1),"Shift-ArrowDown":Au("vert",1),Backspace:Cu,"Mod-Backspace":Cu,Delete:Cu,"Mod-Delete":Cu});function Uu(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function _u(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;if(o instanceof ir)return Uu(n,r,de.near(o.$headCell,e));if(t!="horiz"&&!o.empty)return!1;const l=Ok(i,t,e);if(l==null)return!1;if(t=="horiz")return Uu(n,r,de.near(n.doc.resolve(o.head+e),e));{const u=n.doc.resolve(l),f=Ck(u,t,e);let h;return f?h=de.near(f,1):e<0?h=de.near(n.doc.resolve(u.before(-1)),-1):h=de.near(n.doc.resolve(u.after(-1)),1),Uu(n,r,h)}}}function Au(t,e){return(n,r,i)=>{if(!i)return!1;const o=n.selection;let l;if(o instanceof ir)l=o;else{const f=Ok(i,t,e);if(f==null)return!1;l=new ir(n.doc.resolve(f))}const u=Ck(l.$headCell,t,e);return u?Uu(n,r,new ir(l.$anchorCell,u)):!1}}function Ok(t,e,n){if(!(t.state.selection instanceof he))return null;const{$head:r}=t.state.selection;for(let i=r.depth-1;i>=0;i--){const o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const l=r.before(i),u=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(u)?l:null}}return null}new Xe("tableColumnResizing");function WB(t,e){const n=Math.min(t.top,e.top),r=Math.max(t.bottom,e.bottom),i=Math.min(t.left,e.left),l=Math.max(t.right,e.right)-i,u=r-n,f=i,h=n;return new DOMRect(f,h,l,u)}var YB=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,shouldShow:o,appendTo:l,getReferencedVirtualElement:u,options:f}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=({view:p,state:m,from:b,to:v})=>{const{doc:w,selection:S}=m,{empty:E}=S,T=!w.textBetween(b,v).length&&Qg(m.selection),C=this.element.contains(document.activeElement);return!(!(p.hasFocus()||C)||E||T||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:p})=>{var m;if(this.editor.isDestroyed){this.destroy();return}if(this.preventHide){this.preventHide=!1;return}p?.relatedTarget&&((m=this.element.parentNode)!=null&&m.contains(p.relatedTarget))||p?.relatedTarget!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(p,m)=>{const b=!m?.selection.eq(p.state.selection),v=!m?.doc.eq(p.state.doc);!b&&!v||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(p,b,v,m)},this.updateDelay))},this.updateHandler=(p,m,b,v)=>{const{composing:w}=p;if(w||!m&&!b)return;if(!this.getShouldShow(v)){this.hide();return}this.updatePosition(),this.show()},this.transactionHandler=({transaction:p})=>{const m=p.getMeta("bubbleMenu");m==="updatePosition"?this.updatePosition():m&&typeof m=="object"&&m.type==="updateOptions"&&this.updateOptions(m.options)};var h;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(h=f?.scrollTarget)!=null?h:window,this.getReferencedVirtualElement=u,this.floatingUIOptions={...this.floatingUIOptions,...f},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(bk(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(yk(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(mk(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(Sk(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(vk(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(gk(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(wk(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(xk(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}get virtualElement(){var t,e,n;const{selection:r}=this.editor.state,i=(t=this.getReferencedVirtualElement)==null?void 0:t.call(this);if(i)return i;if(!((n=(e=this.view)==null?void 0:e.dom)!=null&&n.parentNode))return;const o=IT(this.view,r.from,r.to);let l={getBoundingClientRect:()=>o,getClientRects:()=>[o]};if(r instanceof le){let u=this.view.nodeDOM(r.from);const f=u.dataset.nodeViewWrapper?u:u.querySelector("[data-node-view-wrapper]");f&&(u=f),u&&(l={getBoundingClientRect:()=>u.getBoundingClientRect(),getClientRects:()=>[u.getBoundingClientRect()]})}if(r instanceof ir){const{$anchorCell:u,$headCell:f}=r,h=u?u.pos:f.pos,p=f?f.pos:u.pos,m=this.view.nodeDOM(h),b=this.view.nodeDOM(p);if(!m||!b)return;const v=m===b?m.getBoundingClientRect():WB(m.getBoundingClientRect(),b.getBoundingClientRect());l={getBoundingClientRect:()=>v,getClientRects:()=>[v]}}return l}updatePosition(){const t=this.virtualElement;t&&Ek(t,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:e,y:n,strategy:r,middlewareData:i})=>{var o,l;if((o=i.hide)!=null&&o.referenceHidden||(l=i.hide)!=null&&l.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=r,this.element.style.left=`${e}px`,this.element.style.top=`${n}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const{state:n}=t,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r){this.handleDebouncedUpdate(t,e);return}const i=!e?.selection.eq(t.state.selection),o=!e?.doc.eq(t.state.doc);this.updateHandler(t,i,o,e)}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(f=>f.$from.pos)),l=Math.max(...i.map(f=>f.$to.pos));return((e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:t,from:o,to:l}))||!1}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.getReferencedVirtualElement!==void 0&&(this.getReferencedVirtualElement=t.getReferencedVirtualElement),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Rk=t=>new We({key:typeof t.pluginKey=="string"?new Xe(t.pluginKey):t.pluginKey,view:e=>new YB({view:e,...t})});et.create({name:"bubbleMenu",addOptions(){return{element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Rk({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,getReferencedVirtualElement:this.options.getReferencedVirtualElement,shouldShow:this.options.shouldShow})]:[]}});var QB=class{constructor({editor:t,element:e,view:n,updateDelay:r=250,resizeDelay:i=60,options:o,appendTo:l,shouldShow:u}){this.preventHide=!1,this.isVisible=!1,this.scrollTarget=window,this.shouldShow=({view:h,state:p})=>{const{selection:m}=p,{$anchor:b,empty:v}=m,w=b.depth===1,S=b.parent.isTextblock&&!b.parent.type.spec.code&&!b.parent.textContent&&b.parent.childCount===0&&!this.getTextContent(b.parent);return!(!h.hasFocus()||!v||!w||!S||!this.editor.isEditable)},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(h,p,m,b)=>{const{composing:v}=h;if(v||!p&&!m)return;if(!this.getShouldShow(b)){this.hide();return}this.updatePosition(),this.show()},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:h})=>{var p;if(this.preventHide){this.preventHide=!1;return}h?.relatedTarget&&((p=this.element.parentNode)!=null&&p.contains(h.relatedTarget))||h?.relatedTarget!==this.editor.view.dom&&this.hide()},this.transactionHandler=({transaction:h})=>{const p=h.getMeta("floatingMenu");p==="updatePosition"?this.updatePosition():p&&typeof p=="object"&&p.type==="updateOptions"&&this.updateOptions(p.options)},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)};var f;this.editor=t,this.element=e,this.view=n,this.updateDelay=r,this.resizeDelay=i,this.appendTo=l,this.scrollTarget=(f=o?.scrollTarget)!=null?f:window,this.floatingUIOptions={...this.floatingUIOptions,...o},this.element.tabIndex=0,u&&(this.shouldShow=u),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.editor.on("transaction",this.transactionHandler),window.addEventListener("resize",this.resizeHandler),this.scrollTarget.addEventListener("scroll",this.resizeHandler),this.update(n,n.state),this.getShouldShow()&&(this.show(),this.updatePosition())}getTextContent(t){return DT(t,{textSerializers:ey(this.editor.schema)})}get middlewares(){const t=[];return this.floatingUIOptions.flip&&t.push(bk(typeof this.floatingUIOptions.flip!="boolean"?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&t.push(yk(typeof this.floatingUIOptions.shift!="boolean"?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&t.push(mk(typeof this.floatingUIOptions.offset!="boolean"?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&t.push(Sk(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&t.push(vk(typeof this.floatingUIOptions.size!="boolean"?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&t.push(gk(typeof this.floatingUIOptions.autoPlacement!="boolean"?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&t.push(wk(typeof this.floatingUIOptions.hide!="boolean"?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&t.push(xk(typeof this.floatingUIOptions.inline!="boolean"?this.floatingUIOptions.inline:void 0)),t}getShouldShow(t){var e;const{state:n}=this.view,{selection:r}=n,{ranges:i}=r,o=Math.min(...i.map(f=>f.$from.pos)),l=Math.max(...i.map(f=>f.$to.pos));return(e=this.shouldShow)==null?void 0:e.call(this,{editor:this.editor,view:this.view,state:n,oldState:t,from:o,to:l})}updateOptions(t){var e;if(t.updateDelay!==void 0&&(this.updateDelay=t.updateDelay),t.resizeDelay!==void 0&&(this.resizeDelay=t.resizeDelay),t.appendTo!==void 0&&(this.appendTo=t.appendTo),t.shouldShow!==void 0&&t.shouldShow&&(this.shouldShow=t.shouldShow),t.options!==void 0){const n=(e=t.options.scrollTarget)!=null?e:window;n!==this.scrollTarget&&(this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.scrollTarget=n,this.scrollTarget.addEventListener("scroll",this.resizeHandler)),this.floatingUIOptions={...this.floatingUIOptions,...t.options}}}updatePosition(){const{selection:t}=this.editor.state,e=IT(this.view,t.from,t.to);Ek({getBoundingClientRect:()=>e,getClientRects:()=>[e]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(({x:r,y:i,strategy:o,middlewareData:l})=>{var u,f;if((u=l.hide)!=null&&u.referenceHidden||(f=l.hide)!=null&&f.escaped){this.element.style.visibility="hidden";return}this.element.style.visibility="visible",this.element.style.width="max-content",this.element.style.position=o,this.element.style.left=`${r}px`,this.element.style.top=`${i}px`,this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(t,e){const n=!e?.selection.eq(t.state.selection),r=!e?.doc.eq(t.state.doc);this.updateHandler(t,n,r,e)}show(){var t;if(this.isVisible)return;this.element.style.visibility="visible",this.element.style.opacity="1";const e=typeof this.appendTo=="function"?this.appendTo():this.appendTo;(t=e??this.view.dom.parentElement)==null||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),window.removeEventListener("resize",this.resizeHandler),this.scrollTarget.removeEventListener("scroll",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.editor.off("transaction",this.transactionHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}},Mk=t=>new We({key:typeof t.pluginKey=="string"?new Xe(t.pluginKey):t.pluginKey,view:e=>new QB({view:e,...t})});et.create({name:"floatingMenu",addOptions(){return{element:null,options:{},pluginKey:"floatingMenu",updateDelay:void 0,resizeDelay:void 0,appendTo:void 0,shouldShow:null}},addCommands(){return{updateFloatingMenuPosition:()=>({tr:t,dispatch:e})=>(e&&t.setMeta("floatingMenu","updatePosition"),!0)}},addProseMirrorPlugins(){return this.options.element?[Mk({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,resizeDelay:this.options.resizeDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}});var XB=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},ZB=({contentComponent:t})=>{const e=G1.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return O.jsx(O.Fragment,{children:Object.values(e)})};function eU(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:xR.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var tU=class extends sr.Component{constructor(t){var e;super(t),this.editorContentRef=sr.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=eU(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return O.jsxs(O.Fragment,{children:[O.jsx("div",{ref:XB(e,this.editorContentRef),...n}),t?.contentComponent&&O.jsx(ZB,{contentComponent:t.contentComponent})]})}},nU=N.forwardRef((t,e)=>{const n=sr.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return sr.createElement(tU,{key:n,innerRef:e,...t})}),Nk=sr.memo(nU),rU=typeof window<"u"?N.useLayoutEffect:N.useEffect,iU=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function sU(t){var e;const[n]=N.useState(()=>new iU(t.editor)),r=F3.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:q3);return rU(()=>n.watch(t.editor),[t.editor,n]),N.useDebugValue(r),r}var oU=!1,og=typeof window>"u",aU=og||!!(typeof window<"u"&&window.next),lU=class Dk{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?og||aU?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onBeforeCreate)==null?void 0:o.call(i,...r)},onBlur:(...r)=>{var i,o;return(o=(i=this.options.current).onBlur)==null?void 0:o.call(i,...r)},onCreate:(...r)=>{var i,o;return(o=(i=this.options.current).onCreate)==null?void 0:o.call(i,...r)},onDestroy:(...r)=>{var i,o;return(o=(i=this.options.current).onDestroy)==null?void 0:o.call(i,...r)},onFocus:(...r)=>{var i,o;return(o=(i=this.options.current).onFocus)==null?void 0:o.call(i,...r)},onSelectionUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onSelectionUpdate)==null?void 0:o.call(i,...r)},onTransaction:(...r)=>{var i,o;return(o=(i=this.options.current).onTransaction)==null?void 0:o.call(i,...r)},onUpdate:(...r)=>{var i,o;return(o=(i=this.options.current).onUpdate)==null?void 0:o.call(i,...r)},onContentError:(...r)=>{var i,o;return(o=(i=this.options.current).onContentError)==null?void 0:o.call(i,...r)},onDrop:(...r)=>{var i,o;return(o=(i=this.options.current).onDrop)==null?void 0:o.call(i,...r)},onPaste:(...r)=>{var i,o;return(o=(i=this.options.current).onPaste)==null?void 0:o.call(i,...r)},onDelete:(...r)=>{var i,o;return(o=(i=this.options.current).onDelete)==null?void 0:o.call(i,...r)}};return new Wz(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,o)=>{var l;return i===((l=n.extensions)==null?void 0:l[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Dk.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function cU(t={},e=[]){const n=N.useRef(t);n.current=t;const[r]=N.useState(()=>new lU(n)),i=G1.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return N.useDebugValue(i),N.useEffect(r.onRender(e)),sU({editor:i,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),i}var hy=N.createContext({editor:null});hy.Consumer;var jk=()=>N.useContext(hy),uU=N.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),fU=()=>N.useContext(uU);sr.forwardRef((t,e)=>{const{onDragStart:n}=fU(),r=t.as||"div";return O.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});sr.createContext({markViewContentRef:()=>{}});var dU=sr.forwardRef(({pluginKey:t="bubbleMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,getReferencedVirtualElement:l,options:u,children:f,...h},p)=>{const m=N.useRef(document.createElement("div"));typeof p=="function"?p(m.current):p&&(p.current=m.current);const{editor:b}=jk(),v=e||b,w={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,getReferencedVirtualElement:l,options:u},S=N.useRef(w);S.current=w;const[E,T]=N.useState(!1),C=N.useRef(!0);return N.useEffect(()=>{if(v?.isDestroyed)return;if(!v){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const _=m.current;_.style.visibility="hidden",_.style.position="absolute";const j=Rk({...S.current,editor:v,element:_});v.registerPlugin(j);const L=S.current.pluginKey;return C.current=!0,T(!0),()=>{T(!1),v.unregisterPlugin(L),window.requestAnimationFrame(()=>{_.parentNode&&_.parentNode.removeChild(_)})}},[v]),N.useEffect(()=>{if(!(!E||!v||v.isDestroyed)){if(C.current){C.current=!1;return}v.view.dispatch(v.state.tr.setMeta("bubbleMenu",{type:"updateOptions",options:S.current}))}},[E,v,n,r,o,u,i,l]),Cg.createPortal(O.jsx("div",{...h,children:f}),m.current)}),hU=sr.forwardRef(({pluginKey:t="floatingMenu",editor:e,updateDelay:n,resizeDelay:r,appendTo:i,shouldShow:o=null,options:l,children:u,...f},h)=>{const p=N.useRef(document.createElement("div"));typeof h=="function"?h(p.current):h&&(h.current=p.current);const{editor:m}=jk(),b=e||m,v={updateDelay:n,resizeDelay:r,appendTo:i,pluginKey:t,shouldShow:o,options:l},w=N.useRef(v);w.current=v;const[S,E]=N.useState(!1),T=N.useRef(!0);return N.useEffect(()=>{if(b?.isDestroyed)return;if(!b){console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");return}const C=p.current;C.style.visibility="hidden",C.style.position="absolute";const _=Mk({...w.current,editor:b,element:C});b.registerPlugin(_);const j=w.current.pluginKey;return T.current=!0,E(!0),()=>{E(!1),b.unregisterPlugin(j),window.requestAnimationFrame(()=>{C.parentNode&&C.parentNode.removeChild(C)})}},[b]),N.useEffect(()=>{if(!(!S||!b||b.isDestroyed)){if(T.current){T.current=!1;return}b.view.dispatch(b.state.tr.setMeta("floatingMenu",{type:"updateOptions",options:w.current}))}},[S,b,n,r,o,l,i]),Cg.createPortal(O.jsx("div",{...f,children:u}),p.current)}),py=N.createContext({editor:null,isReady:!1});py.displayName="TiptapContext";var ud=()=>N.useContext(py);function Lk({instance:t,children:e}){var n;const[r,i]=N.useState((n=t?.isInitialized)!=null?n:!1);N.useEffect(()=>{if(!t){i(!1);return}if(t.isInitialized){i(!0);return}const u=()=>{i(!0)};return t.on("create",u),()=>{t.off("create",u)}},[t]);const o=N.useMemo(()=>({editor:t,isReady:r}),[t,r]),l=N.useMemo(()=>({editor:t}),[t]);return O.jsx(hy.Provider,{value:l,children:O.jsx(py.Provider,{value:o,children:e})})}Lk.displayName="Tiptap";function zk({...t}){const{editor:e}=ud();return O.jsx(Nk,{editor:e,...t})}zk.displayName="Tiptap.Content";function Bk({children:t}){const{isReady:e}=ud();return e?null:t}Bk.displayName="Tiptap.Loading";function Uk({children:t,...e}){const{editor:n}=ud();return n?O.jsx(dU,{editor:n,...e,children:t}):null}Uk.displayName="Tiptap.BubbleMenu";function Ik({children:t,...e}){const{editor:n}=ud();return n?O.jsx(hU,{...e,editor:n,children:t}):null}Ik.displayName="Tiptap.FloatingMenu";Object.assign(Lk,{Content:zk,Loading:Bk,BubbleMenu:Uk,FloatingMenu:Ik});var uf=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},pU=/^\s*>\s$/,mU=yn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return uf("blockquote",{...gt(this.options.HTMLAttributes,t),children:uf("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const u=e.renderChildren([i]).split(`
`).map(f=>f.trim()===""?n:`${n} ${f}`);r.push(u.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ko({find:pU,type:this.type})]}}),gU=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,yU=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,bU=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,vU=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,wU=Ns.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return uf("strong",{...gt(this.options.HTMLAttributes,t),children:uf("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Vo({find:gU,type:this.type}),Vo({find:bU,type:this.type})]},addPasteRules(){return[As({find:yU,type:this.type}),As({find:vU,type:this.type})]}}),SU=/(^|[^`])`([^`]+)`(?!`)$/,xU=/(^|[^`])`([^`]+)`(?!`)/g,EU=Ns.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",gt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Vo({find:SU,type:this.type})]},addPasteRules(){return[As({find:xU,type:this.type})]}}),mm=4,TU=/^```([a-z]+)?[\s\n]$/,kU=/^~~~([a-z]+)?[\s\n]$/,CU=yn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:mm,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",gt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:mm,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;if(o.parent.type!==this.type)return!1;const u=" ".repeat(n);return l?t.commands.insertContent(u):t.commands.command(({tr:f})=>{const{from:h,to:p}=i,v=r.doc.textBetween(h,p,`
`,`
`).split(`
`).map(w=>u+w).join(`
`);return f.replaceWith(h,p,r.schema.text(v)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:mm,{state:r}=t,{selection:i}=r,{$from:o,empty:l}=i;return o.parent.type!==this.type?!1:l?t.commands.command(({tr:u})=>{var f;const{pos:h}=o,p=o.start(),m=o.end(),v=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let w=0,S=0;const E=h-p;for(let $=0;$<v.length;$+=1){if(S+v[$].length>=E){w=$;break}S+=v[$].length+1}const C=((f=v[w].match(/^ */))==null?void 0:f[0])||"",_=Math.min(C.length,n);if(_===0)return!0;let j=p;for(let $=0;$<w;$+=1)j+=v[$].length+1;return u.delete(j,j+_),h-j<=_&&u.setSelection(he.create(u.doc,j)),!0}):t.commands.command(({tr:u})=>{const{from:f,to:h}=i,b=r.doc.textBetween(f,h,`
`,`
`).split(`
`).map(v=>{var w;const S=((w=v.match(/^ */))==null?void 0:w[0])||"",E=Math.min(S.length,n);return v.slice(E)}).join(`
`);return u.replaceWith(f,h,r.schema.text(b)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:t.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const u=i.after();return u===void 0?!1:r.nodeAt(u)?t.commands.command(({tr:h})=>(h.setSelection(de.near(r.resolve(u))),!0)):t.commands.exitCode()}}},addInputRules(){return[eg({find:TU,type:this.type,getAttributes:t=>({language:t[1]})}),eg({find:kU,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new We({key:new Xe("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=i?.mode;if(!n||!o)return!1;const{tr:l,schema:u}=t.state,f=u.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},f)),l.selection.$from.parent.type!==this.type&&l.setSelection(he.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),_U=yn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),AU=yn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",gt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:o}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,f=o||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&f&&l){const m=f.filter(b=>u.includes(b.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),OU=yn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,gt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>eg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),RU=yn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",gt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Qz(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return zT(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:o,tr:l,dispatch:u})=>{if(u){const{$to:f}=l.selection,h=f.end();if(f.nodeAfter)f.nodeAfter.isTextblock?l.setSelection(he.create(l.doc,f.pos+1)):f.nodeAfter.isBlock?l.setSelection(le.create(l.doc,f.pos)):l.setSelection(he.create(l.doc,f.pos));else{const p=o.schema.nodes[this.options.nextNodeType]||f.parent.type.contentMatch.defaultType,m=p?.create();m&&(l.insert(h,m),l.setSelection(he.create(l.doc,h+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Yz({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),MU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,NU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,DU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,jU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,LU=Ns.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Vo({find:MU,type:this.type}),Vo({find:DU,type:this.type})]},addPasteRules(){return[As({find:NU,type:this.type}),As({find:jU,type:this.type})]}});const zU="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",BU="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",ag="numeric",lg="ascii",cg="alpha",dl="asciinumeric",sl="alphanumeric",ug="domain",Pk="emoji",UU="scheme",IU="slashscheme",gm="whitespace";function PU(t,e){return t in e||(e[t]=[]),e[t]}function bs(t,e,n){e[ag]&&(e[dl]=!0,e[sl]=!0),e[lg]&&(e[dl]=!0,e[cg]=!0),e[dl]&&(e[sl]=!0),e[cg]&&(e[sl]=!0),e[sl]&&(e[ug]=!0),e[Pk]&&(e[ug]=!0);for(const r in e){const i=PU(r,n);i.indexOf(t)<0&&i.push(t)}}function $U(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Xt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Xt.groups={};Xt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],o=e.jr[r][1];if(o&&i.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Xt.groups;let i;return e&&e.j?i=e:(i=new Xt(e),n&&r&&bs(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const o=t.length;if(!o)return i;for(let l=0;l<o-1;l++)i=i.tt(t[l]);return i.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||Xt.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const o=e;let l,u=i.go(t);if(u?(l=new Xt,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new Xt,o){if(r)if(l.t&&typeof l.t=="string"){const f=Object.assign($U(l.t,r),n);bs(o,f,r)}else n&&bs(o,n,r);l.t=o}return i.j[t]=l,l}};const ve=(t,e,n,r,i)=>t.ta(e,n,r,i),rt=(t,e,n,r,i)=>t.tr(e,n,r,i),Vx=(t,e,n,r,i)=>t.ts(e,n,r,i),W=(t,e,n,r,i)=>t.tt(e,n,r,i),jr="WORD",fg="UWORD",$k="ASCIINUMERICAL",Hk="ALPHANUMERICAL",Ll="LOCALHOST",dg="TLD",hg="UTLD",Iu="SCHEME",No="SLASH_SCHEME",my="NUM",pg="WS",gy="NL",hl="OPENBRACE",pl="CLOSEBRACE",ff="OPENBRACKET",df="CLOSEBRACKET",hf="OPENPAREN",pf="CLOSEPAREN",mf="OPENANGLEBRACKET",gf="CLOSEANGLEBRACKET",yf="FULLWIDTHLEFTPAREN",bf="FULLWIDTHRIGHTPAREN",vf="LEFTCORNERBRACKET",wf="RIGHTCORNERBRACKET",Sf="LEFTWHITECORNERBRACKET",xf="RIGHTWHITECORNERBRACKET",Ef="FULLWIDTHLESSTHAN",Tf="FULLWIDTHGREATERTHAN",kf="AMPERSAND",Cf="APOSTROPHE",_f="ASTERISK",Ei="AT",Af="BACKSLASH",Of="BACKTICK",Rf="CARET",_i="COLON",yy="COMMA",Mf="DOLLAR",Zn="DOT",Nf="EQUALS",by="EXCLAMATION",On="HYPHEN",ml="PERCENT",Df="PIPE",jf="PLUS",Lf="POUND",gl="QUERY",vy="QUOTE",qk="FULLWIDTHMIDDLEDOT",wy="SEMI",er="SLASH",yl="TILDE",zf="UNDERSCORE",Vk="EMOJI",Bf="SYM";var Kk=Object.freeze({__proto__:null,ALPHANUMERICAL:Hk,AMPERSAND:kf,APOSTROPHE:Cf,ASCIINUMERICAL:$k,ASTERISK:_f,AT:Ei,BACKSLASH:Af,BACKTICK:Of,CARET:Rf,CLOSEANGLEBRACKET:gf,CLOSEBRACE:pl,CLOSEBRACKET:df,CLOSEPAREN:pf,COLON:_i,COMMA:yy,DOLLAR:Mf,DOT:Zn,EMOJI:Vk,EQUALS:Nf,EXCLAMATION:by,FULLWIDTHGREATERTHAN:Tf,FULLWIDTHLEFTPAREN:yf,FULLWIDTHLESSTHAN:Ef,FULLWIDTHMIDDLEDOT:qk,FULLWIDTHRIGHTPAREN:bf,HYPHEN:On,LEFTCORNERBRACKET:vf,LEFTWHITECORNERBRACKET:Sf,LOCALHOST:Ll,NL:gy,NUM:my,OPENANGLEBRACKET:mf,OPENBRACE:hl,OPENBRACKET:ff,OPENPAREN:hf,PERCENT:ml,PIPE:Df,PLUS:jf,POUND:Lf,QUERY:gl,QUOTE:vy,RIGHTCORNERBRACKET:wf,RIGHTWHITECORNERBRACKET:xf,SCHEME:Iu,SEMI:wy,SLASH:er,SLASH_SCHEME:No,SYM:Bf,TILDE:yl,TLD:dg,UNDERSCORE:zf,UTLD:hg,UWORD:fg,WORD:jr,WS:pg});const Mr=/[a-z]/,Za=new RegExp("\\p{L}","u"),ym=new RegExp("\\p{Emoji}","u"),Nr=/\d/,bm=/\s/,Kx="\r",vm=`
`,HU="",qU="",wm="";let Ou=null,Ru=null;function VU(t=[]){const e={};Xt.groups=e;const n=new Xt;Ou==null&&(Ou=Fx(zU)),Ru==null&&(Ru=Fx(BU)),W(n,"'",Cf),W(n,"{",hl),W(n,"}",pl),W(n,"[",ff),W(n,"]",df),W(n,"(",hf),W(n,")",pf),W(n,"<",mf),W(n,">",gf),W(n,"",yf),W(n,"",bf),W(n,"",vf),W(n,"",wf),W(n,"",Sf),W(n,"",xf),W(n,"",Ef),W(n,"",Tf),W(n,"&",kf),W(n,"*",_f),W(n,"@",Ei),W(n,"`",Of),W(n,"^",Rf),W(n,":",_i),W(n,",",yy),W(n,"$",Mf),W(n,".",Zn),W(n,"=",Nf),W(n,"!",by),W(n,"-",On),W(n,"%",ml),W(n,"|",Df),W(n,"+",jf),W(n,"#",Lf),W(n,"?",gl),W(n,'"',vy),W(n,"/",er),W(n,";",wy),W(n,"~",yl),W(n,"_",zf),W(n,"\\",Af),W(n,"",qk);const r=rt(n,Nr,my,{[ag]:!0});rt(r,Nr,r);const i=rt(r,Mr,$k,{[dl]:!0}),o=rt(r,Za,Hk,{[sl]:!0}),l=rt(n,Mr,jr,{[lg]:!0});rt(l,Nr,i),rt(l,Mr,l),rt(i,Nr,i),rt(i,Mr,i);const u=rt(n,Za,fg,{[cg]:!0});rt(u,Mr),rt(u,Nr,o),rt(u,Za,u),rt(o,Nr,o),rt(o,Mr),rt(o,Za,o);const f=W(n,vm,gy,{[gm]:!0}),h=W(n,Kx,pg,{[gm]:!0}),p=rt(n,bm,pg,{[gm]:!0});W(n,wm,p),W(h,vm,f),W(h,wm,p),rt(h,bm,p),W(p,Kx),W(p,vm),rt(p,bm,p),W(p,wm,p);const m=rt(n,ym,Vk,{[Pk]:!0});W(m,"#"),rt(m,ym,m),W(m,HU,m);const b=W(m,qU);W(b,"#"),rt(b,ym,m);const v=[[Mr,l],[Nr,i]],w=[[Mr,null],[Za,u],[Nr,o]];for(let S=0;S<Ou.length;S++)vi(n,Ou[S],dg,jr,v);for(let S=0;S<Ru.length;S++)vi(n,Ru[S],hg,fg,w);bs(dg,{tld:!0,ascii:!0},e),bs(hg,{utld:!0,alpha:!0},e),vi(n,"file",Iu,jr,v),vi(n,"mailto",Iu,jr,v),vi(n,"http",No,jr,v),vi(n,"https",No,jr,v),vi(n,"ftp",No,jr,v),vi(n,"ftps",No,jr,v),bs(Iu,{scheme:!0,ascii:!0},e),bs(No,{slashscheme:!0,ascii:!0},e),t=t.sort((S,E)=>S[0]>E[0]?1:-1);for(let S=0;S<t.length;S++){const E=t[S][0],C=t[S][1]?{[UU]:!0}:{[IU]:!0};E.indexOf("-")>=0?C[ug]=!0:Mr.test(E)?Nr.test(E)?C[dl]=!0:C[lg]=!0:C[ag]=!0,Vx(n,E,E,C)}return Vx(n,"localhost",Ll,{ascii:!0}),n.jd=new Xt(Bf),{start:n,tokens:Object.assign({groups:e},Kk)}}function Fk(t,e){const n=KU(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=n.length,i=[];let o=0,l=0;for(;l<r;){let u=t,f=null,h=0,p=null,m=-1,b=-1;for(;l<r&&(f=u.go(n[l]));)u=f,u.accepts()?(m=0,b=0,p=u):m>=0&&(m+=n[l].length,b++),h+=n[l].length,o+=n[l].length,l++;o-=m,l-=b,h-=m,i.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return i}function KU(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),o,l=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function vi(t,e,n,r,i){let o;const l=e.length;for(let u=0;u<l-1;u++){const f=e[u];t.j[f]?o=t.j[f]:(o=new Xt(r),o.jr=i.slice(),t.j[f]=o),t=o}return o=new Xt(n),o.jr=i.slice(),t.j[e[l-1]]=o,o}function Fx(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let o=0;for(;i.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+o),10);l>0;l--)n.pop();r+=o}else n.push(t[r]),r++}return e}const zl={defaultProtocol:"http",events:null,format:Gx,formatHref:Gx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Sy(t,e=null){let n=Object.assign({},zl);t&&(n=Object.assign(n,t instanceof Sy?t.o:t));const r=n.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}Sy.prototype={o:zl,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:zl[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Gx(t){return t}function Gk(t,e){this.t="token",this.v=t,this.tk=e}Gk.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=zl.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),o=this.toFormattedString(t),l={},u=t.get("className",n,e),f=t.get("target",n,e),h=t.get("rel",n,e),p=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return l.href=r,u&&(l.class=u),f&&(l.target=f),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:i,attributes:l,content:o,eventListeners:m}}};function fd(t,e){class n extends Gk{constructor(i,o){super(i,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Jx=fd("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Wx=fd("text"),FU=fd("nl"),Mu=fd("url",{isLink:!0,toHref(t=zl.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ll&&t[1].t===_i}}),An=t=>new Xt(t);function GU({groups:t}){const e=t.domain.concat([kf,_f,Ei,Af,Of,Rf,Mf,Nf,On,my,ml,Df,jf,Lf,er,Bf,yl,zf]),n=[Cf,_i,yy,Zn,by,ml,gl,vy,wy,mf,gf,hl,pl,df,ff,hf,pf,yf,bf,vf,wf,Sf,xf,Ef,Tf],r=[kf,Cf,_f,Af,Of,Rf,Mf,Nf,On,hl,pl,ml,Df,jf,Lf,gl,er,Bf,yl,zf],i=An(),o=W(i,yl);ve(o,r,o),ve(o,t.domain,o);const l=An(),u=An(),f=An();ve(i,t.domain,l),ve(i,t.scheme,u),ve(i,t.slashscheme,f),ve(l,r,o),ve(l,t.domain,l);const h=W(l,Ei);W(o,Ei,h),W(u,Ei,h),W(f,Ei,h);const p=W(o,Zn);ve(p,r,o),ve(p,t.domain,o);const m=An();ve(h,t.domain,m),ve(m,t.domain,m);const b=W(m,Zn);ve(b,t.domain,m);const v=An(Jx);ve(b,t.tld,v),ve(b,t.utld,v),W(h,Ll,v);const w=W(m,On);W(w,On,w),ve(w,t.domain,m),ve(v,t.domain,m),W(v,Zn,b),W(v,On,w);const S=W(v,_i);ve(S,t.numeric,Jx);const E=W(l,On),T=W(l,Zn);W(E,On,E),ve(E,t.domain,l),ve(T,r,o),ve(T,t.domain,l);const C=An(Mu);ve(T,t.tld,C),ve(T,t.utld,C),ve(C,t.domain,l),ve(C,r,o),W(C,Zn,T),W(C,On,E),W(C,Ei,h);const _=W(C,_i),j=An(Mu);ve(_,t.numeric,j);const L=An(Mu),$=An();ve(L,e,L),ve(L,n,$),ve($,e,L),ve($,n,$),W(C,er,L),W(j,er,L);const U=W(u,_i),Y=W(f,_i),X=W(Y,er),re=W(X,er);ve(u,t.domain,l),W(u,Zn,T),W(u,On,E),ve(f,t.domain,l),W(f,Zn,T),W(f,On,E),ve(U,t.domain,L),W(U,er,L),W(U,gl,L),ve(re,t.domain,L),ve(re,e,L),W(re,er,L);const Ce=[[hl,pl],[ff,df],[hf,pf],[mf,gf],[yf,bf],[vf,wf],[Sf,xf],[Ef,Tf]];for(let we=0;we<Ce.length;we++){const[je,ye]=Ce[we],Se=W(L,je);W($,je,Se),W(Se,ye,L);const P=An(Mu);ve(Se,e,P);const J=An();ve(Se,n),ve(P,e,P),ve(P,n,J),ve(J,e,P),ve(J,n,J),W(P,ye,L),W(J,ye,L)}return W(i,Ll,C),W(i,gy,FU),{start:i,tokens:Kk}}function JU(t,e,n){let r=n.length,i=0,o=[],l=[];for(;i<r;){let u=t,f=null,h=null,p=0,m=null,b=-1;for(;i<r&&!(f=u.go(n[i].t));)l.push(n[i++]);for(;i<r&&(h=f||u.go(n[i].t));)f=null,u=h,u.accepts()?(b=0,m=u):b>=0&&b++,i++,p++;if(b<0)i-=p,i<r&&(l.push(n[i]),i++);else{l.length>0&&(o.push(Sm(Wx,e,l)),l=[]),i-=b,p-=b;const v=m.t,w=n.slice(i-p,i);o.push(Sm(v,e,w))}}return l.length>0&&o.push(Sm(Wx,e,l)),o}function Sm(t,e,n){const r=n[0].s,i=n[n.length-1].e,o=e.slice(r,i);return new t(o,n)}const WU=typeof console<"u"&&console&&console.warn||(()=>{}),YU="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Je={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function QU(){return Xt.groups={},Je.scanner=null,Je.parser=null,Je.tokenQueue=[],Je.pluginQueue=[],Je.customSchemes=[],Je.initialized=!1,Je}function Yx(t,e=!1){if(Je.initialized&&WU(`linkifyjs: already initialized - will not register custom scheme "${t}" ${YU}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Je.customSchemes.push([t,e])}function XU(){Je.scanner=VU(Je.customSchemes);for(let t=0;t<Je.tokenQueue.length;t++)Je.tokenQueue[t][1]({scanner:Je.scanner});Je.parser=GU(Je.scanner.tokens);for(let t=0;t<Je.pluginQueue.length;t++)Je.pluginQueue[t][1]({scanner:Je.scanner,parser:Je.parser});return Je.initialized=!0,Je}function xy(t){return Je.initialized||XU(),JU(Je.parser.start,t,Fk(Je.scanner.start,t))}xy.scan=Fk;function Jk(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Sy(n),i=xy(t),o=[];for(let l=0;l<i.length;l++){const u=i[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}var Ey="[\0- -\u2029]",ZU=new RegExp(Ey),eI=new RegExp(`${Ey}$`),tI=new RegExp(Ey,"g");function nI(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function rI(t){return new We({key:new Xe("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(h=>h.docChanged)&&!n.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!i||o)return;const{tr:l}=r,u=AT(n.doc,[...e]);if(LT(u).forEach(({newRange:h})=>{const p=XL(r.doc,h,v=>v.isTextblock);let m,b;if(p.length>1)m=p[0],b=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const v=r.doc.textBetween(h.from,h.to," "," ");if(!eI.test(v))return;m=p[0],b=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&b){const v=b.split(ZU).filter(Boolean);if(v.length<=0)return!1;const w=v[v.length-1],S=m.pos+b.lastIndexOf(w);if(!w)return!1;const E=xy(w).map(T=>T.toObject(t.defaultProtocol));if(!nI(E))return!1;E.filter(T=>T.isLink).map(T=>({...T,from:S+T.start+1,to:S+T.end+1})).filter(T=>r.schema.marks.code?!r.doc.rangeHasMark(T.from,T.to,r.schema.marks.code):!0).filter(T=>t.validate(T.value)).filter(T=>t.shouldAutoLink(T.value)).forEach(T=>{ty(T.from,T.to,r.doc).some(C=>C.mark.type===t.type)||l.addMark(T.from,T.to,t.type.create({href:T.href}))})}}),!!l.steps.length)return l}})}function iI(t){return new We({key:new Xe("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,o;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const f=r.target;if(!f)return!1;const h=t.editor.view.dom;l=f.closest("a"),l&&!h.contains(l)&&(l=null)}if(!l)return!1;let u=!1;if(t.enableClickSelection&&(u=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const f=jT(e.state,t.type.name),h=(i=l.href)!=null?i:f.href,p=(o=l.target)!=null?o:f.target;h&&(window.open(h,p),u=!0)}return u}}})}function sI(t){return new We({key:new Xe("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:o}=e,{selection:l}=o,{empty:u}=l;if(u)return!1;let f="";r.content.forEach(p=>{f+=p.textContent});const h=Jk(f,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===f);return!f||!h||i!==void 0&&!i(h.value)?!1:t.editor.commands.setMark(t.type,{href:h.href})}}})}function us(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(tI,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var oI=Ns.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Yx(t);return}Yx(t.scheme,t.optionalSlashes)})},onDestroy(){QU()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!us(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!us(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!us(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",gt(this.options.HTMLAttributes,t),0]:["a",gt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!us(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!us(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[As({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=Jk(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!us(l,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(rI({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!us(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(iI({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(sI({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),aI=Object.defineProperty,lI=(t,e)=>{for(var n in e)aI(t,n,{get:e[n],enumerable:!0})},cI="listItem",Qx="textStyle",Xx=/^\s*([-+*])\s$/,Wk=yn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",gt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cI,this.editor.getAttributes(Qx)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ko({find:Xx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ko({find:Xx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Qx),editor:this.editor})),[t]}}),Yk=yn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",gt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),u=e.parseChildren(l);n.push(...u)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>sy(t,e,r=>{var i,o;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((o=(i=r.meta)==null?void 0:i.parentAttrs)==null?void 0:o.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),uI={};lI(uI,{findListItemPos:()=>Kl,getNextListDepth:()=>Ty,handleBackspace:()=>mg,handleDelete:()=>gg,hasListBefore:()=>Qk,hasListItemAfter:()=>fI,hasListItemBefore:()=>Xk,listItemHasSubList:()=>Zk,nextListIsDeeper:()=>eC,nextListIsHigher:()=>tC});var Kl=(t,e)=>{const{$from:n}=e.selection,r=mt(t,e.schema);let i=null,o=n.depth,l=n.pos,u=null;for(;o>0&&u===null;)i=n.node(o),i.type===r?u=o:(o-=1,l-=1);return u===null?null:{$pos:e.doc.resolve(l),depth:u}},Ty=(t,e)=>{const n=Kl(t,e);if(!n)return!1;const[,r]=az(e,t,n.$pos.pos+4);return r},Qk=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),o=t.doc.resolve(i).node();return!(!o||!n.includes(o.type.name))},Xk=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},Zk=(t,e,n)=>{if(!n)return!1;const r=mt(t,e.schema);let i=!1;return n.descendants(o=>{o.type===r&&(i=!0)}),i},mg=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Bi(t.state,e)&&Qk(t.state,e,n)){const{$anchor:u}=t.state.selection,f=t.state.doc.resolve(u.before()-1),h=[];f.node().descendants((b,v)=>{b.type.name===e&&h.push({node:b,pos:v})});const p=h.at(-1);if(!p)return!1;const m=t.state.doc.resolve(f.start()+p.pos+1);return t.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!Bi(t.state,e)||!fz(t.state))return!1;const r=Kl(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=Zk(e,t.state,o);return Xk(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},eC=(t,e)=>{const n=Ty(t,e),r=Kl(t,e);return!r||!n?!1:n>r.depth},tC=(t,e)=>{const n=Ty(t,e),r=Kl(t,e);return!r||!n?!1:n<r.depth},gg=(t,e)=>{if(!Bi(t.state,e)||!uz(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:eC(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():tC(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},fI=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},nC=et.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&gg(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&gg(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&mg(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&mg(t,n,r)&&(e=!0)}),e}}}}),Zx=/^(\s*)(\d+)\.\s+(.*)$/,dI=/^\s/;function hI(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],o=i.match(Zx);if(!o)break;const[,l,u,f]=o,h=l.length;let p=f,m=n+1;const b=[i];for(;m<t.length;){const v=t[m];if(v.match(Zx))break;if(v.trim()==="")b.push(v),p+=`
`,m+=1;else if(v.match(dI))b.push(v),p+=`
${v.slice(h+2)}`,m+=1;else break}e.push({indent:h,number:parseInt(u,10),content:p.trim(),raw:b.join(`
`)}),r=m,n=m}return[e,r]}function rC(t,e,n){var r;const i=[];let o=0;for(;o<t.length;){const l=t[o];if(l.indent===e){const u=l.content.split(`
`),f=((r=u[0])==null?void 0:r.trim())||"",h=[];f&&h.push({type:"paragraph",raw:f,tokens:n.inlineTokens(f)});const p=u.slice(1).join(`
`).trim();if(p){const v=n.blockTokens(p);h.push(...v)}let m=o+1;const b=[];for(;m<t.length&&t[m].indent>e;)b.push(t[m]),m+=1;if(b.length>0){const v=Math.min(...b.map(S=>S.indent)),w=rC(b,v,n);h.push({type:"list",ordered:!0,start:b[0].number,items:w,raw:b.map(S=>S.raw).join(`
`)})}i.push({type:"list_item",raw:l.raw,tokens:h}),o=m}else o+=1}return i}function pI(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=e.parseChildren([i]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([i]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var mI="listItem",e1="textStyle",t1=/^(\d+)\.\s$/,iC=yn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",gt(this.options.HTMLAttributes,n),0]:["ol",gt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?pI(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[o,l]=hI(i);if(o.length===0)return;const u=rC(o,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:u,raw:i.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(mI,this.editor.getAttributes(e1)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ko({find:t1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ko({find:t1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(e1)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),gI=/^\s*(\[([( |x])?\])\s$/,yI=yn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",gt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return sy(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),f=document.createElement("div"),h=m=>{var b,v;u.ariaLabel=((v=(b=this.options.a11y)==null?void 0:b.checkboxLabel)==null?void 0:v.call(b,m,u.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};h(t),o.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",m=>m.preventDefault()),u.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:b}=m.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:v})=>{const w=n();if(typeof w!="number")return!1;const S=v.doc.nodeAt(w);return v.setNodeMarkup(w,void 0,{...S?.attrs,checked:b}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,b)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,b])=>{i.setAttribute(m,b)}),i.dataset.checked=t.attrs.checked,u.checked=t.attrs.checked,o.append(u,l),i.append(o,f),Object.entries(e).forEach(([m,b])=>{i.setAttribute(m,b)});let p=new Set(Object.keys(e));return{dom:i,contentDOM:f,update:m=>{if(m.type!==this.type)return!1;i.dataset.checked=m.attrs.checked,u.checked=m.attrs.checked,h(m);const b=r.extensionManager.attributes,v=Dl(m,b),w=new Set(Object.keys(v)),S=this.options.HTMLAttributes;return p.forEach(E=>{w.has(E)||(E in S?i.setAttribute(E,S[E]):i.removeAttribute(E))}),Object.entries(v).forEach(([E,T])=>{T==null?E in S?i.setAttribute(E,S[E]):i.removeAttribute(E):i.setAttribute(E,T)}),p=w,!0}}}},addInputRules(){return[Ko({find:gI,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),bI=yn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",gt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const l=tg(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,f)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:f}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(o)},i=tg(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,l)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:l}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});et.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Wk.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Yk.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(nC.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(iC.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(yI.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(bI.configure(this.options.taskList)),t}});var n1="&nbsp;",vI="",wI=yn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",gt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===n1||r[0].text===vI)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?n1:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),SI=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,xI=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,EI=Ns.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",gt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Vo({find:SI,type:this.type})]},addPasteRules(){return[As({find:xI,type:this.type})]}}),TI=yn.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),kI=Ns.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",gt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const o=i[2].trim();return{type:"underline",raw:i[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function CI(t={}){return new We({view(e){return new _I(e,t)}})}class _I{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=l=>{this[i](l)};return e.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,o=i.getBoundingClientRect(),l=o.width/i.offsetWidth,u=o.height/i.offsetHeight;if(n){let m=e.nodeBefore,b=e.nodeAfter;if(m||b){let v=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(v){let w=v.getBoundingClientRect(),S=m?w.bottom:w.top;m&&b&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*u;r={left:w.left,right:w.right,top:S-E,bottom:S+E}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*l;r={left:m.left-b,right:m.left+b,top:m.top,bottom:m.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let h,p;if(!f||f==document.body&&getComputedStyle(f).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=f.getBoundingClientRect(),b=m.width/f.offsetWidth,v=m.height/f.offsetHeight;h=m.left-f.scrollLeft*b,p=m.top-f.scrollTop*v}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!o){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=wE(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class st extends de{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return st.valid(r)?new st(r):de.near(r)}content(){return Q.empty}eq(e){return e instanceof st&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new st(e.resolve(n.pos))}getBookmark(){return new ky(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!AI(e)||!OI(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&st.valid(e))return e;let i=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(n>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=n;let f=e.doc.resolve(i);if(st.valid(f))return f}for(;;){let l=n>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!le.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*n),r=!1;continue e}break}o=l,i+=n;let u=e.doc.resolve(i);if(st.valid(u))return u}return null}}}st.prototype.visible=!1;st.findFrom=st.findGapCursorFrom;de.jsonID("gapcursor",st);class ky{constructor(e){this.pos=e}map(e){return new ky(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return st.valid(n)?new st(n):de.near(n)}}function sC(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function AI(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||sC(i.type))return!0;if(i.inlineContent)return!1}}return!0}function OI(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||sC(i.type))return!0;if(i.inlineContent)return!1}}return!0}function RI(){return new We({props:{decorations:jI,createSelectionBetween(t,e,n){return e.pos==n.pos&&st.valid(n)?new st(n):null},handleClick:NI,handleKeyDown:MI,handleDOMEvents:{beforeinput:DI}}})}const MI=Gg({ArrowLeft:Nu("horiz",-1),ArrowRight:Nu("horiz",1),ArrowUp:Nu("vert",-1),ArrowDown:Nu("vert",1)});function Nu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,o){let l=r.selection,u=e>0?l.$to:l.$from,f=l.empty;if(l instanceof he){if(!o.endOfTextblock(n)||u.depth==0)return!1;f=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=st.findGapCursorFrom(u,e,f);return h?(i&&i(r.tr.setSelection(new st(h))),!0):!1}}function NI(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!st.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&le.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new st(r))),!0)}function DI(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof st))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=G.empty;for(let l=r.length-1;l>=0;l--)i=G.from(r[l].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new Q(i,0,0));return o.setSelection(he.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function jI(t){if(!(t.selection instanceof st))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ze.create(t.doc,[Ht.widget(t.selection.head,e,{key:"gapcursor"})])}var Uf=200,Tt=function(){};Tt.prototype.append=function(e){return e.length?(e=Tt.from(e),!this.length&&e||e.length<Uf&&this.leafAppend(e)||this.length<Uf&&e.leafPrepend(this)||this.appendInner(e)):this};Tt.prototype.prepend=function(e){return e.length?Tt.from(e).append(this):this};Tt.prototype.appendInner=function(e){return new LI(this,e)};Tt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Tt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Tt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Tt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Tt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(o,l){return i.push(e(o,l))},n,r),i};Tt.from=function(e){return e instanceof Tt?e:e&&e.length?new oC(e):Tt.empty};var oC=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,o){return i==0&&o==this.length?this:new e(this.values.slice(i,o))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,o,l,u){for(var f=o;f<l;f++)if(i(this.values[f],u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,l,u){for(var f=o-1;f>=l;f--)if(i(this.values[f],u+f)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Uf)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Uf)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Tt);Tt.empty=new oC([]);var LI=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,o,l){var u=this.left.length;if(i<u&&this.left.forEachInner(r,i,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(i-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,o,l){var u=this.left.length;if(i>u&&this.right.forEachInvertedInner(r,i-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(i,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var o=this.left.length;return i<=o?this.left.slice(r,i):r>=o?this.right.slice(r-o,i-o):this.left.slice(r,o).append(this.right.slice(0,i-o))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Tt);const zI=500;class $n{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;n&&(i=this.remapping(r,this.items.length),o=i.maps.length);let l=e.tr,u,f,h=[],p=[];return this.items.forEach((m,b)=>{if(!m.step){i||(i=this.remapping(r,b+1),o=i.maps.length),o--,p.push(m);return}if(i){p.push(new tr(m.map));let v=m.step.map(i.slice(o)),w;v&&l.maybeStep(v).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],h.push(new tr(w,void 0,void 0,h.length+p.length))),o--,w&&i.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return u=i?m.selection.map(i.slice(o)):m.selection,f=new $n(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:l,selection:u}}addTransform(e,n,r,i){let o=[],l=this.eventCount,u=this.items,f=!i&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),b=new tr(e.mapping.maps[p],m,n),v;(v=f&&f.merge(b))&&(b=v,p?o.pop():u=u.slice(0,u.length-1)),o.push(b),n&&(l++,n=void 0),i||(f=b)}let h=l-r.depth;return h>UI&&(u=BI(u,h),l-=h),new $n(u.append(o),l)}remapping(e,n){let r=new _l;return this.items.forEach((i,o)=>{let l=i.mirrorOffset!=null&&o-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new $n(this.items.append(e.map(n=>new tr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(b=>{b.selection&&u--},i);let f=n;this.items.forEach(b=>{let v=o.getMirror(--f);if(v==null)return;l=Math.min(l,v);let w=o.maps[v];if(b.step){let S=e.steps[v].invert(e.docs[v]),E=b.selection&&b.selection.map(o.slice(f+1,v));E&&u++,r.push(new tr(w,S,E))}else r.push(new tr(w))},i);let h=[];for(let b=n;b<l;b++)h.push(new tr(o.maps[b]));let p=this.items.slice(0,i).append(h).append(r),m=new $n(p,u);return m.emptyItemCount()>zI&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)i.push(l),l.selection&&o++;else if(l.step){let f=l.step.map(n.slice(r)),h=f&&f.getMap();if(r--,h&&n.appendMap(h,r),f){let p=l.selection&&l.selection.map(n.slice(r));p&&o++;let m=new tr(h.invert(),f,p),b,v=i.length-1;(b=i.length&&i[v].merge(m))?i[v]=b:i.push(m)}}else l.map&&r--},this.items.length,0),new $n(Tt.from(i.reverse()),o)}}$n.empty=new $n(Tt.empty,0);function BI(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class tr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new tr(n.getMap().invert(),n,this.selection)}}}class Ti{constructor(e,n,r,i,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}}const UI=20;function II(t,e,n,r){let i=n.getMeta(Es),o;if(i)return i.historyState;n.getMeta(HI)&&(t=new Ti(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(Es))return l.getMeta(Es).redo?new Ti(t.done.addTransform(n,void 0,r,Pu(e)),t.undone,r1(n.mapping.maps),t.prevTime,t.prevComposition):new Ti(t.done,t.undone.addTransform(n,void 0,r,Pu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),f=t.prevTime==0||!l&&t.prevComposition!=u&&(t.prevTime<(n.time||0)-r.newGroupDelay||!PI(n,t.prevRanges)),h=l?xm(t.prevRanges,n.mapping):r1(n.mapping.maps);return new Ti(t.done.addTransform(n,f?e.selection.getBookmark():void 0,r,Pu(e)),$n.empty,h,n.time,u??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Ti(t.done.rebased(n,o),t.undone.rebased(n,o),xm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ti(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),xm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function PI(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&i>=e[o]&&(n=!0)}),n}function r1(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,o,l)=>e.push(o,l));return e}function xm(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function $I(t,e,n){let r=Pu(e),i=Es.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),i,r),f=new Ti(n?u:o.remaining,n?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Es,{redo:n,historyState:f})}let Em=!1,i1=null;function Pu(t){let e=t.plugins;if(i1!=e){Em=!1,i1=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Em=!0;break}}return Em}const Es=new Xe("history"),HI=new Xe("closeHistory");function qI(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new We({key:Es,state:{init(){return new Ti($n.empty,$n.empty,null,0,-1)},apply(e,n,r){return II(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?lC:r=="historyRedo"?cC:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function aC(t,e){return(n,r)=>{let i=Es.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let o=$I(i,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const lC=aC(!1,!0),cC=aC(!0,!0);et.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new We({key:new Xe("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const l=o-i,u=0,f=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(u,f);return t=!0,h}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,f=o-r,h=u-f,p=u;return e.deleteRange(h,p),!(this.storage.characters({node:e.doc})>r)}})]}});var VI=et.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[CI(this.options)]}});et.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new We({key:new Xe("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return Ze.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((f,h)=>{if(f.isText)return;if(!(i>=h&&i<=h+f.nodeSize-1))return!1;l+=1});let u=0;return t.descendants((f,h)=>{if(f.isText||!(i>=h&&i<=h+f.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";o.push(Ht.node(h,h+f.nodeSize,{class:this.options.className}))}),Ze.create(t,o)}}})]}});var KI=et.create({name:"gapCursor",addProseMirrorPlugins(){return[RI()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ue(oe(t,"allowGapCursor",n)))!=null?e:null}}}),s1="placeholder";function FI(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}et.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:s1,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${FI(this.options.dataAttribute)}`:`data-${s1}`;return[new We({key:new Xe("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=n,o=[];if(!r)return null;const l=this.editor.isEmpty;return e.descendants((u,f)=>{const h=i>=f&&i<=f+u.nodeSize,p=!u.isLeaf&&rd(u);if((h||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];l&&m.push(this.options.emptyEditorClass);const b=Ht.node(f,f+u.nodeSize,{class:m.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:u,pos:f,hasAnchor:h}):this.options.placeholder});o.push(b)}return this.options.includeChildren}),Ze.create(e,o)}}})]}});et.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new We({key:new Xe("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||zT(n.selection)||t.view.dragging?null:Ze.create(n.doc,[Ht.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function o1({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var GI=et.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Xe(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new We({key:e,appendTransaction:(i,o,l)=>{const{doc:u,tr:f,schema:h}=l,p=e.getState(l),m=u.content.size,b=h.nodes[n];if(p)return f.insert(m,b.create())},state:{init:(i,o)=>{const l=o.tr.doc.lastChild;return!o1({node:l,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const l=i.doc.lastChild;return!o1({node:l,types:r})}}})]}}),JI=et.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>lC(t,e),redo:()=>({state:t,dispatch:e})=>cC(t,e)}},addProseMirrorPlugins(){return[qI(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),WI=et.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(wU.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(mU.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Wk.configure(this.options.bulletList)),this.options.code!==!1&&i.push(EU.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(CU.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(_U.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(VI.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(KI.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(AU.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(OU.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(JI.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(RU.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(LU.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Yk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(nC.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(oI.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(iC.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(wI.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(EI.configure(this.options.strike)),this.options.text!==!1&&i.push(TI.configure(this.options.text)),this.options.underline!==!1&&i.push(kI.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(GI.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),YI=WI;function QI({value:t,onChange:e}){const n=cU({extensions:[YI.configure({heading:!1,bulletList:!1,orderedList:!1,listItem:!1})],content:t,onUpdate:({editor:r})=>e(r.getHTML())});return n?O.jsxs("div",{className:"space-y-2",children:[O.jsxs("div",{role:"toolbar","aria-label":"Text formatting toolbar",className:`
          flex gap-2 bg-gray-100 border border-gray-300 
          rounded-3xl lg:rounded-2xl p-2 shadow-inner
        `,children:[O.jsx(a1,{"aria-label":"Bold",active:n.isActive("bold"),onClick:()=>n.chain().focus().toggleBold().run(),children:O.jsx("b",{children:"B"})}),O.jsx(a1,{"aria-label":"Italic",active:n.isActive("italic"),onClick:()=>n.chain().focus().toggleItalic().run(),children:O.jsx("i",{children:"I"})})]}),O.jsx("label",{htmlFor:"editor",className:"sr-only",children:"Post content"}),O.jsx("div",{className:`
          bg-white border border-gray-300 rounded-3xl lg:rounded-2xl 
          p-3 shadow-inner min-h-[100px]
        `,children:O.jsx(Nk,{id:"editor",editor:n})})]}):null}function a1({children:t,onClick:e,active:n,...r}){return O.jsx("button",{...r,type:"button",onClick:e,className:`
        w-10 h-10 flex items-center justify-center rounded-xl text-sm
        transition shadow-sm select-none
        focus-visible:ring-2 focus-visible:ring-teal-500 focus-visible:ring-offset-2

        ${n?"bg-teal-700 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}
      `,children:t})}function l1(){const{user:t,profile:e}=Rs(),n=e?.role==="admin",[r,i]=N.useState([]),[o,l]=N.useState(""),[u,f]=N.useState(null),[h,p]=N.useState(!1),[m,b]=N.useState(!0),{showToast:v}=Os();N.useEffect(()=>{w()},[]);async function w(){const{data:T,error:C}=await Ie.from("posts").select("*, profiles(email)").order("created_at",{ascending:!1});C||i(T||[]),b(!1)}async function S(){if(!o.trim()&&!u){v({title:"Write something or add a photo",type:"error"});return}p(!0);let T=null;if(u){const _=`${t.id}-${Date.now()}-${u.name}`,{error:j}=await Ie.from("post-images").upload(_,u);if(j){v({title:"Upload failed",type:"error"}),p(!1);return}T=Ie.storage.from("post-images").getPublicUrl(_).data.publicUrl}const{error:C}=await Ie.from("posts").insert({user_id:t.id,content:o,image_url:T});C?v({title:"Post failed",type:"error"}):(l(""),f(null),w()),p(!1)}async function E(T){confirm("Delete this post?")&&(await Ie.from("posts").delete().eq("id",T),w())}return O.jsxs("div",{className:"space-y-10",children:[O.jsxs("div",{className:`bg-white rounded-3xl lg:rounded-2xl p-6 shadow-xl border border-gray-200 
                   space-y-6`,children:[O.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-teal-800 flex items-center gap-2",children:"Update the Garden "}),O.jsx(QI,{value:o,onChange:l}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-sm lg:text-base font-semibold text-gray-600",children:"Add Image"}),O.jsx("label",{htmlFor:"post-image-upload",className:`cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 
                       px-4 py-2 rounded-xl text-sm lg:text-base shadow border border-gray-300 
                       inline-block focus-visible:ring-2 focus-visible:ring-teal-500`,children:"Choose File"}),O.jsx("input",{id:"post-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:T=>f(T.target.files[0])}),u&&O.jsx("p",{className:"text-xs lg:text-sm text-gray-500",children:u.name})]}),O.jsx(or,{"aria-label":"Post update",className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4 
                     rounded-xl shadow-lg font-semibold text-sm lg:text-base`,onClick:S,disabled:h,children:h?"Posting":"Post"})]}),m?O.jsx("p",{className:"text-center text-gray-400",children:"Loading feed"}):O.jsx("div",{className:"space-y-10 pb-24",children:r.map(T=>O.jsx(XI,{post:T,user:t,isAdmin:n,onDelete:()=>E(T.id)},T.id))})]})}function XI({post:t,user:e,isAdmin:n,onDelete:r}){return O.jsxs("div",{className:`bg-white rounded-3xl lg:rounded-2xl p-6 shadow-lg 
                 border border-gray-200 space-y-5`,role:"region","aria-label":`Post by ${t.profiles?.email}`,children:[O.jsxs("div",{className:"flex items-start gap-3",children:[O.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 rounded-full bg-teal-700 text-white flex items-center 
                     justify-center font-bold text-sm`,children:t.profiles?.email?.charAt(0).toUpperCase()}),O.jsxs("div",{className:"flex flex-col",children:[O.jsx("p",{className:"font-semibold text-teal-800 text-sm lg:text-base",children:t.profiles?.email?.split("@")[0]}),O.jsx("p",{className:"text-[10px] lg:text-xs text-gray-500",children:new Date(t.created_at).toLocaleDateString()})]}),n&&O.jsx("button",{"aria-label":"Delete post",onClick:i=>{i.stopPropagation(),r()},className:`ml-auto w-10 h-10 flex items-center justify-center rounded-xl
                       text-red-500 hover:text-red-700 text-lg focus-visible:ring-2 
                       focus-visible:ring-red-500`,children:""})]}),O.jsx("div",{className:"prose prose-sm lg:prose-base text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:t.content}}),t.image_url&&O.jsx("img",{src:t.image_url,alt:"",className:"rounded-3xl lg:rounded-2xl border border-gray-200 shadow-md"}),O.jsx(ZI,{postId:t.id,user:e,isAdmin:n})]})}function ZI({postId:t,user:e,isAdmin:n}){const{showToast:r}=Os(),[i,o]=N.useState([]),[l,u]=N.useState("");async function f(){const{data:m}=await Ie.from("comments").select("*, profiles(email)").eq("post_id",t).order("created_at",{ascending:!0});o(m||[])}N.useEffect(()=>{f()},[]);async function h(m){m.preventDefault(),l.trim()&&(await Ie.from("comments").insert({post_id:t,user_id:e.id,content:l}),u(""),f())}async function p(m){await Ie.from("comments").delete().eq("id",m),f()}return O.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[i.map(m=>O.jsxs("div",{className:`
            bg-gray-50 p-3 rounded-3xl lg:rounded-2xl border border-gray-200 
            shadow-sm relative
          `,role:"group","aria-label":`Comment by ${m.profiles?.email}`,children:[O.jsx("p",{className:"text-xs lg:text-sm font-semibold text-teal-800",children:m.profiles?.email?.split("@")[0]}),O.jsx("p",{className:"text-sm lg:text-base text-gray-700",children:m.content}),n&&O.jsx("button",{"aria-label":"Delete comment",onClick:()=>p(m.id),className:`
                absolute top-2 right-3 w-8 h-8 flex items-center justify-center 
                rounded-xl text-red-400 hover:text-red-600 text-xs 
                focus-visible:ring-2 focus-visible:ring-red-500
              `,children:""})]},m.id)),O.jsxs("form",{onSubmit:h,className:"flex gap-2",children:[O.jsx("label",{htmlFor:`comment-input-${t}`,className:"sr-only",children:"Add a comment"}),O.jsx("input",{id:`comment-input-${t}`,className:`flex-1 p-2 rounded-xl lg:rounded-lg border border-gray-300 
                     text-sm lg:text-base shadow-inner focus-visible:ring-2 
                     focus-visible:ring-teal-700`,placeholder:"Write a comment",value:l,onChange:m=>u(m.target.value)}),O.jsx(or,{"aria-label":"Submit comment",className:`bg-teal-700 hover:bg-teal-800 text-white rounded-xl px-4 
                     w-12 h-12 flex items-center justify-center text-lg`,children:""})]})]})}function e4(){const{user:t,profile:e}=Rs(),n=e?.role==="admin",{showToast:r}=Os(),[i,o]=N.useState([]),[l,u]=N.useState(!1),[f,h]=N.useState("");async function p(){const{data:b}=await Ie.from("questions").select("*, profiles(email)").order("created_at",{ascending:!1});o(b||[])}async function m(b){if(b.preventDefault(),!f.trim())return;const{error:v}=await Ie.from("questions").insert({user_id:t.id,title:f});v?r({title:"Could not post question",type:"error"}):(h(""),u(!1),p())}return N.useEffect(()=>{p()},[]),O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"flex justify-between items-center px-1",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-100 text-teal-700 rounded-3xl lg:rounded-2xl 
                       flex items-center justify-center shadow-sm`,children:""}),O.jsx("h1",{className:"text-xl lg:text-3xl font-bold text-teal-800",children:"Q & A"})]}),O.jsx(or,{"aria-label":l?"Cancel question form":"Open question form",onClick:()=>u(!l),className:`bg-teal-700 hover:bg-teal-800 text-white px-4 py-2 
                     rounded-xl lg:rounded-lg shadow-md text-xs lg:text-sm 
                     min-h-[44px]`,children:l?"Cancel":"Ask Question"})]}),l&&O.jsxs("form",{onSubmit:m,className:`bg-white p-6 rounded-3xl lg:rounded-2xl border border-gray-200 
                     shadow-md space-y-4 animate-fadeIn`,"aria-labelledby":"ask-question-title",children:[O.jsx("label",{id:"ask-question-title",htmlFor:"question-input",className:"sr-only",children:"Ask your question"}),O.jsx("textarea",{id:"question-input",className:`w-full p-4 rounded-xl border border-gray-300 shadow-inner 
                       text-sm lg:text-base h-24 focus-visible:ring-2 
                       focus-visible:ring-teal-700`,placeholder:"What is your question?",value:f,onChange:b=>h(b.target.value)}),O.jsx(or,{"aria-label":"Submit question",className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4 
                       rounded-xl shadow-lg text-xs lg:text-base`,children:"Submit Question"})]}),O.jsx("div",{className:"space-y-4",children:i.map(b=>O.jsx(t4,{question:b,user:t,isAdmin:n,onDelete:()=>o(v=>v.filter(w=>w.id!==b.id))},b.id))})]})}function t4({question:t,user:e,isAdmin:n,onDelete:r}){const[i,o]=N.useState(!1),[l,u]=N.useState([]),[f,h]=N.useState(""),{showToast:p}=Os();async function m(){const{data:S}=await Ie.from("answers").select("*, profiles(email)").eq("question_id",t.id).order("created_at",{ascending:!0});u(S||[])}async function b(){if(!confirm("Delete this question?"))return;const{data:S,error:E,count:T}=await Ie.from("questions").delete({count:"exact"}).eq("id",t.id);console.log("DELETE RESULT:",{data:S,error:E,count:T}),E?p({title:"Error deleting question",type:"error"}):(r(),p({title:"Question deleted",type:"success"}))}async function v(S){await Ie.from("answers").delete().eq("id",S),m()}async function w(S){S.preventDefault(),f.trim()&&(await Ie.from("answers").insert({question_id:t.id,user_id:e.id,content:f}),h(""),m())}return O.jsxs("div",{className:`bg-white rounded-3xl lg:rounded-2xl border border-gray-200 
                 shadow-md overflow-hidden`,role:"region","aria-labelledby":`question-${t.id}`,children:[O.jsxs("div",{className:"flex items-start p-5 gap-4",children:[O.jsx("div",{id:`question-${t.id}`,className:"flex-1 cursor-pointer",onClick:()=>{o(!i),i||m()},children:O.jsx("h2",{className:"font-semibold text-gray-800 text-sm lg:text-base",children:t.title})}),n&&O.jsx("button",{"aria-label":"Delete question",onClick:S=>{S.stopPropagation(),b()},className:`w-10 h-10 flex items-center justify-center rounded-xl 
                       text-red-500 hover:text-red-700 text-lg 
                       focus-visible:ring-2 focus-visible:ring-red-500`,children:""}),O.jsx("button",{"aria-expanded":i,"aria-controls":`answers-${t.id}`,"aria-label":i?"Collapse answers":"Expand answers",onClick:S=>{S.stopPropagation(),o(!i),i||m()},className:`w-10 h-10 flex items-center justify-center rounded-xl 
                     text-gray-400 hover:text-gray-600 
                     focus-visible:ring-2 focus-visible:ring-teal-500`,children:i?"":""})]}),O.jsxs("div",{className:"px-5 pb-2 text-xs lg:text-sm flex items-center gap-2 text-gray-500",children:[O.jsx("span",{className:`bg-teal-100 text-teal-700 px-2 py-0.5 rounded-md 
                         uppercase font-bold text-[10px] lg:text-xs`,children:"Question"}),O.jsx("span",{children:t.profiles?.email?.split("@")[0]})]}),i&&O.jsxs("div",{id:`answers-${t.id}`,className:"bg-gray-50 p-5 border-t border-gray-200 space-y-4",children:[l.length===0&&O.jsx("p",{className:"text-xs lg:text-sm text-gray-400 italic",children:"No answers yet"}),l.map(S=>O.jsxs("div",{className:`bg-white p-3 rounded-3xl lg:rounded-2xl 
                         border border-gray-200 shadow-sm relative`,role:"group","aria-label":`Answer by ${S.profiles?.email}`,children:[O.jsx("p",{className:"text-sm lg:text-base text-gray-700",children:S.content}),O.jsxs("p",{className:"text-[10px] lg:text-xs text-teal-700 font-bold uppercase mt-1",children:[" ",S.profiles?.email?.split("@")[0]]}),n&&O.jsx("button",{"aria-label":"Delete answer",onClick:E=>{E.stopPropagation(),v(S.id)},className:`absolute top-2 right-3 w-8 h-8 flex items-center 
                             justify-center rounded-xl text-red-400 hover:text-red-600 
                             text-xs focus-visible:ring-2 focus-visible:ring-red-500`,children:""})]},S.id)),O.jsxs("form",{onSubmit:w,className:"flex gap-2",children:[O.jsx("label",{htmlFor:`answer-input-${t.id}`,className:"sr-only",children:"Your answer"}),O.jsx("input",{id:`answer-input-${t.id}`,className:`flex-1 bg-white border border-gray-300 rounded-xl lg:rounded-lg 
                         px-4 py-2 text-sm lg:text-base shadow-inner 
                         focus-visible:ring-2 focus-visible:ring-teal-700`,placeholder:"Write an answer",value:f,onChange:S=>h(S.target.value)}),O.jsx(or,{"aria-label":"Submit answer",className:`bg-teal-700 hover:bg-teal-800 text-white rounded-xl px-4 
                         w-12 h-12 flex items-center justify-center text-lg`,children:""})]})]})]})}function n4(){const{profile:t}=Rs(),e=t?.role==="admin",{showToast:n}=Os(),[r,i]=N.useState([]),[o,l]=N.useState(!1),[u,f]=N.useState(""),[h,p]=N.useState(""),[m,b]=N.useState("Guide");async function v(){const{data:E}=await Ie.from("resources").select("*").order("created_at",{ascending:!1});i(E||[])}N.useEffect(()=>{v()},[]);async function w(E){if(E.preventDefault(),!e){n({title:"Only admins can add resources",type:"error"});return}if(!u.trim()||!h.trim())return;const{error:T}=await Ie.from("resources").insert({title:u,url:h,category:m});T?n({title:"Failed to add resource",type:"error"}):(f(""),p(""),b("Guide"),l(!1),v(),n({title:"Resource added",type:"success"}))}async function S(E){confirm("Delete this resource?")&&(await Ie.from("resources").delete().eq("id",E),v())}return O.jsxs("div",{className:"space-y-6",children:[O.jsxs("div",{className:"flex justify-between items-center",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-100 text-teal-700 
                       rounded-3xl lg:rounded-2xl flex items-center justify-center shadow`,children:""}),O.jsx("h1",{className:"text-xl lg:text-3xl font-bold text-teal-800",children:"Library"})]}),e&&O.jsx(or,{"aria-label":o?"Cancel add resource form":"Add new resource",className:`bg-teal-700 hover:bg-teal-800 text-white 
                       px-4 py-2 rounded-xl lg:rounded-lg shadow-md 
                       text-xs lg:text-sm min-h-[44px]`,onClick:()=>l(!o),children:o?"Cancel":"Add"})]}),o&&O.jsxs("form",{onSubmit:w,"aria-labelledby":"add-resource-title",className:`bg-white p-6 rounded-3xl lg:rounded-2xl border border-gray-200 
                     shadow-md space-y-4 animate-fadeIn`,children:[O.jsx("label",{id:"add-resource-title",className:"sr-only",children:"Add a new resource"}),O.jsx("label",{htmlFor:"resource-title",className:"sr-only",children:"Resource Title"}),O.jsx("input",{id:"resource-title",type:"text",placeholder:"Title",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl lg:rounded-lg 
                       shadow-inner text-sm lg:text-base focus-visible:ring-2 
                       focus-visible:ring-teal-700`,value:u,onChange:E=>f(E.target.value)}),O.jsx("label",{htmlFor:"resource-url",className:"sr-only",children:"Resource URL"}),O.jsx("input",{id:"resource-url",type:"text",placeholder:"URL",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl lg:rounded-lg 
                       shadow-inner text-sm lg:text-base focus-visible:ring-2 
                       focus-visible:ring-teal-700`,value:h,onChange:E=>p(E.target.value)}),O.jsx("label",{htmlFor:"resource-category",className:"sr-only",children:"Resource Category"}),O.jsxs("select",{id:"resource-category",className:`w-full p-3 lg:p-4 border border-gray-300 rounded-xl lg:rounded-lg
                       text-sm lg:text-base bg-white shadow-inner focus-visible:ring-2 
                       focus-visible:ring-teal-700`,value:m,onChange:E=>b(E.target.value),children:[O.jsx("option",{children:"Guide"}),O.jsx("option",{children:"Curriculum"}),O.jsx("option",{children:"Video"})]}),O.jsx(or,{"aria-label":"Submit new resource",className:`w-full bg-teal-700 hover:bg-teal-800 text-white 
                       py-3 lg:py-4 rounded-xl shadow-lg text-xs lg:text-base`,children:"Add Resource"})]}),O.jsx("div",{className:"space-y-4 pb-24",children:r.map(E=>O.jsxs("div",{className:`bg-white p-5 rounded-3xl lg:rounded-2xl border border-gray-200 
                       shadow-md flex justify-between items-center`,role:"group","aria-label":`Resource titled ${E.title}`,children:[O.jsxs("a",{href:E.url,target:"_blank",rel:"noopener noreferrer","aria-label":`Open resource: ${E.title}`,className:`flex items-center gap-4 flex-1 hover:underline 
                         focus-visible:ring-2 focus-visible:ring-teal-700 rounded-lg`,children:[O.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-100 text-teal-700 rounded-xl 
                           flex items-center justify-center shadow`,children:""}),O.jsxs("div",{className:"flex flex-col",children:[O.jsx("p",{className:"font-semibold text-gray-800 text-sm lg:text-base",children:E.title}),O.jsx("span",{className:"text-[10px] lg:text-xs uppercase font-bold text-teal-700",children:E.category})]})]}),e&&O.jsx("button",{"aria-label":`Delete resource titled ${E.title}`,onClick:()=>S(E.id),className:`
                  w-10 h-10 flex items-center justify-center rounded-xl 
                  text-red-400 hover:text-red-600 text-base 
                  focus-visible:ring-2 focus-visible:ring-red-500 ml-2
                `,children:""})]},E.id))})]})}function r4(){const{showToast:t}=Os(),[e,n]=N.useState([]);async function r(){const{data:u}=await Ie.from("profiles").select("*").order("created_at",{ascending:!1});n(u||[])}async function i(u,f){const{error:h}=await Ie.from("profiles").update({is_approved:f}).eq("id",u);h?t({title:"Error updating educator",description:h.message,type:"error"}):(r(),t({title:f?"Educator Approved":"Educator Restricted",type:"success"}))}N.useEffect(()=>{r()},[]);const o=e.filter(u=>!u.is_approved),l=e.filter(u=>u.is_approved);return O.jsxs("div",{className:"space-y-10",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-100 text-teal-700 
                     rounded-3xl lg:rounded-2xl flex items-center justify-center shadow`,children:""}),O.jsx("h1",{className:"text-xl lg:text-3xl font-bold text-teal-800",children:"Admin Panel"})]}),O.jsxs("section",{"aria-labelledby":"pending-title",className:"space-y-4",children:[O.jsxs("h2",{id:"pending-title",className:`text-xs lg:text-sm uppercase tracking-widest font-bold text-amber-600 
                     flex items-center gap-2`,children:[" Pending Approval (",o.length,")"]}),o.length===0&&O.jsx("p",{className:"text-sm lg:text-base text-gray-500 italic pl-1",children:"No pending educators."}),o.map(u=>O.jsxs("div",{role:"group","aria-label":`Pending educator ${u.email}`,className:`bg-white p-5 rounded-3xl lg:rounded-2xl border border-amber-200 
                       shadow-md space-y-3`,children:[O.jsx("p",{className:"font-semibold text-gray-800 text-sm lg:text-base truncate",children:u.email}),O.jsx(or,{"aria-label":`Approve ${u.email}`,className:`w-full bg-teal-700 hover:bg-teal-800 text-white py-3 lg:py-4 
                         rounded-xl shadow-md text-xs lg:text-sm uppercase font-bold`,onClick:()=>i(u.id,!0),children:"Approve Educator"})]},u.id))]}),O.jsxs("section",{"aria-labelledby":"active-title",className:"space-y-4 pb-24",children:[O.jsxs("h2",{id:"active-title",className:`text-xs lg:text-sm uppercase tracking-widest font-bold text-teal-600 
                     flex items-center gap-2`,children:[" Active Educators (",l.length,")"]}),l.map(u=>O.jsxs("div",{role:"group","aria-label":`Active educator ${u.email}`,className:`bg-white p-5 rounded-3xl lg:rounded-2xl border border-gray-200 
                       shadow-md flex items-center justify-between`,children:[O.jsxs("div",{className:"flex flex-col pr-3 overflow-hidden",children:[O.jsx("p",{className:"font-semibold text-gray-800 text-sm lg:text-base truncate",children:u.email}),O.jsx("p",{className:"text-[10px] lg:text-xs text-teal-700 uppercase font-bold",children:u.role})]}),O.jsx("button",{"aria-label":`Restrict educator ${u.email}`,onClick:()=>i(u.id,!1),className:`
                w-10 h-10 flex items-center justify-center rounded-xl 
                text-red-400 hover:text-red-600 text-lg 
                focus-visible:ring-2 focus-visible:ring-red-500
              `,children:""})]},u.id))]})]})}function i4({navigate:t,isAdmin:e}){const{profile:n}=Rs(),r=[{label:"Feed",path:"/feed",icon:""},{label:"Library",path:"/library",icon:""},{label:"Q&A",path:"/qa",icon:""}];return e&&r.push({label:"Admin",path:"/admin",icon:""}),O.jsxs("nav",{"aria-label":"Sidebar navigation",className:`w-64 bg-white border-r border-gray-200 h-screen p-6 
                 flex flex-col gap-6 shadow-xl`,children:[O.jsxs("div",{className:"flex items-center gap-3",children:[O.jsx("div",{"aria-hidden":"true",className:`w-10 h-10 bg-teal-700 text-white rounded-full 
                     flex items-center justify-center font-bold`,children:n?.email?.charAt(0).toUpperCase()}),O.jsxs("div",{children:[O.jsx("p",{className:"font-bold text-gray-800 text-sm lg:text-base",children:n?.email?.split("@")[0]}),O.jsx("p",{className:"text-xs lg:text-sm text-gray-500 uppercase tracking-wide",children:e?"Admin":"Educator"})]})]}),O.jsx("img",{src:"https://aaiovfryjlcdijdyknik.supabase.co/storage/v1/object/public/branding/projectlogo.png",alt:"Growing Minds logo",className:"w-28 mx-auto mt-4 opacity-95 object-contain"}),O.jsx("ul",{className:"flex flex-col gap-1 mt-6",children:r.map(i=>O.jsx("li",{children:O.jsxs("button",{onClick:()=>t(i.path),"aria-label":i.label,className:`
                flex items-center gap-3 w-full text-left
                p-3 rounded-2xl hover:bg-gray-100 
                focus-visible:ring-2 focus-visible:ring-teal-500 focus-visible:ring-offset-2
                min-h-[44px]
              `,children:[O.jsx("span",{className:"text-lg lg:text-xl",children:i.icon}),O.jsx("span",{className:"font-medium text-sm lg:text-base",children:i.label})]})},i.path))}),O.jsx("div",{className:"mt-auto pt-6 border-t",children:O.jsxs("button",{"aria-label":"Logout",onClick:()=>Ie.auth.signOut(),className:`
            flex items-center gap-3 p-3 rounded-xl text-red-600
            hover:bg-red-100 
            focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2
            min-h-[44px]
          `,children:[O.jsx("span",{className:"text-lg lg:text-xl",children:""}),O.jsx("span",{className:"font-medium text-sm lg:text-base",children:"Logout"})]})})]})}function s4(){const[t,e]=N.useState(window.innerWidth<768);return N.useEffect(()=>{function n(){e(window.innerWidth<768)}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function o4(){const t=Sg(),e=fr(),{profile:n}=Rs(),r=s4(),i=n?.role==="admin",o=[{path:"/feed",label:"Feed",icon:""},{path:"/library",label:"Library",icon:""},{path:"/qa",label:"Q&A",icon:""}];return i&&o.push({path:"/admin",label:"Admin",icon:""}),O.jsxs("div",{className:`w-full min-h-screen bg-gradient-to-b 
                    from-teal-900/20 via-teal-50 to-gray-100 flex`,children:[O.jsx("a",{href:"#main-content",className:`sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 
                   focus:bg-white focus:text-teal-700 focus:p-2 focus:rounded-lg shadow`,children:"Skip to main content"}),!r&&O.jsx(i4,{navigate:t,isAdmin:i}),O.jsxs("div",{className:"flex-1 max-w-3xl mx-auto flex flex-col",children:[O.jsx("header",{className:`bg-gradient-to-br from-teal-800 to-teal-900 text-white p-6 
                     shadow-xl rounded-b-3xl lg:rounded-b-2xl`,children:O.jsxs("div",{className:"flex flex-col items-center gap-2 text-center",children:[O.jsxs("div",{className:"flex justify-between items-center w-full",children:[O.jsx("h1",{className:"text-xl lg:text-2xl font-bold tracking-tight",children:"Growing Minds"}),O.jsx("span",{className:"px-3 py-1 text-xs lg:text-sm bg-white/20 rounded-full uppercase",children:i?"ADMIN":"EDUCATOR"})]}),r&&O.jsx("img",{src:"https://aaiovfryjlcdijdyknik.supabase.co/storage/v1/object/public/branding/projectlogo.png",alt:"Growing Minds logo",className:"w-28 mx-auto mt-4 opacity-95 object-contain"})]})}),O.jsx("main",{id:"main-content",className:`flex-1 overflow-y-auto px-5 py-6 ${r?"mb-28":"lg:py-10"}`,children:O.jsx(PO,{})}),r&&O.jsx("nav",{"aria-label":"Primary navigation",className:`fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-md 
                       px-4 pb-4 z-50`,children:O.jsx("div",{className:`bg-white shadow-xl border border-gray-200 
                            rounded-3xl p-4 flex justify-around`,children:o.map(l=>{const u=e.pathname===l.path;return O.jsxs("button",{onClick:()=>t(l.path),"aria-label":l.label,"aria-current":u?"page":void 0,className:`
                      flex flex-col items-center gap-1 min-h-[44px]
                      transition px-2 py-1
                      ${u?"text-teal-700 scale-110":"text-gray-400"}
                    `,children:[O.jsx("span",{className:"text-xl",children:l.icon}),O.jsx("span",{className:"text-[10px] font-semibold uppercase",children:l.label})]},l.path)})})})]})]})}function a4({children:t}){const{user:e,loading:n}=Rs();return n?O.jsx("div",{className:"text-center p-10",children:"Loading"}):e?t:O.jsx(Pf,{to:"/auth",replace:!0})}function l4({children:t}){const{user:e,loading:n}=Rs();return n?O.jsx("div",{className:"text-center p-10",children:"Loading"}):e?O.jsx(Pf,{to:"/feed",replace:!0}):t}function c4(){const t=fr(),e=t.pathname.toLowerCase();return t.pathname!==e?O.jsx(Pf,{to:e+t.search+t.hash,replace:!0}):null}HA.createRoot(document.getElementById("root")).render(O.jsx(sr.StrictMode,{children:O.jsx(dR,{basename:"/GrowingMinds",children:O.jsx(YN,{children:O.jsxs(eD,{children:[O.jsx(c4,{}),O.jsxs(HO,{children:[O.jsx(Xn,{path:"/auth",element:O.jsx(l4,{children:O.jsx(XN,{})})}),O.jsx(Xn,{path:"/pending",element:O.jsx(ZN,{})}),O.jsxs(Xn,{path:"/",element:O.jsx(a4,{children:O.jsx(o4,{})}),children:[O.jsx(Xn,{index:!0,element:O.jsx(l1,{})}),O.jsx(Xn,{path:"feed",element:O.jsx(l1,{})}),O.jsx(Xn,{path:"library",element:O.jsx(n4,{})}),O.jsx(Xn,{path:"qa",element:O.jsx(e4,{})}),O.jsx(Xn,{path:"admin",element:O.jsx(r4,{})})]}),O.jsx(Xn,{path:"*",element:O.jsx(Pf,{to:"/",replace:!0})})]})]})})})}));
